- en: Chapter 2. The Emergence of Software-defined Networking
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二章 软件定义网络的出现
- en: This chapter will discuss the emergence of open protocols that have helped **Software-defined
    Networking** (**SDN**) solutions. It will focus specifically on the Nuage VSP
    SDN solution, which is an SDN platform from Nokia, formerly known as Alcatel-Lucent,
    which allows users to create a virtual overlay network. We will look at some of
    the scaling benefits and features Nuage VSP provides over and above the out of
    the box experience from AWS and OpenStack. It will articulate why these networking
    solutions have become a necessity for notoriously complex private cloud networks,
    by simplifying networking using software constructs while aiding automation of
    the network by providing a set of programmable APIs and SDKs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将讨论开放协议的出现，这些协议帮助了**软件定义网络**（**SDN**）解决方案。它将重点介绍Nuage VSP SDN解决方案，这是诺基亚（前身为阿尔卡特朗讯）提供的SDN平台，允许用户创建虚拟覆盖网络。我们将了解Nuage
    VSP在扩展性方面相对于AWS和OpenStack的开箱体验所提供的一些优势和特点。它将阐述这些网络解决方案为什么成为著名复杂私有云网络的必需品，通过简化网络结构并通过提供一套可编程API和SDK来帮助网络自动化。
- en: 'This chapter will focus on the following topics in detail:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将详细讨论以下主题：
- en: Why SDN solutions are necessary
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么SDN解决方案是必要的
- en: How the Nuage SDN solution works
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nuage SDN 解决方案的工作原理
- en: The integration of OpenStack with the Nuage VSP Platform
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenStack与Nuage VSP平台的集成
- en: The Nuage VSP Software-defined object model
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nuage VSP 软件定义对象模型
- en: How the Nuage VSP can support Greenfield and Brownfield Projects
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nuage VSP 如何支持 Greenfield 和 Brownfield 项目
- en: The Nuage VSP Multicast Support
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nuage VSP的多播支持
- en: Why SDN solutions are necessary
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么SDN解决方案是必要的
- en: SDN solutions are necessary as they allow businesses to simplify their network
    operations, and it also allows them to automate network functions. It fits well
    with the DevOps initiative and the need to make network operations more agile.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: SDN解决方案是必要的，因为它们使企业能够简化网络操作，同时还可以实现网络功能的自动化。它与DevOps倡议和使网络操作更灵活的需求非常契合。
- en: A byproduct of SDN is that it allows network functions to become as accurate
    and repeatable as creating a new virtual machine on a hypervisor.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: SDN的副产品是，它使得网络功能变得像在虚拟机监控器上创建新虚拟机一样精确且可重复。
- en: SDN solutions from vendors are made up of a centralized controller that is implemented
    to become the nerve center of the network. SDN controllers rely heavily on **Open
    vSwitch database** (**OVSDB**), which is a programmable, open standard schema
    which utilizes the OpenFlow protocol, which integrates directly with switches
    to route packets in the network as well as applying ACL policies to particular
    virtual machines, physical servers, or containers.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 来自供应商的SDN解决方案由一个集中式控制器组成，该控制器被实现为网络的神经中枢。SDN控制器在很大程度上依赖于**Open vSwitch数据库**（**OVSDB**），这是一种可编程的开放标准模式，利用OpenFlow协议，直接与交换机集成，用于路由网络中的数据包，并将ACL策略应用于特定的虚拟机、物理服务器或容器。
- en: 'As long as a switch can talk OVSDB and OpenFlow, then it can integrate with
    common SDN controllers. There are now a wide variety of SDN controllers currently
    on the market:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 只要交换机能够支持OVSDB和OpenFlow，就可以与常见的SDN控制器集成。目前市场上有各种各样的SDN控制器：
- en: CISCO ACI
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CISCO ACI
- en: '[http://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/index.html](http://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/index.html)'
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[http://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/index.html](http://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/index.html)'
- en: Nokia Nuage VSP
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 诺基亚 Nuage VSP
- en: '[http://www.nuagenetworks.net/products/virtualized-services-platform/](http://www.nuagenetworks.net/products/virtualized-services-platform/)'
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[http://www.nuagenetworks.net/products/virtualized-services-platform/](http://www.nuagenetworks.net/products/virtualized-services-platform/)'
- en: Juniper Contrail
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Juniper Contrail
- en: '[http://www.juniper.net/uk/en/products-services/sdn/contrail/](http://www.juniper.net/uk/en/products-services/sdn/contrail/)'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[http://www.juniper.net/uk/en/products-services/sdn/contrail/](http://www.juniper.net/uk/en/products-services/sdn/contrail/)'
- en: VMWare NSX
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMWare NSX
- en: '[http://www.vmware.com/products/nsx.html](http://www.vmware.com/products/nsx.html)'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[http://www.vmware.com/products/nsx.html](http://www.vmware.com/products/nsx.html)'
- en: Open Daylight
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Open Daylight
- en: '[https://www.opendaylight.org/](https://www.opendaylight.org/)'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://www.opendaylight.org/](https://www.opendaylight.org/)'
- en: MidoNet Midokura
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MidoNet Midokura
- en: '[http://www.midokura.com/midonet/](http://www.midokura.com/midonet/)'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[http://www.midokura.com/midonet/](http://www.midokura.com/midonet/)'
- en: 'SDN controllers do the following for enterprises:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: SDN控制器为企业做以下事情：
- en: Provide an easy-to-use solution for network functions, with the SDN controllers
    abstracting the network functions from hardware devices and instead expose GUIs
    and API endpoints that can be programmatically altered to control network operations.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为网络功能提供一个易于使用的解决方案，SDN 控制器将网络功能从硬件设备中抽象出来，而是暴露图形用户界面（GUI）和 API 端点，可以通过编程方式进行修改以控制网络操作。
- en: SDN controllers lend themselves to DevOps models such as self-service network
    operations for developers, which allow Continuous Delivery of network functions
    and increased collaboration between teams.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SDN 控制器适用于 DevOps 模型，例如为开发人员提供自服务的网络操作，允许持续交付网络功能并增加团队间的协作。
- en: Provide increased visibility of network configuration as it is described in
    easy-to-understand software constructs.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供更高的网络配置可见性，并通过易于理解的软件构造进行描述。
- en: Provide better integration with infrastructure through the use of open networking
    standards, so this gives companies choice over which switch vendors they integrate.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用开放的网络标准提供更好的基础设施集成，这使得公司在选择集成的交换机厂商时有了更多选择。
- en: Allow the same set of policies in a private datacenter to be applied across
    private and public clouds. This makes the aim of distributing different workloads
    into different cloud providers a reality and makes security governance of hybrid
    clouds much easier for security teams.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在私有数据中心应用相同的策略，并跨私有和公有云进行应用。这使得将不同工作负载分配到不同云服务提供商的目标成为现实，并使得混合云的安全治理对于安全团队来说更加容易。
- en: The emergence of AWS undoubtedly influenced network vendors to adapt their solutions
    to be less hardware centric and focus more on a software approach to networking,
    which, in turn, has simplified network operations and made networking easier to
    scale.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: AWS 的出现无疑影响了网络厂商，使他们的解决方案更加注重软件方法，而非硬件，这反过来简化了网络操作，并使网络更容易扩展。
- en: Vendors have now adopted and implemented open protocols to allow centralized
    management of network functions and allowed network operators to manage the whole
    network using an SDN controller.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 厂商现在已采用并实现开放协议，以允许集中管理网络功能，并使网络运营商能够使用 SDN 控制器管理整个网络。
- en: Software-defined networking is being used by businesses to maximize the performance
    of their network and create repeatable workflows for network operations in the
    same way hypervisor virtualization helped infrastructure teams automate server
    provisioning and management.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 企业正在使用软件定义网络（SDN）来最大化其网络性能，并创建可重复的网络操作工作流，就像虚拟化技术帮助基础设施团队自动化服务器配置和管理一样。
- en: However, based on my personal experience, software-defined networking in the
    private cloud is being used to run OpenStack at massive scale. The continued uptake
    on OpenStack projects by many major companies, such as Walmart, Ebay, PayPal,
    Go Daddy, and my company Paddy Power Betfair, means that companies are turning
    to SDN solutions to allow them to meet necessary scaling targets and simplifying
    network operations.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，根据我的个人经验，私有云中的软件定义网络被用于大规模运行 OpenStack。许多大型公司（如 Walmart、Ebay、PayPal、Go Daddy
    以及我的公司 Paddy Power Betfair）不断采用 OpenStack 项目，这意味着公司正在转向 SDN 解决方案，以便达到必要的扩展目标并简化网络操作。
- en: How the Nuage SDN solution works
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nuage SDN 解决方案如何工作
- en: One of the market-leading SDN solutions is the Nuage SDN (VSP) platform, which
    is Nokia's SDN solution (formerly Alcatel Lucent), so we will explore how this
    market-leading SDN solution works.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 市场领先的 SDN 解决方案之一是 Nuage SDN（VSP）平台，它是诺基亚的 SDN 解决方案（前身为阿尔卡特朗讯），因此我们将探索这种市场领先的
    SDN 解决方案是如何工作的。
- en: The Nuage VSP platform comprises three main components—the VSD, VSC, and VRS.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP 平台包含三个主要组件——VSD、VSC 和 VRS。
- en: '**Virtualized Service Directory** (**VSD**): This is the policy engine for
    the overall platform, and it provides a graphical user interface and exposes a
    restful API for network engineers to use and interact with network functions.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟化服务目录**（**VSD**）：这是整个平台的策略引擎，提供图形用户界面，并暴露一个 restful API 供网络工程师使用和与网络功能进行交互。'
- en: '**Virtualized Service Controller** (**VSC**): This is the SDN controller for
    Nuage, and it uses OpenFlow and OVSDB management protocol to distribute switching
    and routing information to hypervisors, bare metal servers, or containers.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟化服务控制器**（**VSC**）：这是 Nuage 的 SDN 控制器，使用 OpenFlow 和 OVSDB 管理协议将交换和路由信息分发给虚拟机监控器、裸金属服务器或容器。'
- en: '**Virtual Routing and Switching** (**VRS**): This is Nuage''s customized version
    of Open vSwitch, which is installed on compute nodes (hypervisors).![How the Nuage
    SDN solution works](img/B05559_02_01.jpg)'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟路由与交换**（**VRS**）：这是 Nuage 定制版本的 Open vSwitch，安装在计算节点（虚拟化主机）上。![Nuage SDN
    解决方案的工作原理](img/B05559_02_01.jpg)'
- en: The Nuage VSP can integrate with OpenStack, CloudStack, and VMWare private cloud
    platforms or public cloud solutions such as AWS. Nuage creates an overlay network
    that has the ability to secure virtual machines, bare metal servers, and containers
    in an isolated tenant network, so it is highly flexible depending on what kind
    of workload needs to be deployed.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP 可以与 OpenStack、CloudStack 和 VMWare 私有云平台或公共云解决方案（如 AWS）集成。Nuage 创建了一个覆盖网络，能够在隔离的租户网络中保护虚拟机、裸金属服务器和容器，因此根据需要部署的工作负载类型，具有高度的灵活性。
- en: Virtual machines, of course, are deployed as a virtual abstraction on top of
    physical hypervisors, where containers can run on top of virtual machines or physical
    servers. Containers are used to isolate particular processes or resources using
    Linux namespaces and control groups, which divide resources at operating system
    level, so the networking requirements for virtual machines and containers are
    very different. Containers are used because they are portable and can run on either
    virtual machines or bare metal (physical) servers. Another advantage is they are
    encapsulated by the Linux operating system and multiple containers can run on
    a virtual machine or physical server.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机当然是在物理虚拟化主机上作为虚拟抽象进行部署的，容器可以在虚拟机或物理服务器上运行。容器用于通过 Linux 命名空间和控制组隔离特定的进程或资源，这些命名空间和控制组在操作系统级别划分资源，因此虚拟机和容器的网络要求非常不同。容器因其可移植性而被使用，可以在虚拟机或裸金属（物理）服务器上运行。另一个优点是它们被
    Linux 操作系统封装，多个容器可以在虚拟机或物理服务器上运行。
- en: Nuage also supports multicast between tenant networks by routing multicast traffic
    via hypervisors on the underlay network via hypervisors or physical machines and
    flooding it to specific virtual or physical machines within a tenant network,
    which has been somewhat of an issue with cloud solutions, but Nuage has a solution
    to that particular problem.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage 还支持通过虚拟化主机或物理机在基础网络中路由多播流量，并将其泛洪到租户网络中的特定虚拟或物理机器，从而实现租户网络之间的多播。这在云解决方案中一直是一个问题，但
    Nuage 提供了针对这一问题的解决方案。
- en: The Nuage VSPs SDN Controller (VSC) integrates with switches using OVSDB via
    hardware VTEPs exposed by switches at the access or leaf layer of the network.
    VSCs are deployed redundantly and communicate with each other with **Multipath
    Border Gate Protocol** (**MP-BGP**) and program VXLAN encapsulation to the switches
    as they are hardware VTEP aware.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP 的 SDN 控制器（VSC）通过硬件 VTEP（由交换机在网络的接入或叶层暴露）与交换机通过 OVSDB 集成。VSC 被冗余部署，并通过**多路径边界网关协议**（**MP-BGP**）与彼此通信，并将
    VXLAN 封装程序编程到交换机上，因为它们是硬件 VTEP 识别的。
- en: The VSD component is set up in an active cluster containing three VSD servers,
    which are load balanced using a viable load balancer solution. The load balancer
    provides a **Virtual IP** (**VIP**), which load balances three VSDs servers in
    round-robin mode.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: VSD 组件在一个包含三台 VSD 服务器的活动集群中设置，这些服务器通过可行的负载均衡器解决方案进行负载均衡。负载均衡器提供一个**虚拟 IP**（**VIP**），通过轮询模式对三台
    VSD 服务器进行负载均衡。
- en: The VSDs VIP exposes the graphical user interface for the Nuage VSP platform
    and API entry point to programmatically control the overlay network using REST
    calls. Any operation carried out on the Nuage VSD GUI initiates a REST API call
    to the VSD, so both the GUI and the REST API are carrying out identical programmatic
    calls and all operations are exposed via the REST API.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: VSD 的 VIP 提供 Nuage VSP 平台的图形用户界面，并作为 API 入口点，允许通过 REST 调用程序化控制覆盖网络。对 Nuage VSD
    GUI 执行的任何操作都会触发一个 REST API 调用到 VSD，因此 GUI 和 REST API 执行的是相同的程序化调用，所有操作都通过 REST
    API 公开。
- en: The Nuage VSD governs layer 2 and 3 domains, zones, subnets, and ACL policies.
    The VSD communicates policy information to the VSC using **Extensible Messaging
    and Presence Protocol** (**XMPP**), and the VSC uses OpenFlow to push down flow
    information to a customized version of Open vSwitch (VRS) on the compute hosts
    (hypervisor) to create firewall policy for applications.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSD 管理第二层和第三层的域、区域、子网和 ACL 策略。VSD 使用**可扩展消息和存在协议**（**XMPP**）将策略信息传递给 VSC，VSC
    使用 OpenFlow 将流信息推送到计算主机（虚拟化主机）上的定制版 Open vSwitch（VRS），以为应用程序创建防火墙策略。
- en: The Nuage VSP allows bare metal servers to be connected to overlay networks
    too by pushing down OpenFlow Data to the **Virtualized Services Gateway** (**VSG**)
    and leaking routing information into the overlay network.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP还允许裸金属服务器通过将OpenFlow数据推送到**虚拟化服务网关**（**VSG**）并将路由信息泄漏到覆盖网络中，连接到覆盖网络。
- en: 'An overview of the VSP platform protocol integration can be found in the following
    figure:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表概述了VSP平台协议集成：
- en: '![How the Nuage SDN solution works](img/B05559_02_02.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage SDN解决方案的工作原理](img/B05559_02_02.jpg)'
- en: Integrating OpenStack with the Nuage VSP platform
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将OpenStack与Nuage VSP平台集成
- en: Private data center networks can be very complex, so using vanilla OpenStack
    neutron to meet all use cases may not provide all the features that are required.
    It is important to note that the features in neutron are maturing very quickly
    with every new OpenStack release, so neutron is likely as feature rich as dedicated
    SDN controllers in the future.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 私有数据中心网络可能非常复杂，因此使用标准的OpenStack Neutron来满足所有用例可能无法提供所需的所有功能。需要注意的是，Neutron中的功能随着每个新的OpenStack版本的发布而快速成熟，因此未来Neutron可能会与专用的SDN控制器一样功能丰富。
- en: Neutron lends itself to integration with SDN controllers by providing a REST
    API extension, so SDN controllers can easily be used to extend the base networking
    functions provided by neutron if required to provide a very rich set of networking
    features.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: Neutron通过提供REST API扩展，便于与SDN控制器集成，因此如果需要提供非常丰富的网络功能，SDN控制器可以轻松地用来扩展Neutron提供的基础网络功能。
- en: The use of SDN solutions have helped OpenStack to scale massively, as it moves
    the networking aspect of OpenStack away from the centralized layer 3 agent and
    instead requests are moved to the dedicated SDN controllers with distributed firewalling.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: SDN解决方案的使用帮助OpenStack实现了大规模扩展，因为它将OpenStack的网络方面从集中式的L3代理移开，转而将请求发送到专用的SDN控制器，并实现分布式防火墙功能。
- en: This means that one OpenStack cloud can potentially scale the amount of compute
    instances that are supported horizontally, without having to worry about bottlenecks
    or scaling issues associated with the current neutron network architecture.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着一个OpenStack云可能会横向扩展支持的计算实例数量，而无需担心与当前Neutron网络架构相关的瓶颈或扩展问题。
- en: OpenStack is one of the most popular private cloud solutions, and the Nuage
    VSP platform integrates with OpenStack using the Nuage plug-in. The Nuage plugin
    is installed on each of the **Highly Available** (**HA**) OpenStack controllers.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: OpenStack是最受欢迎的私有云解决方案之一，Nuage VSP平台通过Nuage插件与OpenStack集成。Nuage插件安装在每个**高可用**（**HA**）OpenStack控制器上。
- en: 'The Neutron ML2 and L3 agents are both switched off on the controllers in favor
    of the Nuage plugin. The following image shows the architecture for OpenStack
    neutrons SDN controller framework with SDN controllers communicating with OpenStack
    neutron via REST API calls:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在控制器上，Neutron ML2和L3代理都被关闭，取而代之的是Nuage插件。下图展示了OpenStack Neutron的SDN控制器框架架构，其中SDN控制器通过REST
    API调用与OpenStack Neutron进行通信：
- en: '![Integrating OpenStack with the Nuage VSP platform](img/B05559_02_03.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![将OpenStack与Nuage VSP平台集成](img/B05559_02_03.jpg)'
- en: The VSD, which is the Nuage policy engine, integrates with OpenStack by setting
    up a net partition that can be used to map one Nuage VSP to an OpenStack cloud
    and communicates with neutron using REST API calls.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: VSD，作为Nuage策略引擎，通过设置网络分区与OpenStack集成，网络分区可用于将一个Nuage VSP映射到OpenStack云，并通过REST
    API调用与Neutron进行通信。
- en: Multiple instances of OpenStack can be mapped to a single Nuage VSP via the
    use of net partitions. Net partitions are a way of telling the Nuage VSP platform,
    which OpenStack instance to map its subnets to and wait for VPort commands to
    be issued, which signify that the OpenStack nova compute service, has provisioned
    a virtual machine instance that needs to be governed by Nuage ACL policies.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用网络分区，多个OpenStack实例可以映射到单一的Nuage VSP。网络分区是一种方式，用来告诉Nuage VSP平台将哪个OpenStack实例映射到其子网，并等待发出VPort命令，这些命令表示OpenStack
    nova计算服务已经配置了需要由Nuage ACL策略管理的虚拟机实例。
- en: When Nuage VSP is integrated with OpenStack, OpenStack vendor installers need
    to either support Nuage natively or the installer will need to be customized slightly
    to install the Nuage plugin on OpenStack controllers. The Nuage version of OpenvSwitch
    (VRS) also needs to be installed on each compute node (hypervisor) that is deployed
    within an OpenStack cloud.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 当 Nuage VSP 与 OpenStack 集成时，OpenStack 厂商安装程序需要原生支持 Nuage，或者安装程序需要稍作定制，以便在 OpenStack
    控制器上安装 Nuage 插件。每个部署在 OpenStack 云中的计算节点（虚拟化主机）上也需要安装 Nuage 版本的 OpenvSwitch（VRS）。
- en: 'The Nuage plugin integrates with the OpenStack Controllers and KVM compute
    using the following workflow:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage 插件通过以下工作流程与 OpenStack 控制器和 KVM 计算进行集成：
- en: '![Integrating OpenStack with the Nuage VSP platform](img/B05559_02_04.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![将 OpenStack 与 Nuage VSP 平台集成](img/B05559_02_04.jpg)'
- en: When a neutron command is issued to OpenStack, the Nuage plugin uses **REST
    API** calls to communicate with the **Nuage** **VSD** to say that a new network
    has been created or a new VPort on that network has been created, this is possible
    due to neutrons SDN controller pluggable **REST API** architecture.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 当发出一个 neutron 命令到 OpenStack 时，Nuage 插件使用 **REST API** 调用与 **Nuage** **VSD**
    通信，告知已创建新的网络或在该网络上创建了新的 VPort，这得益于 neutron 的 SDN 控制器可插拔 **REST API** 架构。
- en: The **Nuage** **VSD** policy engine then communicates with the **VSC** to push
    flow data using XMPP. The **VSC** (SDN Controller) then administers flow data
    (OpenFlow) to the **Nuage VRS** (Open vSwitch), and the **Nuage VRS** secures
    OpenStack virtual machines or physical servers with the predefined firewall policies.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '**Nuage** **VSD** 策略引擎然后与 **VSC** 通信，通过 XMPP 推送流数据。**VSC**（SDN 控制器）随后将流数据（OpenFlow）管理到
    **Nuage VRS**（Open vSwitch），并且 **Nuage VRS** 使用预定义的防火墙策略保护 OpenStack 虚拟机或物理服务器。'
- en: Firewall policies can either be OpenStack Security Groups or Nuage ACL rules
    depending if OpenStack managed mode or Nuage VSD managed mode are selected.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 防火墙策略可以是 OpenStack 安全组或 Nuage ACL 规则，具体取决于选择了 OpenStack 管理模式还是 Nuage VSD 管理模式。
- en: Nuage or OpenStack managed networks
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Nuage 或 OpenStack 管理的网络
- en: 'The Nuage OpenStack plugin can be used in two modes of operation to manage
    networks that are provisioned in OpenStack:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage OpenStack 插件可以在两种操作模式下使用，以管理在 OpenStack 中配置的网络：
- en: Nuage VSD-managed mode
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nuage VSD 管理模式
- en: OpenStack-managed mode
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenStack 管理模式
- en: Nuage VSD-managed mode allows Nuage to become the master of network provisioning;
    this allows Nuage VSP platform to provide a rich feature set to manage networks
    within an OpenStack environment. Network functions are provisioned directly via
    the VSD using the Nuage REST API by the GUI or direct API calls and mapped one-to-one
    with OpenStack subnets.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSD 管理模式允许 Nuage 成为网络配置的主控；这使得 Nuage VSP 平台可以提供丰富的功能集来管理 OpenStack 环境中的网络。网络功能通过
    VSD 直接配置，使用 Nuage REST API 通过 GUI 或直接 API 调用进行，并与 OpenStack 子网一对一映射。
- en: The alternative mode of operation is the OpenStack-managed mode, which requires
    no direct provisioning on VSD. All commands are issued via neutron; however, functionality
    is limited to the commands that OpenStack neutron supports.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种操作模式是 OpenStack 管理模式，该模式不需要在 VSD 上进行直接配置。所有命令通过 neutron 发出；但是，功能仅限于 OpenStack
    neutron 支持的命令。
- en: All networks that are created in Nuage are replicated in OpenStack in a one-to-one
    mapping with the Nuage VSD being the master in VSD-managed mode, whereas OpenStack
    neutron is the master of configuration in OpenStack-managed mode.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 所有在 Nuage 中创建的网络都在 OpenStack 中以一对一的映射方式复制，其中 Nuage VSD 在 VSD 管理模式下作为主控，而 OpenStack
    neutron 在 OpenStack 管理模式下作为配置主控。
- en: In OpenStack-managed mode, all ACL rules are governed by OpenStack Security
    Groups, whereas in VSD-managed mode, ACL rules are held instead of the Nuage VSD
    with security groups disabled.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在 OpenStack 管理模式下，所有的 ACL 规则由 OpenStack 安全组控制，而在 VSD 管理模式下，ACL 规则由 Nuage VSD
    控制，并且安全组被禁用。
- en: Nuage integrates with OpenStack by setting up a net partition. Using net partitions,
    one Nuage VSP Platform can be mapped to multiple instances of OpenStack. Net partitions
    are a way of mapping an OpenStack cloud to a Nuage organization entity.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage 通过设置网络分区与 OpenStack 集成。通过网络分区，单个 Nuage VSP 平台可以映射到多个 OpenStack 实例。网络分区是将
    OpenStack 云映射到 Nuage 组织实体的方式。
- en: 'Using the Nuage VSP platform with an organization named `Company`, whenever
    a subnet is created under the organization, it is subsequently assigned a unique
    `nuage_subnet_uuid` on creation. In order to map the organization and Nuage subnet
    to OpenStack neutron, the following command is issued:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nuage VSP平台并命名组织为`Company`时，每当在组织下创建一个子网时，它会在创建时被分配一个唯一的`nuage_subnet_uuid`。为了将组织和Nuage子网映射到OpenStack
    Neutron，发出以下命令：
- en: '[PRE0]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Once a net partition has been established by the Nuage VSP Platform and OpenStack,
    the firewall policies are secured at the compute host (hypervisor) using the Nuage
    VRS. The following workflow is triggered when a new instance is created on a Nuage-managed
    subnet:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦通过Nuage VSP平台和OpenStack建立了网络分区，防火墙策略会通过Nuage VRS在计算主机（虚拟化服务器）上得到保障。当在Nuage管理的子网中创建新实例时，会触发以下工作流：
- en: '![Nuage or OpenStack managed networks](img/B05559_02_05.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '[Nuage或OpenStack管理的网络](img/B05559_02_05.jpg)'
- en: An instance is added to an OpenStack network and subnet owned by the Nuage VSP
    Platform.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个实例被添加到一个由Nuage VSP平台拥有的OpenStack网络和子网中。
- en: A placeholder VPort is created (VM id, MAC) on **VSD** by the **Nuage Plugin**,
    within the requested layer 3 domain.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个占位符VPort（虚拟机ID，MAC地址）由**Nuage插件**在请求的第三层域内创建于**VSD**上。
- en: Nova service creates the **VM** on the **Hypervisor**. This is detected by **VRS**
    (VM id, MAC).
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Nova服务在**Hypervisor**上创建**虚拟机**。这被**VRS**（虚拟机ID，MAC地址）检测到。
- en: The **VRS** queries **VSC**, the **VSC** then queries the **VSD** in order to
    retrieve the associated networking information from the placeholder VPort.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**VRS**查询**VSC**，然后**VSC**查询**VSD**以从占位符VPort中检索相关的网络信息。'
- en: The **VSD** matches the VM id, MAC against the VPort it created and associates
    **VM** with the correct network services.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**VSD**根据虚拟机ID、MAC地址与其创建的VPort进行匹配，并将**虚拟机**与正确的网络服务关联。'
- en: The policy is downloaded from the **VSD** through the **VSC** to the **VRS**
    using OpenFlow, and the required flows are dynamically created.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 策略通过**VSD**通过**VSC**下载到**VRS**，使用OpenFlow，所需的流将动态创建。
- en: The Nuage VSP software-defined object model
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Nuage VSP软件定义对象模型
- en: As Nuage creates the overlay network in software, it needs to have a simple
    object model to allow network operators to manage it. The Nuage VSP software-defined
    object model provides a graphical hierarchy of the network meaning that the structure
    of the overlay can be easily viewed and audited.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Nuage在软件中创建了覆盖网络，它需要一个简单的对象模型来让网络管理员进行管理。Nuage VSP软件定义对象模型提供了一个网络的图形化层级结构，使得覆盖结构能够被轻松查看和审计。
- en: Object model overview
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 对象模型概览
- en: '**Organization**: This governs all Layer 3 domains.![Object model overview](img/B05559_02_06.jpg)'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组织**：它管理所有的第三层域。[对象模型概览](img/B05559_02_06.jpg)'
- en: '**Layer 3 domain Template**: A layer 3 domain template is required before child
    layer 3 domains are created. The layer 3 domain template is used to govern overarching
    default policies that will be propagated to all child layer 3 domains. If a layer
    3 domain template is updated at template level, then the update will be implemented
    on all layer 3 domains that have been created underneath it immediately.![Object
    model overview](img/B05559_02_07.jpg)'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第三层域模板**：在创建子第三层域之前，需要一个第三层域模板。第三层域模板用于管理所有子第三层域将传播的整体默认策略。如果在模板级别更新了第三层域模板，那么该更新会立即在其下已创建的所有第三层域上实施。[对象模型概览](img/B05559_02_07.jpg)'
- en: '**Layer 3 domain**: This can be used to segment different environments, so
    users cannot hop from subnets deployed under a layer 3 Test domain to an adjacent
    layer 3 Production domain.![Object model overview](img/B05559_02_08.jpg)'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第三层域**：这可以用来划分不同的环境，以便用户无法从第三层测试域下部署的子网跳跃到相邻的第三层生产域。[对象模型概览](img/B05559_02_08.jpg)'
- en: '**Zones**: A zone segments firewall policies at application level, so each
    microservice application can have its own zone and associated Ingress and Egress
    policy per layer 3 domain.![Object model overview](img/B05559_02_09.jpg)'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**区域**：一个区域在应用层面上划分防火墙策略，因此每个微服务应用可以有自己的区域，并且每个第三层域可以有各自的Ingress和Egress策略。[对象模型概览](img/B05559_02_09.jpg)'
- en: 'Layer 3 Subnet: This is where VMs or bare metal servers that are deployed to.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三层子网：这是虚拟机或裸金属服务器被部署的地方。
- en: 'In this example, we see **Subnet Application1** and **Subnet Application2,**
    as follows:'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此示例中，我们看到**子网应用1**和**子网应用2**，如下所示：
- en: '![Object model overview](img/B05559_02_10.jpg)'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '[对象模型概览](img/B05559_02_10.jpg)'
- en: 'The hierarchy in Nuage VSD is shown below:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSD中的层级结构如下所示：
- en: One organization has been created named **Company**.
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建了名为 **Company** 的一个组织。
- en: Two layer 3 domains named **Test** and **Production** have been created underneath
    the Company.
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建了名为 **Test** 和 **Production** 的两个层 3 域在公司之下。
- en: The **Test** layer 3 domain has a zone for **Application1** and **Application2**
    with 1 child subnet underneath the **Application1** and **Application2** zones.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Test** 层 3 区域具有 **Application1** 和 **Application2** 的区域，**Application1**
    和 **Application2** 区域下各有 1 个子网。'
- en: The **Production** layer 3 domain has a zone for **Application1** and **Application2**
    with 1 child subnet underneath the **Application1** only. **Application2** zone
    does not have a child subnet yet.![Object model overview](img/B05559_02_11.jpg)
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Production** 层 3 区域具有 **Application1** 和 **Application2** 的区域，**Application1**
    下只有 1 个子网。**Application2** 区域目前没有子网。![对象模型概述](img/B05559_02_11.jpg)'
- en: For security and compliance purposes, demonstrating to security auditors segmentation
    between **Development** and **Production** environments is very important. Frequently,
    **Development** environments do not have the same stringent production controls
    applied to them. Production applications can be secured using the convention of
    least privilege possible, to minimize access and reduce the probability of a security
    breach.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 出于安全和合规目的，向安全审计人员展示 **开发** 和 **生产** 环境之间的分隔非常重要。通常情况下，**开发** 环境不会应用与生产环境一样严格的控制。生产应用可以使用最小权限的约定进行安全保护，以最大程度地减少访问并降低安全漏洞的可能性。
- en: The Nuage VSP Platform can set up segregation between environments using its
    layer 3 domain template construct. A domain template can be set up with a default
    **Deny All** policy at Ingress and Egress level. This is given the highest priority
    of all the policies and will explicitly drop all packets no matter the protocol
    for inbound and outbound connections, unless explicitly allowed by the policy
    for that specific application. The default **Deny All** is the bottom policy on
    the list of ACL rules applied to an application.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP 平台可以使用其层 3 域模板结构设置环境之间的分隔。域模板可以设置默认的 **拒绝所有** 策略在入口和出口级别。这是所有策略中优先级最高的策略，将明确拒绝所有数据包无论协议是入站还是出站连接，除非对该特定应用程序的策略明确允许。默认的
    **拒绝所有** 是应用于应用程序的 ACL 规则列表中的底部策略。
- en: 'The explicit drop on **Egress Security Policy** domain template is shown as
    the **Bottom policy** as follows:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 域模板上的 **出口安全策略** 显示为以下的 **底部策略**：
- en: '![Object model overview](img/B05559_02_12.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_12.jpg)'
- en: 'The contents of the **Egress Security Policy** are shown with the highest possible
    priority as follows:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**出口安全策略** 的内容显示为具有最高可能优先级，如下所示：'
- en: '![Object model overview](img/B05559_02_13.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_13.jpg)'
- en: 'Likewise, the explicit drop on Ingress is applied to the domain template as
    the **Bottom policy**:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，入口的明确禁用被应用到域模板作为 **底部策略**：
- en: '![Object model overview](img/B05559_02_14.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_14.jpg)'
- en: 'While the explicit drop on the **Ingress Security Policy** on the domain template
    is shown as follows:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然域模板上的 **入口安全策略** 明确禁用如下所示：
- en: '![Object model overview](img/B05559_02_15.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_15.jpg)'
- en: The default Ingress and Egress policies applied to the domain template **Company
    L3 Domain Template** are illustrated below, which shows the policy applied to
    all the child layer 3 domains, in this instance, **Production** and **Test**.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 应用于域模板 **Company L3 Domain Template** 的默认入口和出口策略如下图所示，显示应用于所有子层 3 域，例如 **Production**
    和 **Test**。
- en: 'The domain template **Company L3 Domain Template** is shown to be linked to
    the child layer 3 domains **Production** and **Test** showing the inherited Egress
    policy from the domain template:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 域模板 **Company L3 Domain Template** 被显示链接到子层 3 域 **Production** 和 **Test**，显示从域模板继承的出口策略：
- en: '![Object model overview](img/B05559_02_16.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_16.jpg)'
- en: 'Likewise, the domain template **Company L3 Domain Template** is linked to the
    child layer 3 domains **Production** and **Test** showing the inherited Ingress
    policy from the domain template:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，域模板 **Company L3 Domain Template** 被链接到子层 3 域 **Production** 和 **Test**，显示从域模板继承的入口策略：
- en: '![Object model overview](img/B05559_02_17.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_17.jpg)'
- en: 'It is important to note that, as policies are pushed down to VRS using OpenFlow
    that ACL rules for Ingress and Egress in Nuage work on the principles:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，由于使用 OpenFlow 将策略推送到 VRS，Nuage 中的入口和出口的 ACL 规则遵循以下原则：
- en: '**Egress**: This is a packet flowing from VRS to the subnet or zone'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**出口**：这是一个数据包从 VRS 流向子网或区域。'
- en: '**Ingress**: This is a packet flowing from the subnet or zone to the VRS'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**入口**：这是一个数据包从子网或区域流向 VRS。'
- en: 'As an example, an Egress ACL rule will specify that any Egress traffic coming
    from VRS from port `80` will be forwarded to **Subnet Application1**:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 举个例子，一个出口 ACL 规则将指定来自 VRS 的任何出口流量从端口 `80` 将被转发到 **子网 Application1**：
- en: '![Object model overview](img/B05559_02_18.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![Object model overview](img/B05559_02_18.jpg)'
- en: 'In this example, an Ingress ACL rule will specify that any Ingress traffic
    can leave **Subnet Application1** on port `80` and will be forwarded to VRS:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，一个入口 ACL 规则将指定任何入口流量可以从端口 `80` 离开 **子网 Application1** 并转发到 VRS：
- en: '![Object model overview](img/B05559_02_19.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![Object model overview](img/B05559_02_19.jpg)'
- en: If application owners work on the principle that their layer 3 subnet, where
    their application is deployed on, is always specified in an ACL rule as either
    the source or destination in their individual application policy, then ACL rules
    for an application will only exist in that self-contained policy. If this concept
    is adhered to, it allows ACL rules for each application to be encapsulated in
    separate policies, within a layer 3 domain, which, in turn, means that auditing
    them is much simpler for security teams. It also means that applications support
    least privilege, meaning only necessary ports are opened so applications can communicate,
    with an explicit drop applied to anything outside those rules.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 如果应用程序所有者遵循这样的原则：他们的应用程序部署所在的第 3 层子网，总是作为源或目的出现在各自应用程序策略的 ACL 规则中，那么一个应用程序的
    ACL 规则将只存在于该自包含的策略中。如果遵循这一概念，它使得每个应用程序的 ACL 规则能够封装在独立的策略中，在第 3 层域内，这反过来意味着，安全团队审计这些规则将变得更加简便。这也意味着应用程序遵循最小权限原则，仅开放必要的端口以便应用程序之间通信，并且对那些不符合规则的流量施加显式丢弃。
- en: Two policies are shown for two applications, **Application1** and **Application2**,
    which have separate policies for Ingress and Egress, with the **Default Ingress
    Policy** specifying the explicit drop all for any flows not explicitly allowed.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 显示了两项策略，分别适用于两个应用程序，**Application1** 和 **Application2**，它们分别有入口和出口的独立策略，**默认入口策略**指定对任何未显式允许的流量进行显式丢弃。
- en: 'The **Ingress Security Policies** are shown here:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '**入口安全策略**如下所示：'
- en: '![Object model overview](img/B05559_02_20.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![Object model overview](img/B05559_02_20.jpg)'
- en: 'The **Egress Security Policies** are shown here:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '**出口安全策略**如下所示：'
- en: '![Object model overview](img/B05559_02_21.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![Object model overview](img/B05559_02_21.jpg)'
- en: 'Nuage VSP Platform layer 3 domain templates allow a second level of segmentation
    using zones, so traditionally networks were split into three zones, where applications
    would be deployed in the following tiers:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP 平台的第 3 层域模板允许使用区域进行第二级分段，因此传统的网络被划分为三个区域，其中应用程序将部署在以下层级：
- en: Frontend
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 前端
- en: Business Logic
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 业务逻辑
- en: Backend
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 后台
- en: As microservice architectures have grown to prominence, each applications profile
    doesn't always fit into these three broad profiles. Sometimes, applications can
    be both a Frontend application and Business Logic too, so where would the microservice
    application be placed in the traditional three-tiered structure?
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 随着微服务架构的崛起，每个应用程序的配置文件并不总是适应这三种广泛的配置文件。有时，应用程序既可以是前端应用程序，也可以是业务逻辑应用程序，那么这种微服务应用程序应该如何放置在传统的三层架构中呢？
- en: Instead of the Frontend, Business Logic and Backend segregation policies that
    can be applied at zone level, meaningful microsegmentation of applications is
    possible between each subnet. So how does this translate to Nuage?
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 与可以在区域级别应用的前端、业务逻辑和后台分隔策略不同，应用程序之间在每个子网间的有意义微分段成为可能。那么，这如何在 Nuage 中实现呢？
- en: If an application wishes to talk to another application it will have an ACL
    rule that specifies Subnet to Zone communication for east to west communication
    between applications sitting on adjacent subnets in a layer 3 domain. Nuage allows
    this by allowing applications to talk Subnet to Zone.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个应用程序希望与另一个应用程序进行通信，它将拥有一个 ACL 规则，指定子网到区域的通信，以便在第 3 层域中相邻子网上的应用程序之间进行东西向通信。Nuage
    通过允许应用程序进行子网到区域的通信来实现这一点。
- en: '![Object model overview](img/B05559_02_22.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![Object model overview](img/B05559_02_22.jpg)'
- en: To allow this communication, **Application1** could have an ACL policy to allow
    **Application2** zone to allow traffic to flow into the subnet on port `22` allowing
    east to west communication, so no matter how many different subnets are used then
    **Application1** will always be allowed to communicate with any applications sitting
    under the **Application2** zone.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 为了允许这种通信，**Application1**可以具有ACL策略，允许**Application2**区域允许流量进入`22`端口的子网，实现东西向通信，因此无论使用多少不同的子网，**Application1**都将始终能够与位于**Application2**区域下的任何应用程序进行通信。
- en: '![Object model overview](img/B05559_02_23.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_23.jpg)'
- en: In terms of security policies, this allows development and security teams to
    understand which applications are communicating with each other and the ports
    they are using by reviewing the application policy.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在安全策略方面，这使得开发和安全团队能够通过查看应用程序策略了解哪些应用程序正在相互通信以及它们使用的端口。
- en: '![Object model overview](img/B05559_02_24.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![对象模型概述](img/B05559_02_24.jpg)'
- en: How the Nuage VSP platform can support greenfield and brownfield projects
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nuage VSP平台如何支持绿地和棕地项目
- en: Overlay networks are typically set up as new network (greenfield) sites, but
    a completely new network in isolation is not useful, unless there is a planned
    big bang migration of all applications, which means migrating every application
    from the legacy network to the new network in a single migration.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 覆盖网络通常作为新的网络（绿地）站点进行设置，但单独的全新网络是没有用的，除非计划进行一次性的大规模迁移，将所有应用程序从遗留网络迁移到新网络。
- en: If instead a staged application migration is chosen, where only a percentage
    of applications are migrated to the network, then the new overlay network will
    need to communicate with the legacy network and be required to operate in a brownfield
    setup.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 如果选择阶段性应用程序迁移，仅将部分应用程序迁移到新网络中，那么新的覆盖网络将需要与遗留网络进行通信，并要求在棕地环境中运行。
- en: A brownfield setup normally means applications are migrated in stages to the
    new platform, as opposed to all in one go, which builds confidence in the new
    network and new technology associated with that network. When moving applications
    to the new platform, it will typically involve performance testing the migrated
    applications in the new network, prior to throttling live traffic away from the
    incumbent legacy network to the migrated application in the new overlay network.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 棕地环境通常意味着应用程序会分阶段迁移到新平台，而不是一次性全部迁移，这有助于增加对新网络及其相关技术的信心。在将应用程序迁移到新平台时，通常需要在新网络中对迁移后的应用程序进行性能测试，之后才会将现有遗留网络的实时流量转移到迁移到新覆盖网络中的应用程序。
- en: A major requirement for a staged migration is connectivity back to the legacy
    network for application dependencies that are hosted there. This connectivity
    is necessary so migrated applications can operate effectively.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 阶段性迁移的一个主要要求是要连接回遗留网络，以便处理托管在其中的应用程序依赖关系。这种连接是必要的，以便迁移后的应用程序能够有效运行。
- en: The Nuage VSP Platform uses its **Virtualized Service Gateway** (**VSG**) to
    provide the connectivity between the new overlay and legacy network. A pair of
    Nuage VSGs are connected redundantly in virtual chassis mode which connect to
    interfaces on routers sitting in the legacy network. VSG performs a route table
    lookup based on the destination IP of a packet coming in on its VLAN from the
    attached router interface; it then updates the destination MAC with the next hop
    address and forwards the packet on the corresponding VXLAN segment. All packets
    are routed from the legacy network to the VSG via an underlay network.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP平台使用其**虚拟化服务网关**（**VSG**）提供新覆盖网络和遗留网络之间的连接。两台Nuage VSG在虚拟底盘模式下冗余连接，并连接到位于遗留网络中路由器上的接口。VSG根据从连接路由器接口的VLAN进入的数据包的目标IP执行路由表查找；然后它更新目标MAC地址为下一个跳跃地址，并将数据包转发到相应的VXLAN段。所有数据包都通过基础网络从遗留网络路由到VSG。
- en: This bridges the new overlay network, and the legacy network with VXLAN terminated
    on VSG.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这将新覆盖网络和遗留网络通过VXLAN终结于VSG进行连接。
- en: 'The pair of active VSGs is shown below in Nuage VSD:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Nuage VSD中的一对活动VSG：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_25.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地和棕地项目](img/B05559_02_25.jpg)'
- en: The Nuage VSG allows communication with the legacy network by leaking routes
    to the overlay network. Each VSG will receive and advertise IPv4 routes using
    a BGP session, this BGP session will be established between VSG, VSC and leaf
    switch when using a leaf spine topology using iBGP.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSG通过将路由泄露到覆盖网络来允许与传统网络进行通信。每个VSG将使用BGP会话接收并通告IPv4路由，当使用叶脊拓扑结构并使用iBGP时，此BGP会话将在VSG、VSC和叶交换机之间建立。
- en: The VSG must advertise its local system IP to legacy routers in the legacy network
    and all routes received from the native network will then be subsequently leaked
    from the native network via the underlay network into selected layer 3 domains
    in the overlay.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: VSG必须将其本地系统IP通告给传统网络中的路由器，并且所有从本地网络接收到的路由将随后通过下层网络泄露到覆盖网络中的选定层3域。
- en: 'The setup required to leak routes in the Nuage VSP Platform is the creation
    of a **GRThubDomain** layer 3 domain. In this example, host interfaces are connected
    into the Frontend, Business Logic, and Backend routers in the legacy network:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在Nuage VSP平台中，泄露路由所需的设置是创建一个**GRThubDomain**层3域。在这个示例中，主机接口连接到传统网络中的前端、业务逻辑和后端路由器：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_26.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持新建和改造项目](img/B05559_02_26.jpg)'
- en: The Nuage VSP platform then allows the newly created **GRThubDomain** to be
    associated with the **Production** or **Test** layer 3 domains by associating
    a leaking domain against them.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，Nuage VSP平台允许将新创建的**GRThubDomain**与**Production**或**Test**层3域相关联，通过将泄露域与它们相关联。
- en: In the following example, **GRThubDomain** is associated with the **Production**
    layer 3 domain.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的示例中，**GRThubDomain**与**Production**层3域相关联。
- en: 'The leaking domain in the Nuage GUI is displayed using the following icon showing
    a leaking domain named **GRThubDomain**:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在Nuage GUI中，泄露域通过以下图标显示，显示的是一个名为**GRThubDomain**的泄露域：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_27.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持新建和改造项目](img/B05559_02_27.jpg)'
- en: 'The Production domain with an associated leaking domain is shown in the Nuage
    GUI as follows:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 具有关联泄露域的生产域在Nuage GUI中显示如下：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_28.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持新建和改造项目](img/B05559_02_28.jpg)'
- en: The association of a leaking domain allows the Nuage VSP Platform to leak routes
    into and from the legacy network through to the new overlay network, meaning applications
    in the overlay network can communicate with applications in the legacy network,
    so long as they have appropriate Ingress and Egress ACL policies specified.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 泄露域的关联允许Nuage VSP平台通过下层网络将路由从传统网络泄露到新覆盖网络中，这意味着覆盖网络中的应用程序可以与传统网络中的应用程序进行通信，只要它们具有适当的Ingress和Egress
    ACL策略。
- en: The **Test** and **Production** layer 3 domains, as explained before, have a
    **Deny All** for Ingress and Egress as part of the **Company L3 Domain Template**.
    So although all routes are leaked into the overlay, they are dropped by the VRS
    unless explicitly stated otherwise.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，**Test**和**Production**层3域有一个**Deny All**规则，用于Ingress和Egress，这是**公司L3域模板**的一部分。因此，尽管所有路由都泄露到覆盖网络中，但除非明确说明，否则它们会被VRS丢弃。
- en: The Nuage VSP platform has the ability to apply ACL rules to the routes leaked
    from the external legacy network by using a concept named **Network Macros**.
    In the Nuage VSP Platform, a network macro is simply a fancy name for an external
    network range.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP平台具有应用ACL规则的能力，针对从外部传统网络泄露的路由，使用一种名为**网络宏**的概念。在Nuage VSP平台中，网络宏只是外部网络范围的一个花哨名称。
- en: If an application, **Application3** in this instance, resides in the legacy
    network, and its routing has already been exposed by the **GRThubDomain** leaking
    domain and leaked into the **Test** layer 3 domain, then a network macro can be
    set up to describe the range required and isolate connectivity to it using a Nuage
    ACL rule.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个应用程序，**Application3**就是其中之一，位于传统网络中，并且它的路由已经通过**GRThubDomain**泄露域并泄露到**Test**层3域中，那么可以设置一个网络宏来描述所需的范围，并通过Nuage
    ACL规则隔离与之的连接。
- en: 'In this instance, the network range `10.58.11.0/24` is where **Application3**
    resides is part of the Frontend range on the **GRThubdomain** that is leaked into
    the overlay network. The **Network Macros** for **Application3** as it would appear
    in Nuage is shown below:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在此实例中，网络范围`10.58.11.0/24`是**Application3**所在的范围，它是**GRThubdomain**中的前端范围的一部分，并已泄漏到覆盖网络中。**Application3**的**网络宏**在Nuage中显示如下：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_29.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地项目和棕地项目](img/B05559_02_29.jpg)'
- en: An Egress ACL policy can then be configured to allow **Application1** to communicate
    with **Application3** by creating a Network Macros to a subnet ACL rule, which
    allows **Application3** **Network Macros** to connect to **Subnet Application1**
    on port `8080.`
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，可以配置一个出站ACL策略，通过创建一个网络宏到子网的ACL规则，允许**Application3**的**网络宏**与**Subnet Application1**在端口`8080`上进行通信。
- en: 'The **Egress Security Policy** to allow communication between **Application3**
    **Network Macros** and **Subnet Application1** on port `8080` is shown here:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 允许**Application3** **网络宏**与**Subnet Application1**通过端口`8080`通信的**出站安全策略**如下所示：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_30.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地项目和棕地项目](img/B05559_02_30.jpg)'
- en: 'After creation, the ACL list is updated to show the new **Network Macro** ACL:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 创建后，ACL列表将更新，显示新的**网络宏**ACL：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_31.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地项目和棕地项目](img/B05559_02_31.jpg)'
- en: This allows the Nuage VSP to lock down policy and the overlay network to only
    allow specific flow data from the legacy network in the same way it would control
    ACL policies between subnet or zones that resided within the same layer 3 domain.
    Network macros can also be used to route between multiple cloud technologies as
    well as different data centers, so they are a very powerful way of connecting
    networks and controlling policy between them.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得Nuage VSP能够锁定策略，并且覆盖网络仅允许来自传统网络的特定流量，就像它在同一第3层域内的子网或区域之间控制ACL策略一样。网络宏也可以用于在多个云技术以及不同数据中心之间进行路由，因此它们是连接网络并控制网络之间策略的强大方式。
- en: Multiple network macros can be grouped together into a network macro group,
    which allows multiple ranges to be controlled by one ACL rule. These are then
    exploded out at the OpenFlow level on VRS at the hypervisor. Nuage currently has
    a limit of 100 ACL rules per VPort in the 3.x release, so only 100 ACL rules can
    currently be applied to a single instance (virtual machine), so it is important
    to be careful when grouping **Network Macros**. This has been increased to 500
    ACL rules in the 4.x release of the Nuage platform.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 多个网络宏可以组合成一个网络宏组，这样可以通过一个ACL规则控制多个范围。然后，这些范围在VRS的OpenFlow级别上被展开。Nuage在3.x版本中每个VPort的ACL规则数量限制为100，因此目前每个实例（虚拟机）只能应用100个ACL规则，因此在组合**网络宏**时需要特别小心。在Nuage平台的4.x版本中，ACL规则的数量已增加到500个。
- en: 'An example of a network macro group can be shown below and then the **Front
    End Services** **Network Macro Group** can be used in the Egress ACL rule as opposed
    to specifying individual policies for **Application3** and **Application4**:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个网络宏组的示例，然后可以在出站ACL规则中使用**前端服务** **网络宏组**，而不是为**Application3**和**Application4**指定单独的策略：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_32.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地项目和棕地项目](img/B05559_02_32.jpg)'
- en: 'The **Egress Security Policy** to allow port `8080` connection between the
    **Front End Services** **Network Macro Group** and **Subnet Application1**:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 允许**前端服务** **网络宏组**与**Subnet Application1**之间通过端口`8080`连接的**出站安全策略**：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_33.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地项目和棕地项目](img/B05559_02_33.jpg)'
- en: 'The applied ACL implementing the **Front End Services** network macro can be
    found here:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 实施**前端服务**网络宏的ACL可以在此找到：
- en: '![How the Nuage VSP platform can support greenfield and brownfield projects](img/B05559_02_34.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP平台如何支持绿地项目和棕地项目](img/B05559_02_34.jpg)'
- en: The Nuage VSP multicast support
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nuage VSP的多播支持
- en: 'The Nuage VSP Platform has the ability to route multicast between the following
    Nuage VSD entities:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP平台具有在以下Nuage VSD实体之间路由多播的能力：
- en: Layer 2 and 3 domains
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第2层和第3层域
- en: Zones
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 区域
- en: Subnets
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 子网
- en: VPorts attached to VMs
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附加到虚拟机的VPorts
- en: Multicast can be routed into the overlay network, which is a unique feature
    of the Nuage VSP platform. Multicast traffic is routed into the overlay network
    in Nuage by configuring dedicated VLANs on the underlay layer 2 network, which
    are attached to compute nodes. This allows the compute (hypervisors) on the underlay
    network to use the dedicated VLANs, which are ip'd on a per rack basis, to transmit
    and receive multicast traffic.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 多播可以路由到覆盖网络，这是 Nuage VSP 平台的独特功能。在 Nuage 中，通过在底层二层网络上配置专用 VLAN，并将其附加到计算节点上，将多播流量路由到覆盖网络。这使得底层网络上的计算节点（虚拟化管理程序）可以使用按机架分配的专用
    VLAN 来发送和接收多播流量。
- en: To route multicast traffic across the underlay, the Nuage VRS will duplicate
    the multicast packets and leak it into the overlay network in a controlled fashion.
    This is so the overlay network is not flooded with unnecessary multicast traffic,
    which can cause performance implications to the overlay network if it was not
    controlled. This makes the Nuage multicast setup highly scalable as it only directs
    multicast traffic to where it needs to in the overlay network.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在底层网络上路由多播流量，Nuage VRS 将复制多播数据包，并以受控的方式将其泄漏到覆盖网络中。这样可以避免覆盖网络被不必要的多播流量洪泛，如果不加以控制，可能会对覆盖网络性能造成影响。这使得
    Nuage 的多播设置具有高度的可扩展性，因为它只将多播流量引导到覆盖网络中需要的地方。
- en: The Nuage VSP uses a dedicated VLAN for multicast send and VLAN for multicast
    receive on the compute nodes (hypervisor). Each of these VLANs can be configured
    on each hypervisor in the event applications that have a multicast requirement.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage VSP 使用专用 VLAN 用于计算节点（虚拟化管理程序）的多播发送和接收。每个 VLAN 可以在每个虚拟化管理程序上进行配置，以便支持有多播需求的应用程序。
- en: Each of the hypervisors is allocated a VLAN and unique IP address for multicast
    send and receive, depending on the rack the hypervisors are provisioned on, so
    they use the associated switches.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 每个虚拟化管理程序都会为多播发送和接收分配一个 VLAN 和唯一的 IP 地址，这取决于虚拟化管理程序所在的机架，以便使用相应的交换机。
- en: Port Channel Maps are the entity used in Nuage VSD to leak multicast from the
    underlay network to the overlay network. Port Channel Maps are only required if
    multicast needs to be routed subnet to subnet in the overlay network. If multicast
    is required in the same subnet, then a **Port Channel Maps** is not required and
    multicast will work within an isolated layer 3 subnet without having to route
    the traffic via the VLANs on the hypervisors.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 端口通道映射是 Nuage VSD 中用于将多播从底层网络泄露到覆盖网络的实体。如果多播需要在覆盖网络中从子网到子网路由，则需要端口通道映射。如果多播仅在同一子网中使用，则不需要**端口通道映射**，多播将在一个隔离的三层子网内工作，无需通过虚拟化管理程序上的
    VLAN 路由流量。
- en: In the following example, a **Multicast Channel Map** is used to create **Multicast
    Ranges** for **Application2**, which broadcasts multicast. This will route multicast
    from **Subnet Application2**, via the underlay VLAN on the hypervisor, to the
    Nuage VRS and then flood it into **Subnet Application1**.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，使用**多播通道映射**来为**应用程序2**创建**多播范围**，该应用程序广播多播。这将通过虚拟化管理程序上的底层 VLAN，将多播从**子网应用程序2**路由到
    Nuage VRS，并将其洪泛到**子网应用程序1**。
- en: 'The **Multicast Channel Maps** icon is shown here:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**多播通道映射**图标如下所示：'
- en: '![The Nuage VSP multicast support](img/B05559_02_35.jpg)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP 多播支持](img/B05559_02_35.jpg)'
- en: The following scenario describes the workflow an application will go through
    to route multicast traffic from one layer 3 subnet to another in the overlay.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 以下场景描述了一个应用程序在覆盖网络中将多播流量从一个三层子网路由到另一个子网的工作流程。
- en: '**Application1** will be deployed under a layer 3 domain, under its own zone,
    in a /26 microsubnet and on that subnet two virtual machines will be attached
    to two VPorts. Against a VPort in Nuage, a virtual machine can be set up as a
    sender or receiver of multicast or both:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '**应用程序1**将部署在一个三层域下，属于自己的区域，位于一个/26 微子网中，并且在该子网下，两个虚拟机将连接到两个虚拟端口（VPort）。在 Nuage
    中，虚拟机可以设置为多播的发送方或接收方，或者两者兼有：'
- en: '![The Nuage VSP multicast support](img/B05559_02_37.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![Nuage VSP 多播支持](img/B05559_02_37.jpg)'
- en: '**Application1** in this instance is the sender of multicast and wants to send
    a multicast stream to **Application2**, which is deployed under a layer 3 domain,
    under its own zone, in a /26 microsubnet, and on that subnet, one virtual machines
    will be attached to one VPort.'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在此实例中，**应用程序1**是多播的发送方，想要将多播流发送到**应用程序2**，该应用程序部署在一个三层域下，属于自己的区域，位于一个/26 微子网中，并且在该子网下，只有一台虚拟机将连接到一个虚拟端口。
- en: So a Port Channel Map will need to be set up on **Application1** by associating
    it with each of the **Application1** VPorts, which lets Nuage know that **Application1**
    is the multicast sender.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 所以需要在**Application1**上设置一个端口通道映射，并将其与每个**Application1**的VPort关联，这样Nuage就知道**Application1**是组播的发送方。
- en: '**Application2** will have its VPort configured with a Port Channel Map setup,
    so it can receive multicast.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '**Application2**将配置其VPort并设置端口通道映射，以便接收组播。'
- en: When Application1s two virtual machines broadcast multicast traffic, Nuage now
    knows to route the multicast traffic on the matching multicast range specified
    on the Port Channel Map to the hypervisor that **Application1** is deployed on.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 当**Application1**的两台虚拟机广播组播流量时，Nuage现在知道将组播流量路由到与端口通道映射中指定的匹配组播范围相符的超管上，**Application1**部署于此。
- en: Nuage will transmit multicast across the hypervisor layer 2 domain using the
    sender VLAN.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: Nuage将使用发送者VLAN在超管二层域上传输组播。
- en: Each of the receiver VLANs on each hypervisor's receiver IPs will then pick
    up the transmission of multicast.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 每个超管的接收IP上的接收VLAN将会接收到组播的传输。
- en: If a Port Channel Map is specified on any of the virtual machines on the hypervisor,
    matching the **Multicast Ranges** configured, which **Application2** does, then
    the Nuage VRS will duplicate the multicast packets, leaking them into the overlay
    network to **Application2**.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在超管上的任何虚拟机上指定了端口通道映射，并且匹配了已配置的**Multicast Ranges**，如**Application2**所做的那样，那么Nuage
    VRS将复制组播数据包，并将它们泄漏到覆盖网络中，传递给**Application2**。
- en: This is how Nuage leaks multicast traffic to the overlay network, using the
    underlay network and sender and receiver VLANs.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是Nuage如何使用基础网络和发送者与接收者VLAN将组播流量泄漏到覆盖网络的方式。
- en: Summary
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered some of the advanced networking features provided
    by the Nuage VSP SDN solution and also touched upon some of the other SDN solutions
    that are available on the market. Having read this chapter, you should now be
    familiar with the Nuage SDN controller and understand the rich set of features
    an SDN controller can bring to OpenStack and the private cloud.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，我们介绍了Nuage VSP SDN解决方案提供的一些高级网络功能，并简要介绍了市场上其他可用的SDN解决方案。阅读本章后，你应该已经熟悉了Nuage
    SDN控制器，并理解了SDN控制器能为OpenStack和私有云带来的丰富功能。
- en: Given the programmability SDN controllers, AWS, and OpenStack solutions bring,
    we will now shift focus and look at the cultural changes that are necessary in
    organizations to make the most of these fantastic technologies. Implementing new
    technologies without changing operational models is not enough, people and process
    are key to a successful DevOps model.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于程序化SDN控制器、AWS和OpenStack解决方案带来的优势，我们现在将转向关注在组织内实现这些令人振奋的技术所需的文化变革。仅仅实施新技术而不改变操作模型是不够的，人员和流程是成功DevOps模型的关键。
- en: The role of the network engineer is undergoing its biggest evolution in years,
    so businesses cannot simply implement new technology and expect faster delivery
    without dealing with people and cultural issues. CTOs have a responsibility to
    set their networking teams up for success by implementing DevOps transformations
    that include network functions, and network teams also need to learn new skills
    such as coding to push forward automation using grass root initiatives.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 网络工程师的角色正在经历多年来最大的变革，因此企业不能仅仅实现新技术并期望更快的交付，而不处理人员和文化问题。首席技术官有责任通过实施包括网络功能的DevOps转型，为其网络团队的成功奠定基础，同时网络团队也需要学习新技能，如编程，以通过草根倡议推动自动化。
- en: Note
  id: totrans-209
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Useful links on Nuage Networks practical use cases are:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 关于Nuage Networks实际应用案例的有用链接如下：
- en: '[https://www.youtube.com/watch?v=_ZfFbhmiNYo](https://www.youtube.com/watch?v=_ZfFbhmiNYo)'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.youtube.com/watch?v=_ZfFbhmiNYo](https://www.youtube.com/watch?v=_ZfFbhmiNYo)'
- en: '[https://www.youtube.com/watch?v=aKa2idHhk94](https://www.youtube.com/watch?v=aKa2idHhk94)'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.youtube.com/watch?v=aKa2idHhk94](https://www.youtube.com/watch?v=aKa2idHhk94)'
- en: '[https://www.youtube.com/watch?v=OjXII11hYwc](https://www.youtube.com/watch?v=OjXII11hYwc)'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.youtube.com/watch?v=OjXII11hYwc](https://www.youtube.com/watch?v=OjXII11hYwc)'
