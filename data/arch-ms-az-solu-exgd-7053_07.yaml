- en: Using Storage Solutions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用存储解决方案
- en: In the previous chapter, we covered the designing connectivity for hybrid applications objective.
    We covered how to design hybrid applications. We also covered external connectivity
    for Azure VNets and how to design security strategies for networking solutions.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了混合应用程序连接设计的目标。我们讨论了如何设计混合应用程序。我们还讲解了 Azure 虚拟网络的外部连接以及如何设计网络解决方案的安全策略。
- en: This chapter introduces the designing data implementations objective by starting
    with storage solutions. This chapter covers the different storage solutions that
    are available in Azure, such as Azure Blob Storage and Azure Files. It will also
    help you determine when to use one of these storage solutions. It will also cover
    designing for NoSQL storage and when to use the different NoSQL services inside
    Azure, such as Azure Table Storage and Cosmos DB. And finally, it covers searching
    your data with Azure Search.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章通过从存储解决方案开始，介绍了数据实现设计的目标。本章涵盖了 Azure 中可用的不同存储解决方案，如 Azure Blob 存储和 Azure 文件存储。它还将帮助你确定何时使用这些存储解决方案中的一种。它还涵盖了为
    NoSQL 存储设计的内容以及何时使用 Azure 中的不同 NoSQL 服务，如 Azure 表存储和 Cosmos DB。最后，它介绍了如何使用 Azure
    搜索对数据进行检索。
- en: By the end of reading this chapter, you should know when to use which storage
    option for your solutions.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读完本章后，你应该知道在你的解决方案中何时使用哪种存储选项。
- en: 'The following topics will be covered:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 以下主题将被涵盖：
- en: Azure Storage types and replication types
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 存储类型与复制类型
- en: Azure Blob Storage
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Blob 存储
- en: Azure Table Storage
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 表存储
- en: Azure Queue Storage
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 队列存储
- en: Azure File Storage
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 文件存储
- en: Azure Disk Storage
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 磁盘存储
- en: StorSimple
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: StorSimple
- en: Cosmos DB Storage
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cosmos DB 存储
- en: Azure Search
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 搜索
- en: Technical requirements
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'This chapter uses the following tools for the examples:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本章示例使用了以下工具：
- en: Azure PowerShell: [https://docs.microsoft.com/en-us/powershell/azure/install-azurerm-ps?view=azurermps-5.1.1](https://docs.microsoft.com/en-us/powershell/azure/install-azurerm-ps?view=azurermps-5.1.1)
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Azure PowerShell: [https://docs.microsoft.com/en-us/powershell/azure/install-azurerm-ps?view=azurermps-5.1.1](https://docs.microsoft.com/en-us/powershell/azure/install-azurerm-ps?view=azurermps-5.1.1)'
- en: Visual Studio 2017: [https://www.visualstudio.com/downloads/](https://www.visualstudio.com/downloads/)
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Visual Studio 2017: [https://www.visualstudio.com/downloads/](https://www.visualstudio.com/downloads/)'
- en: 'The source code for this chapter can be downloaded from the following link:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的源代码可以通过以下链接下载：
- en: '[https://github.com/SjoukjeZaal/AzureArchitectureBook/tree/master/Chapter%207](https://github.com/SjoukjeZaal/AzureArchitectureBook/tree/master/Chapter%207)'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://github.com/SjoukjeZaal/AzureArchitectureBook/tree/master/Chapter%207](https://github.com/SjoukjeZaal/AzureArchitectureBook/tree/master/Chapter%207)'
- en: Azure Storage and replication types
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 存储和复制类型
- en: Every application needs some sort of storage solution. Azure offers several
    different types of storage, from storing files and documents to storing datasets.
    The first step to take is creating a storage account. When you create a storage
    account, you have to determine whether you want your data to be accessible locally
    or globally. Another thing to take into consideration is which account type to
    choose.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 每个应用程序都需要某种存储解决方案。Azure 提供了几种不同类型的存储，从存储文件和文档到存储数据集。第一步是创建存储账户。当你创建存储账户时，你需要决定是否希望数据可以在本地或全球访问。另一个需要考虑的因素是选择哪种账户类型。
- en: Storage account types
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储账户类型
- en: Azure Blob Storage offers three different account types which can be used for
    Blob, Table, File, and Queue storage. Azure offers the following storage types.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Blob 存储提供三种不同的账户类型，可用于 Blob、表、文件和队列存储。Azure 提供以下存储类型。
- en: General-purpose v1 (GPv1)
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通用型 v1 (GPv1)
- en: The General-purpose Storage (V1) account is the oldest type of storage account.
    It offers storage for page blobs, block blobs, files, queues, and tables, but
    it is not the most cost-effective storage account type. It is the only storage
    account type that can be used for the classic deployment model. It doesn't support
    the latest features such as access tiers.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 通用型存储 (V1) 账户是最早的存储账户类型。它提供对页面 blob、块 blob、文件、队列和表的存储，但它不是最具成本效益的存储账户类型。它是唯一可以用于经典部署模型的存储账户类型。不支持最新的功能，如访问层。
- en: Blob storage
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Blob 存储
- en: The Blob storage account offers all the features of StorageV2 accounts except
    that it supports only block blobs (and append blobs). Page blobs are not supported.
    It offers access tiers, which consists of hot, cool, and archive storage and which
    is covered later in this chapter.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Blob 存储账户提供 StorageV2 账户的所有功能，唯一的区别是它仅支持块 Blob（和追加 Blob）。不支持页面 Blob。它提供访问层，包括热存储、冷存储和归档存储，后续章节会详细介绍。
- en: General-purpose v2 (GPv2)
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通用型 v2（GPv2）
- en: StorageV2 is the newest type of storage account and it combines the V1 storage
    with Blob storage. It offers all the latest features such as access tiers for
    Blob storage with a reduction in costs. Microsoft recommends using this account
    type over the V1 and Blob storage account type.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: StorageV2 是最新的存储账户类型，它将 V1 存储与 Blob 存储结合在一起。它提供了所有最新功能，如 Blob 存储的访问层，并降低了成本。Microsoft
    推荐使用此账户类型，优于 V1 和 Blob 存储账户类型。
- en: V1 storage accounts can be upgraded to V2.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: V1 存储账户可以升级为 V2。
- en: For more information on pricing and billing for these different account types,
    you can refer to the following pricing page: [https://azure.microsoft.com/en-us/pricing/details/storage/](https://azure.microsoft.com/en-us/pricing/details/storage/).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 有关这些不同账户类型的定价和计费的更多信息，请参阅以下定价页面：[https://azure.microsoft.com/en-us/pricing/details/storage/](https://azure.microsoft.com/en-us/pricing/details/storage/)。
- en: Storage replication types
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储复制类型
- en: Data that is stored in Azure is always replicated to ensure durability and high
    availability. This way, it is protected from unplanned and planned events, such
    as network or power outages, natural disasters, and terrorism. It also ensures
    that during these types of events, your storage account still meets SLA.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 存储在 Azure 中的数据始终会进行复制，以确保持久性和高可用性。这样，它就能在计划外和计划内的事件（如网络或电力中断、自然灾害和恐怖袭击）中得到保护。它还确保在这些事件发生期间，你的存储账户仍能满足
    SLA 要求。
- en: Data can be replicated within the same data center, across zonal data centers
    within the same region and across different regions. These replication types are
    named **Locally Redundant Storage** (**LRS**), **Zone Redundant Storage** (**ZRS**),
    and **Geo-redundant Storage** (**GRS**), and they are covered in more detail in
    the upcoming sections.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 数据可以在同一数据中心内进行复制，也可以在同一区域内的区域数据中心之间复制，甚至跨区域进行复制。这些复制类型分别称为 **本地冗余存储**（**LRS**）、**区域冗余存储**（**ZRS**）和
    **地理冗余存储**（**GRS**），并将在后续章节中详细介绍。
- en: You choose a replication type when you create a new storage account. Storage
    accounts can be created inside the Azure Portal as well as from PowerShell or
    CLI.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新存储账户时，你需要选择一种复制类型。存储账户可以在 Azure 门户中创建，也可以通过 PowerShell 或 CLI 创建。
- en: Locally Redundant Storage
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本地冗余存储
- en: LRS is the cheapest option, which replicates the data three times within the
    same data center. When you make a write request to your storage account, it will
    synchronously be written during this request to all three replicas. The request
    is committed when the data is completely replicated. With LRS, the data will be
    replicated across multiple update domains and fault domains within one storage
    scale unit.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: LRS 是最便宜的选项，它将在同一数据中心内将数据复制三次。当你对存储账户发出写请求时，该请求将会同步写入所有三个副本。当数据完全复制时，请求才会提交。使用
    LRS 时，数据将在一个存储规模单元内跨多个更新域和故障域进行复制。
- en: Zone Redundant Storage
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 区域冗余存储
- en: ZRS is currently in preview and only available in US East 2 and US Central. It
    replicates three copies, across two or three data centers. The data is written
    synchronously to all three replicas in one or two regions. It also replicates
    the data three times inside the same data center where the data resided, just
    like LRS.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ZRS 当前处于预览阶段，仅在美国东部 2 区和美国中部可用。它在两个或三个数据中心之间复制三份数据。数据会同步写入所有三个副本，这些副本位于一个或两个区域。它还像
    LRS 一样，在数据所在的同一数据中心内复制三份数据。
- en: Geo-redundant Storage
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 地理冗余存储
- en: GRS replicates the data three times within the same region such as ZRS, as well
    as three copies to other regions asynchronously.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: GRS 在同一地区内将数据复制三次（类似于 ZRS），同时还会异步复制三份数据到其他地区。
- en: Azure Blob Storage
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure Blob 存储
- en: Azure Blob Storage offers unstructured data storage in the cloud. It can store
    all kinds of data, such as documents, VHDs, images, and audio files.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Blob 存储提供云中的非结构化数据存储。它可以存储各种数据，如文档、VHD、图像和音频文件。
- en: There are two types of blobs that you can create. There are **page blobs**,
    which are used for the storage of disks. So, when you have VHD which need to be
    stored and attached to your VM, you will create a page blob. The maximum size
    of a page blob is 1 TB. The other one is **block blobs**, which are basically
    all the other types of data that you can store in Azure, such as files and documents.
    The maximum size of a block blob is 200 GB. However, there is a third blob type
    named append blob, but this one is used internally by Azure and can't be used
    in order to store actual files.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以创建两种类型的 blob。**页面 blob**用于存储磁盘。因此，当你需要存储 VHD 并将其附加到虚拟机时，你将创建一个页面 blob。页面
    blob 的最大大小为 1 TB。另一种是 **块 blob**，它基本上包含了你可以在 Azure 中存储的所有其他类型的数据，如文件和文档。块 blob
    的最大大小为 200 GB。然而，还有一种名为追加 blob 的第三种类型，但它仅由 Azure 内部使用，不能用来存储实际文件。
- en: There are a couple of ways that you can copy blobs to your blob storage account.
    You can use the Azure Portal (only one at a time) or Azure Storage Explorer, or
    you can copy your files programmatically using .NET, PowerShell, or CLI or by
    calling the REST API.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种方法可以将 blob 复制到你的 blob 存储账户。你可以使用 Azure 门户（一次只能操作一个），或使用 Azure 存储资源管理器，或者通过
    .NET、PowerShell 或 CLI 编程方式，或者调用 REST API 来复制文件。
- en: Access tiers
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问层
- en: Blob storage accounts use access tiers to determine how frequently the data
    is accessed. Based on this access tier, you will get billed. Azure offers three
    storage access tiers, hot, cool, and archive.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: Blob 存储账户使用访问层来确定数据的访问频率。根据此访问层，你将会收到相应的计费。Azure 提供三种存储访问层：Hot、Cool 和 Archive。
- en: Hot
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Hot
- en: The Hot access tier is most suitable for storing data accessed frequently and
    data that is in active use. For instance, you would store images and style sheets
    for a website inside the Hot access tier. The storage costs for this tier are
    higher than compared to the other access tiers, but you pay less for accessing
    the files.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Hot 访问层最适合存储频繁访问的数据和正在使用的数据。例如，你会将网站的图片和样式表存储在 Hot 访问层中。与其他访问层相比，这个层级的存储成本较高，但访问文件的费用较低。
- en: The Hot access tier is optimized for storing data that is accessed frequently.
    It has higher storage costs than Cool and Archive storage, but you pay less for
    accessing the files. This access tier is most suitable for data that is in active
    use.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: Hot 访问层专为存储频繁访问的数据而优化。它的存储成本比 Cool 和 Archive 存储层更高，但访问文件的费用较低。这个访问层最适合存储正在使用的数据。
- en: Cool
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cool
- en: The Cool access tier is most suitable for storing data that is not accessed
    frequently (less then once in 30 days). Compared with the Hot access tier, the
    Cool tier has lower storage costs, but you pay more for accessing the files. This
    tier is most suitable for storing backups and older content that is not viewed
    often.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: Cool 访问层最适合存储不常访问的数据（30天内访问不到一次）。与 Hot 访问层相比，Cool 访问层的存储成本较低，但访问文件的费用更高。这个层级最适合存储备份和不常查看的旧内容。
- en: Archive
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存档
- en: The Archive storage tier is set on the blob level and not on the storage level.
    It has the lowest costs for storing data and the highest cost for accessing data
    compared with the Hot and Cool access tiers. This tier is for data that will remain
    in the archive for at least 180 days, and it will take a couple of hours of latency
    before it can be accessed. This tier is most suitable for long-term backups or
    compliance and archive data.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 存档存储层是在 blob 级别设置的，而不是在存储级别设置的。与 Hot 和 Cool 访问层相比，它的存储成本最低，但访问数据的成本最高。这个层级适合存储至少需要存档
    180 天的数据，且访问时需要几小时的延迟。这个层级最适合长期备份或合规性和存档数据。
- en: A blob in the Archive tier is offline and cannot be read (except for the metadata),
    copied, overwritten, or modified.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 存储在 Archive 访问层中的 blob 是离线状态，无法读取（元数据除外）、复制、覆盖或修改。
- en: Azure Table Storage
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 表格存储
- en: Azure Table Storage is a NoSQL data store, which can be used for a big amount
    of semi-structured, non-relational data. It is more cost-effective than relational
    databases because it stores the data on cheaper servers that provide horizontal
    scale and high performance. NoSQL uses schemaless design, and data is stored based
    on key/attribute values. You can store flexible datasets in it, and it can store
    any number of entities in a table, up to the maximum capacity of the storage account
    (which is 500 TB).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 表存储是一个 NoSQL 数据存储，适用于大量半结构化的非关系数据。与关系数据库相比，它更具成本效益，因为它将数据存储在更便宜的服务器上，这些服务器提供水平扩展和高性能。NoSQL
    使用无模式设计，数据是基于键/属性值进行存储的。您可以在其中存储灵活的数据集，并且它可以在一个表中存储任意数量的实体，最多可达存储帐户的最大容量（500 TB）。
- en: Azure Table Storage is most suitable for datasets that don't require complex
    joins, stored procedures, and foreign keys. You can access the data using the
    OData protocol and LINQ Queries.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 表存储最适合处理不需要复杂联接、存储过程和外键的数据集。您可以通过 OData 协议和 LINQ 查询访问数据。
- en: Creating a storage account
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建存储帐户
- en: Before you can upload any data or files to Azure Storage, a storage account
    needs to be created. This can be done using the Azure Portal, PowerShell, CLI,
    or Visual Studio.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在上传任何数据或文件到 Azure 存储之前，需要创建一个存储帐户。可以使用 Azure 门户、PowerShell、CLI 或 Visual Studio
    来完成此操作。
- en: 'In this demo, we are going to create a storage account with PowerShell:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例中，我们将使用 PowerShell 创建一个存储帐户：
- en: '[PRE0]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If necessary, select the right subscription:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如有必要，选择正确的订阅：
- en: '[PRE1]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Create a resource group:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个资源组：
- en: '[PRE2]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Create the storage account:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 创建存储帐户：
- en: '[PRE3]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Uploading data to Azure Table Storage
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 向 Azure 表存储上传数据
- en: In this demo, we are going to use Visual Studio 2017 to upload data to a Azure
    Table inside the storage account, which was created in the previous step.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例中，我们将使用 Visual Studio 2017 向之前步骤中创建的存储帐户中的 Azure 表上传数据。
- en: 'Click on File | New | Project, and in the New Project window, select Windows
    Classic Desktop | Console App. Name the project and click on OK:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击文件 | 新建 | 项目，在新建项目窗口中选择 Windows Classic Desktop | 控制台应用程序。命名项目并点击确定：
- en: '![](img/195598ac-4a3a-4183-b8c3-bed0f2afab4f.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/195598ac-4a3a-4183-b8c3-bed0f2afab4f.jpg)'
- en: Create a new project
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个新项目
- en: 'Next is to import the NuGet packages. There are two packages that need to be
    installed:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来是导入 NuGet 包。有两个需要安装的包：
- en: '**Windows Azure Storage**: This library provides access to the Azure Storage
    account and the data. It can be used for blobs, files, tables, and queues.'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows Azure 存储**：该库提供对 Azure 存储帐户及其数据的访问。它可以用于处理 blobs、文件、表格和队列。'
- en: '**Microsoft Windows Azure Configuration Manager**: This library provides a
    unified API to load configuration settings regardless of where the application
    is hosted.'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Microsoft Windows Azure 配置管理器**：该库提供了一个统一的 API 来加载配置设置，无论应用程序托管在哪里。'
- en: 'Add the following piece of XML to the `App.config`. The actual `ConnectionString`
    value can be obtained from the Access Keysettings in the Azure Portal:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下 XML 代码添加到 `App.config` 文件中。实际的 `ConnectionString` 值可以从 Azure 门户中的访问密钥设置中获取：
- en: '[PRE4]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Add a new class to the project and name it `Contact.cs`. Replace it with the
    following code:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向项目中添加一个新类，并命名为 `Contact.cs`。然后用以下代码替换它：
- en: '[PRE5]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Add the following code to the `Main()` method of the `Program.cs`:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下代码添加到 `Program.cs` 的 `Main()` 方法中：
- en: '[PRE6]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Run the project. You can then open up the Azure Storage Explorer and navigate
    to the storage account and the container. You can see the data row that has been
    added:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行项目。然后，你可以打开 Azure Storage Explorer，导航到存储帐户和容器。你将看到已添加的数据行：
- en: '![](img/e6a9995d-50b4-4c9e-b5d2-0ba069470926.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e6a9995d-50b4-4c9e-b5d2-0ba069470926.jpg)'
- en: Added data row
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 已添加的数据行
- en: For more information on working with Azure Table Storage from .NET, you can
    refer to the following tutorial: [https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-how-to-use-dotnet](https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-how-to-use-dotnet).
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 若要了解如何使用 .NET 操作 Azure 表存储，您可以参考以下教程：[https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-how-to-use-dotnet](https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-how-to-use-dotnet)。
- en: Azure Queue Storage
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 队列存储
- en: Azure Queue Storage offers a message queue that can be used by applications.
    Message queues offer an asynchronous communication mechanism where a sender adds
    an message to the queue, which can be received by the receiver at a later time.
    Applications can benefit of this because they can decouple components, which can
    scale independently from each other.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 队列存储提供了一个可以供应用程序使用的消息队列。消息队列提供了一种异步通信机制，发送方将消息添加到队列中，接收方可以在稍后的时间接收这些消息。应用程序可以从中受益，因为它们可以解耦组件，组件可以独立扩展。
- en: You can send and receive messages from Queue Storage using the Azure Storage
    Client Libraries and the REST API.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用 Azure 存储客户端库和 REST API 从队列存储发送和接收消息。
- en: Azure queue storage is covered in more detail in [Chapter 13](70842148-3674-4673-8d9e-90e26ff4b45e.xhtml),
    *Implementing Messaging Solutions*.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 队列存储在[第13章](70842148-3674-4673-8d9e-90e26ff4b45e.xhtml)，*实现消息传递解决方案*中有更详细的介绍。
- en: Azure File Storage
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 文件存储
- en: With Azure File Storage, you can create file shares in the cloud. You can access
    your files using the Server Message Block (SMB) protocol, which is an industry
    standard and can be used on Linux, Windows, and macOS devices. Azure Files can
    also be mounted as if it is a local drive on these same devices as well, and they
    can be cached for fast access on Windows Server using Azure File Sync (preview).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Azure 文件存储，你可以在云中创建文件共享。你可以使用服务器消息块（SMB）协议访问文件，这是一种行业标准，可以在 Linux、Windows
    和 macOS 设备上使用。Azure 文件还可以像本地驱动器一样在这些设备上挂载，并且可以通过 Azure 文件同步（预览版）在 Windows 服务器上缓存，以实现快速访问。
- en: File shares can be used across multiple machines, which makes them suitable
    for storing files or data that are accessed from multiple machines, such as tools
    for development machines, or configuration files or log data. Azure File share
    is part of the Azure Storage Client Libraries and offers an Azure Storage REST
    API which can be leveraged by developers in their solutions.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 文件共享可以跨多个机器使用，这使其适合存储多个机器访问的文件或数据，例如开发机器的工具、配置文件或日志数据。Azure 文件共享是 Azure 存储客户端库的一部分，并提供
    Azure 存储 REST API，开发人员可以在其解决方案中利用该 API。
- en: Azure Disk Storage
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 磁盘存储
- en: The disks that are used for virtual machines are stored in Azure Blob Storage
    as page blobs. Azure stores two disks for each virtual machine, the actual operating
    system (VHD) of the VM and a temporary disk that is used for short-term storage.
    This data is erased when the VM is turned of or rebooted.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 用于虚拟机的磁盘存储在 Azure Blob 存储中作为页面 Blob。Azure 为每个虚拟机存储两个磁盘，一个是虚拟机的实际操作系统（VHD），另一个是用于短期存储的临时磁盘。当虚拟机关闭或重新启动时，这些数据会被擦除。
- en: There are two different performance tiers that Azure offers, Standard Disk Storage
    and Premium Disk Storage.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 提供了两种不同的性能层次：标准磁盘存储和高级磁盘存储。
- en: Standard Disk Storage
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标准磁盘存储
- en: Standard Disk Storage offers HDD drives to store the data on and is the most
    cost-effective storage tier from which you can choose. It can only use LRS or
    GRS for supporting high availability for your data and applications.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 标准磁盘存储提供用于存储数据的 HDD 驱动器，是你可以选择的最具性价比的存储层。它仅支持 LRS 或 GRS 来保证数据和应用程序的高可用性。
- en: Standard Disk Storage offers HDDs and is more cost-effective. Standard Disk
    Storage can only use LRS or GRS.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 标准磁盘存储提供 HDD，并且具有更高的性价比。标准磁盘存储仅支持 LRS 或 GRS。
- en: Premium Disk Storage
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级磁盘存储
- en: With Premium Disk Storage, your data is stored on SSDs. Not all Azure Virtual
    Machine series can use this type of storage. It can only be used with DS, DSv2,
    GS, LS, or FS series Azure Virtual Machines. It offers high-performance and low-latency
    disk support.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 使用高级磁盘存储时，数据存储在 SSD 上。并非所有 Azure 虚拟机系列都可以使用这种类型的存储。它只能与 DS、DSv2、GS、LS 或 FS 系列
    Azure 虚拟机一起使用。它提供高性能和低延迟的磁盘支持。
- en: Unmanaged versus Managed Disks
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 非托管磁盘与托管磁盘
- en: Managed Disks were covered in [Chapter 1](401f72d0-a2a1-4c62-880e-43739e3daa5d.xhtml),
    *Working with Azure Virtual Machines*, and they handle the storage account creation
    for you. With Unmanaged Disks, which are the traditional disks used for VMs, you
    needed to create a storage account manually and then select that storage account
    when you created the VM. With Managed Disks, this burden is handled for you by
    Azure. You select the disk type and the performance tier (Standard or Premium),
    and the managed disk is created. It also handles scaling automatically for you.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 托管磁盘在[第1章](401f72d0-a2a1-4c62-880e-43739e3daa5d.xhtml)中有所介绍，*与Azure虚拟机一起使用*，它为您处理存储帐户的创建。与传统的非托管磁盘不同，后者用于虚拟机时，您需要手动创建存储帐户，然后在创建虚拟机时选择该帐户。使用托管磁盘时，Azure为您处理这一负担。您只需选择磁盘类型和性能层（标准或高级），托管磁盘即会自动创建，并且会自动处理扩展。
- en: Managed Disks are recommended by Microsoft over Unmanaged Disks.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 微软推荐使用托管磁盘而非非托管磁盘。
- en: StorSimple
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: StorSimple
- en: '**StorSimple** is an integrated storage solution that spans across on-premises
    environments and cloud storage. It answers a lot of storage problems, such as
    data growth, capacity management, backup, archiving, and disaster recovery, by
    offering a hybrid solution, which consists of a cloud integrated storage system
    and Azure Cloud Storage.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**StorSimple**是一个集成的存储解决方案，跨越本地环境和云存储。它通过提供一个混合解决方案，解决了许多存储问题，如数据增长、容量管理、备份、归档和灾难恢复，该解决方案由一个集成的云存储系统和Azure云存储组成。'
- en: With StorSimple, you can store your active data on the on-premises storage system,
    which offers lower latency and high throughput. Database files are a part of active
    data for instance. Data that is less active such as documents, SharePoint files,
    archive data, and VM storage are more suitable for cloud storage. Using StorSimple,
    you can put that data in Azure Cloud Storage.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 使用StorSimple，您可以将活动数据存储在本地存储系统中，提供更低的延迟和更高的吞吐量。例如，数据库文件是活动数据的一部分。较少活跃的数据，如文档、SharePoint文件、归档数据和虚拟机存储，更适合存储在云中。通过使用StorSimple，您可以将这些数据存储在Azure云存储中。
- en: StorSimple supports iSCSI and SMB to connect to your data, and compared to more
    affordable Cloud Storage, it eliminates redundant data and compresses it to reduce
    costs. You can use Azure Premium storage in conjunction with StorSimple for higher
    performance and reduced latency.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple支持iSCSI和SMB连接到您的数据，与更经济的云存储相比，它消除了冗余数据并对其进行压缩以减少成本。您可以结合使用Azure Premium存储和StorSimple，以获得更高的性能和更低的延迟。
- en: To accomplish this, StorSimple offers the following storage area network (SAN)
    solutions, StorSimple Virtual Array and StorSimple 8000 Series.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 为实现这一目标，StorSimple提供以下存储区域网络（SAN）解决方案：StorSimple虚拟阵列和StorSimple 8000系列。
- en: StorSimple Virtual Array
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: StorSimple虚拟阵列
- en: The StorSimple Virtual Array runs on your existing hypervisor infrastructure
    on your on-premises environment. It manages the storage across the on-premises
    environment and Azure Cloud Storage. It also provides cloud backup, fast restore,
    disaster recovery features, and item-level recovery. It supports Hyper-V 2008
    R2 and higher and VMWare 5.5 and higher.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple虚拟阵列运行在您现有的本地虚拟化平台基础设施上，管理本地环境和Azure云存储之间的存储。它还提供云备份、快速恢复、灾难恢复功能和项目级恢复。它支持Hyper-V
    2008 R2及更高版本，以及VMWare 5.5及更高版本。
- en: 'The StorSimple Virtual Array is the most cost-effective StorSimple solution
    because it offers a download that can be installed on a virtual machine on Hyper-V
    or VMWare inside your data center or office. It can then be configured as an iSCSI
    server (SAN) or a file server (NAS). It can be managed from the StorSimple Manager
    service inside the Azure Portal:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple虚拟阵列是最具性价比的StorSimple解决方案，因为它提供了一个可以安装在Hyper-V或VMWare虚拟机上的下载版，部署在您的数据中心或办公室中。然后，它可以被配置为iSCSI服务器（SAN）或文件服务器（NAS）。可以通过Azure门户中的StorSimple
    Manager服务进行管理：
- en: '![](img/b8ac6547-66c2-499b-b504-2716e4718848.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b8ac6547-66c2-499b-b504-2716e4718848.png)'
- en: StorSimple Virtual Array
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple虚拟阵列
- en: For more information about the StorSimple Virtual Array, you can refer to [https://docs.microsoft.com/en-us/azure/storsimple/storsimple-ova-overview](https://docs.microsoft.com/en-us/azure/storsimple/storsimple-ova-overview).
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 若想了解更多关于StorSimple虚拟阵列的信息，请参考[https://docs.microsoft.com/zh-cn/azure/storsimple/storsimple-ova-overview](https://docs.microsoft.com/zh-cn/azure/storsimple/storsimple-ova-overview)。
- en: StorSimple 8000 Series
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: StorSimple 8000系列
- en: With the StorSimple 8000 Series, Microsoft offers a physical device that can
    be leased and installed inside your on-premises environment. It uses SSD drives
    for the most active data, HDD drives for data that is used less frequently, and
    it stores archival data inside Azure Cloud Storage. It also offers redundant controllers
    to manage the storage tiering and automatic failover.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 StorSimple 8000 系列，微软提供了一种可以租赁并安装在本地环境中的物理设备。它为最活跃的数据使用 SSD 硬盘，为使用频率较低的数据使用
    HDD 硬盘，并将归档数据存储在 Azure 云存储中。它还提供冗余控制器来管理存储分层和自动故障切换。
- en: 'The StorSimple storage array is installed inside the on-premises environment
    and offers iSCSI access. It can connect with other SAN storage devices inside
    the network (up to six network ports). It uses the Virtual Appliance Manager to
    replicate data to Azure Cloud Storage. The Virtual Appliance Manager is installed
    inside an Azure VM. It can provide an iSCSI interface to virtual machines in Azure
    as well. The StorSimple Manager helps you manage the data from the Azure Portal.
    It can also manage your snapshots, which are stored on-premises. The Snapshot
    Manager is a **Microsoft Management Console** (**MMC**) snap-in which runs on
    a Windows-Server based host:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple 存储阵列安装在本地环境中，并提供 iSCSI 访问。它可以与网络中的其他 SAN 存储设备连接（最多支持六个网络端口）。它使用虚拟设备管理器将数据复制到
    Azure 云存储。虚拟设备管理器安装在 Azure 虚拟机中，也可以为 Azure 中的虚拟机提供 iSCSI 接口。StorSimple 管理器帮助你通过
    Azure 门户管理数据，它还可以管理存储在本地的快照。快照管理器是 **Microsoft 管理控制台** (**MMC**) 的一个插件，运行在基于 Windows
    Server 的主机上：
- en: '![](img/afc63ef7-71bf-469b-abe1-036adbe88771.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/afc63ef7-71bf-469b-abe1-036adbe88771.png)'
- en: StorSimple 8000 Series
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple 8000 系列
- en: The StorSimple 8000 Series offers Windows PowerShell for StorSimple and a StorSimple
    adapter for SharePoint.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: StorSimple 8000 系列提供了用于 StorSimple 的 Windows PowerShell 和 SharePoint 的 StorSimple
    适配器。
- en: For more information about the StorSimple 8000 Series, you can refer to [https://docs.microsoft.com/en-us/azure/storsimple/storsimple-overview](https://docs.microsoft.com/en-us/azure/storsimple/storsimple-overview).
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 若想了解更多关于 StorSimple 8000 系列的信息，可以参考 [https://docs.microsoft.com/en-us/azure/storsimple/storsimple-overview](https://docs.microsoft.com/en-us/azure/storsimple/storsimple-overview)。
- en: Cosmos DB Storage
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cosmos DB 存储
- en: Cosmos DB (former DocumentDB) storage is the premium offering for Azure Table
    Storage. It's a multimodel and globally distributed database service which is
    designed to horizontally scale and replicate your data to any number of Azure
    regions. By replicating and scaling the data, Cosmos DB can guarantee low latency,
    high availability, and high performance anywhere in the world. You can replicate
    or scale data easily inside the Azure Portal by selecting the available regions
    on the map.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Cosmos DB（前身为 DocumentDB）存储是 Azure 表存储的高级服务。它是一个多模型、全球分布的数据库服务，旨在水平扩展并将数据复制到任何数量的
    Azure 区域。通过复制和扩展数据，Cosmos DB 可以确保全球任何地方的低延迟、高可用性和高性能。你可以通过在 Azure 门户中选择地图上的可用区域，轻松地复制或扩展数据。
- en: '![](img/c2b60a7e-dc00-4d04-a677-0decfd3767e1.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c2b60a7e-dc00-4d04-a677-0decfd3767e1.jpg)'
- en: Scaling and replicating data inside the Azure Portal
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure 门户中扩展和复制数据
- en: This high availability and low latency makes Cosmos DB most suitable for mobile
    applications, games, and applications that need to be globally distributed. The
    Azure Portal also uses Cosmos DB for data storage.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这种高可用性和低延迟使得 Cosmos DB 最适合用于移动应用、游戏以及需要全球分布的应用程序。Azure 门户也使用 Cosmos DB 进行数据存储。
- en: 'Cosmos DB is completely schema-less, and you can use a number of existing APIs
    with available SDKs to communicate with it. So, if you are using a specific API
    for your data and you want to move your data to Cosmos DB, all you need to do
    is change the connection string inside your application and the data is stored
    in Cosmos DB automatically. Cosmos DB supports the following APIs for storing
    and interacting with your data:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: Cosmos DB 完全无模式，你可以使用多种现有的 API 和可用的 SDK 与其进行通信。因此，如果你正在使用特定的 API 来处理你的数据，并且希望将数据迁移到
    Cosmos DB，只需在应用程序中更改连接字符串，数据便会自动存储在 Cosmos DB 中。Cosmos DB 支持以下 API 来存储和与数据交互：
- en: '**SQL API**: With the SQL API, you can use SQL queries as a JSON query language against
    the dataset inside Cosmos DB. Because Cosmos DB is schema-less, it provides autoindexing
    of the JSON documents. Data is stored on SSD drives for low latency, and it is
    lock-free, so you can create real-time queries for your data. Cosmos DB also supports
    writing stored procedures, triggers, and user-defined functions (UDFs) in JavaScript
    and it supports ACID transactions inside a collection.'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SQL API**：通过 SQL API，您可以使用 SQL 查询作为针对 Cosmos DB 内数据集的 JSON 查询语言。由于 Cosmos
    DB 无模式，它提供 JSON 文档的自动索引。数据存储在 SSD 驱动器上，以确保低延迟，并且它是无锁的，因此您可以为数据创建实时查询。Cosmos DB
    还支持使用 JavaScript 编写存储过程、触发器和用户定义函数（UDF），并且在集合内支持 ACID 事务。'
- en: '**MongoDB API**: MongoDB is an open source document database that provides
    high performance, high availability, and automatic scaling by default. Using it
    inside Cosmos DB provides automatic sharding, indexing, replication, and encryption
    of your data on top of this. MongoDB also provides an aggregation pipeline which
    can be used to filter and transform the data in multiple stages. It also supports
    creating a full-text index, and you can integrate it easily with Azure Search
    and other Azure services as well.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MongoDB API**：MongoDB 是一个开源文档数据库，默认提供高性能、高可用性和自动扩展。在 Cosmos DB 内使用它时，提供自动分片、索引、复制和数据加密。MongoDB
    还提供一个聚合管道，可用于在多个阶段过滤和转换数据。它还支持创建全文索引，并且可以轻松与 Azure Search 和其他 Azure 服务集成。'
- en: '**Gremlin (Graph) API**: The Gremlin API is part of the Apache TinkerPop project,
    which is an open source Graph computing framework. A Graph is a way of storing
    objects (nodes) based on relationships. Each object can have multiple relations
    with other objects. You can interact with the data using JavaScript.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Gremlin（图形）API**：Gremlin API 是 Apache TinkerPop 项目的一部分，这是一个开源图计算框架。图形是一种基于关系存储对象（节点）的方法。每个对象可以与其他对象有多个关系。您可以使用
    JavaScript 与数据进行交互。'
- en: '**Table API**: The Azure Table API can be used for applications that are written
    for using Azure Table Storage, but need the premium features, such as global distribution,
    automatic indexing, low latency, and high throughput.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Table API**：Azure Table API 可用于针对 Azure Table Storage 编写的应用程序，但需要一些高级功能，如全球分布、自动索引、低延迟和高吞吐量。'
- en: '**Cassandra API**: The Cassandra API can be used for applications that are
    written for Apache Cassandra. Apache Cassandra is an open source distributed NoSQL
    database that offers scalability and high availability. Cosmos DB offers no operations
    management, SLA, and automatic indexing on top of this.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Cassandra API**：Cassandra API 可用于针对 Apache Cassandra 编写的应用程序。Apache Cassandra
    是一个开源分布式 NoSQL 数据库，提供可扩展性和高可用性。Cosmos DB 在此基础上提供了无操作管理、SLA 和自动索引功能。'
- en: In the future, new APIs will be added to Cosmos DB as well.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 未来，Cosmos DB 还将新增新的 API。
- en: '![](img/53f98866-e9c6-4186-be5e-3d1c42e63855.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](img/53f98866-e9c6-4186-be5e-3d1c42e63855.png)'
- en: Multi-model APIs available for Cosmos DB
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: Cosmos DB 可用的多模型 API
- en: If you want to get started with developing applications using one of these multimodel
    APIs, you can refer to [https://docs.microsoft.com/en-us/azure/cosmos-db/](https://docs.microsoft.com/en-us/azure/cosmos-db/).
    There are a lot of examples for multiple programming languages available there.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想开始使用这些多模型 API 开发应用程序，可以参考 [https://docs.microsoft.com/en-us/azure/cosmos-db/](https://docs.microsoft.com/en-us/azure/cosmos-db/)。那里有多个编程语言的示例。
- en: Azure Search
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 搜索
- en: Azure Search is an Azure service that provides a rich search experience over
    content stored in Azure SQL Database, Azure Cosmos DB, and Azure Blob Storage.
    For Azure Blob Storage, it supports indexing for multiple file formats, such as
    CSV, JSON, plain text files, RTF, EML, ZIP, XML, HTML, various Microsoft Office
    formats, and PDF.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Search 是一个 Azure 服务，提供对存储在 Azure SQL 数据库、Azure Cosmos DB 和 Azure Blob
    存储中的内容进行丰富搜索的体验。对于 Azure Blob 存储，它支持对多种文件格式进行索引，例如 CSV、JSON、纯文本文件、RTF、EML、ZIP、XML、HTML、各种
    Microsoft Office 格式和 PDF。
- en: It offers full text search and text analysis, linguistic analysis with analyzers
    in 56 languages, geo-search, user experience features, such as search suggestions,
    paging, sorting, and hit highlighting, and monitoring and reporting features.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 它提供全文搜索和文本分析，支持 56 种语言的分析器进行语言学分析，地理搜索，用户体验功能，如搜索建议、分页、排序、命中高亮显示，以及监控和报告功能。
- en: Azure Search uses partitions for storing search indexes and for providing I/O
    for read/write operations. Azure Search offers different service tiers which can
    be combined inside a tenant. The different tiers offer different amounts of storage
    capacity and scalability. For the more expensive service tiers, multiple instances
    of the search service can be created, which are named replicas.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Search 使用分区来存储搜索索引并提供读/写操作的 I/O。Azure Search 提供不同的服务层级，可以在一个租户内进行组合。这些不同的服务层级提供不同的存储容量和可扩展性。对于更昂贵的服务层级，可以创建多个搜索服务实例，这些实例被称为副本。
- en: 'Azure Search offers the following service tiers:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Search 提供以下服务层级：
- en: '**Free**: This offers a shared service with other tenants in Azure. It offers
    50 MB of storage, a maximum of 3 indexes per service up to 10,000 documents each,
    and it cannot scale out.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**免费版**：该服务与 Azure 中的其他租户共享。它提供50 MB的存储空间，每个服务最多可以有3个索引，每个索引最多包含10,000个文档，并且无法进行扩展。'
- en: '**Basic**: This offers a dedicated service with 2 GB of storage and a maximum
    of 5 indexes per service. You can scale up to 3 search units per service (1 partition
    and 3 replicas).'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础版**：该服务提供2 GB的存储空间，并且每个服务最多可有5个索引。您可以将每个服务的搜索单元扩展至最多3个（1个分区和3个副本）。'
- en: '**Standard S1**: This offers a dedicated service with 25 GB of storage and a
    maximum of 50 indexes per service. You can scale up to 36 search units per service
    (12 partitions and 12 replicas).'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准 S1**：此层提供25 GB的存储空间，并且每个服务最多可有50个索引。您可以将每个服务的搜索单元扩展至最多36个（12个分区和12个副本）。'
- en: '**Standard S2**: This offers the Standard S1 features but with 100 GB of storage
    and a maximum of 200 indexes per service on top of it.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准 S2**：此层提供与标准 S1 相同的功能，但存储空间为100 GB，并且每个服务最多可以有200个索引。'
- en: '**Standard S3**: This offers 200 GB of storage and all the Standard S2 features.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准 S3**：此层提供200 GB的存储空间，并包含所有标准 S2 功能。'
- en: '**Standard HD**: This is an option that can be enabled for Standard S3 pricing
    tiers. On top of all the features that Standard S3 provides, you can have a maximum
    of 1,000 indexes per service.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准 HD**：这是一个可以为标准 S3 定价层启用的选项。在标准 S3 提供的所有功能的基础上，您可以每个服务最多有1,000个索引。'
- en: It is recommended that you always provision a free search service tier per subscription,
    so it can be used for testing or for lightweight searches. You can then create
    other Search Services next to it for production workloads.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 建议您每个订阅都始终配置一个免费的搜索服务层级，这样它可以用于测试或轻量级搜索。然后，您可以在其旁边创建其他搜索服务以处理生产工作负载。
- en: For more information about the available SKUs for Azure Search, you can refer
    to [https://docs.microsoft.com/en-us/azure/search/search-sku-tier](https://docs.microsoft.com/en-us/azure/search/search-sku-tier).
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 欲了解更多关于 Azure Search 可用 SKU 的信息，您可以参考[https://docs.microsoft.com/en-us/azure/search/search-sku-tier](https://docs.microsoft.com/en-us/azure/search/search-sku-tier)。
- en: Summary
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered the designing data implementations objective. We
    covered the different storage solutions that are available in Azure and when to
    use them. We also covered designing for NoSQL Storage and when to use the different
    Azure services such as Azure Table Storage and Cosmos DB. Finally, we briefly
    covered Azure Search.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们讨论了数据实现设计的目标。我们介绍了 Azure 中可用的不同存储解决方案以及何时使用它们。我们还讲解了 NoSQL 存储的设计，以及何时使用不同的
    Azure 服务，例如 Azure 表存储和 Cosmos DB。最后，我们简要介绍了 Azure Search。
- en: The next chapter will cover scalable data implementations.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将介绍可扩展的数据实现。
- en: Questions
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: Answer the following questions to test your knowledge of the information in
    this chapter. You can find the answers in the *Assessments* section at the end
    of this book.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 请回答以下问题，以测试您对本章内容的理解。您可以在本书最后的*评估*部分找到答案。
- en: Is Cosmos DB more suitable for gaming applications than Azure Table Storage?
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Cosmos DB 是否比 Azure 表存储更适合用于游戏应用？
- en: 'Yes'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是
- en: Can you use Azure Search with Azure Data Factory to search for data?
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您能否将 Azure Search 与 Azure Data Factory 一起使用来搜索数据？
- en: 'Yes'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是
- en: You want to create a Graph database in Cosmos DB. Is the MongoDB API the appropriate
    API for this to leverage in your custom applications?
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您想在 Cosmos DB 中创建图形数据库。MongoDB API 是否适合在您的自定义应用程序中使用？
- en: 'Yes'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是
- en: Further reading
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'You can check the following links for more information about the topics that
    are covered in this chapter:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过以下链接查看更多关于本章涵盖主题的信息：
- en: '**Azure Storage Account Options**: [https://docs.microsoft.com/en-us/azure/storage/common/storage-account-options](https://docs.microsoft.com/en-us/azure/storage/common/storage-account-options)'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 存储帐户选项**: [https://docs.microsoft.com/en-us/azure/storage/common/storage-account-options](https://docs.microsoft.com/en-us/azure/storage/common/storage-account-options)'
- en: '**Azure Storage replication**: [https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy)'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 存储复制**: [https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy)'
- en: '**Azure Table Storage overview**: [https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-overview](https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-overview)'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 表存储概述**: [https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-overview](https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-overview)'
- en: '**Introduction to Azure Files**: [https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction](https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction)'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 文件简介**: [https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction](https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction)'
- en: '**About disks storage for Azure Windows VMs**: [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds)'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**关于 Azure Windows 虚拟机的磁盘存储**: [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds)'
- en: '**StorSimple Documentation**: [https://docs.microsoft.com/en-us/azure/storsimple/](https://docs.microsoft.com/en-us/azure/storsimple/)'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**StorSimple 文档**: [https://docs.microsoft.com/en-us/azure/storsimple/](https://docs.microsoft.com/en-us/azure/storsimple/)'
- en: '**Welcome to Azure Cosmos DB**: [https://docs.microsoft.com/en-us/azure/cosmos-db/introduction](https://docs.microsoft.com/en-us/azure/cosmos-db/introduction)'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**欢迎使用 Azure Cosmos DB**: [https://docs.microsoft.com/en-us/azure/cosmos-db/introduction](https://docs.microsoft.com/en-us/azure/cosmos-db/introduction)'
- en: '**Azure Search Documentation**: [https://docs.microsoft.com/en-us/azure/search/](https://docs.microsoft.com/en-us/azure/search/)'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 搜索文档**: [https://docs.microsoft.com/en-us/azure/search/](https://docs.microsoft.com/en-us/azure/search/)'
