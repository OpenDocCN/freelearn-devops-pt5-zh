- en: Azure Active Directory - Identity in the Cloud
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure Active Directory - 云中的身份
- en: We already have applications and data in Azure, and the connection between our
    local network and Azure is up and running. But what about authentication and authorization?
    How can we manage permissions and access for our users? The answer to all these
    questions is an **Azure Active Directory** (**AAD**) that allows us to set up
    a cloud-based identity authentication which, along with **Azure role-based access
    control** (**RBAC**), allows us to authenticate users and allow them access to
    specific resources.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经在 Azure 中有了应用程序和数据，本地网络与 Azure 之间的连接也已建立。但是身份验证和授权怎么办？我们如何管理用户的权限和访问？所有这些问题的答案是
    **Azure Active Directory** (**AAD**)，它允许我们设置基于云的身份认证，并且结合 **Azure 基于角色的访问控制**
    (**RBAC**)，可以进行用户身份验证并允许他们访问特定资源。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: The Azure Active Directory
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Active Directory
- en: Syncing local AD with AAD
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将本地 AD 与 AAD 同步
- en: Managing users and applications in AAD
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 AAD 中管理用户和应用程序
- en: Technical requirements
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'For this chapter, you''ll need the following:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章需要以下内容：
- en: An Azure subscription
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 Azure 订阅
- en: A local server running a Windows Server 2012 R2 or later, with the domain controller
    role installed
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一台运行 Windows Server 2012 R2 或更高版本的本地服务器，已安装域控制器角色
- en: The Azure Active Directory
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure Active Directory
- en: AAD is a cloud-based directory and identity management service that provides application
    access management and identity protection. It's often referred to as IaaS.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: AAD 是一种基于云的目录和身份管理服务，提供应用访问管理和身份保护。它通常被称为 IaaS（基础设施即服务）。
- en: We already mentioned this, but let's review it anyway. AAD is at the top level
    of the Azure management chain and it's directly tied to the tenant. Under the
    tenant, we can have multiple subscriptions, under subscriptions multiple resource
    groups, and under resource groups multiple resources.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经提到过这个，但还是要再回顾一下。AAD 处于 Azure 管理链的最上层，并且直接与租户相关联。在租户下，我们可以拥有多个订阅，每个订阅下有多个资源组，每个资源组下有多个资源。
- en: A single account can have access to multiple tenants but each tenant is isolated.
    When a user signs in, the default directory and tenant is selected. Only resources
    that are under subscriptions under that tenant are available. In order to manage
    resources in another tenant, we must switch the directory.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 单个帐户可以访问多个租户，但每个租户都是隔离的。当用户登录时，会选择默认目录和租户。仅可访问该租户下订阅中的资源。若要管理其他租户中的资源，我们必须切换目录。
- en: 'AAD comes in four tiers:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: AAD 有四个版本：
- en: Azure Active Directory Free
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Active Directory 免费版
- en: Azure Active Directory Basic
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Active Directory 基本版
- en: Azure Active Directory Premium P1
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Active Directory Premium P1
- en: Azure Active Directory Premium P2
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Active Directory Premium P2
- en: Azure Active Directory Basic offers cloud-centric application access and self-service
    identity management solutions with group-based access management, self-service
    password reset for cloud applications, and the AAD Application Proxy.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Active Directory 基本版提供基于云的应用访问和自助身份管理解决方案，包括基于组的访问管理、云应用的自助密码重置以及 AAD
    应用代理。
- en: The premium tiers offer additional features and enterprise-grade management
    tools such as dynamic groups, self-service group management, and Microsoft identity
    management (P1) or identity protection and privileged identity management (P2).
    Azure Active Directory Premium P2 contains all the features of P1 plus identity
    protection and privileged identity management.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 高级版本提供了额外的功能和企业级管理工具，如动态组、自助组管理和 Microsoft 身份管理（P1），或身份保护和特权身份管理（P2）。Azure Active
    Directory Premium P2 包含所有 P1 的功能，并增加了身份保护和特权身份管理。
- en: Here, we are going to focus on features that are covered by the Azure Active
    Directory Free tier. The free tier is limited to 500.000 directory objects and
    supports a limited set of features but allows for user/group management, syncing
    on-premises directories to Azure, and basic security reports. It will be sufficient
    to provide general images and to introduce AAD. Including all features provided
    by all AAD tiers would probably result in a separate book and would be too much
    to cover when discussing Azure administration in general.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将重点关注由 Azure Active Directory 免费版提供的功能。免费版的目录对象数量限制为 500,000，支持的功能集较为有限，但允许进行用户/组管理、将本地目录同步到
    Azure 以及基本的安全报告。它足以提供一般性的图像并介绍 AAD。涵盖所有 AAD 版本提供的功能可能会导致一本单独的书籍，且讨论 Azure 管理时会过于冗长。
- en: Creating a new directory
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建新目录
- en: Even though AAD will probably exist if an Azure subscription is in place, let's
    start by creating a new AAD (a new tenant).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 即使AAD在Azure订阅存在的情况下可能已经存在，还是从创建一个新的AAD（一个新的租户）开始吧。
- en: 'To create a new directory, we need to provide an Organization name, Initial
    domain name, and Country or region. Note that the initial domain name will be
    used to form an initial domain using `yourdomain.onmicrosoft.com`. The domain
    must be unique and can be customized for your custom domain later. An example
    of the settings is shown in the following screenshot:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个新目录，我们需要提供组织名称、初始域名和国家或地区。请注意，初始域名将用于创建一个初始域名，格式为`yourdomain.onmicrosoft.com`。域名必须是唯一的，之后可以为您的自定义域名进行自定义。以下截图显示了设置的示例：
- en: '![](img/eb2fc123-0277-467c-a0e1-0dc7827bc2ea.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb2fc123-0277-467c-a0e1-0dc7827bc2ea.png)'
- en: 'Creating a new directory takes about 1 minute. After the new directory is created,
    you need to switch directories in order to manage it. Note that the directory
    name is located under your profile. To change the directory, click on the Directory
    menu to the left of your profile and select directory from the list; it will open,
    as shown here:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个新目录大约需要1分钟。新目录创建后，您需要切换目录才能进行管理。请注意，目录名称位于您的个人资料下方。要更改目录，请点击个人资料左侧的“目录”菜单，并从列表中选择目录；它将会打开，如下所示：
- en: '![](img/ceaefd0f-6b76-4778-9bd5-1cd01e8a842a.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ceaefd0f-6b76-4778-9bd5-1cd01e8a842a.png)'
- en: 'After you switch the directory, you will be in a new tenant. If you created
    a new directory, the tenant will be empty and no subscriptions will be assigned.
    To start creating Azure resources, you must create a new subscription under this
    tenant. The only thing that you can manage in an empty tenant is AAD. The Overview
    and Manage options for Azure Active Directory Free are shown in the following
    screenshot:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在切换目录后，您将进入一个新租户。如果您创建了一个新的目录，该租户将是空的，并且不会分配任何订阅。要开始创建Azure资源，您必须在此租户下创建一个新订阅。在空的租户中，您唯一可以管理的是AAD。Azure
    Active Directory Free的概览和管理选项如以下截图所示：
- en: '![](img/2c930d86-b398-409a-ae4b-9ac76df5b692.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2c930d86-b398-409a-ae4b-9ac76df5b692.png)'
- en: Customizing your domain
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自定义您的域名
- en: 'The first thing we need to customize is the domain name. In order to add a
    custom domain to your directory, you need to enter a Custom domain name, which
    is actually a public domain that you own. For example, I''m going to use my domain, `azuresecurity.cloud`:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要自定义的第一件事是域名。为了将自定义域添加到您的目录，您需要输入一个自定义域名，它实际上是您拥有的公共域名。例如，我将使用我的域名，`azuresecurity.cloud`：
- en: '![](img/5e2419bf-9195-4022-abc6-04c71bc738ec.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5e2419bf-9195-4022-abc6-04c71bc738ec.png)'
- en: 'After the custom domain is added, the domain needs to be verified, or to be
    more precise, domain ownership needs to be verified. In order to verify domain
    ownership, you need to input a TXT or MX record into your domain name register.
    An example for the TXT records is shown here:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在添加自定义域名后，需要验证该域名，或者更准确地说，需要验证域名的所有权。为了验证域名所有权，您需要在域名注册商中输入TXT或MX记录。TXT记录的示例如下：
- en: '![](img/f576a379-de3e-4363-b5dc-099ecbbf43e8.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f576a379-de3e-4363-b5dc-099ecbbf43e8.png)'
- en: 'After you input records and press the Verify button, you might receive an error.
    DNS records may need up to 72 hours to propagate changes. The time depends on
    the DNS you''re using but usually, it doesn''t take more than 30 minutes to propagate
    changes. If the changes aren''t propagated yet, you''ll receive error, as shown
    in the following screenshot:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在输入记录并点击“验证”按钮后，您可能会收到错误。DNS记录可能需要最多72小时才能传播更改。传播时间取决于您使用的DNS，但通常不会超过30分钟。如果更改尚未传播，您将收到错误，如下图所示：
- en: '![](img/25b828e5-7d49-47dd-a074-68e93e76e802.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/25b828e5-7d49-47dd-a074-68e93e76e802.png)'
- en: 'After changes are propagated and verification passes, you''ll receive a message stating
    that verification has passed. You''ll be offered two additional options—make this
    domain primary, and download Azure AD Connect. We''ll ignore Azure AD Connect
    for now, but I recommend making the custom domain primary. This way, the custom
    domain will become the primary and the preferred domain suffix. Instead of the
    default username being `username@yourdomain.onmicrosoft.com`, it will become `username@yourdomain.com`.
    As in the preceding example, instead of `username@azuresecuritycloud.onmicrosoft.com`,
    the new username will be `username@azuresecurity.cloud`. A screenshot showing
    a verified custom domain is shown after you''ve done this:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在变更传播并且验证通过后，您将收到一条消息，说明验证已通过。系统会提供两个额外选项——将此域设为主域，并下载 Azure AD Connect。我们现在忽略
    Azure AD Connect，但我建议将自定义域设为主域。这样，自定义域将成为主域并成为首选域后缀。默认的用户名 `username@yourdomain.onmicrosoft.com`
    将变成 `username@yourdomain.com`。如前面的示例所示，`username@azuresecuritycloud.onmicrosoft.com`
    将变为 `username@azuresecurity.cloud`。下面是验证过的自定义域截图：
- en: '![](img/007385c9-a3a1-41fb-9dd9-e05958936472.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](img/007385c9-a3a1-41fb-9dd9-e05958936472.png)'
- en: Syncing AAD with on-premises AD
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 同步 AAD 与本地 AD
- en: We have a new directory in place; we can start adding users and assigning them
    access rights. But there is a good chance that we already have an identity solution
    in an on-premises environment and that users already have one identity in place.
    Providing users with an additional identity can cause issues and confusion. Users
    will have problems detecting when to use which account, and if the same or a similar
    account is created, users will start typing in the password for the wrong account...
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经建立了一个新的目录，现在可以开始添加用户并为他们分配访问权限。但很可能我们已经在本地环境中有一个身份解决方案，并且用户已经有了一个身份。如果为用户提供额外的身份可能会导致问题和混淆。用户将遇到问题，无法确定何时使用哪个账户，如果创建了相同或相似的账户，用户会开始输入错误账户的密码……
- en: Fortunately, with AAD, we can use Azure AD Connect, and that will allow us to
    sync accounts from on-premises AD to Azure and allow users to use the same account
    for everything. This will make things easier for everyone; users will not have
    to think about which account they will use (as it's the same account) and admins
    will have less issues to resolve (less accounts to manage and less users blocking
    their account with wrong password attempts).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，通过 AAD，我们可以使用 Azure AD Connect，这将允许我们将账户从本地 AD 同步到 Azure，并让用户使用相同的账户进行一切操作。这将使每个人的工作变得更轻松；用户不必再考虑使用哪个账户（因为是同一个账户），管理员也会减少解决问题的数量（账户更少，用户因错误密码尝试而锁定账户的情况也减少）。
- en: Additionally, with Azure AD Connect, we can implement **single sign-on** (**SSO**),
    which will allow users to access Azure and on-premises resources with the single
    sign-in process. The user is asked to enter their credentials once, and the same
    credentials are used to access everything that the user has access to.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，通过 Azure AD Connect，我们可以实现**单点登录**（**SSO**），这样用户可以通过单次登录过程访问 Azure 和本地资源。用户只需输入一次凭据，相同的凭据就可以用来访问所有他们有权限访问的内容。
- en: 'In order to start syncing with the local AD, we need to go to the Azure AD
    Connect blade in AAD. Here, we can see the current sync status. If sync isn''t
    enabled yet, you will also have the download link for the Azure AD Connect client,
    as you can see here:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 为了开始与本地 AD 同步，我们需要进入 Azure AD Connect 面板。在这里，我们可以查看当前的同步状态。如果同步尚未启用，您还会看到 Azure
    AD Connect 客户端的下载链接，正如您在这里所看到的：
- en: '![](img/09e028d2-7b52-4744-b5e3-5a38ca8a4ac7.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/09e028d2-7b52-4744-b5e3-5a38ca8a4ac7.png)'
- en: Installing Azure AD Connect
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Azure AD Connect
- en: Azure AD Connect must be installed on a server in your on-premises environment.
    It's recommended that you use a server without a domain controller role but with
    access to a domain controller. A server with Azure AD Connect must have access
    to the internet as it will need the internet to sync information between on-premises
    AD and AAD. All traffic going over Azure AD Connect is encrypted and secure.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD Connect 必须安装在本地环境中的一台服务器上。建议您使用一台没有域控制器角色但可以访问域控制器的服务器。安装 Azure AD
    Connect 的服务器必须能够连接互联网，因为它需要通过互联网同步本地 AD 和 AAD 之间的信息。所有通过 Azure AD Connect 传输的流量都是加密和安全的。
- en: 'The installation wizard is very intuitive and explains every step of the process;
    you just need to follow the guidelines (and understand the local AD structure).
    A screenshot of the first screen in the installation process, explaining what
    the tool will do, is shown here:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 安装向导非常直观，并解释了每个步骤；您只需要按照指南操作（并理解本地 AD 结构）。以下截图展示了安装过程中的第一个屏幕，解释了工具将执行的操作：
- en: '![](img/835d9445-2a76-4736-9545-884fb566c7d6.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/835d9445-2a76-4736-9545-884fb566c7d6.png)'
- en: The first choice you need to make is whether you want to use express or custom
    settings. If you select Use express settings, all features are determined in advance.
    The installation will use the default installation path, install SQL Express,
    and use the default options for syncing, such as password hash sync, sync all
    attributes, or sync all identities across AD forest.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要做出的第一个选择是是否使用快速设置或自定义设置。如果选择使用快速设置，所有功能都会预先确定。安装将使用默认的安装路径，安装 SQL Express，并使用默认的同步选项，如密码哈希同步、同步所有属性或跨
    AD 林同步所有身份。
- en: 'An example of the Azure AD Connect express settings is shown here:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这里展示了 Azure AD Connect 快速设置的示例：
- en: '![](img/7ec86f2a-7591-4656-ab00-23d9f101ffea.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7ec86f2a-7591-4656-ab00-23d9f101ffea.png)'
- en: 'If you decide on using Customize options, some features such as the installation
    path, SQL Server instance, and sync groups can be set. For example, you can use
    an existing instance of SQL Server or you can choose to sync only specific user
    groups. Also, a new service account will be created for the sync process with
    express settings; in custom settings, you can choose an existing service account.
    An example of custom settings is shown in the following screenshot:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如果选择使用“自定义”选项，您可以设置一些功能，如安装路径、SQL Server 实例和同步组。例如，您可以使用现有的 SQL Server 实例，或选择只同步特定的用户组。另外，将为同步过程创建一个新的服务帐户，并使用快速设置；在自定义设置中，您可以选择使用现有的服务帐户。以下截图展示了自定义设置的示例：
- en: '![](img/baea5ed7-68d3-4092-aee3-98abc3491667.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](img/baea5ed7-68d3-4092-aee3-98abc3491667.png)'
- en: 'After choosing the settings, you need to provide accounts that will enable
    sync. First, you need to provide AAD credentials that have global administration
    rights. I recommend creating a separate account for this and not tying it to your
    personal account. If an admin leaves the company, there is a good chance that
    the account will be deactivated and the sync will stop. A screenshot of entering
    an AAD account is shown here:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 选择设置后，您需要提供可以启用同步的帐户。首先，您需要提供具有全局管理权限的 AAD 凭据。建议为此创建一个单独的帐户，而不是将其与个人帐户绑定。如果管理员离职，该帐户很可能会被停用，导致同步停止。以下是输入
    AAD 帐户的截图：
- en: '![](img/2029180b-4085-44ed-932d-e0589ba19bba.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2029180b-4085-44ed-932d-e0589ba19bba.png)'
- en: 'The second account you need to provide is an AD DS enterprise administrator
    account. The same goes for the local account as for the Azure one: try using a
    service account dedicated to this service, and not a personal admin account. A
    screenshot of entering an AD DS account is shown here:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要提供的第二个帐户是 AD DS 企业管理员帐户。对于本地帐户和 Azure 帐户，情况相同：建议使用专门为此服务创建的服务帐户，而不是个人管理员帐户。输入
    AD DS 帐户的截图如下所示：
- en: '![](img/dad67ea6-da4b-4bab-af67-368202117304.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dad67ea6-da4b-4bab-af67-368202117304.png)'
- en: 'Finally, you''ll get to a screen where you need to confirm the installation.
    It will again state all of the actions that will be taken and allow you to enable
    the sync process to start right after configuration is completed. You can see
    the confirmation screen in the following screenshot:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您将进入一个确认安装的屏幕。此屏幕将再次列出所有将要执行的操作，并允许您在配置完成后启用同步过程的启动。您可以在以下截图中看到确认屏幕：
- en: '![](img/e63181db-dd29-4a67-aa22-3d507b750adf.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e63181db-dd29-4a67-aa22-3d507b750adf.png)'
- en: 'After the installation completes, you will be provided with a status report
    with recommendations as to what else should be done. For example, in my domain,
    Active Directory Recycle Bin is not enabled. The process will detect this setting
    and suggest that you enable it, as shown in the following screenshot:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，系统会提供一个状态报告，并给出建议，告诉你还需要做些什么。例如，在我的域中，未启用 Active Directory 回收站。此过程将检测到这一设置，并建议你启用它，如下图所示：
- en: '![](img/35e139af-958f-4527-afec-b2366ac188aa.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/35e139af-958f-4527-afec-b2366ac188aa.png)'
- en: 'In the Azure Portal, under the Azure AD Connect blade, you will see the new
    status. The link for Azure AD Connect is gone and you can see that sync is enabled
    and that the `Last sync` was `Less than 1 hour ago`. Depending on the on-premises
    environment, you can also have a federation, SSO, and some other settings. An
    example of a synced directory is shown in the following screenshot:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在Azure门户中，在Azure AD Connect选项卡下，您将看到新的状态。Azure AD Connect的链接消失了，您可以看到同步已启用，并且`最后同步`是`不到1小时前`。根据本地环境，您还可以配置联合身份验证、单点登录（SSO）和一些其他设置。以下截图展示了一个已同步目录的示例：
- en: '![](img/5b80a15c-e239-4fcd-b66e-8c3f1cf3d818.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5b80a15c-e239-4fcd-b66e-8c3f1cf3d818.png)'
- en: Managing AAD
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理AAD
- en: 'After the sync is completed, all synced users will be present in AAD. In AAD,
    accounts can be from two different sources: AAD and Windows Service AD. Accounts
    with a Windows Server AD source are accounts that have been synced from the local
    Active Directory. AAD accounts exist only in AAD and these accounts are created
    in Azure. There is a third type of account, that is, a Microsoft Account. These
    accounts are actually Microsoft Live Accounts that can be added to your AAD.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 同步完成后，所有同步的用户将出现在AAD中。在AAD中，帐户可以来自两个不同的来源：AAD和Windows服务AD。来自Windows Server AD来源的帐户是已从本地Active
    Directory同步的帐户。AAD帐户仅存在于AAD中，这些帐户是在Azure中创建的。还有第三种类型的帐户，即Microsoft帐户。这些帐户实际上是Microsoft
    Live帐户，可以添加到您的AAD中。
- en: 'The USER TYPE in AAD can be a `Member` or a `Guest`. Members are accounts in
    AAD (with your domain name) and guests are accounts that are coming from other
    AAD or Microsoft Live Accounts. The only exception is that a Microsoft Live Account
    can be a member of your AAD when that account was used to create AAD. The same
    thing applies to external AAD accounts (AAD accounts from outside your tenant);
    these can only have member status when that account is used to create a new tenant.
    An example of a member list is shown in the following screenshot:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: AAD中的用户类型可以是`Member`或`Guest`。成员是AAD中的帐户（带有您的域名），而访客是来自其他AAD或Microsoft Live帐户的帐户。唯一的例外是，当Microsoft
    Live帐户用于创建AAD时，该帐户可以是您的AAD成员。外部AAD帐户（来自您租户外部的AAD帐户）也是如此；这些帐户只能在用于创建新租户时具有成员身份。以下截图展示了一个成员列表的示例：
- en: '![](img/6eb4b5bd-7c86-48ac-a006-0a1f8133ec94.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6eb4b5bd-7c86-48ac-a006-0a1f8133ec94.png)'
- en: Creating a new user
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建新用户
- en: 'Accounts with an AAD source are accounts that have been created in Azure. I
    mentioned that, for Azure AD Connect, you should use a service account for syncing.
    Note that this account must have a global admin role. An example of how to create
    such an account is shown here:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 来自AAD来源的帐户是已在Azure中创建的帐户。我提到过，对于Azure AD Connect，您应该使用服务帐户进行同步。请注意，该帐户必须具有全局管理员角色。以下是如何创建此类帐户的示例：
- en: '![](img/b08d7522-37cb-4404-ade8-5e37d6709539.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b08d7522-37cb-4404-ade8-5e37d6709539.png)'
- en: The default user role (when creating a new AAD user) is User. This option can
    be changed to Admin during creation or after the user has been created.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新AAD用户时，默认的用户角色是“用户”。在创建过程中或创建后，您可以将此选项更改为管理员。
- en: Managing user options and permissions
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理用户选项和权限
- en: 'After the user has been created, you have the option to manage the user and
    assign different roles and permissions. Along with Manage options, you have an
    activity section where you can monitor and audit a user''s activity. An example
    of a user profile is shown in the following screenshot:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 创建用户后，您可以管理该用户并分配不同的角色和权限。除了管理选项外，您还可以在活动部分监视和审计用户的活动。以下截图展示了一个用户资料的示例：
- en: '![](img/8eae6ec9-f1f0-4b72-bfc6-bccc5a5dac99.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8eae6ec9-f1f0-4b72-bfc6-bccc5a5dac99.png)'
- en: 'One of the most important management options is role assignment. Under Directory
    role, you can select multiple predefined roles that can be assigned to a user.
    Each role comes with an explanation, as shown here:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 最重要的管理选项之一是角色分配。在“目录角色”下，您可以选择可以分配给用户的多个预定义角色。每个角色都有相应的说明，如下所示：
- en: '![](img/e6edce94-869a-43c6-a6e1-8946fdefd20a.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e6edce94-869a-43c6-a6e1-8946fdefd20a.png)'
- en: 'Users can be added to groups to simplify management. For example, we can assign
    multiple roles to groups, and by assigning a user to a group, the user will automatically
    be assigned all roles assigned to the group the user is a member of. Groups can
    be assigned and synced, similar to accounts. Assigned groups originate in AAD
    and are synced using Windows Server AD. Examples of groups assigned to users in
    AAD are as follows:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以被添加到组中以简化管理。例如，我们可以将多个角色分配给组，通过将用户分配给某个组，用户将自动获得该组中所有分配给该组的角色。组可以被分配并同步，类似于帐户。分配的组起源于
    AAD，并通过 Windows Server AD 进行同步。以下是分配给 AAD 用户的组的示例：
- en: '![](img/2c9852b6-dc73-43bc-86e6-72af93ffe32b.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2c9852b6-dc73-43bc-86e6-72af93ffe32b.png)'
- en: Registering an application in AAD
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 AAD 中注册应用程序
- en: 'In order to use AAD as an authentication method for an application, you need
    to register the application in AAD. This will create two objects in your AAD:
    an application object and a service principal.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用 AAD 作为应用程序的认证方法，您需要在 AAD 中注册该应用程序。这将创建两个对象：一个应用程序对象和一个服务主体。
- en: 'To register a new application, we need to go to Application registration in
    the AAD blade and select New Application Registration. Information that we need
    to provide includes the application Name, Application type (Web app / API or Native),
    and Sign-on URL (I''m using localhost as an example):'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 要注册一个新的应用程序，我们需要进入 AAD 面板中的应用程序注册，并选择“新建应用程序注册”。我们需要提供的信息包括应用程序名称、应用程序类型（Web
    应用程序 / API 或本地应用）以及登录 URL（这里我使用本地主机作为示例）：
- en: '![](img/7e4f82d5-dc42-4d23-ac28-03785cb52e9c.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7e4f82d5-dc42-4d23-ac28-03785cb52e9c.png)'
- en: 'Creating the application is only the first step as you need additional configuration
    to use this registration. In the first screen that will open after the application
    has been created, there are two very important sections: Application ID and Object
    ID. These will be used later in order to identify the application with AAD. In
    other words, the application uses the ID to contact AAD and gathers information
    on whether the user is authorized to access the application. Which ID, application,
    or object is used for authentication depends on the authentication method. An
    example of this is shown in the following screenshot:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 创建应用程序只是第一步，因为你还需要额外的配置才能使用这个注册。在应用程序创建后打开的第一个屏幕中，有两个非常重要的部分：应用程序 ID 和对象 ID。这些将在稍后用于通过
    AAD 来识别应用程序。换句话说，应用程序使用 ID 来联系 AAD 并获取有关用户是否被授权访问该应用程序的信息。用于认证的 ID、应用程序或对象取决于认证方法。以下是一个示例：
- en: '![](img/9ff980df-f695-4443-9d33-77891ac0e138.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9ff980df-f695-4443-9d33-77891ac0e138.png)'
- en: In order to provide access to a registered application, we need to configure
    permissions and keys. To provide permissions to the application, we must set the
    required permissions under Required permissions in the Settings blade. You need
    to be very careful here as you may fall into a trap when using too many permissions.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 为了为已注册的应用程序提供访问权限，我们需要配置权限和密钥。要为应用程序提供权限，我们必须在设置面板中的所需权限下设置所需的权限。在这里你需要非常小心，因为使用过多权限可能会让你陷入陷阱。
- en: 'I have often seen people giving all possible permissions to applications that
    only required basic authentication. If too many permissions are assigned, this
    can be exploited and presents high security risks. An example permissions blade
    is shown in the following screenshot:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我常常看到人们给只需要基本认证的应用程序授予所有可能的权限。如果分配了太多权限，这可能会被利用，并且会带来很高的安全风险。以下截图展示了一个示例权限面板：
- en: '![](img/0122f893-f74d-4b8a-baed-e1d26422c307.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0122f893-f74d-4b8a-baed-e1d26422c307.png)'
- en: 'Once we have the ID and permissions in place, the last thing we are missing
    is the key. The application will use the ID and key to authorize access to AAD.
    To add a new key, we must provide a DESCRIPTION, EXPIRES (expiration time), and
    VALUE for the key. The expiration time can be in 1 year, in 2 years, or Never
    expires. I strongly recommend not using Never expires as this is another possible
    security risk. The VALUE for the key is not the actual key; this value will be
    encrypted and then a new value will be provided. After entering all values, click
    Save. An example of adding a new key is shown as follows:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们拥有了 ID 和权限，最后缺少的是密钥。应用程序将使用 ID 和密钥来授权访问 AAD。要添加一个新的密钥，我们必须提供一个描述、过期时间（EXPIRES）和密钥的值（VALUE）。过期时间可以设为1年、2年或永不过期。我强烈建议不要使用永不过期，因为这又是一个可能的安全风险。密钥的值并不是实际的密钥；该值将被加密，然后提供一个新的值。在输入所有值后，点击保存。以下是添加新密钥的示例：
- en: '![](img/70af1565-b4ef-47bf-ac36-483c3632f011.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/70af1565-b4ef-47bf-ac36-483c3632f011.png)'
- en: 'After saving, a new value for the key will be provided. Make sure to copy this
    value as this is the only time you will be able to collect it. Once you leave
    this blade, you will not be able to retrieve this value. An example generated
    key is shown in the following screenshot (note the warning at the top of the blade):'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 保存后，将提供密钥的新值。确保复制此值，因为这是你唯一能获取它的时机。一旦离开这个控制面板，你将无法重新获取此值。以下截图显示了一个生成的密钥示例（请注意控制面板顶部的警告）：
- en: '![](img/8eac817f-5f37-4bc6-bb92-9bf70b41a2a5.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8eac817f-5f37-4bc6-bb92-9bf70b41a2a5.png)'
- en: Applications, using IDs and keys registered in AAD, will be able to communicate
    with AAD. These applications don't have to be hosted in Azure; this can be done
    for an on-premises application or in some other cloud.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 使用在AAD中注册的ID和密钥的应用程序将能够与AAD进行通信。这些应用程序不必托管在Azure中；它们可以用于本地应用程序或其他云中的应用程序。
- en: Note that when using Azure Web apps, you can achieve a similar goal by using
    Authentication/Authorization in the Web app blade. This option will automatically
    create all of the necessary objects and provide the Web app with an ID and key.
    Minimum permissions will be created, which is a good thing, but if you need to
    provide an application with more permissions, you need to do this manually.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，当使用Azure Web应用程序时，你可以通过在Web应用程序控制面板中使用身份验证/授权来实现类似的目标。这个选项会自动创建所有必要的对象，并为Web应用程序提供一个ID和密钥。会创建最小的权限，这是一件好事，但如果你需要为应用程序提供更多权限，则需要手动操作。
- en: We already mentioned that in this process, two objects will be created: an application
    object and a service principal.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经提到，在这个过程中将会创建两个对象：一个应用程序对象和一个服务主体。
- en: Now would be good time to talk about the concept of multi-tenancy. Multi-tenant
    applications allow users from multiple tenants to use the same application and
    resources. For example, we can develop an application for customers and host it
    in our own subscription (and our tenant). Then, we can set access for the application
    for multiple customers and allow them to use their own AAD for authentication
    and authorization. In this concept, users coming from multiple tenants are using
    the same application and the same resources. If a multi-tenant approach is used,
    the application would have one application object in the home tenant and multiple
    service principles—one for each directory. Basically, an application object has
    a one-to-one relationship with the application and a one-to-many relationship
    with service principles.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是讨论多租户概念的好时机。多租户应用程序允许来自多个租户的用户使用相同的应用程序和资源。例如，我们可以为客户开发一个应用程序，并将其托管在我们的订阅中（以及我们的租户）。然后，我们可以为多个客户设置应用程序的访问权限，并允许他们使用自己的AAD进行身份验证和授权。在这个概念中，来自多个租户的用户使用相同的应用程序和相同的资源。如果使用多租户方法，应用程序将在主租户中拥有一个应用程序对象，并为每个目录提供多个服务主体。基本上，一个应用程序对象与应用程序之间是“一对一”的关系，与服务主体之间是“一对多”的关系。
- en: Role-based access control
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于角色的访问控制
- en: We already mentioned RBAC and how it can help with the management and administration
    of cloud resources. RBAC allows you to use AAD accounts to set up different roles
    and permissions on different levels of the Azure tenant. In order to provide user
    administration rights in the tenant, we must use the AAD blade. These rights are
    not transferred further. Under the tenant, we can have multiple subscriptions,
    and subscription engagement is done separately for each subscription.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经提到过RBAC以及它如何帮助管理和维护云资源。RBAC允许你使用AAD帐户在Azure租户的不同级别上设置不同的角色和权限。为了提供租户中的用户管理权限，我们必须使用AAD控制面板。这些权限不会被进一步传递。在租户下，我们可以有多个订阅，并且每个订阅的参与是单独进行的。
- en: Assigning a user to admin (or some other role) will automatically provide them
    with the same role on all resource groups and resources under that subscription.
    If we assign a role to a user on the resource group level, the role will be automatically
    provided for all resources in that resource group. Providing a role access to
    a single resource, will give the user access only to that resource.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 将用户分配为管理员（或其他角色）将自动为他们在该订阅下的所有资源组和资源提供相同的角色。如果我们在资源组级别为用户分配角色，该角色将自动为该资源组中的所有资源提供权限。将角色访问权限授予单个资源，将仅给予用户对该资源的访问权限。
- en: 'During the process of assigning permissions on any of these levels (subscription,
    resource group, resource), we use the same option: Access Control (IAM). Here,
    we select a Role, assignment type, and user. Instead of users, you can also use
    groups or service principals. An example of how to add a new Contributor to your
    subscription/resource group/resource is shown in the following screenshot:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在为这些级别（订阅、资源组、资源）分配权限的过程中，我们使用相同的选项：访问控制（IAM）。在这里，我们选择角色、分配类型和用户。您也可以使用组或服务主体代替用户。以下截图展示了如何将新贡献者添加到订阅/资源组/资源：
- en: '![](img/a98dbdd2-dbc2-4760-be23-ddd897729aca.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a98dbdd2-dbc2-4760-be23-ddd897729aca.png)'
- en: You can select multiple predefined roles, create custom roles, or assign users
    to multiple roles. If a user is assigned multiple roles that are in conflict,
    the highest role will be applied.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以选择多个预定义角色，创建自定义角色，或将用户分配到多个角色。如果用户被分配多个冲突的角色，将应用最高权限角色。
- en: For example, the Reader role allows you to only see information about resources,
    and you can't make any changes. If the Reader role is assigned along with the
    Contributor role (which allows you to make changes), the Contributor role will
    be applied.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，Reader 角色只允许您查看资源的信息，不能进行任何更改。如果同时分配了 Reader 角色和 Contributor 角色（允许您进行更改），则将应用
    Contributor 角色。
- en: 'A screenshot of the available roles is shown here:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是可用角色的截图：
- en: '![](img/90e9fd2c-34f4-4f82-87d0-1c7b7b84b0ad.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/90e9fd2c-34f4-4f82-87d0-1c7b7b84b0ad.png)'
- en: As mentioned previously, groups can be assigned roles on any level. In this
    case, all users that are members of that group will be assigned that role automatically.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，组可以在任何级别分配角色。在这种情况下，所有属于该组的用户将自动被分配该角色。
- en: Service principles are often used to set up access for applications that need
    the ability to change or create something. For example, a service principle is
    often used to allow Azure DevOps to access your subscription during the release
    process and to create or edit resources that are needed for deployment.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 服务主体通常用于为需要更改或创建某些内容的应用程序设置访问权限。例如，服务主体常用于允许 Azure DevOps 在发布过程中访问您的订阅，并创建或编辑部署所需的资源。
- en: Summary
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: AAD provides authentication and authorization in Azure. Along with RBAC, it
    allows you to control who can do what and where. These tools are your first line
    of defense when managing and securing your cloud resources.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: AAD 提供 Azure 中的身份验证和授权。与 RBAC 一起，它允许您控制谁可以做什么以及在哪里做。这些工具是您管理和保护云资源时的第一道防线。
- en: Now, we will concentrate on what else we need to secure in Azure and how can
    we protect our data and other resources. Securing Azure is different from securing
    our on-premises infrastructure and requires a different mindset. In [Chapter 9](0e16c405-a21c-4cfc-9dc6-e20fc05db041.xhtml),
    *Azure Security and Administration*, we will discuss how to harden Azure security
    and what is available to protect us.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将集中讨论在 Azure 中还需要保护哪些内容以及如何保护我们的数据和其他资源。保护 Azure 与保护我们本地基础设施不同，且需要不同的思维方式。在
    [第9章](0e16c405-a21c-4cfc-9dc6-e20fc05db041.xhtml) *Azure 安全性与管理* 中，我们将讨论如何加固 Azure
    安全性以及有哪些可用的工具来保护我们。
- en: Questions
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: An AAD is on top of a...
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: AAD 位于...
- en: Tenant
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 租户
- en: Subscription
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 订阅
- en: Resource group
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 资源组
- en: 'An account can be part of multiple tenants:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个帐户可以属于多个租户：
- en: 'Yes'
  id: totrans-116
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是
- en: 'AAD can contain Microsoft Live Accounts:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: AAD 可以包含 Microsoft Live 账户：
- en: 'Yes'
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-120
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是
- en: 'AAD can be synced with Windows Server AD:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: AAD 可以与 Windows Server AD 同步：
- en: 'Yes'
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不是
- en: The Azure Active Directory Free tier has a limit of...
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure Active Directory 免费版的限制为...
- en: 5,000 objects
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5,000 个对象
- en: 500,000 objects
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 500,000 个对象
- en: 5,000,000 objects
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 5,000,000 个对象
- en: To set up a custom domain...
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要设置自定义域...
- en: You can choose any domain
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以选择任何域
- en: You must own the domain
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您必须拥有该域
- en: You must use `.onmicrosoft.com`
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您必须使用 `.onmicrosoft.com`
- en: To verify your custom domain, you must use...
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要验证您的自定义域，您必须使用...
- en: MX records
  id: totrans-133
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: MX 记录
- en: TXT records
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: TXT 记录
- en: Either
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任意
- en: Both
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: Using RBAC, you can assign roles for...
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 RBAC，您可以为...分配角色
- en: A subscription
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 订阅
- en: A resource group
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 资源组
- en: A resource
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个资源
- en: All of the above
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 上述所有内容
- en: Roles can be assigned to...
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 角色可以分配给...
- en: Users
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户
- en: Groups
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 组
- en: Both
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: To set up AAD sign-in from the application, you must...
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要从应用程序设置 AAD 登录，您必须...
- en: Register the application in AAD
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 AAD 中注册应用程序
- en: Create an AAD group for the application
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为应用程序创建一个 AAD 组
- en: Both
  id: totrans-149
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
