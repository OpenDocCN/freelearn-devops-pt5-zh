- en: Hybrid Cloud with Azure - Extending Local Workloads to the Cloud
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 的混合云 - 将本地工作负载扩展到云端
- en: The hybrid cloud is an important part of the cloud journey, helping us to combine
    Azure (or any other cloud) with on-premises resources. In this chapter, we'll
    discuss how to configure the environment and the connections between the Azure
    and local infrastructure in order to take advantage of the best from both worlds—local
    and cloud infrastructure.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 混合云是云计算旅程中的一个重要组成部分，它帮助我们将 Azure（或任何其他云）与本地资源结合。在本章中，我们将讨论如何配置环境以及如何设置 Azure
    和本地基础设施之间的连接，以便充分利用本地和云基础设施的优势。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Hybrid clouds
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 混合云
- en: Connecting virtual networks to on-premises
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将虚拟网络连接到本地环境
- en: On-premises data gateways
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地数据网关
- en: Azure Stack
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure Stack
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'For this chapter, you''ll need:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章所需的内容：
- en: An Azure subscription
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 Azure 订阅
- en: A local server running Windows Server 2012 R2 or later
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行 Windows Server 2012 R2 或更高版本的本地服务器
- en: A VPN (firewall) device supporting an S2S connection
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持 S2S 连接的 VPN（防火墙）设备
- en: Hybrid clouds
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 混合云
- en: Migrating completely to the cloud is not an option for many organizations. Even
    though the cloud offers multiple benefits, there are many scenarios to consider.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 对于许多组织来说，完全迁移到云端并不是一个选择。尽管云提供了多种好处，但仍然有很多场景需要考虑。
- en: For example, if a company invested in local infrastructure, it would be hard
    to just abandon all that and move everything to the cloud. When creating a local
    data center, we need to invest in server rooms, networking, servers, storage,
    and software licenses. There is no business justification to abandon all investments
    and start investing in the cloud.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果一家公司已经投资了本地基础设施，那么仅仅放弃所有投资并将所有内容迁移到云端是困难的。在创建本地数据中心时，我们需要投资服务器机房、网络、服务器、存储和软件许可证。没有商业理由放弃所有投资并开始在云上投资。
- en: Another scenario is when we are not allowed to move specific services. In this
    case, compliance with the law can stop us from moving something out of a local
    data center. For example, some countries don't allow you to keep a user's personal
    information outside of that country. If an Azure data center is not available
    in your region, this may be a blocker and you may have to keep data in your local
    data center.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种场景是我们无法迁移特定服务的情况。在这种情况下，法律合规性可能会阻止我们将某些内容从本地数据中心迁移出去。例如，某些国家/地区不允许将用户的个人信息存储在该国之外。如果您所在地区没有
    Azure 数据中心，这可能成为一个障碍，您可能需要将数据保留在本地数据中心。
- en: In both cases, when something is preventing us from using all of the cloud's
    services, we can benefit from what the cloud offers by setting up a hybrid cloud.
    This allows us to use cloud services along with local infrastructure, allowing
    us to create powerful combinations of the best from both wolds.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，当某些因素使我们无法使用云的所有服务时，我们可以通过设置混合云来利用云所提供的服务。这使我们能够将云服务与本地基础设施结合使用，创造出本地和云基础设施的最佳组合。
- en: For example, we can set up database in a local data center (if we're not allowed
    to migrate a database or we have a brand new database server) and set up cloud
    services that will use a local database in the background. This especially applies
    to the Azure data analytics platform, which offers multiple powerful services
    that can provide you with fast data processing and still retain data locally.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们可以在本地数据中心设置数据库（如果我们不能迁移数据库或有全新的数据库服务器），并设置会在后台使用本地数据库的云服务。这尤其适用于 Azure
    数据分析平台，它提供多个强大的服务，可以为您提供快速的数据处理，并且仍然保留本地数据。
- en: There is a third scenario in which you can use services from multiple cloud
    providers and benefit from what each of them has to offer. Again, we need to set
    up a hybrid cloud scenario to secure communication and exchange resources between
    services you are using in each cloud.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一种第三种场景，您可以使用来自多个云提供商的服务，并从每个提供商所提供的服务中受益。同样，我们需要设置混合云场景，以确保在您使用每个云中的服务之间的通信安全，并交换资源。
- en: The best way to set up security and keep your data safe in the hybrid cloud
    is to create a direct connection between Azure and the local infrastructure.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在混合云中设置安全性并确保数据安全的最佳方式是创建 Azure 与本地基础设施之间的直接连接。
- en: Connecting the local network and Azure Virtual Network
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接本地网络和 Azure 虚拟网络
- en: In order to connect local infrastructure and Azure, we need to create a connection
    between the local network and Azure Virtual Network. This connection can be either
    **Point-to-Site** (**P2S**) or **Site-to-Site** (**S2S**). As P2S allows access
    to Azure Virtual Network from a single computer, it's not ideal for a true hybrid
    cloud, but more as point of access for remote workers.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 为了连接本地基础设施和 Azure，我们需要在本地网络和 Azure 虚拟网络之间创建一个连接。这个连接可以是**点对站点**（**P2S**）或者**站点对站点**（**S2S**）。由于
    P2S 允许单个计算机访问 Azure 虚拟网络，它并不适合真正的混合云应用，更适合作为远程工作人员的访问点。
- en: To set up a true hybrid cloud, we need to create an S2S connection that will
    allow full communication between our local network and Azure Virtual Network.
    By doing so, we extend our local network to Azure and can access resources in
    Azure the same way as we would access resources in a local environment.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 要建立真正的混合云，我们需要创建一个 S2S 连接，使得我们的本地网络和 Azure 虚拟网络之间可以进行全面的通信。通过这样做，我们将本地网络扩展到
    Azure，并能够像访问本地环境中的资源一样访问 Azure 中的资源。
- en: 'Creating an S2S connection can be done in two ways: using a VPN and using ExpressRoute.
    A VPN will provide communication encryption between two networks. ExpressRoute
    goes one step further and provides a dedicated connection between a local network
    and Azure Virtual Network. A dedicated connection provides more reliability, faster
    speeds, lower latency, and higher security, but it must be purchased as a separate
    service provided by the ISP.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 创建 S2S 连接有两种方式：使用 VPN 和使用 ExpressRoute。VPN 将提供两个网络之间的通信加密，而 ExpressRoute 更进一步，提供本地网络和
    Azure 虚拟网络之间的专用连接。专用连接提供了更高的可靠性、更快的速度、更低的延迟和更高的安全性，但它必须作为由 ISP 提供的单独服务购买。
- en: Establishing a connection between a local network and Azure Virtual Network
    is a two-step process. First, we need to create and configure Azure resources,
    and in the second step we need to configure our local firewall. In the local environment,
    we need a VPN (firewall) device that supports creating S2S connections and public
    IP addresses. Note that all devices, with S2S option, do not support S2S connection
    with Azure.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在本地网络和 Azure 虚拟网络之间建立连接是一个两步过程。首先，我们需要创建和配置 Azure 资源，第二步则需要配置我们的本地防火墙。在本地环境中，我们需要一个支持创建
    S2S 连接并具备公网 IP 地址的 VPN（防火墙）设备。请注意，带有 S2S 选项的所有设备不都支持与 Azure 建立 S2S 连接。
- en: Creating a S2S Connection
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 S2S 连接
- en: 'To create an S2S connection between Azure Virtual Network and our local network,
    first we must create two Azure resources: a virtual network gateway and a local
    network gateway.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Azure 虚拟网络和本地网络之间创建 S2S 连接，首先我们必须创建两个 Azure 资源：虚拟网络网关和本地网络网关。
- en: Creating a virtual network gateway is done in a single blade. The information
    we need to provide is the Name, Gateway type, VPN type, SKU, Virtual network,
    Gateway subnet address range, Public IP address, Subscription, and Location. The
    Name, Subscription, and Location are the usual parameters.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 创建虚拟网络网关是在一个面板中完成的。我们需要提供的信息包括：名称、网关类型、VPN 类型、SKU、虚拟网络、网关子网地址范围、公网 IP 地址、订阅和位置。名称、订阅和位置是常规参数。
- en: The first option is to select the Gateway type. This can be either VPN or ExpressRoute
    (as we explained earlier). If VPN is selected, we need to choose whether the VPN
    type is policy- or route-based. (This option will probably depend on the settings
    of your local network.) The next step is to select an SKU that will decide the
    bandwidth and number of connections available. The option for active-active mode
    can be enabled or disabled. This mode allows you to create a redundant connection
    that will be observed as a single one from a traffic point of view. In other words,
    you need to create two S2S connections on your on-premises device, which will
    route traffic to the same virtual network. Traffic will be routed though both
    connections unless one becomes unavailable, and then traffic is routed through
    the S2S connection that is still available.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个选项是选择网关类型。可以选择 VPN 或 ExpressRoute（如前所述）。如果选择 VPN，则需要选择 VPN 类型是基于策略还是基于路由。（这个选项可能取决于您本地网络的设置。）下一步是选择一个
    SKU，决定可用的带宽和连接数。可以启用或禁用活动-活动模式。此模式允许您创建冗余连接，从流量的角度来看，它们将被视为一个连接。换句话说，您需要在本地设备上创建两个
    S2S 连接，这两个连接将流量路由到同一个虚拟网络。除非其中一个连接不可用，否则流量将通过两个连接路由，如果一个连接不可用，流量将通过仍然可用的 S2S 连接路由。
- en: Active-active mode is not only used for highly available connections, but for
    better performance as well. You need to select a Virtual network that is available.
    Available networks will depend on the subscription and location that are selected.
    After the virtual network is selected, you need to provide a range for the gateway
    subnet. If such a subnet doesn't exist, it will be created automatically (unless
    there is no free address space on the network; then the process will fail). Note
    that there is no resource group needed. A virtual network gateway will be created
    in the same resource group in which the virtual network is located.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 活动-活动模式不仅用于高可用性连接，还用于更好的性能。您需要选择一个可用的虚拟网络。可用的网络将取决于选择的订阅和位置。选择虚拟网络后，您需要为网关子网提供一个地址范围。如果该子网不存在，将自动创建（除非网络上没有空闲地址空间，否则该过程将失败）。请注意，不需要资源组。虚拟网络网关将在虚拟网络所在的同一资源组中创建。
- en: Next, you need to create or select an existing Public IP address that will be
    used for the connection. This IP is needed to establish a connection to your local
    network and will be used in the configuration for the local firewall in order
    to accept a connection from Azure. I recommend using a static IP address as you
    don't want to change the configuration in case the IP address changes.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您需要创建或选择一个现有的公共IP地址，该地址将用于连接。此IP地址用于与本地网络建立连接，并将在本地防火墙的配置中使用，以接受来自Azure的连接。我建议使用静态IP地址，以免IP地址发生变化时，您需要重新配置。
- en: 'An example of a virtual network gateway configuration is shown next:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是虚拟网络网关配置的示例：
- en: '![](img/75e580ca-06ac-48d3-a6db-f764c993c2b5.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/75e580ca-06ac-48d3-a6db-f764c993c2b5.png)'
- en: Creating a virtual network gateway takes from 30 to 90 minutes. This is one
    of the resources in Azure that takes the longest time to deploy.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 创建虚拟网络网关需要30到90分钟。这是Azure中部署时间最长的资源之一。
- en: 'The ARM template for the deployment of an Azure virtual network gateway is
    provided here:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: Azure虚拟网络网关部署的ARM模板在这里提供：
- en: '[PRE0]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'After the deployment of the virtual network gateway is completed, we can proceed
    and create a local network gateway. A local network gateway is used to input information
    on your local firewall and network. You need to the provide the public IP address
    of your local firewall and the Address space of the local network (or gateway
    subnet of your local network, depending on the firewall). You also need to provide
    a Subscription, Location, and Resource group. The Location should be the same
    as the one that is used for the virtual network gateway and virtual network. I
    recommend placing them in the same resource group for easier management. Example
    settings for the local network gateway are shown here:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在虚拟网络网关部署完成后，我们可以继续创建本地网络网关。本地网络网关用于输入本地防火墙和网络的信息。您需要提供本地防火墙的公共IP地址以及本地网络的地址空间（或者根据防火墙，提供本地网络的网关子网）。您还需要提供订阅、位置和资源组。位置应与虚拟网络网关和虚拟网络使用的相同。我建议将它们放在同一资源组中，以便于管理。以下是本地网络网关的示例设置：
- en: '![](img/371de212-eaeb-485d-aab0-696b5c891892.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/371de212-eaeb-485d-aab0-696b5c891892.png)'
- en: 'The ARM template for the deployment of a local network gateway is provided
    here:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 本地网络网关部署的ARM模板在这里提供：
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Deploying a local network gateway is relatively fast compared to a virtual network
    gateway, and deployment should complete in under 5 minutes.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 与虚拟网络网关相比，部署本地网络网关相对较快，部署应在5分钟内完成。
- en: Configuring Azure settings for S2S
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置Azure的S2S设置
- en: After the virtual network gateway and local network gateway are created, we
    can proceed to configuration. In the virtual network gateway, we select Connection
    type options under Settings. You'll see that Settings has options for configuration,
    connections, and point-to-site connections.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在虚拟网络网关和本地网络网关创建后，我们可以继续进行配置。在虚拟网络网关中，我们在设置下选择连接类型选项。您将看到设置中有配置、连接和点对站点连接的选项。
- en: 'As we are going to concentrate on S2S connections, we only use the connections
    blade and add a new connection. We need to provide a Name as usual. The options
    for the Virtual network gateway, Subscription, Resource group, and Location are
    locked and can''t be changed, as they depend on the Virtual network gateway that
    is used to create a connection. Parameters that we need to provide are the Connection
    type and Shared key (PSK). The Connection type options are VNet-to-VNet, Site-to-Site
    (IPsec), and ExpressRoute. We are going to select the option for Site-to-Site
    (IPsec) as we want to connect to a local network. For the Shared Key (PSK), I
    recommend it be as complex as possible because security can depend on this. Sample
    settings for a new connection are shown here:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将专注于 S2S 连接，因此我们只使用连接面板并添加一个新连接。我们需要像往常一样提供一个名称。虚拟网络网关、订阅、资源组和位置的选项是锁定的，无法更改，因为它们取决于用于创建连接的虚拟网络网关。我们需要提供的参数是连接类型和共享密钥（PSK）。连接类型的选项有
    VNet 到 VNet、站点到站点（IPsec）和 ExpressRoute。由于我们希望连接到本地网络，因此选择站点到站点（IPsec）选项。对于共享密钥（PSK），我建议它尽可能复杂，因为安全性可能依赖于此。新连接的示例设置如下：
- en: '![](img/92a3dbd8-7ed9-42cc-b1df-c9d21f713596.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/92a3dbd8-7ed9-42cc-b1df-c9d21f713596.png)'
- en: 'Creating a connection is only the first step; we also need to configure settings
    for our local network. After the initial creation, the status of the connection
    will be unknown, as shown in the following screenshot:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 创建连接只是第一步；我们还需要为本地网络配置设置。在初步创建后，连接的状态将显示为未知，如下图所示：
- en: '![](img/66aac4a3-8678-47a0-bb41-52c14cefc73b.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/66aac4a3-8678-47a0-bb41-52c14cefc73b.png)'
- en: Configuring a local firewall for S2S
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置本地防火墙以支持 S2S
- en: 'Configuration of a local firewall depends on the vendor and type of device.
    Under created connection, there is an option to download configurations for some
    devices. You can select a few different vendors (for example, Cisco and Juniper), and
    also depending on the Device vendor, Device family, and Firmware version to download
    specific configuration. Only a few devices are available to download directly
    from the Azure portal. In Microsoft''s documentation you can find more devices,
    and some vendors have a section on Azure S2S configuration on their websites.
    A screenshot of the configuration downloading process is shown next:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 本地防火墙的配置取决于供应商和设备类型。在已创建的连接下，有一个选项可以下载某些设备的配置。您可以选择不同的供应商（例如，Cisco 和 Juniper），并且还可以根据设备供应商、设备系列和固件版本下载特定的配置。只有少数设备可以直接从
    Azure 门户下载。您可以在微软的文档中找到更多设备，有些供应商在其网站上有关于 Azure S2S 配置的部分。以下是配置下载过程的截图：
- en: '![](img/7b4258a6-5520-4c9e-865b-0012c05b83ee.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7b4258a6-5520-4c9e-865b-0012c05b83ee.png)'
- en: 'After the connection is configured on both sides, the status will change to
    Connected, as shown:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在双方配置完连接后，状态将更改为已连接，如下所示：
- en: '![](img/511e64a3-ffe3-4269-8f48-65fba4bced61.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/511e64a3-ffe3-4269-8f48-65fba4bced61.png)'
- en: This will allow you to connect to any resource in the Azure Virtual Network
    directly from the local network with a secure, private connection. In some cases,
    you don't want to expose your resources for public access, so this is the only
    approach to connect to your resources.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 这将允许您通过安全的、私有的连接直接从本地网络连接到 Azure 虚拟网络中的任何资源。在某些情况下，您可能不希望将资源公开供公共访问，因此这是连接到资源的唯一方法。
- en: In other cases, and this is probably most common practice, services are accessed
    publicly, but management is done over a private network. For example, access to
    a website is allowed over HTTP or HTTPS over the internet, but access to databases
    or an RDP connection to virtual machines is only allowed over a private network.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他情况下，通常最常见的做法是服务公开访问，但管理是在私有网络上进行的。例如，允许通过互联网以 HTTP 或 HTTPS 访问网站，但仅允许通过私有网络访问数据库或
    RDP 连接到虚拟机。
- en: Configuring services in a hybrid environment
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置混合环境中的服务
- en: Once we have established a connection between the local network and Azure, we
    can start using services in both environments, as if these are single site or
    network. However, there are a few things that we need to keep in mind.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们在本地网络和 Azure 之间建立了连接，我们就可以开始使用这两个环境中的服务，就像它们是一个单一站点或网络一样。然而，有一些事情需要我们牢记。
- en: If we have a domain set up in the local environment and want to use the same
    domain in the cloud, it's a good idea to have one domain controller running in
    the Azure Virtual Network. Even when we have an S2S connection established, occasional
    interrupts in connection can be expected. By having one DC running in the cloud,
    we can ensure that services in Azure can use all features and run independently
    when interruptions occur.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们在本地环境中已设置了一个域，并希望在云端使用相同的域，那么在 Azure 虚拟网络中运行一个域控制器是一个不错的选择。即使我们已经建立了 S2S
    连接，也可能会出现偶尔的连接中断。通过在云端运行一个 DC，我们可以确保 Azure 中的服务能够在中断发生时使用所有功能并独立运行。
- en: 'When running SQL Server and using Always On Availability Groups, you can use
    Azure to extend the service and add one replica in the cloud. As we previously
    mentioned, there are two modes for running Azure: resource manager and classic.
    The classic model supports adding a replica in Azure through a wizard, and it''s
    relatively easy to set up.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 当运行 SQL Server 并使用 Always On 可用性组时，你可以使用 Azure 扩展服务并在云端添加一个副本。如前所述，运行 Azure
    有两种模式：资源管理器和经典模式。经典模式支持通过向导在 Azure 中添加副本，并且相对容易设置。
- en: The resource manager requires use of T-SQL commands to add a replica in Azure
    resource manager mode, but it's a little more complicated. But as the resource
    manager is a recommended mode, I suggest using the resource manager, as classic
    is bound to be dropped at some point and you'll have to set up the resource manager
    eventually anyway.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 资源管理器需要使用 T-SQL 命令在 Azure 资源管理器模式下添加副本，但这稍微有些复杂。不过，由于资源管理器是推荐的模式，我建议使用资源管理器，因为经典模式迟早会被淘汰，最终你还是需要设置资源管理器。
- en: Another thing to consider is Azure Hybrid Benefit, which allows you to use existing
    on-premises licenses in Azure. With software assurance, you can use licenses for
    Windows server and SQL Server, and deploy Azure resources with a significant discount.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个需要考虑的因素是 Azure 混合权益（Azure Hybrid Benefit），它允许你在 Azure 中使用现有的本地许可证。通过软件保证，你可以使用
    Windows Server 和 SQL Server 的许可证，并以显著的折扣部署 Azure 资源。
- en: The data center location is very important when establishing a connection between
    the local network and Azure. If you are located on one continent and the Azure
    data center (in which the virtual network is deployed)is in another, you will
    experience network latency and lag. Choosing the closest geographical location
    is the best possible option.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在建立本地网络与 Azure 之间的连接时，数据中心的位置非常重要。如果你位于一个大陆，而 Azure 数据中心（虚拟网络部署所在的数据中心）位于另一个大陆，你将会遇到网络延迟和滞后。选择离你最近的地理位置是最佳的选择。
- en: If you experience network latency and lag or have performance issues, ExpressRoute
    is the service you need to consider. It does come at a price, but it has an enterprise-grade
    connection with the best possible reliability, speed, and security.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你遇到网络延迟和滞后问题或性能问题，可以考虑使用 ExpressRoute 服务。虽然这需要付费，但它提供了企业级的连接，具有最佳的可靠性、速度和安全性。
- en: Connecting virtual networks across Azure
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 跨 Azure 连接虚拟网络
- en: A virtual network gateway can be used to connect different Azure Virtual Networks.
    But as you pay for a virtual network gateway, I recommend a different approach.
    To connect Azure Virtual Networks to another Azure Virtual Network, we can use
    **peering**. Peering, in general, is the interconnection of separate networks for
    the purpose of exchanging traffic networks. Options for peering are available
    under Settings in the virtual network blade. If we choose to create a new peering,
    we need to provide a Name and select if we are going to connect to a Resource
    manager or Classic virtual network. As Resource manager is recommended, we'll
    explain this process. If Resource manager is selected, we can either provide an
    ID for a resource or use a drop-down menu to select our Azure Subscription and
    the Virtual network we want to connect to.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟网络网关可用于连接不同的 Azure 虚拟网络。但因为你需要为虚拟网络网关付费，我建议采用另一种方法。要将 Azure 虚拟网络连接到另一个 Azure
    虚拟网络，我们可以使用**对等连接**。通常，对等连接是将独立的网络互联以交换流量。对等连接的选项可以在虚拟网络面板的设置下找到。如果我们选择创建一个新的对等连接，需要提供一个名称，并选择是连接到资源管理器还是经典虚拟网络。由于推荐使用资源管理器，我们将在这里解释该过程。如果选择了资源管理器，我们可以提供一个资源
    ID，或者使用下拉菜单选择我们的 Azure 订阅和要连接的虚拟网络。
- en: 'Some additional options are available for forwarded traffic and a remote gateway
    if needed. Example peering settings are shown in the following screenshot:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，还可以提供一些额外的选项来转发流量和配置远程网关。以下截图展示了一个示例对等连接设置：
- en: '![](img/7d9cd44f-3f00-4fff-8a70-cd033ee24e9c.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7d9cd44f-3f00-4fff-8a70-cd033ee24e9c.png)'
- en: On-premises data gateway
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本地数据网关
- en: In some cases, all the requirements to create S2S connections to Azure are not
    met, but we still need to connect to local resources. For example, we need to
    connect to a local database, but the VPN device we have locally doesn't support
    a connection to Azure.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，创建到 Azure 的 S2S 连接所需的所有要求未满足，但我们仍然需要连接到本地资源。例如，我们需要连接到本地数据库，但我们本地的 VPN
    设备不支持与 Azure 的连接。
- en: In this case, we can use an on-premises data gateway to allow Azure services
    to use a local database in a secure way.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们可以使用本地数据网关，使 Azure 服务能够以安全的方式访问本地数据库。
- en: An on-premises data gateway acts as a bridge and allows us to access local data
    with Azure services. Services currently supported are Power BI, Microsoft Flow,
    PowerApps, Azure Analysis Services, and Azure Logic Apps. Logic apps can be used
    to pass this data to other services as well.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 本地数据网关充当桥梁，允许我们通过 Azure 服务访问本地数据。目前支持的服务包括 Power BI、Microsoft Flow、PowerApps、Azure
    分析服务和 Azure Logic Apps。Logic Apps 也可以用来将数据传递到其他服务。
- en: 'Supported connectors are:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 支持的连接器有：
- en: BizTalk Server 2016
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BizTalk Server 2016
- en: Filesystems
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件系统
- en: IBM DB2
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IBM DB2
- en: IBM Informix
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IBM Informix
- en: IBM MQ
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IBM MQ
- en: MySQL
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MySQL
- en: Oracle Database
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Oracle Database
- en: PostgreSQL
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PostgreSQL
- en: SAP Application Server
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SAP 应用服务器
- en: SAP Message Server
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SAP Message Server
- en: SharePoint Server
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SharePoint Server
- en: SQL Server
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL Server
- en: Teradata
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Teradata
- en: Setting up an on-premises data gateway is a two-step process; we need to install
    the agent locally and configure the gateway in Azure next.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 设置本地数据网关是一个两步过程；我们需要先在本地安装代理，然后在 Azure 中配置网关。
- en: Local installation
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本地安装
- en: 'To start the installation process, we need to sign in with an account that
    has access to an Azure subscription. Usually, to access an Azure subscription,
    you use either a Microsoft Live account or a work/school/O365/AAD account. In
    this case, we cannot use a Microsoft Live account because only a work account
    is allowed. The sign-in form is shown here:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始安装过程，我们需要使用具有 Azure 订阅访问权限的账户进行登录。通常，要访问 Azure 订阅，您需要使用 Microsoft Live 账户或工作/学校/O365/AAD
    账户。在此情况下，我们无法使用 Microsoft Live 账户，因为仅允许使用工作账户。登录表单如下所示：
- en: '![](img/34688838-c172-4047-a0cf-20cb069ee2e4.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](img/34688838-c172-4047-a0cf-20cb069ee2e4.png)'
- en: 'After the sign-in process is completed, we need to provide a New on-premises
    data gateway name and a Recovery key (8 character minimum). The recovery key is
    used if you need to restart the service or change its configuration:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成登录过程后，我们需要提供一个新的本地数据网关名称和一个恢复密钥（至少8个字符）。恢复密钥在您需要重启服务或更改其配置时使用：
- en: '![](img/e7331ddd-750c-4631-9406-cee45541342f.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7331ddd-750c-4631-9406-cee45541342f.png)'
- en: 'Once deployment is completed, you will see a Status page and some additional
    configuration. You can change the Service Settings, Network settings, and Connectors,
    or launch Diagnostics if you''re having an issue with the service. In order to
    access these settings again, you need to use a recovery key:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 部署完成后，您将看到一个状态页面和一些额外的配置。您可以更改服务设置、网络设置和连接器，或者如果遇到服务问题，可以启动诊断。为了再次访问这些设置，您需要使用恢复密钥：
- en: '![](img/f3870440-d608-48c1-8bf2-c112853ecba6.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3870440-d608-48c1-8bf2-c112853ecba6.png)'
- en: Cloud service
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 云服务
- en: 'After installation on a local server is done, we need to configure a gateway
    in Azure as well. Parameters we need to provide are the Resource Name, Subscription,
    Resource group, and Location. Based on other information, available gateways will
    be available for selection under Installation Name:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 本地服务器安装完成后，我们还需要在 Azure 中配置网关。我们需要提供的参数包括资源名称、订阅、资源组和位置。根据其他信息，可用的网关将可以在安装名称下选择：
- en: '![](img/d58ec446-28d6-4b04-ac1a-d2cbe50f7eb7.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d58ec446-28d6-4b04-ac1a-d2cbe50f7eb7.png)'
- en: After deployment is completed, we can use an on-premises data gateway to connect
    Azure to the local server. The number of services that can use this kind of connection
    is limited, but we can use logic app to extend the connection to other services
    as well. Configuring the logic app to use an on-premises data gateway allows us
    to extend this connection to other services in a single logic app flow and access
    the same data. The connection is limited, but it can help in certain scenarios
    in which S2S is not an option.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 部署完成后，我们可以使用本地数据网关将 Azure 与本地服务器连接。可以使用这种连接的服务数量有限，但我们可以使用逻辑应用扩展连接到其他服务。配置逻辑应用以使用本地数据网关，使我们能够在单个逻辑应用流程中扩展连接到其他服务，并访问相同的数据。连接虽然有限，但它能在
    S2S 不是选项的某些场景下提供帮助。
- en: Azure Stack
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure Stack
- en: Microsoft is probably the only cloud provider that has the option for true hybrid
    cloud. Most cloud providers include some sort of hybrid cloud, allowing you to
    combine on-premises and cloud services. In most cases, with IaaS, we have the
    option of running everything we have on-premises in the cloud with little to no
    effort. Migrating local resources to the cloud is an option everyone in the cloud
    business is offering.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 微软可能是唯一一个提供真正混合云选项的云服务商。大多数云服务商都提供某种形式的混合云，允许你将本地服务和云服务结合起来。在大多数情况下，通过 IaaS，我们可以轻松地将所有本地资源运行在云端，几乎不需要任何努力。将本地资源迁移到云端是每个云服务商都在提供的选项。
- en: Azure Stack is the only option which allows you to have things the other way
    around and to run cloud services in your local data center. With Azure Stack,
    you can run IaaS and even PaaS in your own environment. Basically, Azure Stack
    is an extension of Azure in a local environment, and it uses the same fabric that
    the public version of Azure is using, but on a much smaller scale. It comes in
    a pre-configured box that must be bought from one of the authorized vendors and
    uses the same "real" fabric Azure uses. It supports the same models and deployment
    tools that the public version of Azure supports. All applications and services
    deployed in Azure will run in the Azure Stack, and all applications and services
    deployed in Azure Stack will run in Azure. The model is developed once and deployed
    anywhere.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Stack 是唯一一个允许你将云服务在本地数据中心运行的选项。使用 Azure Stack，你可以在自己的环境中运行 IaaS 甚至 PaaS。基本上，Azure
    Stack 是 Azure 在本地环境中的扩展，它使用与公有版 Azure 相同的架构，但规模要小得多。它以预配置的盒子形式提供，必须从授权供应商处购买，并使用与公有版
    Azure 相同的“真实”架构。它支持与公有版 Azure 相同的模型和部署工具。在 Azure 中部署的所有应用和服务都可以在 Azure Stack 中运行，而在
    Azure Stack 中部署的所有应用和服务也能在 Azure 中运行。该模型一次开发，随时可以部署到任何地方。
- en: 'There are a few scenarios in which Azure Stack may be considered. The first
    is one we already mentioned when we discussed hybrid cloud options: when we have
    regulatory requirements to keep data in our local data center or within our own
    country. Even with the hybrid cloud, in this scenario we must use SQL Server.
    With Azure Stack, this is not the case anymore; we can use Azure SQL databases
    and take advantage of PaaS even when retaining the database locally.'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些场景中，Azure Stack 可能是一个值得考虑的选择。第一个场景是我们在讨论混合云选项时已经提到的：当我们有法规要求必须将数据保留在本地数据中心或本国境内时。即使是混合云，在这种情况下我们也必须使用
    SQL Server。而使用 Azure Stack，这个问题就不存在了；我们可以使用 Azure SQL 数据库，并且即使将数据库保留在本地，也能享受 PaaS
    的优势。
- en: Latency and connectivity can be an issue when handling large datasets. Azure
    Stack is a solution with which we can process data locally and then aggregate
    it in Azure for further analytics, sharing common application logic across both.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理大数据集时，延迟和连接性可能成为问题。Azure Stack 是一个解决方案，可以让我们在本地处理数据，然后将其聚合到 Azure 中进行进一步分析，同时在两者之间共享通用的应用逻辑。
- en: Another example would be systems that are disconnected, or partly disconnected,
    and have connections to the internet occasionally. With Azure Stack, we can provide
    cloud applications in environments like airplanes or ships that don't have an
    internet connection all the time. An airline could create a cloud application
    for customers, and customers could access such an application when the airplane
    is offline. Once an internet connection is established, a data sync can be performed
    and everything updated.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个例子是那些断开连接或部分断开连接的系统，这些系统偶尔能连接到互联网。使用 Azure Stack，我们可以在飞机或船只等没有持续互联网连接的环境中提供云应用。航空公司可以为客户创建云应用，客户可以在飞机离线时访问该应用。一旦建立互联网连接，就可以进行数据同步，并更新所有内容。
- en: In certain scenarios, a company can have multiple locations, and some of these
    locations can be required to be offline. Cloud applications were not an option
    in this scenario before, but with Azure Stack all locations can use the same application
    even when using the cloud. Some locations may use an application in public Azure
    and some of them may use Azure Stack, but they have all the same features and
    capabilities.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些场景下，公司可能拥有多个位置，并且其中一些位置可能需要离线。在这种情况下，云应用程序之前无法作为选项，但通过 Azure Stack，即使在使用云的情况下，所有位置也可以使用相同的应用程序。有些位置可能使用公共
    Azure 中的应用程序，而有些可能使用 Azure Stack，但它们具有相同的功能和能力。
- en: Azure Stack may be an interesting option for Microsoft partners that may want
    to host Azure Stack in their data center and offer Azure services in their country.
    If companies or government agencies are required to keep data in their country,
    hosting providers could use Azure Stack to run Azure services in that country
    for such organizations.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Stack 可能是微软合作伙伴的一个有趣选择，这些合作伙伴可能希望在他们的数据中心托管 Azure Stack，并在他们的国家提供 Azure
    服务。如果公司或政府机构需要将数据保存在本国，托管服务提供商可以使用 Azure Stack 在该国为这些组织提供 Azure 服务。
- en: 'Fabric, model, and deployment tools are not only things that Azure and Azure
    Stack share. Azure portal is another thing that is very similar in both cases.
    Azure Stack comes with two versions of portal: user and administration. The former
    is used for consuming and creating resources, similar to what we have in the public
    Azure portal, and is later used to configure quotas and limitations for users
    and tenants. The administration part of the portal is especially interesting for
    those who decide to use Azure Stack to host Azure services locally and offer them
    to others, as this will allow them to control limitations and spending for each
    customer.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 架构、模型和部署工具不仅是 Azure 和 Azure Stack 共享的东西。Azure 门户也是两者非常相似的一项内容。Azure Stack 提供了两个版本的门户：用户版和管理版。用户版用于消耗和创建资源，类似于我们在公共
    Azure 门户中看到的内容，之后用于配置配额和限制。门户的管理部分对于那些决定使用 Azure Stack 在本地托管 Azure 服务并将其提供给他人的人尤其重要，因为这将使他们能够控制每个客户的限制和支出。
- en: 'You can compare the design of Azure and the Azure Stack portal in the next
    two screenshots, the first being **public Azure** and the second **Azure Stack**.
    As you can see, the design is very similar and the difference is the name in the
    top-left corner:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过接下来的两个截图对比 Azure 和 Azure Stack 门户的设计，第一个是**公共 Azure**，第二个是**Azure Stack**。如您所见，设计非常相似，区别在于左上角的名称：
- en: '![](img/e1f215d3-1bac-45d5-b97c-7a7dc1353da8.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e1f215d3-1bac-45d5-b97c-7a7dc1353da8.png)'
- en: '![](img/221ccd4b-8527-4cb8-bd23-de07ae6d1e07.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/221ccd4b-8527-4cb8-bd23-de07ae6d1e07.png)'
- en: Summary
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: As explained, the hybrid cloud is a reality for most organizations, whether
    it's because of regulations or investment in local infrastructure. We already
    covered how to migrate or extend services to the cloud, and a very important part
    of this is managing identities in the cloud. Data is important, but managing who
    can access that data is just as important. In extending local infrastructure to
    the cloud, we can set up a replica of the domain controller and use the Active
    Directory to manage identities and delegate access, but this only extends to IaaS.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，混合云已成为大多数组织的现实，无论是因为法规要求，还是投资于本地基础设施。我们已经讨论了如何迁移或将服务扩展到云，管理云中的身份是这一过程的一个非常重要部分。数据很重要，但管理谁可以访问这些数据同样重要。在将本地基础设施扩展到云时，我们可以设置域控制器的副本，并使用
    Active Directory 来管理身份和委派访问权限，但这仅限于 IaaS。
- en: To manage this with PaaS, we must use Azure Active Directory, which is often
    called Identity as a Service. In the next chapter, we'll discuss Azure Active
    Directory, how to use it, and even extend local identities to Azure Active Directory.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 PaaS 管理此项服务，我们必须使用 Azure Active Directory，通常称为身份即服务。在下一章中，我们将讨论 Azure Active
    Directory，如何使用它，甚至如何将本地身份扩展到 Azure Active Directory。
- en: Questions
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: The hybrid cloud is often only an option because of...
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 混合云通常仅仅是一个选择，因为...
- en: Regulations
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 法规
- en: Investment
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 投资
- en: Both
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: We can connect a local network and Azure using...
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用...连接本地网络和 Azure。
- en: Site-to-Site
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 站点到站点
- en: ExpressRoute
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: ExpressRoute
- en: Both
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: Azure resources needed for S2S...
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为 S2S 所需的 Azure 资源...
- en: A virtual network gateway
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虚拟网络网关
- en: An on-premises data gateway
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地数据网关
- en: Both
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: A local network gateway holds the configuration of a...
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地网络网关包含...
- en: Virtual network
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虚拟网络
- en: Local network
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地网络
- en: Both
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: A VPN device configuration can be downloaded from the Azure portal.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: VPN 设备配置可以从 Azure 门户下载。
- en: 'True'
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正确
- en: True, but for a limited number of devices
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正确，但仅限少数设备
- en: 'False'
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 错误
- en: The recommended mode for S2S connection is...
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: S2S 连接的推荐模式是...
- en: Resource manager
  id: totrans-133
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 资源管理器
- en: Classic
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 经典版
- en: Both
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
- en: To ensure that you can use local identities in the hybrid cloud, you must deploy...
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为确保在混合云中可以使用本地身份，必须部署...
- en: Domain controller in disaster recovery
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 灾难恢复中的域控制器
- en: Domain controller in Azure
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure 中的域控制器
- en: Always on availability group
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 始终在线可用性组
- en: An on-premises data gateway can be used with...
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 本地数据网关可以与...
- en: All Azure Services
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有 Azure 服务
- en: A limited number of Azure Services
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 限量提供的 Azure 服务
- en: A single Azure Service
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单一的 Azure 服务
- en: Azure Stack is...
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure Stack 是...
- en: An extension of Azure in your local data center
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在本地数据中心扩展 Azure
- en: An extension of your local data center in Azure
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure 中本地数据中心的扩展
- en: An extension of Azure in another public cloud
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在另一个公共云中扩展 Azure
- en: Azure Stack offers...
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure Stack 提供...
- en: IaaS
  id: totrans-149
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: IaaS
- en: PaaS
  id: totrans-150
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: PaaS
- en: Both
  id: totrans-151
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两者
