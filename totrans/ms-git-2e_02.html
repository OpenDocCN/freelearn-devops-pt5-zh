<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-15"><a id="_idTextAnchor015" class="pcalibre1 pcalibre calibre6"/>1</h1>
<h1 id="_idParaDest-16" class="calibre5"><a id="_idTextAnchor016" class="pcalibre1 pcalibre calibre6"/>Git Basics in Practice</h1>
<p class="calibre3">This book is intended for intermediate and advanced Git users to help them on their road to mastering Git. Therefore, the chapters following this one will assume you know the basics of Git, and have advanced past the beginner stage.</p>
<p class="calibre3">This chapter will serve as a reminder of version control basics with Git. The focus will be on providing practical aspects of the technology, showing and explaining basic version control operations on the example of the development of an example project, and the collaboration between two developers.</p>
<p class="calibre3">In this chapter, we will cover the following:</p>
<ul class="calibre16">
<li class="calibre15">A brief introduction to version control and Git</li>
<li class="calibre15">Setting up a Git environment and Git repository (<strong class="source-inline1">init</strong> and <strong class="source-inline1">clone</strong>)</li>
<li class="calibre15">Adding files, checking status, creating commits, and examining the history</li>
<li class="calibre15">Interacting with other Git repositories (<strong class="source-inline1">pull</strong> and <strong class="source-inline1">push</strong>)</li>
<li class="calibre15">Creating and listing branches, switching to a branch, and merging changes</li>
<li class="calibre15">Resolving a simple merge conflict</li>
<li class="calibre15">Creating and publishing a tag</li>
</ul>
<h1 id="_idParaDest-17" class="calibre5"><a id="_idTextAnchor017" class="pcalibre1 pcalibre calibre6"/>Technical requirements</h1>
<p class="calibre3">To follow the examples shown in this chapter, you will need Git: <a href="https://git-scm.com/" class="pcalibre1 pcalibre calibre6">https://git-scm.com/</a>. You will also need an interactive shell (for example, Git Bash if you are using MS Windows), a text editor or an IDE for web development (for editing JavaScript and HTML), and a web browser.</p>
<p class="calibre3">You can access the code of an example project used in this chapter at the following URLs: <a href="https://github.com/PacktPublishing/Mastering-Git---Second-Edition/tree/main/chapter01" class="pcalibre1 pcalibre calibre6">https://github.com/PacktPublishing/Mastering-Git---Second-Edition/tree/main/chapter01</a> and <a href="https://github.com/jnareb/Mastering-Git---Second-Edition---chapter01-sample_project" class="pcalibre1 pcalibre calibre6">https://github.com/jnareb/Mastering-Git---Second-Edition---chapter01-sample_project</a>.</p>
<h1 id="_idParaDest-18" class="calibre5"><a id="_idTextAnchor018" class="pcalibre1 pcalibre calibre6"/>A brief introduction to version control and Git</h1>
<p class="calibre3">A <strong class="bold">version control system</strong> (sometimes called <strong class="bold">revision control</strong>) is a tool that lets you track the <a id="_idIndexMarker000" class="pcalibre1 pcalibre calibre6"/>history <a id="_idIndexMarker001" class="pcalibre1 pcalibre calibre6"/>and attribution of your<a id="_idIndexMarker002" class="pcalibre1 pcalibre calibre6"/> project files over time (stored in <a id="_idIndexMarker003" class="pcalibre1 pcalibre calibre6"/>a <strong class="bold">repository</strong>) and helps the developers in the team to work together. Modern version control systems give each developer their own sandbox, preventing their work in progress from conflicting, and all the while providing a mechanism to merge changes and synchronize work. They also allow us to switch between different lines of development, called <strong class="bold">branches</strong>; this <a id="_idIndexMarker004" class="pcalibre1 pcalibre calibre6"/>mechanism allows the developer to change, for example, from working on introducing a new feature step by step to fixing the bug in an older, released version of the project.</p>
<p class="calibre3"><strong class="bold">Distributed version control systems</strong> (such as Git) give each developer their own copy of the <a id="_idIndexMarker005" class="pcalibre1 pcalibre calibre6"/>project’s history, which is <a id="_idIndexMarker006" class="pcalibre1 pcalibre calibre6"/>called a <strong class="bold">clone</strong> of a repository. This is what makes Git fast, because nearly all operations are performed locally. It is also what makes Git flexible because you can set up repositories in many ways. Repositories meant for development also provide <a id="_idIndexMarker007" class="pcalibre1 pcalibre calibre6"/>a separate <strong class="bold">working area</strong> (or a <strong class="bold">worktree</strong>) with project files for each developer. Git’s branching model enables cheap local branching, allowing the use of branches for context switching by creating sandboxes for different tasks. It also makes it possible to use a very flexible <em class="italic">topic branch</em> workflow for collaboration.</p>
<p class="calibre3">The fact that the whole history is accessible allows for a <em class="italic">long-term undo</em>, rewinding to the last working version, and so on. Tracking ownership of changes automatically makes it possible to find out who was responsible for any given area of code, and when each change was done. You can compare different revisions, go back to the revision a user is sending a bug report against, and even automatically find out which revision introduced a regression bug (with <code>git bisect</code>). Tracking changes to the tips of branches with <strong class="bold">reflog</strong> allows for easy undo and recovery.</p>
<p class="calibre3">A unique feature of Git is that it enables explicit access to the <strong class="bold">staging area</strong> for creating <strong class="bold">commits</strong> (new revisions—that is, new versions of a project). This brings additional flexibility to managing your working area and deciding on the shape of a future commit.</p>
<p class="calibre3">All this flexibility and power come at a cost. It is not easy to master using Git, even though it is quite easy<a id="_idIndexMarker008" class="pcalibre1 pcalibre calibre6"/> to<a id="_idIndexMarker009" class="pcalibre1 pcalibre calibre6"/> learn its basic use. This book will help you attain this expertise, but let us start with a reminder about the basics of Git.</p>
<h1 id="_idParaDest-19" class="calibre5"><a id="_idTextAnchor019" class="pcalibre1 pcalibre calibre6"/>Git by example</h1>
<p class="calibre3">Let’s follow a step-by-step, section-by-section, simple <a id="_idIndexMarker010" class="pcalibre1 pcalibre calibre6"/>example of two developers using Git to work together on a simple project. You can find all three repositories (for two developers, and the bare server repository) with the example code files for this chapter, where you can examine the code, history, and reflog, at <a href="https://github.com/PacktPublishing/Mastering-Git---Second-Edition" class="pcalibre1 pcalibre calibre6">https://github.com/PacktPublishing/Mastering-Git---Second-Edition</a>, in a <code>sample_project.zip</code> archive.</p>
<p class="callout-heading">Following the example</p>
<p class="callout">To follow this example of the team development process on a single computer, you can simply create three folders called, for example, <strong class="source-inline1">alice/</strong>, <strong class="source-inline1">bob/</strong>, and <strong class="source-inline1">server/</strong>, and switch to the appropriate folder when following work done by Alice, Bob, and Carol, respectively.</p>
<p class="callout">There are a few simple changes you need to make for this simulation to work. When creating a repository as Carol, you don’t need to create and switch to the <strong class="source-inline1">/srv/git</strong> directory, so you can simply skip these commands. In Alice or Bob’s role, you need to create separate identities in the repository’s <em class="italic">local</em> configuration, either with the <strong class="source-inline1">git config</strong> command without the <strong class="source-inline1">--user</strong> option or by editing the <strong class="source-inline1">.git/config</strong> file in the appropriate repository. In place of the <strong class="source-inline1">https://git.company.com/random</strong> repository URL, which does not exist, simply use the path to the server repository: <strong class="source-inline1">../server/random.git</strong>.</p>
<p class="callout">Additionally, if you plan on moving the directory with <strong class="source-inline1">alice/</strong>, <strong class="source-inline1">bob/</strong>, and <strong class="source-inline1">server/</strong> subdirectories, you will need to edit the “origin” repository URL that is stored in repository config files by changing it from the absolute path to a relative path—namely, <strong class="source-inline1">../../server/random.git</strong>.</p>
<h2 id="_idParaDest-20" class="calibre7"><a id="_idTextAnchor020" class="pcalibre1 pcalibre calibre6"/>Setup and initialization</h2>
<p class="calibre3">A company has begun<a id="_idIndexMarker011" class="pcalibre1 pcalibre calibre6"/> work on a new product. This product calculates a random number—an integer value of a specified range.</p>
<p class="calibre3">The company has assigned two developers to work on this new project, Alice and Bob. Both developers are telecommuting to the company’s corporate headquarters. After a bit of discussion, they have decided to implement their product as a simple web application in JavaScript and HTML and to use Git 2.41.0 (<a href="http://git-scm.com" class="pcalibre1 pcalibre calibre6">git-scm.com</a>) for version control.</p>
<p class="callout-heading">Note</p>
<p class="callout">This project and the code are intended for demonstration purposes only and will be much simplified. The details of code are not important here—what is important is how the code changes, and how Git is used to help with the development.</p>
<h3 class="calibre9">Repository setup</h3>
<p class="calibre3">With a small team, they have decided on the setup shown in the following diagram.</p>
<p class="callout-heading">Important note</p>
<p class="callout">This is only one possible setup, with<a id="_idIndexMarker012" class="pcalibre1 pcalibre calibre6"/> the <strong class="bold">central canonical repository</strong>, and without a dedicated maintainer responsible for this repository (all developers are equal in this setup). It is not the only possibility; other ways of configuring repositories will be shown in <a href="B21194_06.xhtml#_idTextAnchor140" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 6</em></a>, <em class="italic">Collaborative Development </em><em class="italic">with Git</em>.</p>
<div><div><img alt="Figure 1.1 – Repository setup for the sample project (using a centralized workflow)" src="img/B21194_01_01.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 1.1 – Repository setup for the sample project (using a centralized workflow)</p>
<h3 class="calibre9">Creating a Git repository</h3>
<p class="calibre3">Alice gets the project<a id="_idIndexMarker013" class="pcalibre1 pcalibre calibre6"/> started by asking Carol, an administrator, to create a new repository specifically for collaborating on a project, to share work with the whole team:</p>
<pre class="console">
carol@server:~$ mkdir -p /srv/git
carol@server:~$ cd /srv/git
carol@server:/srv/git$ git init --bare random.git
Initialized empty Git repository in /srv/git/random.git/</pre>
<p class="callout-heading">Important note</p>
<p class="callout">Command-line examples follow the Unix convention of having <strong class="source-inline1">user@host:directory</strong> at the beginning of the command prompt, to make it easier to guess from first glance who performs a command, on what computer, and in which directory (here, the tilde, <strong class="source-inline1">~</strong>, denotes the user’s home directory). This is the usual command prompt setup on Linux; a similar-looking prompt is used by Git Bash.</p>
<p class="calibre3">You can configure your command prompt to show Git-specific information, such as the name of the repository, the subdirectory within the repository, the current branch, and even the worktree status (see <a href="B21194_13_split_000.xhtml#_idTextAnchor320" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 13</em></a>, <em class="italic">Customizing and </em><em class="italic">Extending Git</em>).</p>
<p class="calibre3">I consider the details of server configuration to be too much for this chapter. Just imagine that it happened, and nothing went wrong, or look at <a href="B21194_14.xhtml#_idTextAnchor349" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 14</em></a>, <em class="italic">Git Administration</em>.</p>
<p class="calibre3">You can also use a tool to manage Git repositories (for example, <code>gitolite</code>); creating a public repository on a server would then, of course, look different. Often, though, it involves creating a Git repository with <code>git init</code> (without <code>--bare</code>) in your own home directory and then pushing it with an explicit URI to the server, which would then automatically create the public repository.</p>
<p class="calibre3">Or perhaps the repository was created through the web interface of tools such as GitHub, Bitbucket, or <a id="_idIndexMarker014" class="pcalibre1 pcalibre calibre6"/>GitLab (either hosted in the cloud, or installed on-premises).</p>
<h3 class="calibre9">Cloning the repository and creating the first commit</h3>
<p class="calibre3">Bob gets the information that the project repository is ready, and he can start coding.</p>
<p class="calibre3">Since this is Bob’s first time using Git, he first sets up his <code>~/.gitconfig</code> file with information that will be used to identify his commits (for example, with <code>git config --</code><code>global --edit</code>):</p>
<pre class="source-code">
[user]
    name = Bob Hacker
    email = bob@company.com</pre>
<p class="calibre3">Now, he needs to get his own repository instance (which currently is empty):</p>
<pre class="console">
bob@hostB:~$ git clone https://git.company.com/random
Cloning into 'random'...
warning: You appear to have cloned an empty repository.
done.
bob@hostB:~$ cd random
bob@hostB:~/random$</pre>
<p class="callout-heading">Tip</p>
<p class="callout">All examples in this chapter use the command-line interface. Those commands might be given using a Git GUI or IDE integration, as explained in the <em class="italic">Graphical interfaces</em> section in <a href="B21194_13_split_000.xhtml#_idTextAnchor320" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 13</em></a>, <em class="italic">Customizing and Extending Git</em>. The book <em class="italic">Git: Version Control for Everyone</em>, published by Packt Publishing, shows GUI equivalents for the command line.</p>
<p class="calibre3">Bob notices that <a id="_idIndexMarker015" class="pcalibre1 pcalibre calibre6"/>Git said that it is an empty repository with no source code yet, and starts coding. He opens his text editor (or IDE of choice) and creates the starting point for their product.</p>
<p class="calibre3">First, he creates an HTML file (<code>index.html</code>) with the simplest possible interface for the web application being created, just a button and an input field:</p>
<pre class="source-code">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Random Number Generator&lt;/title&gt;
    &lt;script src="img/random.js" defer&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button disabled&gt;Generate number&lt;/button&gt;
&lt;label for="max"&gt;up to&lt;/label&gt;
&lt;input type="number" id="max" name="rand_max" value="10" /&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p class="calibre3">Then, Bob writes JavaScript source code (<code>random.js</code>) that is responsible for web application behavior—in this case, generating and displaying a random integer number within a given range from 1 to a configurable maximum, inclusive:</p>
<pre class="source-code">
function getRandomInt(max) {
    return Math.floor(Math.random() * max) + 1;
}
function generateRandom() {
    let max = document.getElementById('max').value;
    alert(getRandomInt(max));
}
let button = document.querySelector('button');
button.addEventListener('click', generateRandom);
button.disabled = false;</pre>
<p class="calibre3">Typically, for most <a id="_idIndexMarker016" class="pcalibre1 pcalibre calibre6"/>initial implementations, this version is missing a lot of features but it is a good place to begin. Before committing his code, Bob wants to make sure that it looks all right and that it works correctly. He opens the <code>index.html</code> file in a web browser or uses a live preview feature of his IDE, as shown in <em class="italic">Figure 1</em><em class="italic">.2</em>.</p>
<div><div><img alt="Figure 1.2 – Preview of the first version of the example application" src="img/B21194_01_02.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Preview of the first version of the example application</p>
<p class="calibre3">Alright! It’s time to <em class="italic">add</em> both files to the repository:</p>
<pre class="console">
bob@hostB:~/random$ git add index.html random.js</pre>
<p class="calibre3">Bob uses the <code>status</code> operation to make sure that the pending changeset (the future commit) looks<a id="_idIndexMarker017" class="pcalibre1 pcalibre calibre6"/> proper.</p>
<p class="calibre3">We use a short form of <code>git status</code> here to reduce the amount of space taken by examples; you can find an example of a full <code>status</code> output further in the chapter:</p>
<pre class="console">
bob@hostB:~/random$ git status --short
A  index.html
A  random.js</pre>
<p class="calibre3">Now it’s time to <em class="italic">commit</em> to the current version:</p>
<pre class="console">
bob@hostB:~/random$ git commit -a -m "Initial implementation"
[master (root-commit) 961e72b] Initial implementation
 2 files changed, 25 insertions(+)
 create mode 100644 index.html
 create mode 100644 random.js</pre>
<p class="callout-heading">Important note</p>
<p class="callout">Normally, you would<a id="_idIndexMarker018" class="pcalibre1 pcalibre calibre6"/> create a <strong class="bold">commit message</strong> not by using the <strong class="source-inline1">-m &lt;message&gt;</strong> command-line option but by letting Git open an editor. We use this form here to make the examples more compact. In actual practice, it is recommended to provide a more detailed description of changes.</p>
<p class="callout">The <strong class="source-inline1">-a</strong>/<strong class="source-inline1">--all</strong> option in the <strong class="source-inline1">git commit -a</strong> command means to take <em class="italic">all</em> changes to the tracked files. This is not the only possible way of creating revisions; you can separate manipulating the staging area from creating a commit—this is, however, a separate issue, left for <a href="B21194_03_split_000.xhtml#_idTextAnchor049" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 3</em></a>, <em class="italic">Managing </em><em class="italic">Your </em><em class="italic">Worktrees</em>.</p>
<p class="calibre3">Now it’s time to <a id="_idIndexMarker019" class="pcalibre1 pcalibre calibre6"/>make those changes visible to Alice.</p>
<h2 id="_idParaDest-21" class="calibre7"><a id="_idTextAnchor021" class="pcalibre1 pcalibre calibre6"/>Collaborative development</h2>
<p class="calibre3">One of the main goals <a id="_idIndexMarker020" class="pcalibre1 pcalibre calibre6"/>of a version control system is to help developers work together on a common project. With a distributed version control system, such as Git, this involves an explicit step of publishing changes to be visible to others.</p>
<h3 class="calibre9">Publishing changes</h3>
<p class="calibre3">After finishing working on the initial version of the project, Bob decides that it is ready to be published (to be made available for other developers). He <em class="italic">pushes</em> the changes as follows:</p>
<pre class="console">
bob@hostB:~/random$ git push
Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 4 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 670 bytes | 22.00 KiB/s, done.
Total 4 (delta 0), reused 0 (delta 0)
To https://git.company.com/random.git
 * [new branch]      master -&gt; master</pre>
<p class="callout-heading">Tip</p>
<p class="callout">Note that, depending on the speed of the network, Git could show progress information during remote operations such as <strong class="source-inline1">clone</strong>, <strong class="source-inline1">push</strong>, and <strong class="source-inline1">fetch</strong>. Such information is omitted from examples in this book, except where that information is actually discussed while examining the history and viewing changes.</p>
<p class="callout">Also, if you use an older Git version, it could require setting a <strong class="source-inline1">push.default</strong> configuration variable.</p>
<p class="calibre3">Since it is Alice’s<a id="_idIndexMarker021" class="pcalibre1 pcalibre calibre6"/> first time using Git on her desktop machine, she first tells Git how her commits should be identified:</p>
<pre class="console">
alice@hostA:~$ git config --global user.name "Alice Developer"
alice@hostA:~$ git config --global user.email alice@company.com</pre>
<p class="calibre3">Now, Alice needs to set up her own repository instance:</p>
<pre class="console">
alice@hostA:~$ git clone https://git.company.com/random
Cloning into 'random'...
done.</pre>
<p class="calibre3">Alice examines the working directory:</p>
<pre class="console">
alice@hostA:~$ cd random
alice@hostA:~/random$ ls –alF
total 6
drwxr-xr-x    1 alice staff        0 May 2 16:44 ./
drwxr-xr-x    4 alice staff        0 May 2 16:39 ../
drwxr-xr-x    1 alice staff        0 May 2 16:39 .git/
-rw-r--r--    1 alice staff      331 May 2 16:39 index.html
-rw-r--r--    1 alice staff      327 May 2 16:39 random.js</pre>
<p class="callout-heading">Tip</p>
<p class="callout">The <strong class="source-inline1">.git</strong> directory contains Alice’s whole copy (clone) of the repository in Git internal format and some repository-specific administrative information. See the <strong class="bold">gitrepository-layout(5)</strong> man page for details of the file layout, which can be done, for example, with the <strong class="source-inline1">git help </strong><strong class="source-inline1">repository-layout</strong> command.</p>
<p class="calibre3">She wants to<a id="_idIndexMarker022" class="pcalibre1 pcalibre calibre6"/> check the log to see the details (to examine the project history):</p>
<pre class="console">
alice@hostA:~/random$ git log
commit 961e72b31b0d2dacc0584cbe8953c3aed1042e9b (HEAD -&gt; master)
Author: Bob Hacker bob@company.com
Date:   Sun May 2 22:34:40 2021 +0200
    Initial implementation</pre>
<p class="callout-heading">Naming revisions</p>
<p class="callout">At the lowest level, a Git version identifier is a SHA-1 hash, for example, <strong class="source-inline1">2b953b4e80</strong>. Git supports various forms of referring to revisions, including unambiguously shortened SHA-1 (with a minimum of four characters)—see <a href="B21194_04.xhtml#_idTextAnchor083" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 4</em></a>, <em class="italic">Exploring Project History</em>, for more ways.</p>
<p class="calibre3">When Alice decides to take a look at the application, she decides that using <code>alert()</code> to show the result is not a good user interface. To generate a new random number, the user needs to first close the window. It would be better if it was possible to generate a new result immediately.</p>
<p class="calibre3">She decides that a better solution would be to put the result on the page, below the form. She adds a<a id="_idIndexMarker023" class="pcalibre1 pcalibre calibre6"/> single line to <code>index.html</code> to make a place for it:</p>
<pre class="source-code">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Random Number Generator&lt;/title&gt;
    &lt;script src="img/random.js" defer&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button disabled&gt;Generate number&lt;/button&gt;
&lt;label for="max"&gt;up to&lt;/label&gt;
&lt;input type="number" id="max" name="rand_max"<a id="_idTextAnchor022" class="calibre13 pcalibre1 pcalibre"/> value="10" /&gt;
<strong class="bold1">&lt;div id="result"&gt;&lt;/div&gt;</strong>
&lt;/body&gt;
&lt;/html&gt;</pre>
<p class="calibre3">She then replaces the use of <code>alert()</code> in the JavaScript code by showing the result directly on the application page, using just the added <code>&lt;div </code><code>id="result"&gt;&lt;/div&gt;</code> placeholder:</p>
<pre class="source-code">
function getRandomInt(max) {
    return Math.floor(Math.random() * max) + 1;
}
function generateRandom() {
    let max = document.getElementById('max').value;
<strong class="bold1">    let res = document.getElementById('result');</strong>
<strong class="bold1">    res.textContent = 'Result: ' + getRandomInt(max);</strong>
}
let button = document.querySelector('button');
button.addEventListener('click', generateRandom);
button.disabled = false;</pre>
<p class="calibre3">She then opens her web browser to check that it works correctly. She clicks the <strong class="bold">Generate number</strong> button<a id="_idIndexMarker024" class="pcalibre1 pcalibre calibre6"/> a few times to check that it really generates random numbers:</p>
<div><div><img alt="Figure 1.3 – Application after Alice’s changes, with the result on the page itself" src="img/B21194_01_03.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 1.3 – Application after Alice’s changes, with the result on the page itself</p>
<p class="calibre3">Everything looks alright, so she uses the <code>status</code> operation to see the pending changes:</p>
<pre class="console">
alice@hostA:~/random$ git status -s
 M index.html
 M random.js</pre>
<p class="calibre3">No surprise here. Git knows that <code>index.html</code> and <code>random.js</code> have been modified. She wants to double-check <a id="_idIndexMarker025" class="pcalibre1 pcalibre calibre6"/>by reviewing the actual changes with the <code>diff</code> command:</p>
<pre class="console">
alice@hostA:~/random$ $ git diff
diff --git a/index.html b/index.html
index 1e79bb1..3021b9d 100644
--- a/index.html
+++ b/index.html
@@ -9,5 +9,6 @@
 &lt;button disabled&gt;Generate number&lt;/button&gt;
 &lt;label for="max"&gt;up to&lt;/label&gt;
 &lt;input type="number" id="max" name="rand_max" value="10" /&gt;
+&lt;div id="result"&gt;&lt;/div&gt;
 &lt;/body&gt;
 &lt;/html&gt;
diff --git a/random.js b/random.js
index 3533d15..b036fa1 100644
--- a/random.js
+++ b/random.js
@@ -4,7 +4,8 @@ function getRandomInt(max) {
 function generateRandom() {
     let max = document.getElementById('max').value;
-    alert(getRandomInt(max));
+    let res = document.getElementById('result');
+    res.textContent = 'Result: ' + getRandomInt(max);
 }
 let button = document.querySelector('button');</pre>
<p class="calibre3">Now, it’s time to<a id="_idIndexMarker026" class="pcalibre1 pcalibre calibre6"/> commit the changes and push them to the public repository:</p>
<pre class="console">
alice@hostA:~/random$ git commit -a -m "Show result on the page instead of using alert()"
[master a030d99] Show result on the page instead of using alert()
 2 files changed, 14 insertions(+), 12 deletions(-)
alice@hostA:~/random$ git push
To https://git.company.com/random.git
   961e72b..a030d99  master -&gt; master</pre>
<h3 class="calibre9">Renaming and moving files</h3>
<p class="calibre3">While this is happening, Bob moves on to his next task, which is to restructure the tree a bit. He doesn’t want the top level of the repository to get too cluttered, so he decides to follow one of the established conventions for the directory structure, and to move all the JavaScript source code files into the <code>scripts/</code> subdirectory:</p>
<pre class="console">
bob@hostB:~/random$ mkdir scripts
bob@hostB:~/random$ git mv *.js scripts/</pre>
<p class="calibre3">He then checks that everything works correctly, and it turns out that he needs to update the path to the JavaScript code in the <code>index.html</code> file, so he does that:</p>
<pre class="source-code">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Random Number Generator&lt;/title&gt;
<strong class="bold1">    &lt;script src="img/random.js" defer&gt;&lt;/script&gt;</strong>
&lt;/head&gt;
&lt;body&gt;
&lt;button disabled&gt;Generate number&lt;/button&gt;
&lt;label for="max"&gt;up to&lt;/label&gt;
&lt;input type="number" id="max" name="rand_max" value="10" /&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p class="calibre3">He checks that everything works fine now, examines the status, and commits changes:</p>
<pre class="console">
bob@hostB:~/random$ git status --short
 M index.html
R  random.js -&gt; scripts/random.js
bob@hostB:~/random$ git commit -a -m "Directory structure"
[master 1b58e54] Directory structure
 2 files changed, 1 insertion(+), 1 deletion(-)
 rename random.js =&gt; scripts/random.js (100%)</pre>
<p class="calibre3">While he’s at it, to<a id="_idIndexMarker027" class="pcalibre1 pcalibre calibre6"/> minimize the impact of reorganization on the <code>diff</code> output, he configures Git to always use <code>rename</code> and copy detection:</p>
<pre class="console">
bob@hostB:~/random$ git config --global diff.renames copies</pre>
<p class="calibre3">Bob then decides the time has come to add a <code>README.md</code> file for the project:</p>
<pre class="console">
bob@hostB:~/random$ git status -s
?? README.md
bob@hostB:~/random$ git add README.md
bob@hostB:~/random$ git status -s
A  README.md
bob@hostB:~/random$ git commit -a -m "Added README.md"
[master 6789f76] Added README.md
 1 file changed, 3 insertions(+)
 create mode 100644 README.md</pre>
<p class="calibre3">Bob decides to rename <code>random.js</code> to <code>gen_random.js</code>:</p>
<pre class="console">
bob@hostA:~/random$ git mv scripts/random.js scripts/gen_random.js</pre>
<p class="calibre3">This, of course, also requires changes to <code>index.html</code>:</p>
<pre class="console">
bob@hostB:~/random$ git status -s
 M index.html
R  scripts/random.js -&gt; scripts/gen_random.js</pre>
<p class="calibre3">He then commits <a id="_idIndexMarker028" class="pcalibre1 pcalibre calibre6"/>those changes.</p>
<pre class="console">
bob@hostB:~/random$ git commit -a -m "Rename random.js to gen_random.js"</pre>
<h3 class="calibre9">Updating your repository (with merge)</h3>
<p class="calibre3">Reorganization done, now Bob tries to publish those changes:</p>
<pre class="console">
bob@hostA random$ git push
To https://git.company.com/random
 ! [rejected]        master -&gt; master (fetch first)
error: failed to push some refs to 'https://git.company.com/random'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</pre>
<p class="calibre3">But Alice was working at the same time, and she had her change ready to commit and push first. Git is not allowing Bob to publish his changes because Alice has already pushed something to the <code>master</code> branch, and Git is preserving her changes.</p>
<p class="callout-heading">Important note</p>
<p class="callout">Hints and pieces of advice in Git command output will be skipped from here on for the sake of brevity.</p>
<p class="calibre3">Bob uses <code>pull</code> to bring in changes (as described in <code>hint</code> in the command output):</p>
<pre class="console">
bob@hostB:~/random$ git pull
From https://git.company.com/random
 + 3b16f17...db23d0e master     -&gt; origin/master
Auto-merging scripts/gen_random.c
Merge made by the 'recursive' strategy.
 index.html            | 1 +
 scripts/gen_random.js | 3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)</pre>
<p class="calibre3">The <code>git pull</code> command<a id="_idIndexMarker029" class="pcalibre1 pcalibre calibre6"/> fetched the changes, automatically merged them with Bob’s changes, and created a merge commit—opening editor to confirm committing the merge.</p>
<p class="callout-heading">Important note</p>
<p class="callout">From version 2.31 onward, Git asks the user to set the <strong class="source-inline1">pull.rebase</strong> configuration variable; we assume that Alice and Bob set it to <strong class="source-inline1">false</strong>. See <a href="B21194_09.xhtml#_idTextAnchor229" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 9</em></a>, <em class="italic">Merging Changes Together</em>, the <em class="italic">Methods of combining changes</em> section, for a more detailed description of the difference between using merge commits and using rebasing to combine changes.</p>
<p class="calibre3">Everything now seems to be good. The merge commit is done. Apparently, Git was able to merge Alice’s changes directly into Bob’s moved and renamed copy of a file without any problems. Marvelous!</p>
<pre class="console">
bob@hostB:~/random$ git show
commit df9132d4482dfd66d6d9843db205d4e775c76509 (HEAD -&gt; master)
Merge: eabf309 a030d99
Author: Bob Hacker bob@company.com
Date:   Mon May 3 02:31:23 2021 +0200
    Merge branch 'master' of https://git.company.com/random</pre>
<p class="calibre3">Bob checks that it works correctly (because automatically merging does not necessarily mean that the merge output is correct). It works fine and he is ready to push the merge:</p>
<pre class="console">
bob@hostB random$ git push
To https://git.company.com/random
   a030d99..df9132d  master -&gt; master</pre>
<h3 class="calibre9">Creating a tag – a symbolic name for the revision</h3>
<p class="calibre3">Alice and Bob decide<a id="_idIndexMarker030" class="pcalibre1 pcalibre calibre6"/> that the project is ready for wider distribution. Bob creates<a id="_idIndexMarker031" class="pcalibre1 pcalibre calibre6"/> a <strong class="bold">tag</strong> so they can more easily access and refer to the released version. He uses <a id="_idIndexMarker032" class="pcalibre1 pcalibre calibre6"/>an <strong class="bold">annotated tag</strong> for this; an often-used alternative is to <a id="_idIndexMarker033" class="pcalibre1 pcalibre calibre6"/>use a <strong class="bold">signed tag</strong>, where the annotation contains a PGP signature (which can later be verified):</p>
<pre class="console">
bob@hostB:~/random$ git tag -a -m "random v0.1" v0.1
bob@hostB:~/random$ git tag --list
v0.1
bob@hostB:~/random$ git log -1 --oneline --decorate
df9132d (HEAD -&gt; master, tag: v0.1, origin/master) Merge branch 'master' of https://git.company.com/random</pre>
<p class="calibre3">Of course, the <code>v0.1</code> tag wouldn’t help if it was only in Bob’s local repository. He, therefore, pushes the just-created tag:</p>
<pre class="console">
bob@hostB random$ git push origin tag v0.1
To https://git.company.com/random
 * [new tag]         v0.1 -&gt; v0.1</pre>
<p class="calibre3">Alice updates her repository to get the <code>v0.1</code> tag, and to start with up-to-date work:</p>
<pre class="console">
alice@hostA:~/random$ git pull
From https://git.company.com/random
   a030d99..df9132d  master     -&gt; origin/master
 * [new tag]         v0.1       -&gt; v0.1
Updating a030d99..df9132d
Fast-forward
 README.md                          | 3 +++
 index.html                         | 2 +-
 random.js =&gt; scripts/gen_random.js | 0
 3 files changed, 4 insertions(+), 1 deletion(-)
 create mode 100644 README.md
 rename random.js =&gt; scripts/gen_random.js (100%)</pre>
<h3 class="calibre9">Resolving a merge conflict</h3>
<p class="calibre3">Alice decides that<a id="_idIndexMarker034" class="pcalibre1 pcalibre calibre6"/> it would be a good idea to add a piece of information about where the result of the random number generator would appear:</p>
<pre class="source-code">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Random Number Generator&lt;/title&gt;
    &lt;script src="img/gen_random.js" defer&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button disabled&gt;Generate number&lt;/button&gt;
&lt;input type="number" id="max" name="rand_max" value="10" /&gt;
<strong class="bold1">&lt;div id="result"&gt;Result:&lt;/div&gt;</strong>
&lt;/body&gt;
&lt;/html&gt;</pre>
<p class="calibre3">Grand! Let’s see<a id="_idIndexMarker035" class="pcalibre1 pcalibre calibre6"/> that it works correctly.</p>
<div><div><img alt="Figure 1.4 – After adding information about where the result would appear" src="img/B21194_01_04.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 1.4 – After adding information about where the result would appear</p>
<p class="calibre3">Good. Time to commit the change:</p>
<pre class="console">
alice@hostA:~/random$ git status -s
 M index.html
alice@hostA:~/random$ git commit -a -m "index.html: Show where result goes"
[master e04655f] index.html: Show where result goes
 1 file changed, 1 insertion(+), 1 deletion(-)</pre>
<p class="calibre3">No problems here.</p>
<p class="calibre3">Meanwhile, Bob notices that if one has JavaScript disabled in the web browser or uses a text browser without support for JavaScript, the web application as it is now does not work , without explaining why. It would be a good idea to notify the user about this issue:</p>
<pre class="console">
bob@hostB:~/random$ git pull
Already up-to-date.</pre>
<p class="calibre3">He decides to add a <code>&lt;noscript&gt;</code> tag to explain that JavaScript is required for the application to work:</p>
<pre class="console">
bob@hostB:~/random$ $ git status -s
 M index.html
bob@hostB:~/random$ git diff
diff --git a/index.html b/index.html
index 108885f..80348b7 100644
--- a/index.html
+++ b/index.html
@@ -10,5 +10,6 @@
 &lt;label for="max"&gt;up to&lt;/label&gt;
 &lt;input type="number" id="max" name="rand_max" value="10" /&gt;
 &lt;div id="result"&gt;&lt;/div&gt;
+&lt;noscript&gt;To use this web app, please enable JavaScript.&lt;/noscript&gt;
 &lt;/body&gt;
 &lt;/html&gt;</pre>
<p class="calibre3">Bob uses the w3m<a id="_idIndexMarker036" class="pcalibre1 pcalibre calibre6"/> text-based web browser to check that <code>&lt;noscript&gt;</code> works as intended:</p>
<div><div><img alt="Figure 1.5 – Testing the application in w3m, a ﻿text-based web browser without JavaScript support" src="img/B21194_01_05.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Testing the application in w3m, a text-based web browser without JavaScript support</p>
<p class="calibre3">He then checks in a graphical web browser (or a live preview) that nothing changed for JavaScript-capable clients. He has his change ready to commit and push first:</p>
<pre class="console">
bob@hostB:~/random$ git commit -a -m "Add &lt;noscript&gt; tag"
[master a808ecf] Add &lt;noscript&gt; tag
 1 file changed, 1 insertion(+)
bob@hostB:~/random$ git push
To https://git.company.com/random
   df9132d..a808ecf  master -&gt; master</pre>
<p class="calibre3">So, when Alice is ready to push her changes, Git rejects them:</p>
<pre class="console">
alice@hostA:~/random$ git push
To https://git.company.com/random
 ! [rejected]        master -&gt; master (non-fast-forward)
error: failed to push some refs to 'https://git.company.com/random'</pre>
<p class="calibre3">Ah. Bob must <a id="_idIndexMarker037" class="pcalibre1 pcalibre calibre6"/>have pushed a new changeset already. Alice once again needs to pull and merge to combine Bob’s changes with her own:</p>
<pre class="console">
alice@hostA:~/random$ git pull
Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.</pre>
<p class="calibre3">The merge didn’t go quite as smoothly this time. Git wasn’t able to automatically merge Alice’s and Bob’s changes. Apparently, there was a conflict. Alice decides to open the <code>index.html</code> file in her editor to examine the situation (she could have used a graphical merge tool via <code>git </code><code>mergetool</code> instead):</p>
<pre class="source-code">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Random Number Generator&lt;/title&gt;
    &lt;script src="img/gen_random.js" defer&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button disabled&gt;Generate number&lt;/button&gt;
&lt;label for="max"&gt;up to&lt;/label&gt;
&lt;input type="number" id="max" name="rand_max" value="10" /&gt;
<strong class="bold1">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</strong>
<strong class="bold1">&lt;div id="result"&gt;Result:&lt;/div&gt;</strong>
<strong class="bold1">=======</strong>
<strong class="bold1">&lt;div id="result"&gt;&lt;/div&gt;</strong>
<strong class="bold1">&lt;noscript&gt;To use this web app, please enable JavaScript.&lt;/noscript&gt;</strong>
<strong class="bold1">&gt;&gt;&gt;&gt;&gt;&gt;&gt; a808ecfb89919fd05cf50fbf879b493c83499002</strong>
&lt;/body&gt;
&lt;/html&gt;</pre>
<p class="calibre3">Git has included <a id="_idIndexMarker038" class="pcalibre1 pcalibre calibre6"/>both Bob’s code (between the <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> and <code>========</code> conflict markers) and Alice’s code (between <code>========</code> and <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>). What we want as a final result is to include both blocks of code. Git couldn’t merge it automatically because those blocks were not separated. Alice work adding  <code>Result:</code> can be simply included right before <code>&lt;noscript&gt;</code> added by Bob. After resolving the conflict, the changes look like this:</p>
<pre class="console">
alice@hostA:~/random$ $ git diff
diff --cc index.html
index ea1a830,80348b7..0000000
--- a/index.html
+++ b/index.html
@@@ -9,7 -9,6 +9,6 @@@
  &lt;button disabled&gt;Generate number&lt;/button&gt;
  &lt;label for="max"&gt;up to&lt;/label&gt;
  &lt;input type="number" id="max" name="rand_max" value="10" /&gt;
 -&lt;div id="result"&gt;&lt;/div&gt;
 +&lt;noscript&gt;To use this web app, please enable JavaScript.&lt;/noscript&gt;
+ &lt;div id="result"&gt;Result:&lt;/div&gt;
  &lt;/body&gt;
  &lt;/html&gt;</pre>
<p class="calibre3">That should take care <a id="_idIndexMarker039" class="pcalibre1 pcalibre calibre6"/>of the problem. Alice refreshes the web application in a web browser to check that it works correctly. She marks the conflict as resolved and commits changes:</p>
<pre class="console">
alice@hostA:~/random$ git status -s
UU index.html
alice@hostA:~/random$ git commit -a -m 'Merge: mark output + noscript'
[master 919f0f7] Merge: mark output + noscript</pre>
<p class="calibre3">And then she retries the push:</p>
<pre class="console">
alice@hostA:~/random$ git push
To https://git.company.com/random
   a808ecf..919f0f7  master -&gt; master</pre>
<p class="calibre3">And… done.</p>
<h3 class="calibre9">Adding files in bulk and removing files</h3>
<p class="calibre3">Bob decides to add a <code>COPYRIGHT</code> file with a copyright notice for the project. There was also a <code>NEWS</code> file planned (but not created), so he uses a bulk add to add all the files:</p>
<pre class="console">
bob@hostB:~/random$ git add -v
Nothing specified, nothing added.
Maybe you wanted to say 'git add .'?
bob@hostB:~/random$ git add -v .
add 'COPYRIGHT'
add 'COPYRIGHT~'</pre>
<p class="calibre3">Oops! Because Bob<a id="_idIndexMarker040" class="pcalibre1 pcalibre calibre6"/> didn’t configure his <code>COPYRIGHT~</code>, was caught too (such a system-specific pattern should go to the repository’s <code>.git/info/exclude</code> or personal ignore file, <code>~/.config/git/ignore</code>, as described in <a href="B21194_03_split_000.xhtml#_idTextAnchor049" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 3</em></a>, <em class="italic">Managing Your </em><em class="italic">Worktrees</em>, in the <em class="italic">Ignoring files</em> section). Let’s remove this file:</p>
<pre class="console">
bob@hostB:~/random$ git status -s
A  COPYRIGHT
A  COPYRIGHT~
bob@hostB:~/random$ git rm COPYRIGHT~
error: the following file has changes staged in the index:
    COPYRIGHT~
(use --cached to keep the file, or -f to force removal)
bob@hostB:~/random$ git rm -f COPYRIGHT~
rm 'COPYRIGHT~'</pre>
<p class="calibre3">Let’s check the status and commit the changes:</p>
<pre class="console">
bob@hostB:~/random$ git status -s
A  COPYRIGHT
bob@hostB:~/random$ git commit -a -m 'Added COPYRIGHT'
[master ca3cdd6] Added COPYRIGHT
 1 files changed, 2 insertions(+), 0 deletions(-)
 create mode 100644 COPYRIGHT</pre>
<h3 class="calibre9">Undoing changes to a file</h3>
<p class="calibre3">A bit bored, Bob decides that their web application looks bland, and adds the Bootstrap CSS library (<a href="https://getbootstrap.com" class="pcalibre1 pcalibre calibre6">https://getbootstrap.com</a>) to the <code>index.html</code> header:</p>
<pre class="source-code">
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous"&gt;</pre>
<p class="calibre3">He checks how much source code it changed:</p>
<pre class="console">
bob@hostB:~/random$ git diff --stat
index.html | 4 ++++
 1 file changed, 4 insertions(+)</pre>
<p class="calibre3">That looks all right; however, the application doesn’t look that much better without further changes, and <a id="_idIndexMarker042" class="pcalibre1 pcalibre calibre6"/>now it requires access to the internet. Bob decides that it is not the time to move to the Bootstrap CSS framework,  and undoes the changes to <code>index.html</code>:</p>
<pre class="console">
bob@hostB:~/random$ git status -s
 M index.html
bob@hostB:~/random$ git restore index.html
bob@hostB:~/random$ git status -s</pre>
<p class="calibre3">If you can’t remember how to revert a particular type of change or to update what is to be committed (using <code>git commit</code> without <code>-a</code>), the output of <code>git status</code> (without <code>-s</code>) contains information about what commands to use. This is shown in the following example:</p>
<pre class="console">
bob@hostB:~/random$ git status
On branch master
Your branch is ahead of 'origin/master' by 1 commit.
  (use "git push" to publish your local commits)
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   index.html
no changes added to commit (use "git add" and/or "git commit -a")</pre>
<h2 id="_idParaDest-22" class="calibre7"><a id="_idTextAnchor023" class="pcalibre1 pcalibre calibre6"/>Branching and merging</h2>
<p class="calibre3">Developers often<a id="_idIndexMarker043" class="pcalibre1 pcalibre calibre6"/> need to isolate a specific set of changes that is expected to not be ready for some time, to create another line of development: a branch. Usually, when the mentioned set of changes is ready, you would then want to join those branches, which can be done with a merge operation.</p>
<h3 class="calibre9">Creating a new branch</h3>
<p class="calibre3">Alice decides that it would be a good idea to provide a way for the user to configure the lower bound of the range the random number is chosen from (currently set to <code>1</code>)—that is, make both the minimum and maximum of the generated number configurable.</p>
<p class="calibre3">She needs to add a new input to the <code>index.html</code> file. Alice notices that labels for inputs need to be adjusted, too:</p>
<pre class="source-code">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Random Number Generator&lt;/title&gt;
    &lt;script src="img/gen_random.js" defer&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button disabled&gt;Generate number&lt;/button&gt;
<strong class="bold1">&lt;label for="min"&gt;between&lt;/label&gt;</strong>
<strong class="bold1">&lt;input type="number" id="min" name="rand_min" value="1" /&gt;</strong>
<strong class="bold1">&lt;label for="max"&gt;and&lt;/label&gt;</strong>
&lt;input type="number" id="max" name="rand_max" value="10" /&gt;
&lt;div id="result"&gt;Result:&lt;/div&gt;
&lt;noscript&gt;To use this web app, please enable JavaScript.&lt;/noscript&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p class="calibre3">Then, Alice needs to adjust the JavaScript code to read another input and to generate a random integer between two given values, inclusive:</p>
<pre class="source-code">
<strong class="bold1">function getRandomIntInclusive(min, max) {</strong>
<strong class="bold1">    min = Math.ceil(min);</strong>
<strong class="bold1">    max = Math.floor(max);</strong>
<strong class="bold1">    return Math.floor(Math.random() * (max - min + 1) + min);</strong>
}
function generateRandom() {
<strong class="bold1">    let min = document.getElementById('min').value;</strong>
    let max = document.getElementById('max').value;
    let res = document.getElementById('result');
    res.textContent = 'Result: ' + <strong class="bold1">getRandomIntInclusive(min, max)</strong>;
}
let button = document.querySelector('button');
button.addEventListener('click', generateRandom);
button.disabled = false;</pre>
<p class="calibre3">Alice then checks that everything works correctly:</p>
<div><div><img alt="Figure 1.6 – Upper and lower bounds are made configurable" src="img/B21194_01_06.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 1.6 – Upper and lower bounds are made configurable</p>
<p class="calibre3">However, during testing, she notices that the application does not ensure that the minimum is smaller than or equal to the maximum value, and does not behave correctly if the input’s order is switched.</p>
<p class="calibre3">She decides to try to <a id="_idIndexMarker044" class="pcalibre1 pcalibre calibre6"/>fix this issue. However, to make each commit small and self-contained, ensuring that the application works sanely in such cases (when, for example, the user provides <code>10</code> and <code>5</code> as the minimum and maximum, respectively) will be done as a separate change.</p>
<p class="calibre3">To isolate this line of development from other changes and prevent integrating the feature that is not fully ready, she decides to create her own branch named '<code>min-max'</code> (see also <a href="B21194_08_split_000.xhtml#_idTextAnchor196" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 8</em></a>, <em class="italic">Advanced Branching Techniques</em>), and switch to it:</p>
<pre class="console">
alice@hostA:~/random$ git checkout -b min-max
Switched to a new branch 'min-max'
alice@hostA:~/random$ git branch
  master
* min-max</pre>
<p class="callout-heading">Tip</p>
<p class="callout">Instead of using the <strong class="source-inline1">git checkout –b min-max</strong> or <strong class="source-inline1">git switch --create min-max</strong> shortcut to create a new branch and switch to it in one command invocation, Alice could have first created a branch with <strong class="source-inline1">git branch min-max</strong>, then switched to it with <strong class="source-inline1">git </strong><strong class="source-inline1">switch min-max</strong>.</p>
<p class="calibre3">She commits her changes and pushes them, knowing that the push will succeed because she is working on her private branch:</p>
<pre class="console">
alice@hostA:~/random$ git commit -a -m 'Make lower bound configurable'
[min-max 2361cfc] Make lower bound configurable
 2 files changed, 9 insertions(+), 4 deletions(-)
alice@hostA:~/random$ git push
fatal: The current branch min-max has no upstream branch.
To push the current branch and set the remote as upstream, use
    git push --set-upstream origin min-max</pre>
<p class="calibre3">Alright! Git just wants <a id="_idIndexMarker045" class="pcalibre1 pcalibre calibre6"/>Alice to set up a remote origin as the <code>push</code> strategy); this will also push this branch explicitly:</p>
<pre class="console">
alice@hostA:~/random$ git push --set-upstream origin min-max
To https://git.company.com/random
* [new branch]      min-max -&gt; min-max
Branch 'min-max' set up to track remote branch 'min-max' from 'origin'.</pre>
<p class="callout-heading">Tip</p>
<p class="callout">If she wants to make her branch visible but private (so nobody but her can push to it), she needs to configure the server with <strong class="bold">hooks</strong> or use Git repository management software such as <strong class="source-inline1">gitolite</strong> to manage it for her.</p>
<h3 class="calibre9">Merging a branch (no conflicts)</h3>
<p class="calibre3">Meanwhile, over in the default branch, Bob decides to push his changes by adding the <code>COPYRIGHT</code> file:</p>
<pre class="console">
bob@hostB random$ git push
To https://git.company.com/random
 ! [rejected]        master -&gt; master (fetch first)
[…]</pre>
<p class="calibre3">OK. Alice was busy working at making the minimum value of the range configurable to choose random integers<a id="_idIndexMarker046" class="pcalibre1 pcalibre calibre6"/> from (and resolving a merge conflict), and she pushed her changes first:</p>
<pre class="console">
bob@hostB:~/random$ git pull
From https://git.company.com/random
   a808ecf..919f0f7  master     -&gt; origin/master
 * [new branch]      min-max    -&gt; origin/min-max</pre>
<p class="calibre3">Git then opens the editor with the commit message for the merge. Bob exits the editor to confirm the default description:</p>
<pre class="console">
Merge made by the 'recursive' strategy.
 index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)</pre>
<p class="calibre3">Well, Git has merged Alice’s changes cleanly, but there is a new branch present. Let’s take a look at what is in it, showing only those changes exclusive to the <code>min-max</code> branch (the double-dot syntax is described in <a href="B21194_04.xhtml#_idTextAnchor083" class="pcalibre1 pcalibre calibre6"><em class="italic">Chapter 4</em></a>, <em class="italic">Exploring </em><em class="italic">Project History</em>):</p>
<pre class="console">
bob@hostB:~/random$ git log HEAD..origin/min-max
commit 2361cfc062809d96b9a04d8032b9c433cae5c350 (origin/min-max)
Author: Alice Developer &lt;alice@company.com&gt;
Date:   Mon May 3 14:35:33 2021 +0200
    Make lower bound configurable</pre>
<p class="calibre3">Interesting! Bob decides he wants that. So, he asks Git to merge stuff from Alice’s branch (which is available in the respective remote tracking branch) into the default branch:</p>
<pre class="console">
bob@hostB:~/random$ git merge origin/min-max
Merge made by the 'recursive' strategy.
 index.html            | 4 +++-
 scripts/gen_random.js | 9 ++++++---
 2 files changed, 9 insertions(+), 4 deletions(-)</pre>
<h3 class="calibre9">Undoing an unpublished merge</h3>
<p class="calibre3">Bob realizes that it<a id="_idIndexMarker047" class="pcalibre1 pcalibre calibre6"/> should be up to Alice to decide when the feature is ready for inclusion (and hears that it is not ready yet). He decides to undo a merge. Because it is not published, it is as simple as <strong class="bold">rewinding</strong> to the previous state of the current branch:</p>
<pre class="console">
bob@hostB:~/random$ git reset --hard @{1}
HEAD is now at 02ad67e Merge branch 'master' of https://git.company.com/random</pre>
<p class="callout-heading">Important note</p>
<p class="callout">This example demonstrates the use<a id="_idIndexMarker048" class="pcalibre1 pcalibre calibre6"/> of the <strong class="bold">reflog</strong> for undoing operations; another solution would be to go to a previous (pre-merge) commit following the first parent, with <strong class="source-inline1">HEAD^</strong> instead of <strong class="source-inline1">@{1}</strong>.</p>
<p class="calibre3">Bob then <a id="_idIndexMarker049" class="pcalibre1 pcalibre calibre6"/>pushes his changes.</p>
<h1 id="_idParaDest-23" class="calibre5"><a id="_idTextAnchor024" class="pcalibre1 pcalibre calibre6"/>Summary</h1>
<p class="calibre3">This chapter walked us through the process of working on a simple example project by a small development team.</p>
<p class="calibre3">We have recalled how to start working with Git, either by creating a new repository or by cloning an existing one. We have seen how to prepare a commit by adding, editing, moving, and renaming files, how to revert changes to the file, how to examine the current status and view changes to be committed, and how to tag a new release.</p>
<p class="calibre3">We have recalled how to use Git to work at the same time on the same project, how to make our work public, and how to get changes from other developers. Though using a version control system helps with simultaneous work, sometimes Git needs user input to resolve conflicts in work done by different developers. We have seen how to resolve a merge conflict.</p>
<p class="calibre3">We have recalled how to create a tag marking a release, and how to create a branch starting an independent line of development. Git requires tags and new branches to be pushed explicitly, but it fetches them automatically. We have seen how to merge a branch.</p>
<p class="calibre3">The next chapter will cover creating new revisions and new lines of development in much more detail, and it will introduce and explain the concept of the staging area for commits.</p>
<h1 id="_idParaDest-24" class="calibre5"><a id="_idTextAnchor025" class="pcalibre1 pcalibre calibre6"/>Questions</h1>
<p class="calibre3">Answer the following questions to test your knowledge of this chapter:</p>
<ol class="calibre14">
<li class="calibre15">Describe how to create a repository from existing files and how to get your own copy of an existing repository.</li>
<li class="calibre15">Describe how to create a new version of the project locally, and how to publish those changes.</li>
<li class="calibre15">Explain how to get changes from other developers, and how to combine those changes.</li>
<li class="calibre15">What do merge conflict markers look like, and how can you resolve a merge conflict?</li>
<li class="calibre15">What can you do to make Git not show temporary backup files as unknown files in the status output? What about the products and byproducts of the build system?</li>
<li class="calibre15">Where can you find information about how to undo adding a file, or how to undo changes to a file?</li>
<li class="calibre15">How can you abandon the commit? What are the dangers of doing so?</li>
<li class="calibre15">Explain how Git manages moving, copying, and renaming files.</li>
</ol>
<h1 id="_idParaDest-25" class="calibre5"><a id="_idTextAnchor026" class="pcalibre1 pcalibre calibre6"/>Answers</h1>
<p class="calibre3">Here are the answers to the questions given above:</p>
<ol class="calibre14">
<li class="calibre15">Use <strong class="source-inline1">git init</strong>, <strong class="source-inline1">git add .</strong>, and <strong class="source-inline1">git commit</strong> to create a repository from existing files. Use <strong class="source-inline1">git clone</strong> to get your own copy of the existing repository.</li>
<li class="calibre15">Use <strong class="source-inline1">git commit</strong> or <strong class="source-inline1">git commit -a</strong> to create a new revision, and use <strong class="source-inline1">git push</strong> to publish changes.</li>
<li class="calibre15">Use <strong class="source-inline1">git fetch</strong> to get updates from other developers, or <strong class="source-inline1">git pull</strong> to get updates and merge them together. Use <strong class="source-inline1">git merge</strong> (or, as mentioned in later chapters, <strong class="source-inline1">git rebase</strong>) to combine changes.</li>
<li class="calibre15">Merge conflicts are presented using the <strong class="source-inline1">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</strong>, <strong class="source-inline1">=======</strong>, and <strong class="source-inline1">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</strong> markers; you can also find the <strong class="source-inline1">|||||||</strong> marker used, depending on the configuration. To resolve the conflicts, you need to edit files marked as conflicting into shape, use <strong class="source-inline1">git add</strong> on them when finished, and then finalize the merge with <strong class="source-inline1">git commit</strong> or <strong class="source-inline1">git merge --continue</strong> (or rebase with <strong class="source-inline1">git </strong><strong class="source-inline1">rebase --continue</strong>).</li>
<li class="calibre15">To make Git ignore specific types of files, you need to add appropriate glob patterns to one of the <strong class="source-inline1">ignore</strong> files. It is a good practice to ignore byproducts of the build system and other generated files using the <strong class="source-inline1">.gitignore</strong> file and add patterns for temporary files specific to one’s individual choice to a per-repository (<strong class="source-inline1">.git/info/ignore</strong>) or per-user <strong class="source-inline1">ignore</strong> file.</li>
<li class="calibre15">All information about how to undo adding, removing, or staging a file can be found in the <strong class="source-inline1">git </strong><strong class="source-inline1">status</strong> output.</li>
<li class="calibre15">You can abandon a commit with <strong class="source-inline1">git reset --hard HEAD^</strong>, but it may lead to losing your changes (you can recover committed changes with the help of reflog if it did not expire; uncommitted changes are lost forever).</li>
<li class="calibre15">Git handles code movement, such as renaming, moving, and copying files, by using rename detection during merging and <strong class="source-inline1">diff</strong> generation.</li>
</ol>
<h1 id="_idParaDest-26" class="calibre5"><a id="_idTextAnchor027" class="pcalibre1 pcalibre calibre6"/>Further reading</h1>
<p class="calibre3">If you need a reminder about Git basics, the following references might help you.</p>
<ul class="calibre16">
<li class="calibre15"><em class="italic">Everyday Git With 20 Commands or So</em>, part of the Git documentation as <strong class="source-inline1">giteveryday(7)</strong>: <a href="https://git-scm.com/docs/giteveryday" class="pcalibre1 pcalibre calibre6">https://git-scm.com/docs/giteveryday</a></li>
<li class="calibre15"><em class="italic">A tutorial introduction to Git</em>, part of the Git documentation as <strong class="source-inline1">gittutorial(7)</strong>: <a href="https://git-scm.com/docs/gittutorial" class="pcalibre1 pcalibre calibre6">https://git-scm.com/docs/gittutorial</a></li>
<li class="calibre15"><em class="italic">The Git User’s Manual</em>, part of the Git documentation: <a href="https://git-scm.com/docs/user-manual" class="pcalibre1 pcalibre calibre6">https://git-scm.com/docs/user-manual</a></li>
<li class="calibre15">Eric Sink, <em class="italic">Version Control by Example</em>, Pyrenean Gold Press (2011): <a href="https://ericsink.com/vcbe/index.html" class="pcalibre1 pcalibre calibre6">https://ericsink.com/vcbe/index.html</a></li>
<li class="calibre15">Scott Chacon and Ben Straub, <em class="italic">Pro Git, 2nd Edition</em>, Apress (2014): <a href="https://git-scm.com/book/en/v2" class="pcalibre1 pcalibre calibre6">https://git-scm.com/book/en/v2</a></li>
</ul>
</div>
</body></html>