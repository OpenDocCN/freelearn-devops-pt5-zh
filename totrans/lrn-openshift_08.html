<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Core OpenShift Concepts</h1>
                
            
            <article>
                
<p class="calibre2">In the previous chapters, we covered Docker and Kubernetes basics and went through the OpenShift architecture. We know how to build the OpenShift lab environment, so now it is time to get our hands dirty and see how we can work with OpenShift's main resources.</p>
<p class="calibre2">This chapter goes over OpenShift core concepts, such as creating new applications with OpenShift pods, services, routes, projects, and users. This will give you foundational skills, which will be enough for you to run and manage your application container infrastructure in OpenShift. </p>
<p class="calibre2">After reading this chapter, you will have learned about the following topics:</p>
<p class="calibre2"/>
<ul class="calibre9">
<li class="calibre10">Managing projects and namespaces <span>in OpenShift</span></li>
<li class="calibre10">Managing regular users <span>in OpenShift</span></li>
<li class="calibre10">Creating new applications in OpenShift</li>
<li class="calibre10">Managing pods <span>in OpenShift</span></li>
<li class="calibre10">Managing services <span>in OpenShift</span></li>
<li class="calibre10">Managing routes <span>in OpenShift</span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Managing projects in OpenShift</h1>
                
            
            <article>
                
<p class="calibre2">Before we begin, make sure that your OpenShift is up and running. We are going to use MiniShift for this chapter:</p>
<pre class="calibre18"><strong class="calibre1">$ minishift start --openshift-version=v3.9.0 --vm-driver=virtualbox</strong><br class="title-page-name"/>-- Starting profile 'minishift'<br class="title-page-name"/>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...</pre>
<p class="calibre2">Once its VM is up, log in as a system admin:</p>
<pre class="calibre18"><strong class="calibre1">$ oc login -u system:admin<br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...<br class="title-page-name"/>Using project "myproject".</pre>
<p class="calibre2"><span class="calibre11">As we covered earlier, Openshift CLI has a lot of similarities with Kubernetes CLI. <kbd class="calibre12">oc</kbd> is short for OpenShift client, which works similarly to Kubernetes's <kbd class="calibre12">kubectl</kbd>. You will find a lot of similarities between these two commands as we go.</span></p>
<p class="calibre2"><span class="calibre11">Before we deep dive into creating our first OpenShift applications and use basic OpenShift resources such as pods, services, and routes, we need to work a little bit with OpenShift's management and other essential features such as OpenShift projects and user accounts. First, let's focus on OpenShift projects. </span></p>
<p class="calibre2">OpenShift project is a Kubernetes namespace with additional features called <span class="calibre11">annotations</span> that provide user multi-tenancy and role-based access control in OpenShift. Each project has its own set of policies, constraints, and service accounts. You can see that the number of namespaces and projects in OpenShift is the same. The commands we are going to need are <kbd class="calibre12">oc get namespaces</kbd> and <span class="calibre11"><kbd class="calibre12">oc get projects</kbd>:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc get projects</strong><br class="title-page-name"/>NAME DISPLAY NAME STATUS<br class="title-page-name"/>default Active<br class="title-page-name"/>kube-public Active<br class="title-page-name"/>kube-system Active<br class="title-page-name"/>myproject My Project Active<br class="title-page-name"/>openshift Active<br class="title-page-name"/>openshift-infra Active<br class="title-page-name"/>openshift-node Active</pre>
<pre class="calibre18"><strong class="calibre1">$ oc get namespaces</strong><br class="title-page-name"/>NAME              STATUS    AGE<br class="title-page-name"/>default           Active     3d<br class="title-page-name"/>kube-public       Active     3d<br class="title-page-name"/>kube-system       Active     3d<br class="title-page-name"/>myproject         Active     3d<br class="title-page-name"/>openshift         Active     3d<br class="title-page-name"/>openshift-infra   Active     3d<br class="title-page-name"/>openshift-node    Active     3d</pre>
<p class="calibre2">As we mentioned previously, each namespace, or rather project, is separated from another by a set of rules. This allows different teams to work independently from each other. In order to identify what project we are currently working in, you can use the <kbd class="calibre12">oc projects</kbd> command. This command gives you a list of OpenShift projects available for you, and it also tells you what projects you are currently working on:</p>
<pre class="calibre18"><strong class="calibre1">$ oc projects</strong><br class="title-page-name"/>You have access to the following projects and can switch between them with 'oc project &lt;projectname&gt;':<br class="title-page-name"/>    default<br class="title-page-name"/>    kube-public<br class="title-page-name"/>    kube-system<br class="title-page-name"/>    myproject - My Project<br class="title-page-name"/>  * new-project1<br class="title-page-name"/>    openshift<br class="title-page-name"/>    openshift-infra<br class="title-page-name"/>    openshift-node<br class="title-page-name"/>Using project "new-project1" on server "https://127.0.0.1:8443".</pre>
<div class="packt_infobox">The asterisk <kbd class="calibre26">*</kbd> also specifies the current project.<br class="title-page-name"/>
<br class="title-page-name"/>
<span>We can see that there are a lot of different projects available, though we have not created any because the system admin user has access to everything.</span> </div>
<p class="calibre2"><span class="calibre11">In order to create a new OpenShift project, you must use the <kbd class="calibre12">oc new-project</kbd> command:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc new-project new-project1</strong><br class="title-page-name"/>Now using project "new-project1" on server "https://127.0.0.1:8443".<br class="title-page-name"/>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...</pre>
<p class="calibre2">This command creates a new project and automatically switches to it. In our case, it switches to <kbd class="calibre12">new-project1</kbd>. We can manually switch to another available project by running the <kbd class="calibre12">oc project</kbd> <span class="calibre11">command. Let's switch to the <kbd class="calibre12">default</kbd> project:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc project default</strong><br class="title-page-name"/>Now using project "default" on server "https://127.0.0.1:8443".</pre>
<div class="packt_infobox">Note that the output of <kbd class="calibre26">oc project default</kbd> tells you not only that the project is switched to <kbd class="calibre26">default</kbd>, but it also specifies the OpenShift cluster URL: <kbd class="calibre26">https://127.0.0.1:8443</kbd>. It is useful when we are dealing with several independently working OpenShift clusters. </div>
<p class="calibre2">In order to delete an OpenShift project, you can use the <kbd class="calibre12">oc delete</kbd> command:</p>
<pre class="calibre18"><strong class="calibre1">$ oc delete project new-project1</strong><br class="title-page-name"/>project "new-project1" deleted</pre>
<p class="calibre2"><span class="calibre11">We are going to work with projects closely in the subsequent chapters. </span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Managing users in OpenShift</h1>
                
            
            <article>
                
<p class="calibre2"><span class="calibre11">When we use the <kbd class="calibre12">oc</kbd> command, it makes an API call to the OpenShift cluster using user credentials.</span></p>
<p class="calibre2"><span class="calibre11">There are three main user types in OpenShift. Let's quickly talk about each of these three types:</span></p>
<ul class="calibre9">
<li class="calibre10"><strong class="calibre1">Regular users</strong>: A regular OpenShift user. Regular users are usually developers with access to OpenShift projects. <span>Regular OpenShift user examples include user1 and user2. </span></li>
<li class="calibre10"><strong class="calibre1">System users</strong>: System OpenShift users are special and most of these users are created when OpenShift is being installed. System user examples are:
<ul class="calibre29">
<li class="calibre10"><kbd class="calibre12">system:admin</kbd><span>: </span>OpenShift cluster administrator user</li>
<li class="calibre10"><kbd class="calibre12">system:node:node1.example.com</kbd><span>: </span><kbd class="calibre12"><span>node1.example.com</span></kbd> node user</li>
<li class="calibre10"><kbd class="calibre12">system:openshift-registry</kbd><span>: </span>OpenShift registry user</li>
</ul>
</li>
<li class="calibre10"><strong class="calibre1">Service accounts</strong>: Special system users associated with projects. Some of these users are created when a new OpenShift project is being created.  </li>
</ul>
<div class="packt_infobox">We are going to work with system users and service accounts in the next chapter. In this chapter, we are going to work with regular users.</div>
<p class="calibre2"><span class="calibre11">We can get information about the OpenShift user we are currently logged in as by using the <kbd class="calibre12">oc whoami</kbd> command:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc whoami</strong><br class="title-page-name"/>system:admin</pre>
<p class="calibre2"><span class="calibre11">In order to create a regular user, you can use the <kbd class="calibre12">oc create user</kbd> command:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc create user user1</strong><br class="title-page-name"/>user "user1" created</pre>
<div class="packt_infobox">We do not need to set a user password in this lab because our lab environment is set up to accept any password from any user.</div>
<p class="calibre2">By default, the user is going to be created for a project we are currently working on. To get the list of users, use the <kbd class="calibre12">oc get users</kbd> command:</p>
<pre class="calibre18"><strong class="calibre1">$ oc get users</strong><br class="title-page-name"/>NAME      UID FULL NAME IDENTITIES<br class="title-page-name"/>developer 46714e6b-2981-11e8-bae6-025000000001 anypassword:developer<br class="title-page-name"/>user1 473664ec-299d-11e8-bae6-025000000001</pre>
<p class="calibre2">We should be able to see two users: <kbd class="calibre12">developer</kbd> and <kbd class="calibre12">user1</kbd>. </p>
<div class="packt_infobox"><span>Developer users are created as a part of the <kbd class="calibre26">oc cluster up</kbd> command, as well as the project <kbd class="calibre26">myproject</kbd>.   <br class="title-page-name"/>
<br class="title-page-name"/>
The <kbd class="calibre26">IDENTITIES</kbd> field defines the authentication method. In our lab environment setup, the developer user takes anything as a password. This is what <kbd class="calibre26">anypassword:developer</kbd> means. <br class="title-page-name"/></span></div>
<p class="calibre2">The last essential things we need to learn is how to switch between different users. We can use the <kbd class="calibre12">oc login</kbd> command to do so:</p>
<pre class="calibre18"><strong class="calibre1">$ oc login -u developer</strong><br class="title-page-name"/>Logged into "https://127.0.0.1:8443" as "developer" using existing credentials.<br class="title-page-name"/>You have one project on this server: "myproject"<br class="title-page-name"/>Using project "myproject".</pre>
<div class="packt_infobox"><span><kbd class="calibre26">user1</kbd> does not have any authentication method defined. This is why you won't be able to log in as <kbd class="calibre26">user1</kbd> if you try to.</span></div>
<p class="calibre2">We are going to put all of these pieces together and assign a particular user to one or several projects, as well as give users different permissions, in the following chapter. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Creating new applications in OpenShift</h1>
                
            
            <article>
                
<p class="calibre2">The first and most essential command to run in OpenShift is <kbd class="calibre12">oc new-app</kbd>. This command is similar to Kubernetes's <kbd class="calibre12">kubectl run</kbd>, but <kbd class="calibre12">oc new-app</kbd> is way more powerful and works a little bit differently. We are going to show you how <kbd class="calibre12">oc new-app</kbd> works in detail later in this chapter.</p>
<p class="calibre2">The best way to test out the <kbd class="calibre12">oc new-app</kbd> command is to create a new project and then run it over there:</p>
<pre class="calibre18"><strong class="calibre1">$ oc new-project project1</strong><br class="title-page-name"/>Now using project "project1" on server "https://127.0.0.1:8443".<br class="title-page-name"/>You can add applications to this project with the 'new-app' command. For example, try:<br class="title-page-name"/><br class="title-page-name"/>    oc new-app centos/ruby-22-centos7~https://github.com/openshift/ruby-ex.git<br class="title-page-name"/>to build a new example application in Ruby.</pre>
<p class="calibre2">The command output tells us to run the <kbd class="calibre12">oc new-app centos/ruby-22-centos7~https://github.com/openshift/ruby-ex.git</kbd> command. Run the command to see how it works:</p>
<pre class="calibre18"><strong class="calibre1">$ oc new-app centos/ruby-22-centos7~https://github.com/openshift/ruby-ex.git</strong><br class="title-page-name"/>--&gt; Found Docker image 1f02469 (8 days old) from Docker Hub for "centos/ruby-22-centos7"<br class="title-page-name"/>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...<br class="title-page-name"/> * An image stream will be created as "ruby-22-centos7:latest" that will track the source image<br class="title-page-name"/> * A source build using source code from https://github.com/openshift/ruby-ex.git will be created<br class="title-page-name"/> * The resulting image will be pushed to image stream "ruby-ex:latest"<br class="title-page-name"/> * Every time "ruby-22-centos7:latest" changes a new build will be triggered<br class="title-page-name"/> * This image will be deployed in deployment config "ruby-ex"<br class="title-page-name"/> * Port 8080/tcp will be load balanced by service "ruby-ex"<br class="title-page-name"/> * Other containers can access this service through the hostname "ruby-ex"<br class="title-page-name"/>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...<br class="title-page-name"/> Run 'oc status' to view your app.</pre>
<div class="packt_infobox">We have seen that running <kbd class="calibre26">oc new-app</kbd> sometimes takes a lot of time or is just stuck for hours. <br class="title-page-name"/>
<br class="title-page-name"/>
If this happens to you, try to reinstall the cluster again.  <br class="title-page-name"/>
<br class="title-page-name"/>
Also, make sure that you have the firewall off on your host.<br class="title-page-name"/>
<br class="title-page-name"/>
If all of these options fail for you, you can always run a separate VM and install OpenShift from scratch. </div>
<p class="calibre2">There is going to be a lot of output compared to what we have seen before, but if you read through, you should be able to find out that: </p>
<ul class="calibre9">
<li class="calibre10"><span>OpenShift pulls Docker image <kbd class="calibre12">centos/ruby-22-centos7</kbd></span></li>
<li class="calibre10">OpenShift goes to GitHub and downloads the source code from it</li>
<li class="calibre10">OpenShift applies GitHub source code to the image and stores it on the internal registry with the name <kbd class="calibre12">ruby-ex</kbd></li>
<li class="calibre10"><span><kbd class="calibre12">ruby-ex</kbd> is used to create build and deployment configurations</span></li>
<li class="calibre10"><span>The <kbd class="calibre12">ruby-ex</kbd> service is created to load balance the traffic for pods with <kbd class="calibre12">ruby-ex</kbd> in their names  </span></li>
</ul>
<p class="calibre2">The following diagram represents this flow:</p>
<div class="cdpaligncenter2"><img src="../images/00051.jpeg" class="calibre34"/></div>
<div class="cdpaligncenter1">oc new-app workflow</div>
<p class="calibre2">We are going to take a closer look at all of these resources in the following chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Managing pods in OpenShift</h1>
                
            
            <article>
                
<p class="calibre2">OpenShift pods are Kubernetes pods that <span class="calibre11">represent a collection of containers, and each pod serves as a basic management unit. All containers in a pod share the same storage volumes and network. In order to get a list of pods in OpenShift, we can use the <kbd class="calibre12">oc get pods</kbd> command:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc get pods</strong><br class="title-page-name"/>NAME            READY  STATUS    RESTARTS      AGE<br class="title-page-name"/>ruby-ex-1-build  0/1   Completed   0           1h<br class="title-page-name"/>ruby-ex-1-zzhrc  1/1   Running     0           56m</pre>
<p class="calibre2">It is no different from the Kubernetes pod, which means behind the scenes it is a Docker container running. The only difference is that there are two containers now. One of them is a container (<kbd class="calibre12">ruby-ex-1-build</kbd>) that is used to build the final image with the source code applied. We can easily verify this by running the <kbd class="calibre12">docker ps</kbd> command inside the Minishift VM:</p>
<pre class="calibre18"><strong class="calibre1">$ minishift ssh docker ps</strong><br class="title-page-name"/>CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES<br class="title-page-name"/>d07dd7cf63e4 172.30.1.1:5000/myproject/ruby-ex@sha256:aa86aab41fbf81ce0b09a1209618b67f353b18e5ac2ed00a030e7577bad1ed44 "container-entrypoint"<strong class="calibre1"><br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...</pre>
<p class="calibre2">We can easily find the right running container by seeing the <kbd class="calibre12">myproject/ruby-ex</kbd> part of the image's ID. We can do similar actions in Kubernetes, like getting logs, editing or describing, and deleting pods.</p>
<div class="packt_tip">Before you start with the next section, try to run <kbd class="calibre26">oc delete</kbd>. </div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Managing services in OpenShift</h1>
                
            
            <article>
                
<p class="calibre2">Similarly to Kubernetes, OpenShift services<span class="calibre11"> represent an interface between clients and the actual application running in the pods. A service is an IP:port</span><span class="calibre11"> </span><span class="calibre11">pair which forwards traffic to backend pods in a round-robin fashion.</span></p>
<p class="calibre2">By running the <kbd class="calibre12">oc new-app</kbd> command, OpenShift creates a service automatically. We can verify this by running the <kbd class="calibre12">oc get services</kbd> command:</p>
<pre class="calibre18"><strong class="calibre1">$ oc get services</strong><br class="title-page-name"/>NAME CLUSTER-IP         EXTERNAL-IP    PORT(S)           AGE<br class="title-page-name"/>ruby-ex 172.30.173.195  &lt;none&gt;         8080/TCP          1h</pre>
<p class="calibre2">The output is similar to what we got with the <kbd class="calibre12">kubectl get services</kbd> command in Kubernetes. We can delete and recreate this service again by running the <kbd class="calibre12">oc delete</kbd> and <kbd class="calibre12">oc expose</kbd> commands. Before we do that, run the <kbd class="calibre12">curl</kbd> command inside the Minishift VM to verify that the service is up and running:</p>
<pre class="calibre18"><strong class="calibre1">$ minishift ssh "curl -I -m3 172.30.173.195:8080"<br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...<br class="title-page-name"/>0 0 0 0 0 0 0 0 --:--:-- --:--:-- 0 HTTP/1.1 <strong class="calibre1">200 OK<br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...</pre>
<p class="calibre2">The status code is <kbd class="calibre12">200</kbd>, which means that the web page is available and the service is running properly:</p>
<pre class="calibre18"><strong class="calibre1">$ oc delete svc/ruby-ex</strong><br class="title-page-name"/>service "ruby-ex" deleted</pre>
<p class="calibre2">Check that the service is deleted and that the service is no longer available:</p>
<pre class="calibre18"><strong class="calibre1">$ oc get svc</strong><br class="title-page-name"/>NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE<br class="title-page-name"/><br class="title-page-name"/><strong class="calibre1">$ minishift ssh "curl -I -m3 172.30.173.195:8080"<br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...<br class="title-page-name"/>Command failed: exit status 28</pre>
<p class="calibre2">Now, create a new service with the <kbd class="calibre12">oc expose</kbd> command:</p>
<pre class="calibre18"><strong class="calibre1">$ oc expose pods/ruby-ex-1-zzhrc</strong><br class="title-page-name"/>service "ruby-ex-1-zzhrc" exposed</pre>
<div class="packt_infobox">In your case, the container name is going to be different. Rerun <kbd class="calibre26">oc get pods</kbd> to get the running pod name. There are other methods on how to create a service and we are going to cover them later in this book:</div>
<pre class="calibre18"><strong class="calibre1">$ oc get svc</strong><br class="title-page-name"/>NAME           CLUSTER-IP EXTERNAL-IP PORT(S) AGE<br class="title-page-name"/>ruby-ex-1-zzhrc 172.30.79.183 &lt;none&gt; 8080/TCP 1m</pre>
<p class="calibre2">Finally, check that the service is available again by running the <kbd class="calibre12">curl</kbd> command on the Minishift VM:</p>
<pre class="calibre18"><strong class="calibre1">$ minishift ssh "curl -I -m3 172.30.79.183:8080"<br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...<br class="title-page-name"/>0 0 0 0 0 0 0 0 --:--:-- --:--:-- 0 HTTP/1.1 <strong class="calibre1">200 OK<br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Managing routes in OpenShift</h1>
                
            
            <article>
                
<p class="calibre2">OpenShift has an elegant way of exposing a service so that it can be accessed from the outside of an OpenShift cluster. This resource is called a <kbd class="calibre12">router</kbd> in OpenShift. OpenShift provides an external hostname mapping to a load balancer that distributes traffic among OpenShift services:</p>
<p class="cdpaligncenter"><img class="alignnone43" src="../images/00052.jpeg"/></p>
<div class="cdpaligncenter1">OpenShift router workflow</div>
<p class="calibre2"><span class="calibre11">In order for the OpenShift router to load balance external traffic, it has to use HTTP or HTTPS protocol, and be resolvable by DNS using DNS wildcards.<br class="calibre5"/></span></p>
<p class="calibre2">Let's expose our service outside of the OpenShift cluster by running the <kbd class="calibre12">oc expose</kbd> command with additional parameters:</p>
<pre class="calibre18"><strong class="calibre1">$ oc expose service/ruby-ex-1-zzhrc --hostname="openshiftdemo.local"</strong></pre>
<p class="calibre2">Check the list of routes:</p>
<pre class="calibre18"><strong class="calibre1">$ oc get routes</strong><br class="title-page-name"/>NAME    HOST/PORT PATH SERVICES    PORT  TERMINATION       WILDCARD<br class="title-page-name"/>ruby-ex-1-zzhrc openshiftdemo.local ruby-ex-1-zzhrc 8080   None</pre>
<p class="calibre2">If we try to run the <kbd class="calibre12">curl <span>openshiftdemo.local</span></kbd> command, it won't work because there is no DNS record for <span class="calibre11"><kbd class="calibre12">openshiftdemo.local</kbd>. One of the easiest ways is to add a static DNS record to the hosts file. Since we are using the Minishift VM, we need to create a static DNS record pointing to the Minishift VM. The first step is to check the Minishift VM with the <kbd class="calibre12">oc status</kbd> command:</span></p>
<pre class="calibre18"><strong class="calibre1">$ oc status</strong><br class="title-page-name"/>In project My Project (myproject) on server https://<strong class="calibre1">192.168.99.109</strong>:8443</pre>
<p class="calibre2">And now we need to make a static record in the hosts file by using minishift VM IP address and our project hostname:</p>
<pre class="calibre18"><strong class="calibre1">$ cat /etc/hosts | grep openshift</strong><br class="title-page-name"/>192.168.99.109 openshiftdemo.local</pre>
<p class="calibre2">Everything is ready so that we can do the final test. Open a web browser and open <a href="http://openshiftdemo.local/webpage" class="calibre8">http://openshiftdemo.local/webpage</a>:</p>
<p class="cdpaligncenter"><img class="alignnone44" src="../images/00053.jpeg"/></p>
<div class="cdpaligncenter1"><span>Ruby demo application web page </span></div>
<div class="packt_infobox">If you somehow do not see a welcome web page, check whether you can ping <span><kbd class="calibre26">openshiftdemo.local</kbd> and also try to run the <kbd class="calibre26">curl openshiftdemo.local</kbd> command.<br class="title-page-name"/></span></div>
<p class="calibre2">If you try to open a web page using the IP address of the Minishift VM instead of <kbd class="calibre12">openshiftdemo.local</kbd>, you will get <kbd class="calibre12">Application is not available</kbd>. This happens because the OpenShift router is a HAProxy-based container that does load balancing based on a URL. We can easily verify this by running the <kbd class="calibre12">oc describe</kbd> command with the OpenShift router pod. First, log in as <kbd class="calibre12">system:admin</kbd> and then check the router pod name in the <kbd class="calibre12">default</kbd> namespace:</p>
<pre class="calibre18"><strong class="calibre1">$ oc login -u system:admin<br class="title-page-name"/><br class="title-page-name"/></strong>...<br class="title-page-name"/>&lt;output omitted&gt;<br class="title-page-name"/>...</pre>
<pre class="calibre18"><strong class="calibre1">$ oc get pods -n default</strong><br class="title-page-name"/>NAME READY STATUS RESTARTS AGE<br class="title-page-name"/>docker-registry-1-qctp4 1/1 Running 0 22h<br class="title-page-name"/>persistent-volume-setup-mdmw6 0/1 Completed 0 22h<br class="title-page-name"/><strong class="calibre1">router-1-s9b7f</strong> 1/1 Running 0 22h</pre>
<p class="calibre2">Finally, run the <kbd class="calibre12">oc describe</kbd> command, specifying the <kbd class="calibre12">router-1-s9b7f pod</kbd> and look for the <kbd class="calibre12">Image</kbd> line:</p>
<pre class="calibre18"><strong class="calibre1">$ oc describe pods router-1-s9b7f -n default | grep Image:</strong><br class="title-page-name"/>    Image: openshift/<strong class="calibre1">origin-haproxy-router</strong>:v3.9.0</pre>
<p class="calibre2">You can replace the HAproxy-based router with other ones, like Nginx or something else, but that is out of the scope of this book.  </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, we covered OpenShift core concepts such as p<span class="calibre11">ods, services, routes, projects, and users</span>. We are going to work with these topics in detail in the following chapters and work closely with these resources to show you how they are integrated with other OpenShift resources.  </p>
<p class="calibre2">In the next chapter, we are going take a look at advanced OpenShift resources, including source to image and image streams, b<span class="calibre11">uilds and build configs, deployments, and deployment configs</span>, as well as config maps and templates. We are also going to create some of these resources using manual methods with YAML and JSON files. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Questions</h1>
                
            
            <article>
                
<ol class="calibre13">
<li value="1" class="calibre10">What are the two Node types used by OpenShift? choose two:
<ol class="calibre14">
<li value="1" class="calibre10">Node</li>
<li value="2" class="calibre10">MiniShift</li>
<li value="3" class="calibre10">Vagrant</li>
<li value="4" class="calibre10">Master</li>
</ol>
</li>
<li value="2" class="calibre10">Which of the following is not an Openshift user type? choose two:
<ol class="calibre14">
<li value="1" class="calibre10">Regular users</li>
<li value="2" class="calibre10">Admin users</li>
<li value="3" class="calibre10">System users</li>
<li value="4" class="calibre10">Service accounts</li>
<li value="5" class="calibre10">Service users </li>
</ol>
</li>
<li value="3" class="calibre10">In OpenShift, a pod is a minimal unit of deployment which represents a group of containers:
<ol class="calibre14">
<li value="1" class="calibre10">True</li>
<li value="2" class="calibre10">False</li>
</ol>
</li>
</ol>
<ol start="4" class="calibre13">
<li value="4" class="calibre10">In OpenShift, what resource is responsible for exposing the OpenShift application to the outside? choose one:
<ol class="calibre14">
<li value="1" class="calibre10">Service</li>
<li value="2" class="calibre10">Route</li>
<li value="3" class="calibre10">Pod</li>
<li value="4" class="calibre10">Load balancer</li>
</ol>
</li>
<li value="5" class="calibre10">What are the two commands that list available pods and routes? choose two:
<ol class="calibre14">
<li value="1" class="calibre10">oc get po</li>
<li value="2" class="calibre10">oc list pods</li>
<li value="3" class="calibre10">oc get rt</li>
<li value="4" class="calibre10">oc get routes</li>
</ol>
</li>
<li value="6" class="calibre10">In OpenShift, the system admin user account has access to system-related resources only:
<ol class="calibre14">
<li value="1" class="calibre10">True</li>
<li value="2" class="calibre10">False</li>
</ol>
</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Further reading</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, we <span class="calibre11">briefly covered the c</span>ore concepts of the OpenShift container platform. Here's a list of links that may be helpful to look through so that you can learn more about OpenShift basics:</p>
<ul class="calibre9">
<li class="calibre10"><strong class="calibre1">Openshift core concepts</strong>: <a href="https://docs.openshift.org/latest/architecture/core_concepts/index.html" class="calibre8">https://docs.openshift.org/latest/architecture/core_concepts/index.html</a></li>
<li class="calibre10"><strong class="calibre1">OpenShift official blog</strong>: <a href="https://blog.openshift.com/" class="calibre8">https://blog.openshift.com/</a></li>
</ul>


            </article>

            
        </section>
    </body></html>