<html><head></head><body>
        

                            
                    <h1 class="header-title">Customizing Jira for Your Projects</h1>
                
            
            
                
<p>An information system such as Atlassian Jira is only as useful as the data that goes into it, so it is no surprise that Jira is very flexible when it comes to letting you customize the fields and screens. Jira comes with a suite of default fields to help you get it up and running quickly, and it also allows you to add your own fields, called custom fields, to address your unique needs.</p>
<p>In this chapter, we will learn not only how to manage these custom fields in Jira, but also how you can create your very own custom field types with your own business logic, through scripting.</p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Setting up different issue types for projects</li>
<li>Making a field required</li>
<li>Making the assignee field required</li>
<li>Hiding a field from view</li>
<li>Creating a new field configuration</li>
<li>Setting up customized screens for your project</li>
<li>Removing a select list's None option</li>
<li>Adding help tips to custom fields</li>
<li>Using JavaScript with custom fields</li>
<li>Setting default values for fields</li>
<li>Adding permission to fields</li>
<li>Creating your own custom field types</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up different issue types for projects</h1>
                
            
            
                
<p>Jira comes with a number of issue types out of the box that are designed for software project management. However, over time, you might find that these issue types do not apply to all of your projects, and you have added your own. In this recipe, we will look at how to manage the issue types, so that each project can have its own set of issue types.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Proceed with the following steps to set up a project-specific issue type list:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to Administration &gt; Issues &gt; Issue type schemes.</li>
<li>Click on the Add issue type scheme<strong> </strong>button.</li>
<li>Enter the name for the new issue type scheme.</li>
<li>Add issue types to the scheme by dragging them from right to left.</li>
<li>Select the default issue type.</li>
<li>Click on the Save<strong> </strong>button to create the new scheme, as shown in the following screenshot:</li>
</ol>
<div><img src="img/36ad1962-5529-44a6-992d-61d868b625ff.png" style="width:36.08em;height:25.25em;"/></div>
<p>Having created your new issue type scheme, you now need to apply it to projects in which you want to restrict issue type selections:</p>
<ol>
<li>Click on the Associate<strong> </strong>link for the new issue type scheme.</li>
<li>Select the project(s) you want to apply the scheme to.</li>
<li>Click on Associate<strong> </strong>to change the selected projects' issue type scheme.</li>
</ol>
<p>If the project has issues with issue types that do not exist in the new issue type scheme, Jira will walk you through a migration process where you can update the issue type for all the impacted issues.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Making a field required</h1>
                
            
            
                
<p>Required fields such as Summary and Issue Type have a little red asterisk next to them, which means they must have a value when you are creating or updating an issue. This is a great way to ensure that users do not skip filling in important information.</p>
<p>We will look at how to make any fields of your choice required in this recipe, with field configurations. A field configuration controls the behavior of a field; this includes the field's mandatory requirements, visibility, renderer, and description.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Proceed with the following steps to make a field required in Jira:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrators permission.</li>
<li>Navigate to Administration &gt; Issues &gt; Field Configurations.</li>
<li>Click on the Configure<strong> </strong>link for the field configuration used by the project and issue type.</li>
<li>Click on the Required<strong> </strong>link for the field you want to make required, such as Due Date.</li>
</ol>
<p>Once you have marked a field as required, such as <strong>Due Date</strong> in our case, whenever you create or edit an issue, Jira will make sure a value is entered for it, as shown in the following screenshot:</p>
<div><img src="img/3728f272-f1c6-4371-a9b2-2d98d7e9ff85.png" style="width:44.33em;height:35.58em;"/></div>
<p>We will now have a look at how these steps work.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>When a field is marked as required, Jira will check to make sure that the field has a value when you are making updates to the issue, such as an edit, or during a workflow transition. This validation is applied even if the field is not present on the screen, so make sure you do not make a field that is not required on screen; otherwise, users will not be able to complete the action.</p>
<p>Certain fields, such as Assignee and Due Date, require the user to have certain permissions to make updates. If the user does not have the necessary permissions, the validation will fail, and prevent the user from completing the action.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">There's more...</h1>
                
            
            
                
<p>Clicking on the Optional link will make the field not required. Certain fields, such as <strong>Summary</strong> and <strong>Issue Type</strong>, must be required.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">See also</h1>
                
            
            
                
<p>Refer to the <em>Making the Assignee field required</em> recipe to see how to disable the unassigned option.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Making the Assignee field required</h1>
                
            
            
                
<p>By default, the Assignee field has an unassigned option, which is equivalent to making the field optional. If you look at the field configuration, you will realize that you cannot make the Assignee field required, as there is no such option available.</p>
<p>In this recipe, we will look at how to disable the unassigned option, effectively making Assignee a required field.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Note the following conditions are required for your projects in order to disable the unassigned option for each individual project:</p>
<ul>
<li>Issues that are currently using that option for the Assignee field—you will need to change all issues with an Unassigned value for Assignee to something else.</li>
<li>Projects that have Unassigned set as the default Assignee—you will need to change your project's Default Assignee setting in the Users and roles section.</li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Proceed with the following steps to disable the unassigned option:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to Administration &gt; System.</li>
<li>Click on the Edit Settings<strong> </strong>button.</li>
<li>Scroll down and select the OFF<strong> </strong>option for <strong>Allow unassigned issues.</strong></li>
<li>Click on Update to apply the change.</li>
</ol>
<p>Have a look at the following screenshot:</p>
<div><img src="img/62bc8718-a783-4585-882d-962acbcac7c5.png" style="width:36.25em;height:29.75em;"/></div>
<p class="CDPAlignLeft CDPAlign">As you can see, once the option is disabled, issues can no longer be unassigned.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Hiding a field from view</h1>
                
            
            
                
<p>There will be times when a field is no longer needed. When this happens, instead of deleting the field, which would also remove all its data, you can choose to hide it. If you need the field again further down the track, you can simply unhide it and retain all the data.</p>
<p>In this recipe, we will be hiding both the Priority and Due Date fields.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Proceed with the following steps to hide a field in Jira:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to Administration &gt; Issues &gt; Field Configurations.</li>
<li>Click on the Configure<strong> </strong>link for the field configuration used by the project and issue type.</li>
<li>Click on the Hide<strong> </strong>link for <strong>Priority</strong> and <strong>Due Date.</strong></li>
</ol>
<p>Clicking on the Show link will expose the field. You should not hide a mandatory field.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">There's more...</h1>
                
            
            
                
<p>Using field configuration is one way to hide fields from the user. There are two more ways to make a field hidden from view:</p>
<ul>
<li>Take the field off screen. Note that for the View screen, default fields such as Summary and Description are shown regardless of whether or not they are placed on the screen.</li>
<li>Restrict the field's configuration scheme so that it is not applicable to the project/issue type context. You can do this by clicking on the Configure for the custom<strong> </strong>field and deselecting the <strong>project/issue</strong> type you do not want the field to be available for.</li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Hiding the field with field configuration will make it hidden from all screens for the project and issue type it is applicable to, so, if you want to hide the field from specific screens, you should not use field configuration, but simply take the field off the appropriate screens. For example, if you want to make a field read-only after an issue is created, you can simply take it off the screen assigned to the edit issue operation. Pay close attention when you take fields off a screen; unlike field configurations, there are no safeguards in place to prevent you from taking a required field off a screen. So, if the screen is used for creating issues, then your users will be stuck, as they will not be able to provide a value for the required field that's missing from the screen.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a new field configuration</h1>
                
            
            
                
<p>You can configure a field's behavior with field configuration. Jira not only comes with a default field configuration that is applied to all project and issue types by default, but it also lets you create your own so that you can choose the projects and/or issue types to apply your field configuration to.</p>
<p>In this recipe, we will make the <strong>Description</strong> and <strong>Assignee</strong> fields required only for the Bug issue type.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Setting up a new field configuration is a three-step process. The first step is to create the new field configurations:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to Administration &gt; Issues &gt; Field Configurations.</li>
<li>Click on the Add Field Configuration<strong> </strong>button, and name it <kbd>HUM: Bug Field Configuration</kbd>, and click on Add.</li>
<li>Click on the Required<strong> </strong>link for the <strong>Description</strong> and <strong>Assignee</strong> fields.</li>
</ol>
<p>The second step is to associate the new field configuration with a new field configuration scheme:</p>
<ol>
<li>Navigate to Administration &gt; Issues &gt; Field configuration schemes.</li>
<li>Click on the Add field configuration scheme<strong> </strong>button and name it <kbd>HUM: Bug Field Configuration Scheme</kbd>. Click on Add.</li>
<li>Click on the Associate an issue type with a field configuration<strong> </strong>button.</li>
</ol>
<ol start="4">
<li>Select Bug<strong> </strong>for <strong>Issue Type</strong>, <strong>HUM: Bug Field Configuration</strong> for <strong>Field Configuration</strong>, and click on Add, as shown in the following screenshot:</li>
</ol>
<div><img src="img/62c2a489-b6c0-4fb5-a772-71a72685f95f.png" style="width:31.00em;height:12.58em;"/></div>
<p>The last step is to apply the new field configuration scheme to our project:</p>
<ol>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Projects</strong>.</li>
<li>Select a project from the list.</li>
<li>Select Fields from the left-hand panel.</li>
<li>Navigate to <strong>Actions</strong> &gt; Use a different scheme.</li>
<li>Select the new <kbd>HUM: Bug Field Configuration Scheme</kbd><strong> </strong>option and click on <strong>Associate</strong>.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up customized screens for your project</h1>
                
            
            
                
<p>Jira comes with three screens by default—the <strong>Default</strong> screen, the <strong>Resolve </strong><strong>Issue</strong> screen, and the <strong>Workflow</strong> screen.</p>
<p>In this recipe, we will look at how to create a new screen from scratch, and then make it appear when we are creating a new Task issue.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>The screen is one of the most complicated configurations in Jira. To create a new screen and apply it often requires you to configure multiple schemes. So, we will break these steps into three logical groups.</p>
<p>Firstly, we need to create our new screen:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to Administration &gt; <strong>Issues</strong> &gt; <strong>Screens</strong>.</li>
<li>Click on the Add Screen<strong> </strong>button and name the new screen <kbd>HUM: Scrum Task Create Screen</kbd>. Click on <strong>Add</strong>.</li>
<li>Select and add the <strong>Summary</strong>, <strong>Issue Type</strong>, <strong>Description</strong>, <strong>Assignee</strong>, <strong>Description</strong>, and <strong>Priority </strong>fields, as shown in the following screenshot:</li>
</ol>
<div><img src="img/434b81cf-159d-44f4-83b0-ca98688b863a.png" style="width:36.50em;height:26.33em;"/></div>
<p>Secondly, we need to assign the new Task Create Screen to the Create Issue operation:</p>
<ol>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Issues</strong> &gt; <strong>Screen schemes</strong>.</li>
<li>Click on the <strong>Add Screen Scheme </strong>button, name the new screen <kbd>HUM: Scrum Task Screen Scheme</kbd>, select <strong>Default Screen</strong> as the <strong>Default Screen</strong> option, and click on Add.</li>
<li>Click on the Associate an Issue Operation with a Screen<strong> </strong>button.</li>
</ol>
<ol start="4">
<li>Select Create Issue for <strong>Issue Operation</strong>, HUM: Scrum Task Create Screen for <strong>Screen</strong>, and click on <strong>Add</strong>, as shown in the following screenshot:</li>
</ol>
<div><img src="img/a80064da-b919-4ae9-8cb4-b62f42994c4f.png" style="width:26.58em;height:12.08em;"/></div>
<p>Third, we need to assign the new <kbd>Task Screen Scheme</kbd> to the Task issue type:</p>
<ol>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Issues</strong> &gt; <strong>Issue type screen schemes</strong>.</li>
<li>Click on the Add Issue Type Screen Scheme<strong> </strong>button and name the new screen <kbd>HUM: Scrum Task Issue Type Screen Scheme</kbd>.</li>
<li>Select the Default Screen Scheme<strong> </strong>as the <strong>Screen Scheme</strong> option and click on Add.</li>
<li>Click on the Associate an issue Type with a Screen Scheme<strong> </strong>button.</li>
<li>Select Task for <strong>Issue Type</strong>, HUM: Scrum Task Screen Scheme for <strong>Screen Scheme</strong>, and click on <strong>Add</strong>, as shown in the following screenshot:</li>
</ol>
<div><img src="img/9f6bc5e3-836d-4b4f-83ef-1d69dc995e1c.png" style="width:26.58em;height:11.00em;"/></div>
<p>Lastly, we need to apply the new screen <kbd>Task Issue Type Screen Scheme</kbd> to the project:</p>
<ol>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Projects</strong>.</li>
<li>Select a project from the list.</li>
</ol>
<ol start="3">
<li>Select Screens from the left-hand pane.</li>
<li>Navigate to <strong>Actions</strong> &gt; <strong>Use a different scheme</strong>.</li>
<li>Select the new <strong>Task Issue Type Screen Scheme</strong> and click on Associate<strong>.</strong></li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>The screen is one of the most intricate aspects of Jira configuration. When we create a new screen, we need to associate it with one of the three issue operations (create, edit, and view) with a screen scheme. In our recipe, we associated our new Task Create Screen with the Create Issue operation.</p>
<p>Screen schemes then need to be associated with issue types, so that Jira can determine which screen scheme to use, based on the selected issue type.</p>
<p>Lastly, we apply the Issue Type Screen Scheme to a project, so only the selected projects will have the associated screens. Now take a look at the following diagram:</p>
<div><img src="img/7aecbc28-3fe0-49c3-b297-095406fe4e32.png" style="width:33.75em;height:38.17em;"/></div>
<p class="CDPAlignLeft CDPAlign">It provides a comprehensive illustration of the relationships between screens, fields, and their various schemes.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Removing a select list's None option</h1>
                
            
            
                
<p>Custom field types such as select list (single and multi) come with the <strong>None</strong> option, and the only way to remove it is to make the field required. While this makes sense, it can be cumbersome to chase down every field and configuration.</p>
<p>In this recipe, we will remove the None option from all single select list custom fields.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>Since we will be modifying physical files in Jira, you will want to take backups of the files we change.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Jira uses Velocity templates to render custom fields. These templates are mostly HTML, with some special symbols. You can find all these files in the <kbd>JIRA_INSTALL/atlassian-jira/WEB-INF/classes/templates/plugins/fields</kbd> directory, and the edit view templates are in the <kbd>edit</kbd> subdirectory:</p>
<ol>
<li>Open the <kbd>edit-select.vm</kbd> file (located in the previously mentioned directory) in a text editor, and remove the following code snippet:</li>
</ol>
<pre style="padding-left: 60px">#if (!$fieldLayoutItem || $fieldLayoutItem.required ==  false)  
 &lt;option value="-1"&gt;
  $i18n.getText("common.words.none")<br/> &lt;/option&gt; 
#else 
 #if ( !$configs.default ) 
  &lt;option value=""&gt;  
   $i18n.getText("common.words.none") <br/>  &lt;/option&gt; 
 #end 
#end</pre>
<ol start="2">
<li>Save the file and restart Jira. Make sure you do not change any other lines.</li>
</ol>
<p>You can remove the None option from other custom field types, such as multi-select, by editing the appropriate file (for example, <kbd>edit-multiselect.vm</kbd>).</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>The Velocity <kbd>.vm</kbd> template files are what Jira uses to render the HTML for the custom fields. The code snippet we removed is what displays the None option. Note that, by changing the template, we are removing the None option for all single select custom fields in Jira. If you just want to remove the <strong>None</strong> option for a single custom field or only for certain projects, refer to the <em>Using JavaScript with custom fields</em> recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding help tips to custom fields</h1>
                
            
            
                
<p>Users who are new to Jira often find it confusing when it comes to filling in fields, especially custom fields. Therefore, it is for you as the administrator to provide useful tips and descriptions to explain what some of the fields are for.</p>
<p> </p>
<p>In this recipe, we will be adding a help icon to a customer field that we have called <strong>Team</strong>. You can apply this recipe to any custom fields you have in your Jira.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Proceed with the following steps to add help tips to a custom field:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Issues</strong> &gt; <strong>Custom Fields</strong>.</li>
<li>Click on the <strong>Edit </strong>link for the custom field.</li>
<li>Enter the following HTML snippet into the <strong>Description </strong>text box, and click on <strong>Update</strong>. You might want to substitute the <kbd>href</kbd> value to a real page containing help text:</li>
</ol>
<pre style="padding-left: 60px">        Need help to work out assignment? 
        &lt;a class="help-lnk" href="/secure/ShowConstantsHelp.jspa?decorator=popup#Teams" 
        data-helplink="local" target="_blank"&gt; 
          &lt;span class="aui-icon aui-icon-small aui-iconfont-help"&gt;&lt;/span&gt; 
        &lt;/a&gt;</pre>
<p>The following screenshot shows our new help icon:</p>
<div><img src="img/0cca5010-8c79-4ba8-ae0f-27c0b9968711.png" style="width:42.67em;height:34.42em;"/></div>
<p class="CDPAlignLeft CDPAlign">We will now go through how these steps work.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>Jira allows us to use any valid HTML for custom field description, so we added some simple text and an <kbd>anchor</kbd> tag that links to an HTML page containing our help information. We also added a <kbd>span</kbd> tag with the proper style class in order to have the nice question mark icon used by the Issue Type and Priority fields.</p>
<p class="mce-root"/>
<p>The <kbd>data-helplink="local"</kbd> attribute for the <kbd>anchor</kbd> tag ensures that, when the user clicks on the help icon, the help page is opened in a separate page rather than redirecting the current page.</p>
<p>Since the custom field description is rendered as it is, make sure you validate your HTML; for example, close all your HTML tags.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">There's more...</h1>
                
            
            
                
<p>Normally, we put descriptions directly into the custom field's description textbox, as demonstrated. You can also put your descriptions into the field configuration settings, such as hiding a field. Doing so offers the following advantages:</p>
<ul>
<li>You can have different help text for different project/issue type contexts.</li>
<li>You can set help text for fields that are not custom fields, such as <strong>Summary</strong> and <strong>Description</strong>.</li>
</ul>
<p>Proceed with the following steps to set field descriptions in the field configuration:</p>
<ol>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Issues</strong> &gt; <strong>Field Configurations</strong>.</li>
<li>Click on the <strong>Configure </strong>link for the field configuration used by the project and issue type.</li>
<li>Click on the <strong>Edit</strong> link for the field.</li>
<li>Enter the HTML snippets into the <strong>Description </strong>field, and click on Update.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">See also</h1>
                
            
            
                
<p>Refer to the <em>Using JavaScript with custom fields</em> recipe for other tricks you can do with custom field descriptions.</p>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">Using JavaScript with custom fields</h1>
                
            
            
                
<p>JavaScript can be used to manipulate the HTML of custom fields. By adding JavaScript code in the custom field description and wrapping the code in <kbd>&lt;script&gt;</kbd> tags, Jira will execute the code when the custom field is rendered.</p>
<p>In this recipe, we will look at another way of removing the None option from select list custom fields.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe uses the jQuery JavaScript library, which is bundled with Jira. If you are not familiar with jQuery, you can find the documentation at <a href="http://jquery.com/" target="_blank">http://jquery.com</a>.</p>
<p>We will also need to use the custom field's ID in our script, so you will need to have that handy. You can find the ID by going to the <strong>Custom fields</strong> page, clicking on the <strong>Edit</strong> link of the target field, and clicking the number at the end of the URL, which is the field's ID. For example, the following URL shows a custom field with the ID <kbd>10103</kbd>:</p>
<p><kbd>http://jira.localhost.com:8080/secure/admin/EditCustomField!default.jspa?id=10103</kbd></p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Proceed with the following steps to add JavaScript to custom field description:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to Administration &gt; Issues &gt; Custom Fields.</li>
<li>Click on the <strong>Edit </strong>link for the custom field.</li>
<li>Enter the following JavaScript snippet into the <strong>Description </strong>text box, and click on <strong>Update</strong>. You will need to substitute it in your custom field's ID:</li>
</ol>
<pre style="padding-left: 60px">&lt;script&gt; 
 AJS.$('#customfield_10103 option[value="-  1"]').remove(); 
&lt;/script&gt;</pre>
<p>The following screenshot shows that the Team custom field:</p>
<div><img src="img/3872f04e-1b0e-4620-a1a2-781a6b4a899a.png" style="width:43.83em;height:35.33em;"/></div>
<p>As you can see, the None option is no longer available.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>In our script, we use jQuery to select the Team custom field, based on its element ID, and remove the option with the value <kbd>-1</kbd> (which is the None option) with the <kbd>#customfield_10103 option[value="-1"]</kbd> selector.</p>
<p>We use the <strong>Atlassian JavaScript</strong> (<strong>AJS</strong>) namespace (<kbd>AJS.$</kbd>), which is the recommended way to use jQuery in Jira.</p>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting default values for fields</h1>
                
            
            
                
<p>As you add more and more fields onto your screens, sometimes it can be overwhelming and confusing for your end users, especially for free text fields such as Description. Users will often enter data however they like. To help with that, one way is to have instructions set as default values for some of these fields to help guide your users with their inputs. For those of you who have used other systems, such as GitHub, this is a common practice.</p>
<p>In this recipe, we will look at how to set up a default value for the Description field, in the form of instructions for users to follow when creating a bug report.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>For this recipe, we need to have the ScriptRunner for Jira add-on installed. You can download it from the following link, or install it directly from the Universal Plugin Manager at <a href="https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner" target="_blank">https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner</a>.</p>
<p>You may also want to get familiar with Groovy scripting at <a href="http://groovy-lang.org">http://groovy-lang.org</a><a href="http://groovy.codehaus.org/" target="_blank">.</a></p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Once you have installed the ScriptRunner for Jira add-on, we will first need to create what is known as a behavior:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to <strong>Administration &gt;</strong> <strong>Manage apps</strong> &gt; <strong>Behaviors</strong>.</li>
<li>Create a new behavior by entering a name for it and clicking the <strong>Add</strong> button.</li>
</ol>
<p>With the new behavior created, we need to first create a mapping, so Jira will know what to apply the behavior to:</p>
<ol>
<li>Click on the Add Mapping link of the new behavior we have created.</li>
<li>Select All projects and Bug issue type for our mapping.</li>
<li>Click the <strong>Add Mapping</strong> button to save the setting.</li>
</ol>
<p>With the mapping created, we can now start setting default values:</p>
<ol>
<li>Click on the <strong>Fields</strong> link of the new behavior we have created.</li>
<li>Click on the <strong>Create initialiser</strong> link:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="img/b034e76f-a7bd-4246-9127-3798c390b016.png" style="width:46.58em;height:18.83em;"/></p>
<ol start="3">
<li>Enter the following code into the text editor:</li>
</ol>
<pre style="padding-left: 60px">1.     def desc = getFieldById("description")<br/>2.     def defaultValue = ""<br/>3.     h2. Describe the problem<br/>4.     Tell us in details what the problem you are having.<br/>5.<br/>6.     h2. How to reproduce<br/>7.     List out the steps to reproduce the problem.<br/>8.     * step 1<br/>9.     * step 2<br/>10.<br/>11.    h2. Expected Result<br/>12.    Tell us what you think the correct outcome should be after completing the steps 13.    listed above.<br/>14.<br/>15.    h2. Actual Result<br/>16.    Tell us what you actually see after completing the steps listed above."""<br/>17.<br/>18.    if (!underlyingIssue?.description) {<br/>19.        desc.setFormValue(defaultValue)<br/>20.    }</pre>
<ol start="4">
<li>Click on <strong>Save</strong> to save our changes.</li>
</ol>
<p>Now, if you try to create a new Bug issue, you should see the Description field pre-populated with our default value, as shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/ba0b3cc7-8600-48e2-9a58-05f9f6508e8a.png" style="width:40.92em;height:32.67em;"/></p>
<p class="CDPAlignLeft CDPAlign">We will now go have a look at how the steps work.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>Our code is written in Groovy, which is very similar to Java, the technology used by Jira. We first try to get hold of the <kbd>Description</kbd> field in line #1, and, from line #3 to #20, we use wiki markup, the markup language used by Jira's out-of-the-box editor, to create your default value in the form of instructions. On line #18, we check whether the issue already has a description value set, such as user-entered content, and, if not, we will apply our default value on line #19.</p>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">Adding permission to fields</h1>
                
            
            
                
<p>Out of the box, Jira comes with several levels of permissions, starting at the system level and going down to the issue level, allowing you to control who should have access to issues. While this is usually sufficient, you will find yourself needing to apply permissions to individual fields. For example, you may want a field such as Description to be read-only for everyone, but only editable by a select group of users.</p>
<p>One option is to create your own custom field types, as described in the later recipe, and code the permission requirement as part of the field, but this approach requires programming and cannot be applied to fields that are not created by you.</p>
<p>In this recipe, we will look at an option to apply field-level permissions to both system fields and custom fields.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>For this recipe, we need to have the ScriptRunner for Jira add-on installed. You can download it from the following link, or install it directly from the Universal Plugin Manager at <a href="https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner" target="_blank">https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner</a>.</p>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Once you have installed the ScriptRunner for Jira add-on, we will first need to create what is known as a behavior:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to <strong>Administration</strong> &gt; Manage apps &gt; <strong>Behaviors</strong>.</li>
<li>Create a new behavior by entering a name for it and clicking the <strong>Add</strong> button.</li>
</ol>
<p>With the new behavior created, we need to first create a mapping, so Jira will know what to apply the behavior to:</p>
<ol>
<li>Click on the <strong>Add Mapping</strong> link of the new behavior we have created.</li>
<li>Select the projects and issue types you want to apply the behavior to. If you want this to be global, you can select the All projects and All issue types options.</li>
<li>Click the <strong>Add Mapping</strong> button to save the setting.</li>
</ol>
<p class="mce-root"/>
<p>With the mapping created, we can now start setting our field-level permission behaviors:</p>
<ol>
<li>Click on the <strong>Fields</strong> link of the new behavior we have created.</li>
<li>Select the fields you want to apply field-level permissions to.</li>
<li>Toggle the available behavior options on and off, as shown here:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="img/1628ba20-d8ab-4566-a355-151a969b99b3.png" style="width:22.92em;height:12.33em;"/></p>
<ol start="4">
<li>Click on the <strong>Add new condition</strong> link and select which users the permission should be applied to. In the following screenshot, the permission will be applied to everyone except users in the <kbd>jira-administrators</kbd> group:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="img/6f032829-414c-4154-a71d-0a688490b838.png" style="width:39.50em;height:28.25em;"/></p>
<ol start="5">
<li>Click on the <strong>Add</strong> button to add the condition.</li>
<li>After you are done with adding fields and conditions, click on the <strong>Save</strong> button.</li>
</ol>
<p>Once we have created and configured our field-level permissions, the changes will be applied immediately to the target issues according to the mappings we have configured. Have a look at the next screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/6fc080fb-1583-4188-9ecb-d55d34d550c6.png" style="width:44.17em;height:35.00em;"/></p>
<p class="mce-root CDPAlignLeft CDPAlign">As you can see, the Description field (a system field) and the Team field (a custom field) are in read-only mode when a user is editing the issue.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating your own custom field types</h1>
                
            
            
                
<p>All custom fields that come out-of-the-box with Jira have predefined purposes, such as the text field, which allows users to type in some simple text. It will often be useful to have a specialized custom field that does exactly what you need. Unfortunately, this often requires custom development efforts.</p>
<p>However, there is an add-on that provides a custom field type that lets you use Groovy scripts to power its logic.</p>
<p>In this recipe, we will look at how to create a custom field that uses a Groovy script to display the total number of comments on any given issue.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>For this recipe, we need to have the ScriptRunner for Jira add-on installed. You can download it from the following link, or install it directly from the Universal Plugin Manager at <a href="https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner" target="_blank">https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner</a>.</p>
<p>You may also want to get familiar with Groovy scripting at <a href="http://groovy-lang.org" target="_blank">http://groovy-lang.org</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<p>Creating a scripted field is a two-step process. We first need to create an instance of the custom field in Jira, and then add the script to it:</p>
<ol>
<li>Log into Jira with a user that has a Jira administrator's permission.</li>
<li>Navigate to <strong>Administration</strong> &gt; <strong>Issues</strong> &gt; <strong>Custom fields</strong>.</li>
<li>Click on the Add Custom Field button and select <strong>Advanced</strong> from the dialog box.</li>
</ol>
<ol start="4">
<li>Scroll down and select <strong>Scripted Field </strong>from the list; click on <strong>Next</strong>, as shown in the following screenshot:</li>
</ol>
<div><img src="img/34d3f120-5dcd-4eb4-915b-a515c12831c1.png" style="width:44.67em;height:28.17em;"/></div>
<ol start="5">
<li>Name our new custom field <kbd>Total Comments</kbd> and add it to the appropriate screens.</li>
<li>Navigate to Administration &gt; <strong>Manage apps</strong> &gt; Script Fields.</li>
<li>Select the <strong>Edit </strong>option for the <kbd>Total Comments</kbd> field.</li>
<li>Enter the following Groovy script in the script text box:</li>
</ol>
<pre style="padding-left: 60px">import com.atlassian.jira.component.ComponentAccessor<br/>import com.atlassian.jira.issue.comments.CommentManager <br/><br/>def commentManager = ComponentAccessor.getCommentManager()<br/>def numberOfComments = commentManager.getComments(issue).size() <br/> <br/>return numberOfComments ? numberOfComments as Double : null</pre>
<ol start="9">
<li>Select <strong>Number Field </strong>for <strong>Template</strong> and click on <strong>Update</strong>, as shown in the following screenshot:</li>
</ol>
<div><img src="img/1c7a2b20-1c15-49f0-9e11-3517a9e219bf.png" style="width:40.75em;height:42.00em;"/></div>
<div><p>When the custom field is added to an issue, it will automatically calculate the number of comments the issue has in real time, as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/8d9ce89e-d684-4a64-aa7f-d5b1a6dc8269.png" style="width:33.75em;height:14.00em;"/></p>
<p class="CDPAlignLeft CDPAlign">Now it's time to look to understand the steps.</p>
</div>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works...</h1>
                
            
            
                
<p>The scripted field type is an example of what is called the calculated custom field type. The calculated custom field type is a special custom field that derives (calculates) its value based on some predefined logic, in this case, our Groovy script. Every time the field is displayed, Jira will recalculate the field's value so it is always kept up to date.</p>


            

            
        
    </body></html>