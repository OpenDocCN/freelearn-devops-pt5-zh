<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Customizing Confluence</h1></div></div></div><p>If you are trying to introduce Confluence to your company, using your company branding and logo can go a long way. In this chapter, we are going to look at different ways to customize the look and feel of Confluence and methods to modify the user experience.</p><p>We will learn how <a id="id598" class="indexterm"/>relatively easy it is to customize Confluence to your needs. Even when those features aren't enough for your liking, Confluence gives you more advanced options to change the layout and style.</p><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Changing the landing page and altering the dashboard</li><li class="listitem" style="list-style-type: disc">Selecting the theme for your instance or space</li><li class="listitem" style="list-style-type: disc">Applying your company branding to Confluence</li><li class="listitem" style="list-style-type: disc">Adding custom HTML and stylesheets</li><li class="listitem" style="list-style-type: disc">Altering the default Confluence layouts</li></ul></div><div><div><div><div><h1 class="title"><a id="ch07lvl1sec44"/>The Confluence dashboard</h1></div></div></div><p>The first<a id="id599" class="indexterm"/> time you log in to Confluence you will see the dashboard. The Confluence dashboard will give the user a quick indication of the content that has changed recently. From the dashboard, users can navigate to spaces or sections within Confluence.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec93"/>The Confluence home page</h2></div></div></div><p>The default entry page of <a id="id600" class="indexterm"/>Confluence is the dashboard, but as a <a id="id601" class="indexterm"/>Confluence Administrator you can change this to any space home page you prefer. Keep in mind that the space must be accessible for all your users and if your Confluence installation allows anonymous access, the space should also be allowed to be viewed by anonymous users.</p><p>To change the <a id="id602" class="indexterm"/>default home page, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>General Configuration</strong> from the left-hand side menu.</li><li class="listitem">Click on the <strong>Edit</strong> link at the top-left corner.</li><li class="listitem">Select a space from the drop-down menu next to <strong>Site Homepage</strong>.</li><li class="listitem">Click on <strong>Save</strong> to save the change.</li></ol></div><p>Users can also change their personal default home page, which will override the global setting.</p><p>To change your<a id="id603" class="indexterm"/> personal default home page, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select your avatar in the top-right corner.</li><li class="listitem">Select <strong>Settings</strong> from the drop-down menu.</li><li class="listitem">Click on the <strong>Edit</strong> button.</li><li class="listitem">Select a space from the drop-down menu next to <strong>Site Homepage</strong>.</li><li class="listitem">Click on <strong>Submit</strong> to save the change.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec94"/>The welcome message</h2></div></div></div><p>The welcome<a id="id604" class="indexterm"/> message appears at the top-left corner of the Confluence dashboard, and can be used to display a common introduction to <a id="id605" class="indexterm"/>Confluence or some important company news.</p><div><div><h3 class="title"><a id="tip13"/>Tip</h3><p>
<strong>Include a page as the welcome message</strong>
</p><p>To change the content of the welcome message, a user has to be a Confluence Administrator. If you want to allow other users to change the welcome message, or just want to use the default Confluence editor, including a page is a perfect solution. We will learn how to set up this configuration in the later part of the chapter.</p></div></div><p>Perform the following<a id="id606" class="indexterm"/> steps to edit the welcome message:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Global Templates</strong> from the left-hand side menu.</li><li class="listitem">Click on the <strong>Edit</strong> link to the right of <strong>Default Welcome Message</strong>.</li><li class="listitem">Use the editor to create your own welcome message.</li><li class="listitem">Click <a id="id607" class="indexterm"/>on <strong>Save</strong> to save the change.</li></ol></div><div><div><h3 class="title"><a id="note31"/>Note</h3><p>Keep in mind that the welcome message is just a small part of the Confluence dashboard. Try not to use page layouts and sections, as these may not get displayed correctly. If you insert images and other elements in your welcome message, try to keep those between 300 px and 400 px width.</p></div></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec89"/>Restoring the default welcome message</h3></div></div></div><p>The default welcome<a id="id608" class="indexterm"/> message looks like the following screenshot. It is a common <strong>Welcome to Confluence</strong> and <strong>Get started</strong> text.</p><div><img src="img/9526EN_07_01.jpg" alt="Restoring the default welcome message"/></div><p>To restore the default welcome message, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Global Templates</strong> from the left-hand side menu.</li><li class="listitem">Click on the<a id="id609" class="indexterm"/> <strong>Reset to Default</strong> link to the right of <strong>Default Welcome Message</strong>.</li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec90"/>Removing the Get Started text</h3></div></div></div><p>By default, the Confluence<a id="id610" class="indexterm"/> dashboard displays a quick-start guide for administrators under the site welcome message. This guide is only visible to Confluence administrators and system administrators. A system administrator can update or remove it by editing the site layout as follows:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Layouts</strong> from the left-hand side menu.</li><li class="listitem">Choose <strong>Create custom</strong> or <strong>Edit</strong> next to <strong>Global Layout</strong>. The <strong>Edit</strong> option will be available if the global layout has already been customized, otherwise you need to use the <strong>Create Custom</strong> link.</li><li class="listitem">Locate the following section in the code and remove or edit it accordingly:<div><pre class="programlisting">#if($permissionHelper.isConfluenceAdministrator($remoteUser))
  &lt;div class="dashboard-item wiki-content"&gt;
    &lt;h2&gt;$i18n.getText("getstarted.heading")&lt;/h2&gt;
    &lt;ol id="dashboard-get-started"&gt;
      &lt;li class="create-space"&gt;
        &lt;h3&gt;&lt;a href="$req.contextPath/spaces/createspace-start.action"&gt;$i18n.getText("getstarted.add.space")&lt;/a&gt;&lt;/h3&gt;
        &lt;p&gt;$i18n.getText("getstarted.add.space.desc")&lt;/p&gt;
      &lt;/li&gt;
      &lt;li class="add-users"&gt;
        &lt;h3&gt;&lt;a href="$req.contextPath/admin/users/browseusers.action"&gt;$i18n.getText("getstarted.add.users")&lt;/a&gt;&lt;/h3&gt;
        &lt;p&gt;$i18n.getText("getstarted.add.users.desc")&lt;/p&gt;
      &lt;/li&gt;
      &lt;li class="user-profile"&gt;
        &lt;h3&gt;&lt;a href="$req.contextPath/users/editmyprofilepicture.action"&gt;$i18n.getText("getstarted.choose.profile.picture")&lt;/a&gt;&lt;/h3&gt;
        &lt;p&gt;$i18n.getText("getstarted.choose.profile.picture.desc")&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/div&gt;
#end</pre></div></li><li class="listitem">Select <strong>Save</strong>.</li></ol></div><div><div><h3 class="title"><a id="note32"/>Note</h3><p>These changes may need to be reapplied after upgrading your Confluence installation.</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec91"/>Including content from another page</h3></div></div></div><p>In many cases, including <a id="id611" class="indexterm"/>another page as the welcome message gives you more flexibility, control, and allows you to regularly update the content. Using a normal Confluence page means that you can:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Allow other people, who are not Confluence administrators, to edit the message</li><li class="listitem" style="list-style-type: disc">Watch the included page, and get notified when something on the welcome message has changed</li></ul></div><p>Make sure that the page you want to include is viewable by all the users, including anonymous users if your Confluence allows anonymous access.</p><p>If a user is not allowed to view a page, they will see the following message on their dashboard:</p><p>
<strong>Unable to render {include} The included page could not be found.</strong>
</p><p>To include content from another page, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Create a page in Confluence as you normally would.<div><ol class="orderedlist arabic"><li class="listitem">Click on the <strong>Create</strong> button in the top navigation.</li><li class="listitem">Select the space you want to create the page in.</li><li class="listitem">Select the <strong>Blank Page</strong> template.</li><li class="listitem">Give the page a title like <code class="literal">Confluence Dashboard</code>.</li><li class="listitem">Enter some basic content on the page.</li><li class="listitem">Click on <strong>Save</strong> to save the page.</li></ol></div></li><li class="listitem">Change the page restrictions as you see fit. A commonly used setting is to restrict the editing of this page to a certain group of people.</li><li class="listitem">Use the preceding steps to edit the site's welcome message.<div><ol class="orderedlist arabic"><li class="listitem">Select <strong>Insert</strong> | <strong>Other Macros</strong> and search the Include Page macro.</li><li class="listitem">In the macro property panel, search for the page you just created.</li><li class="listitem">Select <strong>Insert</strong>.</li></ol></div></li><li class="listitem">Click on <strong>Save</strong> to save the welcome message.<div><img src="img/9526EN_07_02.jpg" alt="Including content from another page"/></div></li></ol></div><p>In the<a id="id612" class="indexterm"/> preceding example we added a Content by Label macro, which looks for content with a review label. We've also included an image with an effect that links to another page on Confluence.</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec45"/>Themes</h1></div></div></div><p>Themes<a id="id613" class="indexterm"/> are sets of predefined styles and can be used to personalize the look and feel of Confluence. Themes can be applied to the entire site and individual spaces. Some themes add extra functionality to Confluence or change the layout significantly.</p><p>Confluence 5 comes with two themes installed, and an administrator can install new themes as add-ons via the Administration Console. We go into add-ons and the Atlassian Marketplace in <a class="link" href="ch09.html" title="Chapter 9. General Administration">Chapter 9</a>, <em>General Administration</em>.</p><div><div><h3 class="title"><a id="note33"/>Note</h3><p>Atlassian is planning on merging the <strong>Documentation Theme</strong> with the <strong>Default Theme</strong>. As this is not the case in Confluence 5 yet, we will discuss them both as they have some different features. Keep in mind that, at some point, the <strong>Documentation Theme</strong> will be removed from Confluence.</p></div></div><p>To change the <a id="id614" class="indexterm"/>global Confluence theme, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Themes</strong> from the left-hand side menu.</li><li class="listitem">All the installed themes will be present.<p>Select the appropriate radio button to select a theme.</p></li><li class="listitem">Choose <strong>Confirm</strong> to change the theme:<div><img src="img/9526EN_07_03.jpg" alt="Themes"/></div></li></ol></div><p>Space administrators can also decide on a different theme for their own spaces. Spaces with their own theme selections—and therefore not using the global look and feel—won't be affected if a Confluence Administrator changes the global default theme.</p><p>To change a space theme<a id="id615" class="indexterm"/>, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the space.</li><li class="listitem">Select <strong>Space Tools</strong> in the sidebar. (If you are not using the default theme, select <strong>Browse</strong> | <strong>Space Admin</strong>.)</li><li class="listitem">Select <strong>Look and Feel</strong>, followed by <strong>Theme</strong>.</li><li class="listitem">Select the theme you want to apply to the space.</li><li class="listitem">Click on <strong>Confirm</strong>.</li></ol></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec95"/>The Default Theme</h2></div></div></div><p>As the <a id="id616" class="indexterm"/>name implies, this is the default theme shipped with Confluence. This Default Theme got a complete overhaul in Confluence 5 and looks as shown in the following screenshot:</p><div><img src="img/9526EN_07_04.jpg" alt="The Default Theme"/></div><p>The Default<a id="id617" class="indexterm"/> Theme provides every space with a sidebar, containing useful links and navigation help throughout the current space. With the sidebar, you can quickly change from browsing pages to blog post or vice versa. The sidebar also allows important space content to be added as a link for quicker access, and displays the children of the current page for easy navigation.</p><div><div><h3 class="title"><a id="tip14"/>Tip</h3><p>You can collapse or expand the sidebar. Click-and-drag the border, or use the keyboard shortcut: <em>[</em>. If the sidebar is collapsed, you can still access the sidebar options.</p></div></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec92"/>Configuring the theme</h3></div></div></div><p>The default<a id="id618" class="indexterm"/> theme doesn't have any global configuration <a id="id619" class="indexterm"/>available, but a space administrator can make some space-specific changes to the theme's sidebar.</p><div><img src="img/9526EN_07_05.jpg" alt="Configuring the theme"/></div><p>Perform the following steps to change the space details:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the relevant space.</li><li class="listitem">Select <strong>Configure sidebar</strong> in the space sidebar.</li><li class="listitem">Click on the edit icon next to the space title.</li><li class="listitem">A pop up will show where you can change the space title and logo (as shown in the preceding screenshot, indicated as <strong>1</strong>).</li><li class="listitem">Click on <strong>Save</strong> to save the changes</li><li class="listitem">Click on the <strong>Done</strong> button to exit the configuration mode.</li></ol></div><p>The main navigation items on the sidebar (pages and blog posts) can be hidden. This can come in handy, for example, when you don't allow users to add blog posts to the space.</p><p>To show or<a id="id620" class="indexterm"/> hide the main navigation items, perform the following <a id="id621" class="indexterm"/>steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the relevant space.</li><li class="listitem">Select <strong>Configure sidebar</strong> in the space sidebar.</li><li class="listitem">Select the <strong>-</strong> or <strong>+</strong> icon beside the link to either hide or show the link.</li><li class="listitem">Click on the <strong>Done</strong> button to exit the configuration mode.</li></ol></div><p>Space shortcuts are manually added links to the sidebar, linking to important content within the space. A space administrator can manage these links.</p><p>To add a space shortcut, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the relevant space.</li><li class="listitem">Select <strong>Configure sidebar</strong> in the space sidebar.</li><li class="listitem">Click on the <strong>Add Link</strong> button, indicated as <strong>3</strong> in the preceding screenshot.</li><li class="listitem">The <strong>Insert Link</strong> dialog will appear.</li><li class="listitem">Search and select the page you want to link.</li><li class="listitem">Click on <strong>Insert</strong> to add the link to the sidebar.</li><li class="listitem">Click on the <strong>Done</strong> button to exit the configuration mode.</li></ol></div></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec96"/>The Documentation Theme</h2></div></div></div><p>The Documentation Theme<a id="id622" class="indexterm"/> is another bundled theme. It supplies a built-in table of content for your space, a configurable header and footer, and a space-restricted search.</p><p>The Documentation Theme's default look and feel is displayed in the following screenshot:</p><div><img src="img/9526EN_07_06.jpg" alt="The Documentation Theme"/></div><p>The sidebar of the <a id="id623" class="indexterm"/>Documentation Theme will show a tree with all the pages in your space. Clicking on the icon in front of a page title will expand the branch and show its children.</p><div><div><h3 class="title"><a id="tip15"/>Tip</h3><p>The sidebar can be opened and closed using the <em>[</em> shortcut, or the icon on the left of the search box in the Confluence header.</p></div></div><div><div><div><div><h3 class="title"><a id="ch07lvl3sec93"/>Configuring the theme</h3></div></div></div><p>The Documentation Theme allows configuration of the sidebar contents, page header and footer, and the possibility to restrict the search to only the current space.</p><p>A<a id="id624" class="indexterm"/> Confluence Administrator can configure the <a id="id625" class="indexterm"/>theme globally, but a Space Administrator can overwrite this configuration for his or her own space. To configure the Documentation Theme for a space, the Space Administrator should explicitly select the <strong>Documentation Theme</strong> as the space theme.</p><p>The theme configuration of the Documentation Theme allows you to change the properties displayed in the following screenshot. How to get to this screen and what the properties represent will be explained next.</p><div><img src="img/9526EN_07_07.jpg" alt="Configuring the theme"/></div><p>To configure the Documentation theme, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">As a<a id="id626" class="indexterm"/> Confluence Administrator:<div><ol class="orderedlist arabic"><li class="listitem">Browse<a id="id627" class="indexterm"/> to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Themes</strong> from the left-hand side menu.</li><li class="listitem">Choose the <strong>Documentation Theme</strong> as the current theme.</li><li class="listitem">Click on the <strong>Configure theme</strong> link.</li></ol></div></li><li class="listitem">As a Space administrator:<div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the space.</li><li class="listitem">Select <strong>Browse</strong> | <strong>Space Admin</strong>.</li><li class="listitem">Choose <strong>Themes</strong> from the left-hand side menu.</li><li class="listitem">Make sure that the <strong>Documentation Theme</strong> is the current theme.</li><li class="listitem">Click on the <strong>Configure theme</strong> link.</li></ol></div></li><li class="listitem">Select or deselect the <strong>Page Tree</strong> checkbox. This will determine if your space will display the default search box and page tree in the sidebar.</li><li class="listitem">Select or<a id="id628" class="indexterm"/> deselect the <strong>Limit search</strong><a id="id629" class="indexterm"/><strong> results to the current space</strong> checkbox.<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">If you select the checkbox:<p>The Confluence search in the top-left corner will only search in the current space.</p><p>The sidebar will not contain a search box.</p></li><li class="listitem" style="list-style-type: disc">If you deselect the checkbox:<p>The Confluence search in the top-left corner will search across the entire Confluence site.</p><p>The sidebar will contain a search box, which is limited to searching in the current space.</p></li></ul></div></li><li class="listitem">In the three textboxes, you can enter any text or wiki markup you would like; for example, you could add some information to the sidebar or a notification to every page. The following screenshot will display these areas:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Navigation</strong>: This will be displayed in the space sidebar.</li><li class="listitem" style="list-style-type: disc"><strong>Header</strong>: This will be displayed above the title on all the pages in the space.</li><li class="listitem" style="list-style-type: disc"><strong>Footer</strong>: This will be displayed after the comments on all the pages in the space.</li></ul></div><div><img src="img/9526EN_07_13.jpg" alt="Configuring the theme"/></div></li></ol></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec46"/>Look and feel</h1></div></div></div><p>The look and feel of Confluence<a id="id630" class="indexterm"/> can be customized on both global level and space level. Any changes made on a global level will be applied as the default settings for all spaces.</p><p>A Space Administrator can choose to use a different theme than the global look and feel. When a Space Administrator selects a different theme, the default settings and theme are no longer applied to that space. This also means that settings in a space are not updated if the global settings are updated.</p><p>In this section, we will cover some basic look and feel changes, such as changing the logo and color-scheme of your Confluence instance. It is also possible to change some of the Confluence layouts; this is covered in the <em>Advanced customizing</em> section.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec97"/>Confluence logo</h2></div></div></div><p>The Confluence logo<a id="id631" class="indexterm"/> is the logo that is displayed on the navigation bar in Confluence. This can easily be changed to your company logo.</p><p>To change the global logo, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Site Logo</strong> from the left-hand side menu</li><li class="listitem">Click on <strong>Choose File</strong> to select the file from your computer.</li><li class="listitem">Decide whether to show only your company logo, or also the title of your Confluence installation.<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">If you choose to also show the title, you can change this in the text field next to <strong>Site Title</strong>.</li></ul></div></li><li class="listitem">Click on<a id="id632" class="indexterm"/> <strong>Save</strong>.<div><img src="img/9526EN_07_08.jpg" alt="Confluence logo"/></div></li></ol></div><div><div><h3 class="title"><a id="note34"/>Note</h3><p>As you might notice, Confluence also changed the color scheme of your installation. Confluence will suggest a color scheme based upon your logo. To revert this change, click on <strong>Undo</strong>, which is directly available after updating your logo.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec98"/>Space logo</h2></div></div></div><p>Every space can<a id="id633" class="indexterm"/> choose its own logo, making it easy to identify certain topics or spaces. A Confluence administrator can also set the default space logo, for newly created spaces or spaces without their own specified logo.</p><div><div><h3 class="title"><a id="note35"/>Note</h3><p>The logo of a personal space cannot be changed; it will always use the user's avatar as logo.</p></div></div><p>To set the <a id="id634" class="indexterm"/>default space logo, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Default Space Logo</strong> from the left-hand side menu.</li><li class="listitem">Click on <strong>Choose File</strong> to select the file from your computer. For the best result, make sure the image is about 48 x 48 pixels.</li><li class="listitem">Click on <strong>Upload Logo</strong> to upload the default space logo.</li></ol></div><p>As a Space Administrator, you can replace the default logo for your space. How this is done depends on the theme you are using.</p><p>To change the space logo<a id="id635" class="indexterm"/> with the default theme, <a id="id636" class="indexterm"/>perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the relevant space.</li><li class="listitem">Click on <strong>Configure Sidebar</strong> from the sidebar.</li><li class="listitem">Select the edit icon next to the page title.</li><li class="listitem">Click on <strong>Choose File</strong> next to the logo and select a file from your computer. Confluence will display an image editor to indicate how your logo should be displayed as shown in the next screenshot.</li><li class="listitem">Drag and resize the circle in the editor to the right position.</li><li class="listitem">Click on <strong>Save</strong> to save the changes.</li><li class="listitem">Click on the <strong>Done</strong> button to exit the configuration mode.<div><img src="img/9526EN_07_09.jpg" alt="Space logo"/></div></li></ol></div><p>To change the space logo with<a id="id637" class="indexterm"/> the Documentation <a id="id638" class="indexterm"/>Theme, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the relevant space.</li><li class="listitem">Select <strong>Browse</strong> | <strong>Space Admin</strong>.</li><li class="listitem">Select <strong>Change Space Logo</strong> from the left-hand side menu.</li><li class="listitem">Select <strong>Choose File</strong> and select the logo from your computer.</li><li class="listitem">Click on <strong>Upload Logo</strong> to save the new logo; Confluence will automatically resize and crop the logo for you.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec99"/>Color schemes</h2></div></div></div><p>Confluence and Space <a id="id639" class="indexterm"/>Administrators can configure new color schemes for Confluence and individual spaces. The global color scheme, configured by the Confluence Administrator, will also be the default space scheme. Space Administrators can configure different colors for their spaces. Changing the color schemes also applies to personal spaces.</p><p>To change the global color scheme<a id="id640" class="indexterm"/>, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Colour Scheme</strong> from the left-hand side menu.</li><li class="listitem">Click on <strong>Edit</strong> and the screen displayed in the next screenshot will be shown.</li><li class="listitem">Use standard HTML/CSS color codes or the color-picker next to the text fields.</li><li class="listitem">Click on <strong>Save</strong> to apply the changes to Confluence.</li></ol></div><p>To change the color scheme<a id="id641" class="indexterm"/> of a space, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to any page in the space.</li><li class="listitem">Select <strong>Space Tools</strong> in the sidebar. (If you are not using the default theme, select <strong>Browse</strong> | <strong>Space Admin</strong>.)</li><li class="listitem">Select <strong>Look and Feel</strong>, followed by <strong>Colour Scheme</strong>.</li><li class="listitem">Select the color scheme below <strong>Custom Colour Scheme</strong>.</li><li class="listitem">Click on the <strong>Edit</strong> link.</li><li class="listitem">Use standard HTML/CSS color codes or the color-picker next to the text fields.</li><li class="listitem">Click on <strong>Save</strong> to apply the changes to the space.<div><img src="img/9526EN_07_10.jpg" alt="Color schemes"/></div></li></ol></div><p>If you don't like the color scheme you selected, use the <strong>Reset</strong> button in the edit screen to return to Confluence's default settings.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec47"/>Advanced customizing</h1></div></div></div><p>Changing the look and feel of <a id="id642" class="indexterm"/>Confluence, using themes and color schemes<a id="id643" class="indexterm"/> isn't always enough. If you want to go a bit further by changing the appearance of Confluence, or you want to add some extra functionality to the layout, these more advanced topics might interest you.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec100"/>The default space content</h2></div></div></div><p>Whenever <a id="id644" class="indexterm"/>you <a id="id645" class="indexterm"/>create a new space, the first page of that space always has the same content. As a Confluence Administrator, you can change this default space content to contain any other content you like.</p><p>To change the <a id="id646" class="indexterm"/>default content of a global space, perform<a id="id647" class="indexterm"/> the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Global Templates</strong> from the left-hand side menu.</li><li class="listitem">Under the section <strong>System Templates</strong>, click on the <strong>Edit</strong> link below the <strong>Default Space Content</strong> text.</li><li class="listitem">Create the content you want to appear on the home page of new spaces. You can also use variables within the content.<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">$spacekey</code>: This will be replaced with the new space key.</li><li class="listitem" style="list-style-type: disc"><code class="literal">$spacename</code>: This will be replaced with the new space name.</li></ul></div></li><li class="listitem">Click on <code class="literal">Save</code> to save the new default content.</li></ol></div><p>To <a id="id648" class="indexterm"/>change the <a id="id649" class="indexterm"/>default content of a personal space, perform<a id="id650" class="indexterm"/> the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Global Templates</strong> from the left-hand side menu.</li><li class="listitem">Under the section <strong>System Templates</strong>, click on the <strong>Edit</strong> link below the <strong>Default Personal Space Content</strong> text.</li><li class="listitem">Create the content you want to appear on the home page of new spaces. You can also use variables within the content.<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">$userFullName</code>: This will be replaced with the space owner's full name.</li><li class="listitem" style="list-style-type: disc"><code class="literal">$userEmail</code>: This will be replaced with the space owner's email address.</li><li class="listitem" style="list-style-type: disc"><code class="literal">$userPersonalInfo</code>: This will be replaced with the space owner's <strong>About me</strong> text, entered in the user profile.</li></ul></div></li><li class="listitem">Click on <strong>Save</strong> to save the new default content.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec101"/>Custom HTML</h2></div></div></div><p>Confluence <a id="id651" class="indexterm"/>allows you to add <a id="id652" class="indexterm"/>some custom HTML to every page in Confluence. A very common use case for this is to add a Google Analytics tracker to Confluence.</p><p>There are three places where you can insert HTML, as shown in the next screenshot:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>At end of the HEAD</strong></li><li class="listitem" style="list-style-type: disc"><strong>At beginning of the BODY</strong></li><li class="listitem" style="list-style-type: disc"><strong>At end of the BODY</strong></li></ul></div><p>Before adding any custom HTML to your Confluence pages, make sure it is valid. Adding incomplete or broken HTML can result in not being able to use Confluence anymore.</p><div><img src="img/9526EN_07_11.jpg" alt="Custom HTML"/></div><p>To insert<a id="id653" class="indexterm"/> custom HTML, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Custom HTML</strong> from the left-hand side menu.</li><li class="listitem">Click on the <strong>Edit</strong> button.</li><li class="listitem">Insert the HTML in the corresponding text area as shown in the preceding screenshot.</li><li class="listitem">Click on <strong>Save</strong>.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec102"/>Custom stylesheets</h2></div></div></div><p>Confluence gives <a id="id654" class="indexterm"/>us the possibility to<a id="id655" class="indexterm"/> add custom CSS files to Confluence and potentially change the complete look and feel. In order to apply CSS, you need adequate knowledge on working with and writing in CSS. Beginner tutorials are widely available on the Internet, for instance at W3Schools (<a class="ulink" href="http://www.w3schools.com/css/default.asp">http://www.w3schools.com/css/default.asp</a>).</p><p>Custom CSSs can be added on the global and space levels, although the last one is disabled by default and should be turned on by a Confluence Administrator. Spaces with their own custom CSSs will ignore the global custom CSS.</p><div><div><h3 class="title"><a id="note36"/>Note</h3><p>Keep in mind that Confluence HTML may change between versions and your CSS might stop working. Atlassian does not support custom CSS or any issues related to it. So, always check your custom CSS when moving to a newer version of Confluence and adjust the CSS as required.</p></div></div><p>To enable <a id="id656" class="indexterm"/>custom stylesheets for spaces, perform the<a id="id657" class="indexterm"/> following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Security Configuration</strong> from the left-hand side menu.</li><li class="listitem">Click on <strong>Edit</strong>.</li><li class="listitem">Enable the checkbox in front of <strong>Custom Style Sheets for Spaces</strong>.</li><li class="listitem">Click on <strong>Save</strong> to save your changes.</li></ol></div><p>To <a id="id658" class="indexterm"/>add a<a id="id659" class="indexterm"/> custom style sheet to Confluence, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Style Sheet</strong> from the left-hand side menu.</li><li class="listitem">Click on <strong>Edit</strong>.</li><li class="listitem">Add your CSS.<p>To demonstrate the power of changing the stylesheet enter the next example.</p></li><li class="listitem">Click on <strong>Save</strong> to save your changes.</li></ol></div><p>Use the following example to get an understanding of what is possible with custom stylesheets:</p><div><pre class="programlisting">body:not(.dashboard) #main { padding: 40px 80px 0px; font-size:120%; }
#title-heading { font-size: 200%; }

#breadcrumbs { display:none; }

.content-navigation {width: 300px; height: 30px; }
.content-navigation ul { display:none; }
.content-navigation:hover ul { display:block; }</pre></div><p>The first block<a id="id660" class="indexterm"/> will change the padding of the main element so that there is more whitespace on the left and right of the content. It also resizes the text to 120 percent and the page title to 200 percent of its original size.</p><p>The second statement will remove the breadcrumbs above the page title.</p><p>The last section of the stylesheet will hide the page tools (<strong>Edit</strong>, <strong>Share</strong>, and <strong>Tools</strong>) unless someone hovers the location with their mouse.</p><p>This is how your page will look like with this custom stylesheet installed:</p><div><img src="img/9526EN_07_12.jpg" alt="Custom stylesheets"/></div><p>As the preceding example showed, changing the CSS is a powerful way to alter the appearance of your Confluence. It does require some basic CSS and HTML skills though.</p><p>There is a tutorial available online to get you started with changing the CSS at <a class="ulink" href="https://confluence.atlassian.com/display/DOC/Basic+Styling+Tutorial">https://confluence.atlassian.com/display/DOC/Basic+Styling+Tutorial</a>.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec103"/>Site layouts</h2></div></div></div><p>Confluence<a id="id661" class="indexterm"/> is built on<a id="id662" class="indexterm"/> top of the open source library SiteMesh, a web page layout system. To further change the look and feel of Confluence, you can modify these decorator files. If you want to change the decorator files, you should familiarize yourself with Velocity. The user guide is available online at <a class="ulink" href="http://velocity.apache.org/engine/releases/velocity-1.4/user-guide.html">http://velocity.apache.org/engine/releases/velocity-1.4/user-guide.html</a>.</p><p>The decorator files<a id="id663" class="indexterm"/> in Confluence are grouped in the following sections:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Site layouts</strong>: These <a id="id664" class="indexterm"/>layouts are used to define the layout around the content such as the header and footer.</li><li class="listitem" style="list-style-type: disc"><strong>Content layouts</strong>: These<a id="id665" class="indexterm"/> layouts control the appearance of content such as pages and blog posts. They do not change the way the pages themselves are displayed, but allow you to change the way the surrounding comments or attachments are displayed.</li><li class="listitem" style="list-style-type: disc"><strong>Export layouts</strong>: These <a id="id666" class="indexterm"/>layouts control the appearance of spaces and pages when they are exported to HTML. If you are using Confluence to generate a static website, for example, you will need to modify these layouts.</li></ul></div><p>To edit a<a id="id667" class="indexterm"/> decorator file, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Select <strong>Layouts</strong> from the left-hand side menu.</li><li class="listitem">Click on <strong>Create Custom</strong> to edit the default file.</li><li class="listitem">Make any changes.</li><li class="listitem">Click on <strong>Save</strong> to save the page.</li></ol></div><p>Use <strong>View Default</strong> to view the default decorator file. If something goes wrong, you can use <strong>Reset Default</strong> to return to the original layout.</p><p>While editing the decorator files, there are a couple of Velocity macros that you can use to insert items like breadcrumbs or menus in your layout. The following are some of these macros; more are available online at <a class="ulink" href="https://confluence.atlassian.com/display/DOC/Working+With+Decorator+Macros">https://confluence.atlassian.com/display/DOC/Working+With+Decorator+Macros</a>.</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Macro</p>
</th><th style="text-align: left" valign="bottom">
<p>Usage</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">#includePage (pageTitle)</code>
<a id="id668" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Includes a confluence page with the specified title. If there are 2 or more pages with the same title across Confluence, this macro will use the page belonging to the space you are currently viewing.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">#searchbox ()</code>
<a id="id669" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Inserts a search box similar to the default search box in the top-right corner.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">#dashboardlink ()</code>
<a id="id670" class="indexterm"/>
</p>
</td><td style="text-align: left" valign="top">
<p>Inserts a link to the dashboard page.</p>
</td></tr></tbody></table></div><p>These macros work reliably only when you're editing the main decorator. They may not work in other decorators; they will definitely not work in the normal Confluence editor.</p><div><div><h3 class="title"><a id="note37"/>Note</h3><p>If you have changed the layout so extensively that some features aren't visible anymore, you can reset the layout by directly browsing to the following URL. Substitute the base URL and the appropriate<a id="id671" class="indexterm"/> <code class="literal">.vmd</code> file.</p><p>
<code class="literal">http://&lt;confluence_url&gt;/admin/resetdecorator.action?decoratorName=decorators/main.vmd</code>
</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec48"/>Summary</h1></div></div></div><p>In this chapter, we went from some basic means to change the appearance of your Confluence installation to an advanced, change-it-completely, approach. Adding your company's branding to Confluence can be done by uploading your logo and changing the color scheme.</p><p>You can also change which page your users see when they login; this can be the Confluence dashboard or a space home page with your company news and other important information. Users can specify their own preferences as well.</p><p>We also learned that Confluence comes with some bundled themes with different looks, feels, and features. If those themes don't completely get you the user experience you're looking for, an option is to change the stylesheet and decorators yourself.</p><p>In the next chapter, we are going to take a look at more advanced options like creating and using templates to give your documentation more structure and to help your users get started quickly.</p></div></body></html>