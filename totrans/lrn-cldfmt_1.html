<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introducing AWS CloudFormation</h1>
                
            
            <article>
                
<p class="calibre2"><span class="calibre7">Cloud technology enables IT staff to build virtual data centers easily enabling them to set up a virtual machine with specific configurations. Now, <strong class="calibre5">Infrastructure as Code</strong> (<strong class="calibre5">IaC</strong>) enables building a virtual data center by scripting. In this chapter, we'll briefly look at IaC and some terms in AWS CloudFormation.</span></p>
<p class="calibre2">The following topics will be covered in this chapter:</p>
<ul class="calibre11">
<li class="calibre12">Introducing <span>IaC</span></li>
<li class="calibre12">AWS CloudFormation</li>
<li class="calibre12">CloudFormation templates</li>
<li class="calibre12">CloudFormation stacks</li>
<li class="calibre12">CloudFormation StackSets</li>
<li class="calibre12">Exploring the AWS CloudFormation console</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introducing IaC</h1>
                
            
            <article>
                
<p class="calibre2">Cloud technology enables you to manage servers virtually. We can set memory, CPU, and storage in the virtual model. To build a data center based on the cloud platform, you set up your resources, such as the virtual machine, virtual network, and applications. Sometimes, you need to reconfigure your data center design or rebuild it in another location. You probably perform the same actions to build your data center. These tasks probably make you unhappy.</p>
<p class="calibre2">IaC can be described as a programmable infrastructure that enables you to manage resource configurations using scripts and to automate the provisioning of the infrastructure in addition to deployments.</p>
<p class="calibre2">IaC is designed to reduce the complexity that kills efficiency in manual configuration. You can deploy your infrastructure code to development, testing, staging, and production environments. The following diagram shows the processes in IaC:</p>
<div class="cdpaligncenter"><img src="../images/00005.jpeg" class="calibre20"/></div>
<div class="packt_figref">Figure 1.1: Processes in IaC</div>
<p class="calibre2">Imagine you have deployed some resources on several machines, and then some machines crash due to a disaster such as a power failure. Technically, you should deploy all resources manually. IaC is designed to help you deploy the infrastructure automatically. IaC can minimize your risks while deploying a modern infrastructure.</p>
<p class="calibre2">We can deploy our infrastructure on several environments with a single IaC script template. This approach enables us to minimize problems on deployment. We don't need to worry if we want to redeploy our infrastructure, since we have our infrastructure scripts.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">AWS CloudFormation</h1>
                
            
            <article>
                
<p class="calibre2">Amazon AWS is a cloud-based <span class="calibre7"><span class="calibre7">platform</span></span> that provides cloud services. There are a lot of cloud services, so we can deploy any server and any program for general or specific purposes. AWS CloudFormation is designed to implement IaC. You can write scripts to build a custom infrastructure. Once you have done so, you can you can deploy a template which represents Infrastructure as Code for development, testing, staging, and production environments.</p>
<p class="calibre2"/>
<p class="calibre2"><span class="calibre7">AWS CloudFormation is a solution for dynamic infrastructures. You can write your own infrastructure without worrying about reconfiguring and redeploying. AWS CloudFormation allows you to model your entire infrastructure in a text file. This approach can standardize your infrastructure resources across your organization and speed up the troubleshooting process.</span></p>
<p class="calibre2">AWS CloudFormation helps to build and rebuild your infrastructure and applications, without having to perform manual actions or write custom scripts.</p>
<div class="packt_infobox">For further information about <span class="calibre21">AWS CloudFormation, y</span>ou can visit its official website at <a href="https://aws.amazon.com/cloudformation/" target="_blank" class="calibre22">https://aws.amazon.com/cloudformation/</a>.</div>
<p class="calibre2">You will find a lot of information, such as features, pricing, and documentation, <span class="calibre7">as seen in the following screenshot: </span></p>
<p class="cdpaligncenter1"><img class="alignnone" src="../images/00006.jpeg"/></p>
<div class="packt_figref">Figure 1.2: The official <span>AWS CloudFormation website</span></div>
<p class="calibre2">Currently, <span class="calibre7">AWS CloudFormation is free, but the resources that you use in IaC scripts usually aren't. You can read the details about pricing at <a href="https://aws.amazon.com/cloudformation/pricing/" target="_blank" class="calibre10">https://aws.amazon.com/cloudformation/pricing/</a>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">How does it work?</h1>
                
            
            <article>
                
<p class="calibre2"><span class="calibre7">AWS CloudFormation provides solutions to build infrastructure from scripts. You can set several resources for infrastructure design. In general,</span> see the following flowchart for how to build IaC:</p>
<p class="cdpaligncenter1"><img class="alignnone1" src="../images/00007.jpeg"/></p>
<div class="packt_figref">Figure 1.3: A flow for building <span>AWS CloudFormation</span></div>
<p class="calibre2">Start by writing scripts to build infrastructure using <span class="calibre7">AWS CloudFormation; you should write IaC scripts in JSON, YAML, or text. After completing the scripts, you can upload that script file to AWS CloudFormation. You can also put it on AWS S3 first, so AWS CloudFormation will download it directly.</span></p>
<p class="calibre2"><span class="calibre7">AWS </span><span class="calibre7">CloudFormation provisions a stack and then creates AWS resources based on your scripts. You also can set the target region for your CloudFormation stack.</span></p>
<p class="calibre2"/>
<p class="calibre2">You can deploy and replicate AWS resources on some regions with a single <span class="calibre7">CloudFormation template. We can build AWS StackSets</span> if we want to work with AWS resources in different regions in a single CloudFor<span class="calibre7">mation template.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Controlling IaC source scripts</h1>
                
            
            <article>
                
<p class="calibre2">Since we write IaC in <span class="calibre7">JSON, YAML, and text formats, we can save these script files and they can be stored to source control servers. You can manage script versions for editing based on your needs.</span></p>
<p class="calibre2">You can use Git to manage IaC scripts. Once the scripts are released, you can push them to AWS CloudFormation to provision your AWS resources. The following diagram shows IaC scripting with source control:</p>
<div class="cdpaligncenter"><img src="../images/00008.jpeg" class="calibre23"/></div>
<div class="packt_figref">Figure 1.4: IaC scripting with source-control</div>
<p class="calibre2">The preceding diagram describes how to combine source-control with <span class="calibre7">AWS CloudFormation. We write IaC scripts on the local computer. Once done, check the script into the source control server. If you have a testing team, your team can test the script with AWS CloudFormation.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">CloudFormation templates</h1>
                
            
            <article>
                
<p class="calibre2">We can develop IaC in <span class="calibre7">AWS CloudFormation easily. AWS already provides a list of templates that we can use for our IaC design. You can write AWS CloudFormation scripts in JSON, YAML, and text.</span></p>
<p class="calibre2">For instance, we use AWS S3 on <span class="calibre7">AWS CloudFormation. We can write AWS CloudFormation scripts in JSON as follows:</span></p>
<pre class="calibre19">{<br class="title-page-name"/> "Resources" : {<br class="title-page-name"/>   "HelloBucket" : {<br class="title-page-name"/>    "Type" : "AWS::S3::Bucket",<br class="title-page-name"/>    "Properties" : {<br class="title-page-name"/>        "AccessControl" : "PublicRead" <br class="title-page-name"/>    }<br class="title-page-name"/>   }<br class="title-page-name"/> }<br class="title-page-name"/>}</pre>
<p class="calibre2">We also can write these IaC scripts in YAML:</p>
<pre class="calibre19">Resources:<br class="title-page-name"/> HelloBucket:<br class="title-page-name"/>    Type: AWS::S3::Bucket<br class="title-page-name"/>    Properties:<br class="title-page-name"/>      AccessControl: PublicRead</pre>
<p class="calibre2">You can use either JSON or YAML to write IaC scripts and you should learn the AWS CloudFormation API's included parameter when we use those resources.</p>
<p class="calibre2">Sometimes, we prefer to build <span class="calibre7">AWS CloudFormation visually, when we don't know much about JSON or</span> YAML. F<span class="calibre7">ortunately, AWS provides the AWS CloudFormation template designer. We can click and drag any resource to the editor. You can see this in the following screenshot:</span></p>
<div class="cdpaligncenter"><img class="alignnone2" src="../images/00009.jpeg"/></div>
<div class="packt_figref">Figure 1.5: Template designer in <span>AWS CloudFormation</span></div>
<p class="calibre2">If you want to work in Terminal mode, AWS provides the AWS CLI, which enables you to build <span class="calibre7">AWS CloudFormation templates  using the Terminal.</span></p>
<p class="calibre2">AWS also provides <span class="calibre7">AWS CloudFormation templates, so you don't need to spend extra efforts in developing CloudFormation templates. You can download these template samples at </span><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-sample-templates.html" target="_blank" class="calibre10">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-sample-templates.html</a>.</p>
<p class="calibre2">We will learn more about the IaC scripting included in the <span class="calibre7">AWS CloudFormation templates in</span> <a target="_blank" href="part0070.html#22O7C0-ff9c6455e1444393ad97060c22881bf4" class="calibre10">Chapter 3</a>, <em class="calibre17">Developing AWS CloudFormation Templates</em>. <span class="calibre7">We'll use JSON and YAML scripts to develop IaC. We'll also learn how to use the AWS CloudFormation template designer.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">CloudFormation stacks</h1>
                
            
            <article>
                
<p class="calibre2">All the resources that you want to build in the AWS environment should be defined in a CloudFormation template. Then, we put this template into a <span class="calibre7">CloudFormation stack. A stack is a collection of AWS resources that you can manage as a single unit. You can create, update, or delete a collection of resources by creating, updating, or deleting stacks.</span></p>
<p class="calibre2">When you develop an AWS CloudFormation stack, ensure all resources with CloudFormation templates meet with AWS regions. Not all regions have the same resources. If not, you will have problems when provisioning resources.</p>
<p class="calibre2">Sometimes, we use <span class="calibre7">various</span> resources in our infrastructure design, such as database clustering. In this scenario, we can develop <span class="calibre7">CloudFormation </span>nested stacks. This means our <span class="calibre7">CloudFormation stack consists of several stacks. For instance, we draw a design like the one in the following diagram. The CloudFormation stack consists of two stacks: <strong class="calibre5">B1</strong> and <strong class="calibre5">B2</strong>. Inside the <strong class="calibre5">B1 Stack</strong>, we use three CloudFormation stacks: <strong class="calibre5">C1</strong>, <strong class="calibre5">C2</strong>, and <strong class="calibre5">C3</strong>. Then, we build two stacks within the <strong class="calibre5">C3 Stack</strong>,</span> as shown in the following example <span class="calibre7">model of </span><span class="calibre7">AWS CloudFormation nested stacks</span>:</p>
<p class="cdpaligncenter1"><img class="alignnone3" src="../images/00010.jpeg"/></p>
<div class="packt_figref">Figure 1.6: An example model of <span>AWS CloudFormation nested stacks</span></div>
<p class="calibre2">To understand <span class="calibre7">AWS CloudFormation stacks, we will explore this topic in <a target="_blank" href="part0048.html#1DOR00-ff9c6455e1444393ad97060c22881bf4" class="calibre10">Chapter 2</a>, <em class="calibre17">Building Your First AWS CloudFormation Project</em> and <a target="_blank" href="part0070.html#22O7C0-ff9c6455e1444393ad97060c22881bf4" class="calibre10">Chapter 3</a>, <em class="calibre17">Developing AWS CloudFormation Templates</em>. We'll review some scenarios to show you how to work with AWS CloudFormation stacks.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">CloudFormation StackSets</h1>
                
            
            <article>
                
<p class="calibre2">If you plan to deploy AWS resources in multiple regions, you can use a CloudFormation StackSet. Technically, a CloudFormation StackSet is designed to enable you to create CloudFormation stacks in AWS accounts across regions by using a single AWS CloudFormation template.</p>
<p class="calibre2">We illustrate the processing model in a <span class="calibre7">CloudFormation StackSet in the following diagram</span><span class="calibre7">. In this scenario, if a StackSet is to be executed, this generates a StackSet instance. When the StackSet is created, it will generate stacks depending on your CloudFormation template. Since this is a StackSet, AWS will build stacks within its predefined region. The following diagram shows the processing model for a StackSet:</span></p>
<div class="cdpaligncenter"><img src="../images/00011.jpeg" class="calibre23"/></div>
<div class="packt_figref">Figure 1.7: Processing model for StackSet</div>
<p class="calibre2">When we edit our StackSet, AWS <span class="calibre7">CloudFormation will update all the stacks. When we perform a deletion operation on a StackSet, AWS CloudFormation will delete all the stacks related to that StackSet.</span></p>
<p class="calibre2">We will learn more about <span class="calibre7">AWS </span><span class="calibre7">CloudFormation StackSets in <a target="_blank" href="part0085.html#2H1VQ0-ff9c6455e1444393ad97060c22881bf4" class="calibre10">Chapter 4</a>, <em class="calibre17">AWS CloudFormation StackSets</em>. Some scenarios will be provided to show you how AWS CloudFormation StackSets work.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Exploring the AWS CloudFormation management console</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we'll familiarize ourselves with the <span class="calibre7">AWS CloudFormation management console. To work with AWS CloudFormation, you should have an active AWS account. You can access the AWS CloudFormation management console by opening a browser and navigating to </span><a href="https://console.aws.amazon.com/cloudformation/" target="_blank" class="calibre10">https://console.aws.amazon.com/cloudformation/</a>.</p>
<p class="calibre2">Now you should see AWS CloudFormation Management Console, w<span class="calibre7">hich is shown in the following screenshot. You can click</span> on the <span class="calibre7">Create new stack</span> <span class="calibre7">button to create a stack. If you want to create a StackSet, you can click on the</span> <span class="calibre7">Create new StackSet</span> <span class="calibre7">button:</span></p>
<p class="cdpaligncenter1"><img class="alignnone4" src="../images/00012.jpeg"/></p>
<div class="packt_figref">Figure 1.8: <span>AWS CloudFormation Management Console</span></div>
<p class="calibre2">If you want to build a <span class="calibre7">CloudFormation script template, you can click on</span> the <span class="calibre7">Design template</span> <span class="calibre7">button. AWS CloudFormation will provide the CloudFormation designer editor to enable you to build your own infrastructure.</span> You can see this screen shown in <em class="calibre17">Figure 1.5</em>.</p>
<p class="calibre2"><span class="calibre7">You should set your working region with AWS CloudFormation. In a CloudFormation StackSet, we can work with different regions for the various stacks.</span></p>
<p class="calibre2"><span class="calibre7">In the AWS CloudFormation Management Console, we can manage all the stacks and StackSets, including editing and deleting their resources. </span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Managing CloudFormation using the AWS CLI</h1>
                
            
            <article>
                
<p class="calibre2">If you usually prefer to work in Terminal mode, AWS provides the AWS CLI to manage AWS CloudFormation. You can create a stack and a StackSet from the Terminal. You also can update and delete your CloudFormation projects.</p>
<p class="calibre2">Some commands are defined to manage CloudFormation from the AWS CLI. You should use those commands if you want to work with <span class="calibre7">CloudFormation. For more information about the AWS CLI commands for CloudFormation, check out <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/index.html" target="_blank" class="calibre10">https://docs.aws.amazon.com/cli/latest/reference/cloudformation/index.html</a>.</span></p>
<p class="calibre2"/>
<p class="calibre2">The following screenshot shows you how to create the CloudFormation stack from the AWS CLI. We will learn how to do this in <a target="_blank" href="part0032.html#UGI00-ff9c6455e1444393ad97060c22881bf4" class="calibre10">Chapter 2</a>, <em class="calibre17">Building Your First AWS CloudFormation Project</em>:</p>
<p class="cdpaligncenter1"><img class="alignnone5" src="../images/00013.jpeg"/></p>
<div class="packt_figref">Figure 1.9: Managing CloudFormation using the AWS CLI</div>
<p class="calibre2">This is the end of the first chapter. We reviewed some terms in AWS CloudFormation. <span class="calibre7">We will learn how to use this console in the next chapter.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">We learned a bit about <span class="calibre7">AWS CloudFormation terms, to better understand what AWS CloudFormation is.</span> <span class="calibre7">Next, we will look at how to implement a simple program for IaC and provision it using AWS.</span></p>
<p class="calibre2"/>
<p class="calibre2"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Questions</h1>
                
            
            <article>
                
<ol class="calibre14">
<li value="1" class="calibre12">What is IaC?</li>
<li value="2" class="calibre12">What are the benefits of <span>IaC?</span></li>
<li value="3" class="calibre12">What is the main objective of <span>AWS CloudFormation?</span></li>
<li value="4" class="calibre12">How does <span>AWS CloudFormation work?</span></li>
<li value="5" class="calibre12">How do you build an <span>AWS CloudFormation template?</span></li>
<li value="6" class="calibre12">What are i<span>nfrastructure-nested stacks?</span></li>
<li value="7" class="calibre12">Why do we implement <span>AWS CloudFormation StackSets?</span> </li>
</ol>


            </article>

            
        </section>
    </body></html>