<html><head></head><body>
<div><h1 id="_idParaDest-5"><a id="_idTextAnchor004"/>Preface</h1>
<p>Ansible, an open source orchestration tool, has experienced significant growth and is now a comprehensive orchestration and configuration management solution under Red Hat’s ownership. This book will guide you through writing playbooks using core, vendor-supplied, and community Ansible modules to deploy various systems, from simple LAMP stacks to highly available public cloud infrastructures.</p>
<p>By the end of this book, you will have acquired the following skills:</p>
<ul>
<li>A solid foundational knowledge of Ansible and its various supporting tools</li>
<li>The ability to write your own custom playbooks to configure both Linux and Windows servers</li>
<li>The ability to define highly available cloud infrastructures using code, enabling the easy distribution of your infrastructure configuration alongside your code base</li>
<li>An understanding of how to use Ansible Galaxy, use community-contributed roles, and create and contribute your own roles</li>
<li>The ability to run your Ansible playbooks using GitHub Actions and Azure DevOps</li>
<li>The ability to deploy and configure Ansible AWX, a web-based interface for Ansible</li>
<li>Various skills gained from exploring several use cases demonstrating how to integrate Ansible into your daily tasks and projects</li>
</ul>
<p>You will have a solid understanding of how to incorporate Ansible into your everyday responsibilities as a system administrator, developer, or DevOps practitioner.</p>
<h1 id="_idParaDest-6"><a id="_idTextAnchor005"/>Who this book is for</h1>
<p>This book is written for people in the following roles who want to streamline their workflows by leveraging Ansible’s capabilities:</p>
<ul>
<li><strong class="bold">System administrators</strong><em class="italic">:</em> This book will help you automate repetitive tasks and ensure consistent configurations across your systems if you manage and maintain servers, networks, and other infrastructure components.</li>
<li><strong class="bold">Developers</strong><em class="italic">:</em> As a developer, you can benefit from this book by learning how to use Ansible to provision and manage development environments, deploy applications, and integrate infrastructure-as-code practices into your development workflow.</li>
<li><strong class="bold">DevOps practitioners</strong><em class="italic">:</em> If you are a DevOps practitioner responsible for bridging the gap between development and operations, this book will provide the tools and knowledge to create efficient, repeatable, and scalable deployment processes using Ansible.</li>
</ul>
<p>No prior experience with Ansible is necessary to get started with this book.</p>
<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/>What this book covers</h1>
<p><a href="B21620_01.xhtml#_idTextAnchor017"><em class="italic">Chapter 1</em></a>, <em class="italic">Installing and Running Ansible</em>, discusses the problems Ansible was developed to solve. After covering its background, we will work through installing Ansible on macOS and Linux. We will also discuss why there is no native Windows installer and cover installing Ansible on the Windows Subsystem for Linux.</p>
<p><a href="B21620_02.xhtml#_idTextAnchor080"><em class="italic">Chapter 2</em></a>, <em class="italic">Exploring Ansible Galaxy</em>, discusses Ansible Galaxy, an online repository of community and vendor-contributed roles. In this chapter, we will discover some of the best roles available, how to use them, and how to create your role and have it hosted on Ansible Galaxy.</p>
<p><a href="B21620_03.xhtml#_idTextAnchor133"><em class="italic">Chapter 3</em></a>, <em class="italic">The Ansible Commands</em>, explains how we examine Ansible commands before writing and executing more advanced playbooks. Here, we will cover using the tools that make up Ansible.</p>
<p><a href="B21620_04.xhtml#_idTextAnchor202"><em class="italic">Chapter 4</em></a>, <em class="italic">Deploying a LAMP Stack</em>, discusses deploying a complete LAMP stack using the various core modules that ship with Ansible. We will target the Ubuntu machine that is running locally.</p>
<p><a href="B21620_05.xhtml#_idTextAnchor253"><em class="italic">Chapter 5</em></a>, <em class="italic">Deploying WordPress</em>, expands on the LAMP stack playbook, which we deployed in the previous chapter as our base. We will use Ansible to download, install, and configure WordPress – a popular CMS.</p>
<p><a href="B21620_06.xhtml#_idTextAnchor291"><em class="italic">Chapter 6</em></a>, <em class="italic">Targeting Multiple Distributions</em>, explains how we will adapt the playbook from the previous chapter so it can run against both Debian, which we have been targeting so far, and Red Hat-based Linux distributions.</p>
<p><a href="B21620_07.xhtml#_idTextAnchor336"><em class="italic">Chapter 7</em></a>, <em class="italic">Ansible Windows Modules</em>, explores the ever-growing collection of Ansible modules that support and interact with Windows-based servers.</p>
<p><a href="B21620_08.xhtml#_idTextAnchor386"><em class="italic">Chapter 8</em></a>, <em class="italic">Ansible Network Modules</em>, discusses network modules available from various vendors through Ansible Galaxy. Due to their requirements, we will only discuss the functionality of these modules.</p>
<p><a href="B21620_09.xhtml#_idTextAnchor411"><em class="italic">Chapter 9</em></a>, <em class="italic">Moving to the Cloud</em>, discusses how we can move from using local virtual machines to using Ansible to deploy network and compute resources in Microsoft Azure. Then, we will use the playbook from the previous chapters to install and configure a LAMP stack and WordPress.</p>
<p><a href="B21620_10.xhtml#_idTextAnchor458"><em class="italic">Chapter 10</em></a>, <em class="italic">Building Out a Cloud Network</em>, since we will have just launched a virtual machine in Microsoft Azure, moves on to Amazon Web Services; however, before launching any compute instances, we must create a network in which they can be hosted.</p>
<p><a href="B21620_11.xhtml#_idTextAnchor501"><em class="italic">Chapter 11</em></a>, <em class="italic">Highly Available Cloud Deployments</em>, continues our Amazon Web Services deployment. We will start deploying compute and storage services into the network we created in the previous chapter, and by the end of the chapter, we will have a highly available WordPress installation.</p>
<p><a href="B21620_12.xhtml#_idTextAnchor550"><em class="italic">Chapter 12</em></a>, <em class="italic">Building Out a VMware Deployment</em>, discusses the modules that allow you to interact with the various components of a typical VMware installation.</p>
<p><a href="B21620_13.xhtml#_idTextAnchor566"><em class="italic">Chapter 13</em></a>, <em class="italic">Scanning Your Ansible Playbooks</em>, provides practical examples of running two third-party tools, Checkov and KICS. These tools are designed to scan your Ansible playbook code for common mistakes and potential security problems.</p>
<p><a href="B21620_14.xhtml#_idTextAnchor609"><em class="italic">Chapter 14</em></a>, <em class="italic">Hardening Your Servers Using Ansible</em>, explains how to install and execute OpenSCAP. We will also automatically generate remediation Ansible playbooks and Bash scripts to resolve any problems found during the scan. We will also look at running WPScan and OWASP ZAP scans against the resources deployed using the playbooks from previous chapters.</p>
<p><a href="B21620_15.xhtml#_idTextAnchor641"><em class="italic">Chapter 15</em></a>, <em class="italic">Using Ansible with GitHub Actions and Azure DevOps</em>, will examine running our Ansible playbook books from these two CI/CD platforms. As neither has native Ansible support, we will discuss how to install and run Ansible to get the most out of the platforms.</p>
<p><a href="B21620_16.xhtml#_idTextAnchor716"><em class="italic">Chapter 16</em></a>, <em class="italic">Introducing Ansible AWX and <a id="_idTextAnchor007"/>Red Hat Ansible Automation Platform</em>, examines two web-based interfaces: we will discuss the commercial Red Hat Ansible Automation Platform and then take a deep dive into deploying and configuring the open source Ansible AWX.</p>
<p><a href="B21620_17.xhtml#_idTextAnchor766"><em class="italic">Chapter 17</em></a>, <em class="italic">Next Steps with Ansible</em>, discusses how Ansible can be integrated into our day-to-day workflows, from interacting with collaboration services to troubleshooting your playbooks with the built-in debugger. We will also look at real-world examples of how I have used Ansible across organizations I have worked with.</p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor008"/>To get the most out of this book</h1>
<p>To get the most out of this book, I assume that you have the following:</p>
<ul>
<li>Some experience of using the command line on both Linux-based machines and macOS</li>
<li>A basic understanding of how to install and configure services on a Linux server</li>
<li>A working knowledge of services and languages such as Git, YAML, and virtualization<table class="No-Table-Style" id="table001"><colgroup><col/><col/></colgroup><tbody><tr class="No-Table-Style"><td class="No-Table-Style"><p><strong class="bold">Software/hardware covered in </strong><strong class="bold">the book</strong></p></td><td class="No-Table-Style"><p><strong class="bold">Operating </strong><strong class="bold">system requirements</strong></p></td></tr><tr class="No-Table-Style"><td class="No-Table-Style"><p>Ansible</p></td><td class="No-Table-Style"><p><a id="_idTextAnchor009"/>macOS, Linux, or Windows via Subsystem for Linux</p></td></tr><tr class="No-Table-Style"><td class="No-Table-Style"><p>Canonical Multipass</p></td><td class="No-Table-Style"><p>macOS, Linux, or Windows</p></td></tr><tr class="No-Table-Style"><td class="No-Table-Style"><p>Various CLIs for public cloud providers</p></td><td class="No-Table-Style"><p>macOS, Linux, or Windows via Subsystem for Linux</p></td></tr></tbody></table></li>
</ul>
<p><strong class="bold">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). Doing so will help you avoid any potential errors related to the copying and pasting </strong><strong class="bold">of code.</strong></p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor010"/>Download the example code files</h1>
<p>You can download the example code files for this book from GitHub at <a href="http://github.com/PacktPublishing/Learn-Ansible-Second-Edition">http://github.com/PacktPublishing/Learn-Ansible-Second-Edition</a>. If there’s an update to the code, it will be updated in the GitHub repository.</p>
<p>We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor011"/>Conventions used</h1>
<p>There are a number of text conventions used throughout this book.</p>
<p><code>Code in text</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “As you can see, it is calling a variable called <code>{{ apache_packages }}</code>, which is defined in <a id="_idTextAnchor012"/><code>roles/apache/defaults/main.yml</code> as follows.”</p>
<p>A block of code is set as follows:</p>
<pre class="source-code">
- name: "Install apache packages"
  ansible.builtin.apt:
    state: "present"
    pkg: "{{ apache_packages }}"</pre> <p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
<pre class="source-code">
- name: "Install apache packages"
<strong class="bold">  ansible.builtin.apt:</strong>
    state: "present"
    pkg: "{{ apache_packages }}"</pre> <p>Any command-line input or output is written as follows:</p>
<pre class="console">
$ ansible-playbook -i hosts site.yml</pre> <p><strong class="bold">Bold</strong>: Indicates a new term, an important word, or words that you see onscreen. For instance, words in menus or dialog boxes appear in <strong class="bold">bold</strong>. Here is an example: “You can leave the remaining options at their defaults and then click on the <strong class="bold">Create repository</strong> button at the end of the form.”</p>
<p class="callout-heading">Tips or important notes</p>
<p class="callout">Appear like this.</p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor013"/>Get in touch</h1>
<p>Feedback from our readers is always welcome.</p>
<p><strong class="bold">General feedback</strong>: If you have questions about any aspect of this book, email us at <a href="mailto:customercare%40packtpub.com?subject=">customercare@packtpub.com</a> and mention the book title in the subject of your message.</p>
<p><strong class="bold">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata">www.packtpub.com/support/errata</a> and fill in the form.</p>
<p><strong class="bold">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <a href="mailto:copyright%40packt.com?subject=">copyright@packt.com</a> with a link to the material.</p>
<p><strong class="bold">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="mailto:authors.packtpub.com?subject=">authors.packtpub.com</a>.</p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor014"/>Share Your Thoughts</h1>
<p>Once you’ve read <em class="italic">Learn Ansible</em>, we’d love to hear your thoughts! <a href="https://packt.link/r/1835088910">Please click here to go straight to the Amazon review page for this book and share your feedback</a>.</p>
<p>Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor015"/>Download a free PDF copy of this book</h1>
<p>Thanks for purchasing this book!</p>
<p>Do you like to read on the go but are unable to carry your print books everywhere?</p>
<p>Is your eBook purchase not compatible with the device of your choice?</p>
<p>Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
<p>Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application.</p>
<p>The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
<p>Follow these simple steps to get the benefits:</p>
<ol>
<li>Scan the QR code or visit the link below</li>
</ol>
<div><div><img alt="" role="presentation" src="img/B21620_QR_Free_PDF.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="https://packt.link/free-ebook/9781835088913">https://packt.link/free-ebook/9781835088913</a></p>
<ol>
<li value="2">Submit your proof of purchase</li>
<li>That’s it! We’ll send your free PDF and other benefits to your email directly</li>
</ol>
</div>
<div><div></div>
</div>


<div><h1 id="_idParaDest-14" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor016"/>Part 1: Introducing, Installing, and Running Ansible</h1>
<p>In this part, we will dive into the world of Ansible and explore the fundamental concepts. You will learn how to install Ansible on various operating systems and familiarize yourself with the basic commands and structure of Ansible playbooks. By the end of this part, you will have a solid foundation to build upon as we delve deeper into automating tasks with Ansible.</p>
<p>This part has the following chapters:</p>
<ul>
<li><a href="B21620_01.xhtml#_idTextAnchor017"><em class="italic">Chapter 1</em></a><em class="italic">, Installing and Running Ansible</em></li>
<li><a href="B21620_02.xhtml#_idTextAnchor080"><em class="italic">Chapter 2</em></a><em class="italic">, Exploring Ansible Galaxy</em></li>
<li><a href="B21620_03.xhtml#_idTextAnchor133"><em class="italic">Chapter 3</em></a><em class="italic">, The Ansible Commands</em></li>
</ul>
</div>
<div><div></div>
</div>
<div><div></div>
</div>
</body></html>