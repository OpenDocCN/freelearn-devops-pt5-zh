<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Security Automation with the CI Pipeline</h1>
                
            
            <article>
                
<p class="calibre2">We have reviewed white box testing tips and security testing toolsets. This chapter will focus on security practices in the development phases, as well as how to integrate tools <span class="calibre6">such as Jenkins </span><span class="calibre6">into continuous integration. In the development phases, we explored the techniques of using IDE plugins to secure code scanning, and suggested some static code analysis tools. For the build and package delivery, secure compiler configurations and dependency vulnerability checks will also be introduced. Finally, web security automation testing approaches and tips will also be discussed in this chapter.</span></p>
<p class="calibre2">We will cover the following topics in this chapter:</p>
<ul class="calibre10">
<li class="calibre11">Security in continuous integration</li>
<li class="calibre11">Security practices in development</li>
<li class="calibre11">Web testing in proactive/proxy mode</li>
<li class="calibre11">Web automation testing tips</li>
<li class="calibre11">Security automation in Jenkins</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Security in continuous integration</h1>
                
            
            <article>
                
<p class="calibre2">Most of the <span class="calibre6">development team's </span><span class="calibre6">daily activities include coding, compiling/building, testing, and deployment. Our goal is to build security automation practices into these activities. In the coding stage, the development team can use IDE plugins to do security source code analysis. In the build stage, we scan for the secure hardened compiling options and the known vulnerabilities of the dependency components, as well as the secure source code for the whole project.</span></p>
<p class="calibre2"><span class="calibre6">Once the build is ready and installed on the staging environment, more comprehensive security scanning will be performed, such as dynamic web security testing by OWASP ZAP, infrastructure configuration security, and secure communication protocols. In the production deployment, security scanning will also be performed regularly, and will be more focused on security monitoring instead of the source code or dynamic web security testing.</span></p>
<p class="calibre2">The following diagram shows the security practices in each phase, namely, coding, build, testing, and production deployment:</p>
<div class="cdpaligncenter2"><img class="alignnone23" src="../images/00042.jpeg"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Security practices in development</h1>
                
            
            <article>
                
<p class="calibre2">The security practices of the development team consist of secure coding and secure build delivery. For the secure coding, we can have an IDE plugin do the code scanning, or we can also require security unit testing and run a static code scan of the whole project. For the secure build delivery, we need to ensure that the compiler options are configured properly and review all the dependency components for known vulnerabilities. The following diagram shows the overall security practices we can plan into the development stage. We will introduce some of the open source security tools and practices for these security activities in the upcoming sections: </p>
<p class="cdpaligncenter1"><img class="alignnone24" src="../images/00043.jpeg"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">IDE plugins to automate the code review</h1>
                
            
            <article>
                
<p class="calibre2">The key advantages of using the IDE plugins to perform the automated security code review is that the tools can provide informative <span class="calibre6">suggestions for</span><span class="calibre6"> </span><span class="calibre6">fixes during the coding stage. It works in a similar way to a spellchecker. This will reduce lots of code review efforts and security defects that can't be detected by blackbox testing. The disadvantage is that this kind of static code scanning may introduce some annoying false positives, and the developer team may ignore or forget to use the IDE plugins to do static secure code analysis.</span></p>
<p class="calibre2">The following table shows some of the open source IDE plugins that can help developers to detect security and coding errors. Only open source tools are listed here, although there are also many good commercial tools that are available.</p>
<p class="calibre2">DevSkim is recommended not only because it can support multiple languages, but also because it supports a wide range of IDEs, such as<span class="calibre6"> </span><span class="calibre6">VS, VS Code, Sublime Text, and so on. In addition, writing scanning rules for DevSkim is also simple in JSON format. Refer to  </span><span class="calibre6"><a href="https://github.com/Microsoft/DevSkim/wiki/Sample-Rule" class="calibre9">https://github.com/Microsoft/DevSkim/wiki/Sample-Rule</a> </span><span class="calibre6">for more information:</span></p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Tools</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Supported programming language</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Reference</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">FindSecBugs</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">Java</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11"><a href="https://find-sec-bugs.github.io/" class="calibre9">https://find-sec-bugs.github.io/</a></li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">PMD</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">Java</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11"><a href="https://pmd.github.io/" class="calibre9">https://pmd.github.io/</a></li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">DevSkim</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">All</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11"><a href="https://github.com/Microsoft/DevSkim" class="calibre9">https://github.com/Microsoft/DevSkim</a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">Although we would like the code review to be done automatically by the tools, there may be an occasion where we want to execute a team peer code review and require a team collaboration portal to comment on or discuss the code quality. For a team code review platform, the following open source tools are recommended:</p>
<ul class="calibre10">
<li class="calibre11"><strong class="calibre1">Gerrit:</strong> It provided a web-based UI code review for the GIT source code. <a href="http://www.gerritcodereview.com" class="calibre9">www.gerritcodereview.com</a></li>
<li class="calibre11"><strong class="calibre1">Phabricator:</strong> Phabricator is an open source tool which integrates not only code review tools but also bug tracking.  <a href="http://www.phacility.com" class="calibre9">www.phacility.com</a></li>
</ul>
<p class="calibre2">For the peer code review practices, consider creating a code review checklist or refer to the OWASP cheat sheet or OWASP SCP (secure coding practices): </p>
<p class="calibre2"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Static code analysis</h1>
                
            
            <article>
                
<p class="calibre2">Static code scanning analysis is an effective source-level security inspection in CI frameworks, such as Jenkins or Travis. The development team may not fully apply IDE code-scanning plugins to do the secure code analysis. In that case, the static code analysis adoption into the CI framework will help to enforce the secure code scanning for all projects. In other words, the integration with the static security code analysis tools and Jenkins is a must in the development stage.</p>
<p class="calibre2">The following table lists some of the static code analysis tools. You can also refer to <a target="_blank" href="part0145.html#4A91I0-993778ed0b7e4894800dd46a3f389a65" class="calibre9">Chapter 8</a>, <em class="calibre16">Secure Coding Best Practices</em>, for other suggested tools: </p>
<table border="1" class="calibre109">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2"><strong class="calibre4">Tools</strong></p>
</td>
<td class="calibre111">
<p class="calibre2"><strong class="calibre4">Supported Programming language</strong></p>
</td>
<td class="calibre112">
<p class="calibre2"><strong class="calibre4">Characteristics</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2">Grep Rough Audit</p>
</td>
<td class="calibre111">
<p class="calibre2">All</p>
</td>
<td class="calibre112">It's a simple script to detect security flaws in the source code by using GREP and regular expression for common security patterns. </td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2">Flawfinder</p>
</td>
<td class="calibre111">
<p class="calibre2">C/C+</p>
</td>
<td class="calibre112">
<p class="calibre2">It's a simple tool to scan for the security issue in C/C++ security issue in C/C++ source code.  </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2">Brakeman</p>
</td>
<td class="calibre111">
<p class="calibre2">Ruby on Rails</p>
</td>
<td class="calibre112">Brakeman is mainly focused on the security issue in Ruby code.
<p class="calibre2"> </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2">SonarQube</p>
</td>
<td class="calibre111">
<p class="calibre2">All</p>
</td>
<td class="calibre112">The SonarQube is a source code quality analysis tool.
<p class="calibre2"> </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2">GREP IT</p>
</td>
<td class="calibre111">
<p class="calibre2">All</p>
</td>
<td class="calibre112">
<p class="calibre2">It's one Linux shell script which can do the code scanning. No other dependencies required. </p>
<p class="calibre2"> </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2">NodeJsScan</p>
</td>
<td class="calibre111">
<p class="calibre2">NodeJS</p>
</td>
<td class="calibre112">It's mainly used to scan NodeJS security issue.
<p class="calibre2"> </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2"><span class="calibre6">ScanJS</span></p>
</td>
<td class="calibre111">
<p class="calibre2"><span class="calibre6">JavaScript</span></p>
</td>
<td class="calibre112">
<p class="calibre2">The ScanJS can identify the uses of high-risk JavaScript API such as eval, <span class="calibre6">execScript, document.write and so on.</span></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre110">
<p class="calibre2"><span class="calibre6">Bandit</span></p>
</td>
<td class="calibre111">
<p class="calibre2"><span class="calibre6">Python</span></p>
</td>
<td class="calibre112">
<p class="calibre2">It scans the security issue for Python source code.</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Secure compiler configuration</h1>
                
            
            <article>
                
<p class="calibre2">The secure compiler configuration means that you can enable the compile-time defenses against memory corruption issues to execute unexpected exploit code. These mitigations may include RELRO, <strong class="calibre4">address space layout randomization</strong> (<strong class="calibre4">ASLR</strong>), <strong class="calibre4">NoExecute</strong> (<strong class="calibre4">NX</strong>), stack canaries, and <strong class="calibre4">position-independent executables</strong> (<strong class="calibre4">PIE</strong>). These secure compiler configurations should be done during the development stage.</p>
<p class="calibre2">The following table shows some of the available mitigation:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Mitigation</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Visual Studio compiler options</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Stack randomization</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">/DyNAMICBASE</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Buffer overrun defenses</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">/GS</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">NoExecute (NX)</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">/NXCOMPAT</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Exception handler protection</p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1">/SAFESEH</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">The following table shows the common build flags for GCC and G++ compiler drivers:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre113">
<p class="cdpaligncenter1"><strong class="calibre4">Mitigation</strong></p>
</td>
<td class="calibre114">
<p class="cdpaligncenter1"><strong class="calibre4">Compiler and linker flags for GCC</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre113">
<p class="cdpaligncenter1">Address</p>
</td>
<td class="calibre114">
<p class="cdpaligncenter1">-fPIC</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre113">
<p class="cdpaligncenter1">NoExecute stack</p>
</td>
<td class="calibre114">
<p class="cdpaligncenter1">-Wl, -z, noexecstack</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre113">
<p class="cdpaligncenter1">GOT protection</p>
</td>
<td class="calibre114">
<p class="cdpaligncenter1">-Wl, -z, relro</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre113">
<p class="cdpaligncenter1">Stack protector</p>
</td>
<td class="calibre114">
<p class="cdpaligncenter1">-fstack-protector</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre113">
<p class="cdpaligncenter1">ASLR</p>
</td>
<td class="calibre114">
<p class="cdpaligncenter1">Echo 1 &gt; /proc/sys/kernel/randomize_va_space</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"><br class="calibre5"/>
<span class="calibre6">The following tools can be used to</span> verify the correct secure compiler configuration:</p>
<ul class="calibre10">
<li class="calibre11"><strong class="calibre1">CheckSEC for Linux</strong>: <a href="http://www.trapkit.de/tools/checksec.html" class="calibre9">www.trapkit.de/tools/checksec.html</a></li>
<li class="calibre11"><strong class="calibre1">Microsoft BinScope</strong>: <a href="https://www.microsoft.com/en-us/download/details.aspx?id=44995" class="calibre9">https://www.microsoft.com/en-us/download/details.aspx?id=44995</a></li>
</ul>
<p class="calibre2">The secure compiler configurations are low-hanging fruits for the buffer overflow security mitigations. This security practice is often neglected by the development team. Make sure that the security configurations are done at compile time, and also verify the binary packages in the testing stage.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Dependency check</h1>
                
            
            <article>
                
<p class="calibre2">Known vulnerabilities in third-party components or dependencies are considered to be parts of the OWASP Top 10 List of Using Components with Known Vulnerabilities. These known vulnerable components should be identified at an early development stage. It i<span class="calibre6">s also suggested that you perform t</span><span class="calibre6">he vulnerability scanning of the dependency components not only in the development stage but also in the production stage on a regular basis.</span></p>
<p class="calibre2"><span class="calibre6">The following tools will help you scan for vulnerable components:</span></p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Tool</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Supported languages</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">OWASP Dependency Check</p>
</td>
<td class="calibre28">
<p class="calibre2">The OWASP Dependency Check scans for <span class="calibre6">dependency vulnerabilities in </span>Java, Ruby, PHP, JavaScript, Python, and .NET. </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Retire.JS </p>
</td>
<td class="calibre28">
<p class="calibre2">Retire.JS scans for vulnerable JavaScript libraries.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Snyk</p>
</td>
<td class="calibre28">
<p class="calibre2">Snyk scans for the JS, Ruby, Python, Java vulnerabilities<span class="calibre6">.</span></p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Web testing in proactive/proxy mode</h1>
                
            
            <article>
                
<p class="calibre2">Dynamic web testing tools, such as OWASP ZAP, Arachni, Wapiti and W3af, normally provide two modes of security testing: proactive mode and proxy mode. The proactive mode means that you launch the testing tools and perform security testing directly on the web services. The tester may decide on the types of security testing (such as XSS or SQLi) of the target web service. However, the key disadvantage of this kind of testing is that you could miss certain permission-required web pages, or web pages that may require the right order of page visits. The following diagram shows the approach of proactive mode:</p>
<p class="cdpaligncenter1"><img class="alignnone25" src="../images/00044.jpeg"/></p>
<div class="cdpaligncenter3">The proactive mode</div>
<p class="calibre2">The proxy mode, which can also be understood as MITM, means that the security testing tool is running as a proxy and intercepting traffic between the browser client and the target web services. In the proxy mode, the security testing tool OWASP ZAP will detect potential security vulnerability issues based on the intercepted traffic.</p>
<p class="calibre2">Take OWASP ZAP as an example. Say that we want OWASP ZAP to be executed in proxy mode. This will require the following configurations:</p>
<ol class="calibre13">
<li value="1" class="calibre11">Launch the OWASP ZAP as proxy mode.</li>
<li value="2" class="calibre11">Configure the client-side proxy to the OWASP ZAP proxy.</li>
<li value="3" class="calibre11">Install the CA certificate in the OWASP ZAP proxy.</li>
</ol>
<p class="calibre2">Proxy mode works best for the project team if they have set up functional automation, such as Selenium or Robot Framework. Selenium or Robot Framework will help to guide the OWASP ZAP to walk through the web pages, especially those required permission pages:</p>
<p class="cdpaligncenter1"><img class="alignnone26" src="../images/00045.jpeg"/></p>
<div class="cdpaligncenter3"><span>The proxy mode</span></div>
<p class="calibre2">In practice, it's recommended that you execute the web security testing in both modes with more than one tool. This is because every security tool may have its own strength and weakness of security attacks and detection engines. For example, OWASP ZAP and Arachni may be running in proactive scanning and spider mode. Furthermore, you can also use the Selenium automation client to guide the Vega or OWASP ZAP to visit authenticated pages, and to do deeper fuzz testing on the specified web service. Refer to the following diagram for the testing scenarios:</p>
<p class="cdpaligncenter1"><img class="alignnone27" src="../images/00046.jpeg"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Web automation testing tips</h1>
                
            
            <article>
                
<p class="calibre2">Simply install and launch OWASP ZAP. Active and passive scanning can only give us a preliminary testing result for public web services. The following table contains some suggested tips to improve the testing efficiency and effectiveness for uses of web automation testing tools, such as ZAP or Arachni:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Testing tips</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Description</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Integration</p>
</td>
<td class="calibre28">
<p class="calibre2">To do automated integration, try to understand that the web security tools provide the following:</p>
<ul class="calibre10">
<li class="calibre11">Headless execution mode</li>
<li class="calibre11">Command-line interface</li>
<li class="calibre11">REST API</li>
<li class="calibre11">Jenkins plugin (this may be optional as long as one of te preceding tools is provided)</li>
</ul>
<p class="calibre2">For example, the OWASP ZAP (<a href="https://github.com/Grunny/zap-cli/" class="calibre9">https://github.com/Grunny/zap-cli/</a>) provides the ZAP CLI interface, which also helps make the integration easier.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Authorization testing</p>
</td>
<td class="calibre28">
<p class="calibre2">To test the guest, user, and admin permissions for every web service's URL or resources will require proper predefined navigation workflows. The testing scenario may include the following:</p>
<ul class="calibre10">
<li class="calibre11">Session fixation, reuses, expiration</li>
<li class="calibre11">User, role, guest, administration permissions</li>
<li class="calibre11">Login, logout, and reauthentication behaviors</li>
</ul>
<p class="calibre2">There are two main approaches for the security testing:</p>
<ul class="calibre10">
<li class="calibre11">Use Selenium or Robot Framework to do the authentication and use OWASP ZAP to detect the security issue</li>
<li class="calibre11">Preconfigure the pages or URLs that require authentication in OWASP ZAP or Arachni </li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Scanning scope</p>
</td>
<td class="calibre28">
<p class="calibre2">Dynamic web testing may take a very long period of time. P<span class="calibre6">roperly</span><span class="calibre6"> c</span><span class="calibre6">onfigure the scanning scope to include or exclude the URLs that are being tested. Only apply a complete full scan when the application passes the smoke testing. A complete scan can be scheduled to be done on a nightly basis.</span></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">API fuzz</p>
</td>
<td class="calibre28">
<p class="calibre2">The web service may provide several REST JSON or SOAP XML APIs. It's suggested that you get a complete API list and specifications. Do the fuzz testing on the parameters of each API. Once this has been done, run the OWASP ZAP or the Arachni in proxy mode to intercept all the API calls. Then, investigate these API calls for further fuzz testing with the parameters in the payload.</p>
<p class="calibre2">For the fuzz security payload test, consider replacing the value of the parameters with the following data in the fuzzDB:</p>
<ul class="calibre10">
<li class="calibre11"><a href="https://github.com/fuzzdb-project/fuzzdb/" class="calibre9">https://github.com/fuzzdb-project/fuzzdb/</a></li>
<li class="calibre11"><a href="https://github.com/minimaxir/big-list-of-naughty-strings/" class="calibre9">https://github.com/minimaxir/big-list-of-naughty-strings/</a></li>
</ul>
<p class="calibre2">Radamsa can be used to automatically generate fuzzing data:</p>
<ul class="calibre10">
<li class="calibre11"><a href="https://github.com/aoh/radamsa" class="calibre9">https://github.com/aoh/radamsa</a></li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Business logic</p>
</td>
<td class="calibre28">
<p class="calibre2">Some web UI workflows need to be operated in order, such as shopping for items, ordering the items, and payment. Here are some approaches to help you handle this kind of security testing:</p>
<ul class="calibre10">
<li class="calibre11">Use existing functional Selenium automation UI testing and run the OWASP ZAP or Arachni in proxy attack mode.</li>
<li class="calibre11">Use the script provided by OWASP ZAP to integrate with Selenium. Refer to the Zap webdriver (<a href="https://github.com/continuumsecurity/zap-webdriver" class="calibre9"><span>https:/github.com/continuumsecurity/zap-webdriver</span></a>) as an example.</li>
<li class="calibre11">Apply the BDD Security framework (<a href="https://github.com/continuumsecurity/bdd-security/" class="calibre9">https://github.com/continuumsecurity/bdd-security/</a>).</li>
<li class="calibre11">Manually operate the web pages to navigate the flow and save the ZAP sessions for further security scanning.</li>
</ul>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Security automation in Jenkins</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will discuss how to configure Jenkins to trigger the automated testing, and also introduce some of the security plugins. </p>
<p class="calibre2"/>
<p class="calibre2">The following table shows an example of how to configure the command-line ZAP, which can be triggered periodically and remotely by a predefined URL:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Steps</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Configuration steps</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<div class="cdpaligncenter2">New item</div>
</td>
<td class="calibre28">
<p class="calibre2">New Item | Enter an Item Name | <em class="calibre16">"Security Testing"</em> | Freestyle Project | OK</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<div class="cdpaligncenter2">General</div>
</td>
<td class="calibre28">
<p class="calibre2">Project Name: <em class="calibre16">"Security Testing"</em></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<div class="cdpaligncenter2">Build Trigger</div>
</td>
<td class="calibre28">
<p class="calibre2">The automation testing can be triggered by the schedule in the following ways. The Build Trigger defines how the tasks can be triggered. There are two modes supported: one is the scheduled mode and the other is the remote trigger by the REST API:</p>
<p class="calibre2">                 Build Periodically: <em class="calibre16">45  9-17/2  *  *  1-5</em></p>
<p class="calibre2">The automation testing can also be triggered remotely by sending the HTTP request:</p>
<p class="calibre2">                 Trigger builds remotely: <span class="calibre6"> </span><em class="calibre16">ZAP</em></p>
<p class="calibre2">Once it's defined, this will be the URL that can be triggered remotely to kick off the automation execution:</p>
<p class="calibre2"><kbd class="calibre12">https://&lt;JenkinsHost:8080&gt;/job/Security Testing/build?token=ZAP</kbd></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<div class="cdpaligncenter2">Build</div>
</td>
<td class="calibre28">
<p class="calibre2">Build | Add Build Step</p>
<p class="calibre2">Execute the Windows batch command:</p>
<p class="calibre2"><kbd class="calibre12"><em class="calibre53">    </em> echo ---- the execution of OWASP ZAP for Active Scan----</kbd></p>
<p class="calibre2"><kbd class="calibre12">           zap cli   active-scan    http://targetWeb/</kbd></p>
<p class="calibre2"><kbd class="calibre12">     echo ---- The end of OWASP ZAP active Scan ----</kbd></p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">There are some open source security scanning tools that also provide Jenkins plugins. In practice, these Jenkins plugins are optional. If you have few projects and would like to manage the security scanning status in the Jenkins dashboard, these Jenkins plugins will be good choices. However, if you have a lot of projects with various kinds of security testing scans, it's still suggested that you build your integrated security testing framework. Please also refer to the <a target="_blank" href="part0206.html#64EJS0-993778ed0b7e4894800dd46a3f389a65" class="calibre9">Chapter 12</a>, <span class="calibre6"><em class="calibre16">Security Testing Toolkits</em>,</span> for details. The following table lists the common Jenkins plugins that are related to software security assessment:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Jenkins Security plugins</strong></p>
</td>
<td class="calibre28">
<p class="cdpaligncenter1"><strong class="calibre4">Description</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">ZAP</p>
</td>
<td class="calibre28">
<p class="calibre2">ZAP is a dynamic web scanning tool.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Arachni Scanner</p>
</td>
<td class="calibre28">
<p class="calibre2">Arachni Scanner is a dynamic web scanning tool.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Dependency Check plugin</p>
</td>
<td class="calibre28">
<p class="calibre2">The Dependency Check plugin detects vulnerable dependency components.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">FindBugs</p>
</td>
<td class="calibre28">
<p class="calibre2">FindBugs is a static code analysis tool for Java.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">SonarQube </p>
</td>
<td class="calibre28">
<p class="calibre2">SonarQube is a code quality analysis tool.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">360 FireLine</p>
</td>
<td class="calibre28">
<p class="calibre2">360 FireLine is a static code scanner for Java.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">HTML Publisher Plugin</p>
</td>
<td class="calibre28">
<p class="calibre2">The HTML Publisher plugin generates the testing results in HTML.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Log Parser Plugin</p>
</td>
<td class="calibre28">
<p class="calibre2">The Log Parser plugin parses the testing results of the security testing tools, such as the number of XSS detected or the number of errors.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="cdpaligncenter1">Static Analysis Collector </p>
</td>
<td class="calibre28">
<p class="calibre2">The Static Analysis Collector plugin can consolidate the results from all other static code analysis plugins, such as Checkstyle, Dry, FindBugs, PMD, and Android Lin.</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0"> Summary</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, we learned about the security practices that take place during the continuous integration cycle in the coding, building, testing, and production deployment phases. For the development stage, we perform secure code scanning, secure compiling checks, and also vulnerable third-party component review. For the static code analysis, we also introduced some of the open source scanning tools for different programming languages. We have also learned how to enable compile-time defenses against buffer overflows, such as ASLR and NX.</p>
<p class="calibre2">For web security testing, we introduced  testing approaches in proactive and proxy modes and discussed  web automation testing tips to improve the testing effectiveness in terms of business logic, API fuzz, scanning scope, authorization, and integration. We also looked at  Jenkins configurations and  security automation plugins in Jenkins, such as ZAP, Arachni, Dependency Check, FindBugs, and SonarQube. In the next chapter, we will learn about incident response.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Questions</h1>
                
            
            <article>
                
<ol class="calibre13">
<li value="1" class="calibre11">What security practices are related to secure coding?
<ol class="calibre14">
<li value="1" class="calibre11">Security scanning using IDE plugins</li>
<li value="2" class="calibre11">Security unit testing</li>
<li value="3" class="calibre11">Static code scanning</li>
<li value="4" class="calibre11">All of the above</li>
</ol>
</li>
</ol>
<ol start="2" class="calibre13">
<li class="calibre11" value="2">What does the tool DevSkim do?
<ol class="calibre14">
<li class="calibre11" value="1">Reverse engineering</li>
<li class="calibre11" value="2">It is an IDE plugin for static code scanning</li>
<li class="calibre11" value="3">Web security scanning</li>
<li class="calibre11" value="4">Network security</li>
</ol>
</li>
</ol>
<ol start="3" class="calibre13">
<li class="calibre11" value="3">What techniques are used to defend against memory overflow attacks?
<ol class="calibre14">
<li class="calibre11" value="1">Stack randomization</li>
<li class="calibre11" value="2">Nonexecution</li>
<li class="calibre11" value="3">Exception handler protection</li>
<li class="calibre11" value="4">All of the above</li>
</ol>
</li>
<li class="calibre11" value="4">What's the main purpose of using dependency check tools?
<ol class="calibre14">
<li class="calibre11" value="1">Software integrity</li>
<li class="calibre11" value="2">Implements access control</li>
<li class="calibre11" value="3">Scans for known vulnerabilities</li>
<li class="calibre11" value="4">Data encryption</li>
</ol>
</li>
<li class="calibre11" value="5">What security testing can Radamsa be used for?
<ol class="calibre14">
<li class="calibre11" value="1">API fuzz testing</li>
<li class="calibre11" value="2">Integrity monitoring</li>
<li class="calibre11" value="3">Dynamic analysis</li>
<li class="calibre11" value="4">Mobile application</li>
</ol>
</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Further reading</h1>
                
            
            <article>
                
<ul class="calibre10">
<li class="calibre11"><strong class="calibre1">GitHub automated testing resources</strong>: <a href="https://github.com/atinfo/awesome-test-automation" class="calibre9">https://github.com/atinfo/awesome-test-automation</a></li>
<li class="calibre11"><strong class="calibre1">Hardening compiler and linker flags</strong>: <a href="https://developers.redhat.com/blog/2018/03/21/compiler-and-linker-flags-gcc/" class="calibre9">https://developers.redhat.com/blog/2018/03/21/compiler-and-linker-flags-gcc/</a></li>
<li class="calibre11"><span><strong class="calibre1">Automated security testing for REST APIs</strong>: <a href="https://github.com/flipkart-incubator/Astra" class="calibre9">https://github.com/flipkart-incubator/Astra</a></span></li>
</ul>


            </article>

            
        </section>
    </body></html>