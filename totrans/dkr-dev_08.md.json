["```\n$ sudo yum install -y yum-utils\n$ sudo yum install -y device-mapper-persistent-data lvm2 \n$ sudo yum-config-manager --add-repo \\\nhttps://download.docker.com/linux/centos/docker-ce.repo \n$ sudo yum install -y docker-ce docker-ce-cli containerd.io\n```", "```\n$ sudo usermod -aG docker $USER\n$ newgrp docker \n```", "```\n$ sudo systemctl enable docker\n$ sudo systemctl restart docker\n```", "```\n$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.25.3/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n$ sudo chmod +x /usr/local/bin/docker-compose\n```", "```\n$ sudo yum install -y git\n```", "```\n$ sudo apt-get update && apt-get install -y git\n```", "```\nFROM ubuntu:bionic\nRUN apt-get -qq update && \\\n    apt-get -qq install -y nodejs npm > /dev/null\nRUN mkdir -p /app/public /app/server\nCOPY src/package.json* /app\nWORKDIR /app\nRUN npm -s install\nCOPY src/.babelrc \\\n     src/.env \\\n     src/.nodemonrc.json \\\n     /app/\nCOPY src/public/ /app/public/\nCOPY src/server/ /app/server/\nEXPOSE 3000\nENTRYPOINT DEBUG='shipit-clicker:*' npm run dev\n```", "```\nFROM alpine:20191114\nRUN apk update && \\\n    apk add nodejs nodejs-npm\nRUN addgroup -S app && adduser -S -G app app\nRUN mkdir -p /app/public /app/server\nADD src/package.json* /app/\nWORKDIR /app\nRUN npm -s install\nCOPY src/public/ /app/public/\nCOPY src/server/ /app/server/\nCOPY src/.babelrc /app/\nRUN npm run compile\nUSER app\nEXPOSE 3000\nENTRYPOINT npm start\n```", "```\n$ docker images | awk '/chapter._ship/{ print $1 \" \" $7}'\nchapter6_shipit-clicker-web-v2 154MB\nchapter5_shipit-clicker-web 524MB\n```", "```\n---\nversion: '3'\nservices:\n  shipit-clicker-web:\n    build: .\n    environment:\n      REDIS_HOST: redis\n    ports:\n    - \"3005:3000\"\n    links:\n    - redis\n  redis:\n    image: redis\n    ports:\n    - \"6379:6379\"\n```", "```\n---\nversion: '3'\nservices:\n  shipit-clicker-web-v2:\n    build: .\n    environment:\n        - APP_ID=shipit-clicker-v2\n        - OPENAPI_SPEC=/api/v1/spec\n        - OPENAPI_ENABLE_RESPONSE_VALIDATION=false\n        - PORT=3000\n        - LOG_LEVEL=${LOG_LEVEL:-debug}\n        - REQUEST_LIMIT=100kb\n        - REDIS_HOST=${REDIS_HOST:-redis}\n        - REDIS_PORT=${REDIS_PORT:-6379}\n        - SESSION_SECRET=${SESSION_SECRET:-mySecret-v2}\n```", "```\n ports:\n      - \"${PORT:-3006}:3000\"\n    networks:\n      - private-redis-shipit-clicker-v2\n    links:\n      - redis\n    depends_on:\n      - redis\n```", "```\n  redis:\n    command: [\"redis-server\", \"--appendonly\", \"yes\"]\n    image: redis:5-alpine3.10\n    volumes:\n      - redis-data-shipit-clicker:/data\n    networks:\n      - private-redis-shipit-clicker-v2\nvolumes:\n  redis-data-shipit-clicker: {}\nnetworks:\n  private-redis-shipit-clicker-v2:\n```", "```\n$ git clone https://github.com/PacktPublishing/Docker-for-Developers.git\n$ cd Docker-for-Developers/chapter6\n```", "```\ncp env.sample .env\nvi .env\n```", "```\n$ docker-compose up -d\n```", "```\n$ docker-compose ps\n    Name           Command      State       Ports\n-----------------------------------------------------\nchapter6_redi   docker-         Up      6379/tcp\ns_1             entrypoint.sh\n                redis ...\nchapter6_ship   /bin/sh -c      Up      0.0.0.0:80-\nit-clicker-     npm start               >3000/tcp\nweb-v2_1\n```", "```\n$ docker-compose logs\n```", "```\ndocker.errors.APIError: 500 Server Error: Internal Server Error (\"b'Ports are not available: listen tcp 0.0.0.0:80: bind: address already in use'\")\n```", "```\n$ yum remove -y httpd\n```", "```\n$ apt-get remove -y apache2\n```", "```\n$ sudo netstat -nap | grep :80\ntcp6       0      0 :::80                   :::*                    LISTEN      12037/httpd \n```", "```\n$ echo \"PATH=$PWD:$PATH\" | tee -a \"$HOME/.bash_profile\"\n$ . \"$HOME/.bash_profile\"\n```", "```\n[centos@ip-172-26-0-237 chapter6]$ rm .env\n[centos@ip-172-26-0-237 chapter6]$ deploy.sh\nchapter6_redis_1 is up-to-date\nRecreating chapter6_shipit-clicker-web-v2_1 ... done\n              Name                            Command               State           Ports         \n--------------------------------------------------------------------------------------------------\nchapter6_redis_1                   docker-entrypoint.sh redis ...   Up      6379/tcp              \nchapter6_shipit-clicker-web-v2_1   npm start                        Up      0.0.0.0:3006->3000/tcp\n[centos@ip-172-26-0-237 chapter6]$ echo 'PORT=80' > .env\n[centos@ip-172-26-0-237 chapter6]$ restart.sh\nchapter6_redis_1 is up-to-date\nRecreating chapter6_shipit-clicker-web-v2_1 ... done\n              Name                            Command               State          Ports        \n------------------------------------------------------------------------------------------------\nchapter6_redis_1                   docker-entrypoint.sh redis ...   Up      6379/tcp            \nchapter6_shipit-clicker-web-v2_1   npm start                        Up      0.0.0.0:80->3000/tcp\n[centos@ip-172-26-0-237 chapter6]$\n```", "```\n[centos@ip-172-26-0-237 chapter6]$ ./redis-cli.sh\n127.0.0.1:6379> help\nredis-cli 5.0.7\nTo get help about Redis commands type:\n      \"help @<group>\" to get a list of commands in <group>\n      \"help <command>\" for help on <command>\n      \"help <tab>\" to get a list of possible help topics\n      \"quit\" to exit\nTo set redis-cli preferences:\n      \":set hints\" enable online hints\n      \":set nohints\" disable online hints\nSet your preferences in ~/.redisclirc\n127.0.0.1:6379> keys *\n1) \"example/deploys\"\n2) \"example/nextPurchase\"\n3) \"example/score\"\n127.0.0.1:6379> get example/score\n\"209\"\n127.0.0.1:6379> quit\n```", "```\n$ docker-compose logs 2>&1 | less -R\n```", "```\n [centos@ip-172-26-0-237 ~]$ docker ps\nCONTAINER ID        IMAGE                            COMMAND                  CREATED      \n       STATUS              PORTS                  NAMES\ne947e7de33ef        chapter6_shipit-clicker-web-v2   \"npm start\"              4 hours ago  \n       Up 4 hours          0.0.0.0:80->3000/tcp   chapter6_shipit-clicker-web-v2_1\n3f91820e097b        redis:5-alpine3.10               „docker-entrypoint.s…\"   4 hours ago  \n       Up 4 hours          6379/tcp               chapter6_redis_1\n```", "```\n [centos@ip-172-26-0-237 ~]$ docker logs chapter6_shipit-clicker-web-v2_1 > shipit.log\n[centos@ip-172-26-0-237 ~]$ tail shipit.log \n> shipit-clicker@1.0.0 start /app\n> node dist/index.js\n{\"level\":30,\"time\":1580087119723,\"pid\":16,\"hostname\":\"e947e7de33ef\",\"name\":\"shipit-clicker-\nv2\",\"msg\":\"Redis connection established\",\"redis_url\":\"redis://redis:6379\",\"v\":1}\n{\"level\":30,\"time\":1580087119934,\"pid\":16,\"hostname\":\"e947e7de33ef\",\"name\":\"shipit-clicker-\nv2\",\"msg\":\"up and running in development @: e947e7de33ef on port: 3000}\",\"v\":1}\n[centos@ip-172-26-0-237 ~]$\n```"]