["```\napiVersion: networking.k8s.io/v1beta1\nkind: Ingress\nmetadata:\n  name: test-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\nspec:\n  rules:\n  - http:\n      paths:\n      - path: /testpath\n        pathType: Prefix\n        backend:\n          serviceName: test\n          servicePort: 80\n```", "```\n$ docker service ls --filter name=ucp-interlock\nID NAME MODE REPLICAS IMAGE PORTS\nonf2z2i5ttng ucp-interlock replicated 1/1 docker/ucp-interlock:3.2.5 \nnuq8eagch4in ucp-interlock-extension replicated 1/1 docker/ucp-interlock-extension:3.2.5 \nx2554tcxb7kw ucp-interlock-proxy replicated 2/2 docker/ucp-interlock-proxy:3.2.5 *:8080->80/tcp, *:8443->443/tcp\n```", "```\nversion: \"3.2\"\n\nservices:\n colors:\n image: codegazers/colors:1.16\n deploy:\n replicas: 3\n      labels:\n        com.docker.lb.hosts: colors.lab.local\n        com.docker.lb.network: colors-network\n        com.docker.lb.port: 3000\n    networks:\n      - colors-network\n\nnetworks:\n  colors-network:\n    driver: overlay\n```", "```\n$ source env.sh \nCluster \"ucp_<UCP_FQDN>:6443_admin\" set.\nUser \"ucp_<UCP_FQDN>:6443_admin\" set.\nContext \"ucp_<UCP_FQDN>:6443_admin\" modified.\n```", "```\ninterlock-lab$ docker stack deploy -c colors-stack.yml lab\nCreating network lab_colors-network\nCreating service lab_colors\n```", "```\n$ docker stack ps lab\nID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS\nksoie4oin10e lab_colors.1 codegazers/colors:1.16 node4 Running Running 8 seconds ago \nb0dykjgp8ack lab_colors.2 codegazers/colors:1.16 node2 Running Preparing 9 seconds ago \nm13tvfbw5cgb lab_colors.3 codegazers/colors:1.16 node3 Running Preparing 9 seconds ago \n```", "```\n$ curl -H \"host: colors.lab.local\" http://<UCP_NODE>:8080/text\nAPP_VERSION: 1.15\nCOLOR: black\nCONTAINER_NAME: e69a7ca3b74f\nCONTAINER_IP: 10.0.5.15 172.18.0.4\nCLIENT_IP: 10.0.0.2\nCONTAINER_ARCH: linux\n$ curl -H \"host: colors.lab.local\" http://<UCP_NODE>:8080/text\nAPP_VERSION: 1.15\nCOLOR: yellow\nCONTAINER_NAME: 69ebb6f349f6\nCONTAINER_IP: 10.0.5.14 172.18.0.3\nCLIENT_IP: 10.0.0.2\nCONTAINER_ARCH: linux\n```", "```\n$ curl -I http://<UCP_NODE>:8080/text\nHTTP/1.1 503 Service Temporarily Unavailable\nServer: nginx/1.14.2\nDate: Tue, 31 Mar 2020 19:51:05 GMT\nContent-Type: text/html\nContent-Length: 537\nConnection: keep-alive\nETag: \"5cad421a-219\"\n```", "```\n$ docker stack rm lab\nRemoving service lab_colors\nRemoving network lab_colors-network\nFailed to remove network 97bgcu0eo445sz8ke10bacbge: Error response from daemon: Error response from daemon: rpc error: code = FailedPrecondition desc = network 97bgcu0eo445sz8ke10bacbge is in use by service x2554tcxb7kwv0wzsasvfjh6dFailed to remove some resources from stack: lab\n```", "```\n$ docker stack rm lab\nRemoving network lab_colors-network\n```", "```\n$ docker network create -d overlay redirect\n```", "```\n$ docker service create --name redirect --network redirect \\\n--label com.docker.lb.hosts=old.lab.local,new.lab.local \\\n--label com.docker.lb.port=80 \\\n--label com.docker.lb.redirects=http://old.lab.local,http://new.lab.local nginx:alpine\n```", "```\n$ curl -vL http://<UCP_NODE>:8080/ -H Host:old.lab.local\n* Trying <UCP_NODE>...\n* TCP_NODELAY set\n* Connected to <UCP_NODE> (<UCP_NODE>) port 8080 (#0)\n> GET / HTTP/1.1\n> Host:old.lab.local\n> User-Agent: curl/7.58.0\n> Accept: */*\n> \n< HTTP/1.1 302 Moved Temporarily\n< Server: nginx/1.14.2\n< Date: Tue, 31 Mar 2020 22:21:26 GMT\n< Content-Type: text/html\n< Content-Length: 161\n< Connection: keep-alive\n< Location: http://new.lab.local/\n< x-request-id: d4a9735f8880cfdc99e0478b7ea7d583\n< x-proxy-id: 1bfde5e3a23e\n< x-server-info: interlock/v3.0.0 (27b903b2) linux/amd64\n< \n* Ignoring the response-body\n* Connection #0 to host <UCP_NODE> left intact\n* Issue another request to this URL: 'http://new.lab.local/'\n* Could not resolve host: new.lab.local\n* Closing connection 1\ncurl: (6) Could not resolve host: new.lab.local\n```", "```\nversion: \"3.2\"\n\nservices:\n  colors:\n    image: codegazers/colors:1.16\n    deploy:\n      replicas: 1\n      labels:\n        com.docker.lb.hosts: colors.lab.local\n        com.docker.lb.network: colors-network\n        com.docker.lb.port: 3000\n        com.docker.lb.ssl_cert: colors_colors.lab.local.cert\n        com.docker.lb.ssl_key: colors_colors.lab.local.key\n    networks:\n     - colors-network\n\nnetworks:\n  colors-network:\n    driver: overlay\nsecrets:\n  colors.lab.local.cert:\n    file: ./colors-lab-local.cert\n  colors.lab.local.key:\n    file: ./colors-lab-local.key\n```", "```\n$ openssl req \\\n -new \\\n -newkey rsa:4096 \\\n -days 365 \\\n -nodes \\\n -x509 \\\n -subj \"/C=US/ST=CA/L=SF/O=colors/CN=colors.lab.local\" \\\n -keyout colors.lab.local.key \\\n -out colors.lab.local.cert\n```", "```\n$ source env.sh \nCluster \"ucp_<UCP_FQDN>:6443_admin\" set.\nUser \"ucp_<UCP_FQDN>:6443_admin\" set.\nContext \"ucp_<UCP_FQDN>:6443_admin\" modified.\n```", "```\ninterlock-lab$ $ docker stack deploy -c colors-stack-https.yml colors\nCreating network colors_colors-network\nCreating secret colors_colors.lab.local.cert\nCreating secret colors_colors.lab.local.key\nCreating service colors_colors\n```", "```\n$ docker stack ps colors\nID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS\nxexbvl18d454 colors_colors.1 codegazers/colors:1.16 node4 Running Running 4 minutes ago \n```", "```\n$ export CFG=$(docker service inspect --format '{{(index .Spec.TaskTemplate.ContainerSpec.Configs 0).ConfigName}}' ucp-interlock-proxy)\n```", "```\n$ docker config inspect --pretty ${CFG}\n```"]