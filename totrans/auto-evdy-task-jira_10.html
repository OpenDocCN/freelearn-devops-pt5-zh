<html><head></head><body>
		<div><h1 id="_idParaDest-138"><em class="italic"><a id="_idTextAnchor117"/>Chapter 7</em>: Automating Jira Software Projects</h1>
			<p>Tracking software development tasks and bugs is arguably what Jira is most well-known for; however, it has always come with administrative overhead in keeping issues aligned and ensuring that work across projects is synchronized.</p>
			<p>Keeping on top of the administrative tasks in Jira can be frustrating at times and usually means that less time can be devoted to actual development work. Introducing automation can help cut down on many of the manual tasks, which leads to happier and more productive team members.</p>
			<p>In this chapter, we will learn how to harness automation rules to provide simple yet effective productivity increases in Jira Software projects, such as how to keep versions synchronized across projects.</p>
			<p>We'll also see how aligning the statuses of an issue hierarchy using automation can reduce a number of otherwise manual interactions and increase the efficiency of working with issues in a software project.</p>
			<p>We will cover the following topics in this chapter:</p>
			<ul>
				<li>Managing versions across projects</li>
				<li>Ensuring epics and stories stay aligned</li>
				<li>Managing the scope of a sprint</li>
			</ul>
			<h1 id="_idParaDest-139"><a id="_idTextAnchor118"/>Technical requirements</h1>
			<p>The requirements for this chapter are as follows:</p>
			<ul>
				<li><strong class="bold">Jira cloud environment</strong>: If you don't already have access to Jira, you can create a free Jira cloud account at <a href="https://www.atlassian.com/software/jira/free">https://www.atlassian.com/software/jira/free</a> and ensure that you have both <strong class="bold">Jira Software</strong> and <strong class="bold">Jira Service Desk</strong> selected.</li>
				<li><strong class="bold">Jira server environment</strong>: If you are using Jira Server (available from <a href="https://www.atlassian.com/software/jira/download">https://www.atlassian.com/software/jira/download</a>), ensure you have licenses for both Jira Software and Jira Service Desk. In addition, you will also need to ensure that you install the <em class="italic">Automation for Jira</em> app, available from the Atlassian Marketplace.</li>
			</ul>
			<p>In both instances, you will need to have at least <strong class="bold">Project Administrator</strong> access to a Service Desk project and a Scrum software project to be able to follow the examples in this chapter. For the examples in this chapter, we have used the <em class="italic">IT service management project template</em> to create the Service Desk project and the <em class="italic">Scrum software project template</em> to create the Software project.</p>
			<p>You can download the latest code samples for this chapter from this book's official GitHub repository at <a href="https://github.com/PacktPublishing/Automate-Everyday-Tasks-in-Jira">https://github.com/PacktPublishing/Automate-Everyday-Tasks-in-Jira</a>. Please visit the following link to check the CiA videos: https://bit.ly/3quqjil</p>
			<h1 id="_idParaDest-140"><a id="_idTextAnchor119"/>Managing versions across projects</h1>
			<p>A common use case with Jira Software projects is to have a public-facing project where your customers can log defects and feature requests against released software, and an internal project that is used by the development team to track their work.</p>
			<p>Having this setup <a id="_idIndexMarker360"/>allows teams to triage incoming requests and select relevant issues to work on without clogging up their actual project with thousands of issues.</p>
			<p>However, realizing the benefits from this setup requires that the software versions in both projects are synchronized, allowing customers to report issues against the correct versions of the released software.</p>
			<p>In this section, we will explore how to use automation rules to manage the version synchronization between projects.</p>
			<p>To do this, we will need to ensure that when we release a version in the internal project, we create a corresponding version in the public-facing project that customers can then use when reporting bugs or creating feature requests.</p>
			<p>Let's take a look at a rule that enables us to keep versions in sync across projects.</p>
			<h2 id="_idParaDest-141"><a id="_idTextAnchor120"/>Creating a rule to keep versions in sync across projects</h2>
			<p>In this example, we'll create a rule that will trigger for version releases in our internal project and <a id="_idIndexMarker361"/>create and release <a id="_idIndexMarker362"/>a corresponding version in the public-facing project that customers can then use when reporting issues.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Creating automation rules <a id="_idIndexMarker363"/>that span multiple projects requires the user to create the rule to have Jira administrator permissions. Project administrators are not permitted to create multi-project rules.</p>
			<p>In this example, we are going to use two software projects in our rule. For the first software project, we will create a project using the Scrum software template named <em class="italic">My Application</em> with the project key <em class="italic">MAPP</em>. For the public-facing support project, we will create a project using the bug tracking software template named <em class="italic">My Application Support</em> with the project key <em class="italic">MAPS</em>.</p>
			<p>Let's take a look at how to build this rule:</p>
			<ol>
				<li>As we are working with more than a project, this rule needs to be set up by a user with Jira administrator permissions.</li>
				<li>Navigate to <strong class="bold">Settings</strong> (the cog icon in the top menu), select <strong class="bold">System</strong>, click on the <strong class="bold">Automation rules</strong> tab in the left menu, and then click on <strong class="bold">Create rule</strong>.</li>
				<li>Select the <strong class="bold">Version released</strong> trigger and click <strong class="bold">Save</strong>.</li>
				<li>As both projects configured in this rule can cause this rule to fire, we need to ensure that it only continues executing when the MAPP project causes it to fire. To do this, select <code>{{version.project.key}}</code></p><p><code>equals</code></p><p><code>MAPP</code></p></li>
				<li>Next, select <code>{{version.name}}</code> smart value to select the name of the version that caused the rule to fire.<p>Expand the <strong class="bold">More options</strong> disclosure and select your application support project in the <strong class="bold">Project</strong> field. In the case of this example, it is <strong class="bold">My Application Support (MAPS)</strong>.</p></li>
				<li>Click <code>{{version.name}}</code> smart value to ensure the correct version is released.</p></li>
				<li>Next, click <code>Keep support project versions in sync</code>.<p>Set the <code>Multiple projects</code>, and in the <code>My Application</code> and <code>My Application Support</code>.</p></li>
				<li>Finally, click <strong class="bold">Save</strong>, and then click <strong class="bold">Turn it on</strong> to publish and enable the rule.</li>
			</ol>
			<p>In this section, we have learned how to use automation rules to keep versions synchronized across multiple projects, enabling customers to raise bugs and features outside of the development project.</p>
			<p>In the following section, we will look at how to ensure that the status of epics in a software project stays aligned to the underlying stories in the project.</p>
			<h1 id="_idParaDest-142"><a id="_idTextAnchor121"/>Ensuring epics and stories are aligned</h1>
			<p>Working in software <a id="_idIndexMarker368"/>projects using the <strong class="bold">Scrum Agile framework</strong> generally involves having a hierarchy of issue types. </p>
			<p>In a typical Scrum-based agile hierarchy, you will have epics that define larger pieces of work, or business requirements, which may span multiple sprints.</p>
			<p>These are <a id="_idIndexMarker369"/>broken down into stories (or user stories), which are high-level definitions of the requirements that can be delivered in a time-boxed period or sprint.</p>
			<p>Stories can <a id="_idIndexMarker370"/>then be decomposed into tasks, modeled as sub-tasks of the story, which are specific, measurable items of work required to get the story done.</p>
			<p>In this section, we'll look at how we can use automation rules to keep the statuses of the issues in this hierarchy in sync so that when work is started on a sub-task, the linked issues above the sub-task move to the correct status without needing manual intervention.</p>
			<h2 id="_idParaDest-143"><a id="_idTextAnchor122"/>Creating a rule to keep epics and stories synchronized</h2>
			<p>In this example, we'll create a rule that triggers when a sub-task is transitioned to a new status, and <a id="_idIndexMarker371"/>depending on the status <a id="_idIndexMarker372"/>of the sub-task, the rule will automatically transition its parent story to the correct status if required.</p>
			<p>In addition, we'll <a id="_idIndexMarker373"/>use the same rule to transition <a id="_idIndexMarker374"/>the epic linked to the story to the correct status when the story transitions to a new status, so we'll need to allow the rule to be triggered by other rules.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Allowing rules to be triggered by other rules can inadvertently lead to execution loops where a rule could be triggered indefinitely. The automation rule engine includes loop detection to prevent infinite loops; however, an incorrectly configured rule could still cause an execution loop up to a depth of 10 levels before the rule execution is terminated.</p>
			<p>Let's take a look at this rule now:</p>
			<ol>
				<li value="1">In your Jira Software project, navigate to <strong class="bold">Project settings</strong>, click on the <strong class="bold">Automation</strong> link in the project settings menu, and then click <strong class="bold">Create rule</strong>.</li>
				<li>Select the <strong class="bold">Issue transitioned</strong> trigger and click <strong class="bold">Save</strong>. Leave both the <strong class="bold">From status</strong> and <strong class="bold">To status</strong> fields blank as we want the rule to fire for every transition.</li>
				<li>The first <a id="_idIndexMarker375"/>thing we want to check is <a id="_idIndexMarker376"/>whether progress has started on a sub-task and move its parent story to <code>issueType = Sub-task AND statusCategory = "In Progress"</code></p></li>
				<li>Now, select <strong class="bold">Branch rule / related issues</strong>, and in the <strong class="bold">Type of related issues</strong> field, select <strong class="bold">Parent</strong> and click <strong class="bold">Save</strong>.</li>
				<li>Then, select <strong class="bold">New action</strong> followed by <strong class="bold">Transition issue</strong>. For this example, ensure that the <strong class="bold">Destination status</strong> field is set to <strong class="bold">Copy from trigger issue</strong>, and then click <strong class="bold">Save</strong>.</li>
				<li>The next stage of the rule is to ensure the user story transitions to a completed status when all of its sub-tasks are done. To do this, click on <code>issueType = Sub-task AND statusCategory = Done</code></p></li>
				<li>Next, select <strong class="bold">Branch rule / related issues</strong>, and again, in the <strong class="bold">Type of related issues</strong> field, select <strong class="bold">Parent</strong>, and then click <strong class="bold">Save</strong>.</li>
				<li>At this <a id="_idIndexMarker379"/>point, we need to check that <a id="_idIndexMarker380"/>all the sub-tasks for the parent <a id="_idIndexMarker381"/>issue selected in the <code>Sub-tasks</code></p><p><code>All match specified JQL</code></p><p><code>statusCategory = Done</code></p></li>
				<li>If the condition mentioned in <em class="italic">step 8</em> matches and all sub-tasks of the story have a status whose category is done, then we need to transition the story itself to a done status. To do this, select <strong class="bold">New action</strong> followed by <strong class="bold">Transition issue</strong> and ensure the <strong class="bold">Destination</strong> field is set to <strong class="bold">Copy from trigger issue</strong>, and then click <strong class="bold">Save</strong>.<p class="callout-heading">Important note</p><p class="callout">When you use <strong class="bold">Copy from trigger issue</strong> for statuses, you need to ensure that both issue types use the same workflow or that the workflows share the same statuses. If this is not the case, you will need to select the actual status you wish to transition to.</p></li>
				<li>Now that we've handled keeping the story in sync with its sub-tasks, we need to handle keeping epics in sync with their underlying stories.<p>First, we'll handle moving epics to <code>issueType = Story AND status = "In Progress"</code></p></li>
				<li>Then, select <strong class="bold">Branch rule / related issues</strong>, and in the <strong class="bold">Type of related issues</strong> field, select <strong class="bold">Epic (parent)</strong> and click <strong class="bold">Save</strong>.</li>
				<li>Next, select <strong class="bold">New action</strong>, and then select <strong class="bold">Transition issue</strong>. Make sure the <strong class="bold">Destination</strong> field is set to <strong class="bold">Copy from trigger issue</strong> for this example, and then click <strong class="bold">Save</strong>.</li>
				<li>The final <a id="_idIndexMarker383"/>conditional branch in this rule <a id="_idIndexMarker384"/>will ensure that an epic is automatically transitioned to a completed status when all of its underlying stories are complete.<p>Do this by <a id="_idIndexMarker385"/>clicking <code>issueType = Story AND statusCategory = Done</code></p></li>
				<li>Now, select <code>Epic (parent)</code> and click <strong class="bold">Save</strong>.</li>
				<li>Like we did for sub-tasks, we need to ensure that all the stories in the epic are completed before we can automatically transition the epic to a completed status.<p>We do this by selecting <code>Stories (or other issues in this Epic)</code></p><p><code>All match specified JQL</code></p><p><code>statusCategory = Done</code></p></li>
				<li>To actually <a id="_idIndexMarker387"/>transition the epic, we need <a id="_idIndexMarker388"/>to add an action, so select <strong class="bold">New action</strong> followed by <strong class="bold">Transition issue</strong>.<p>Ensure that the <strong class="bold">Destination</strong> field is set to <strong class="bold">Copy from trigger issue</strong> for this example, and then click <strong class="bold">Save</strong>.</p></li>
				<li>One of <a id="_idIndexMarker389"/>the requirements for this <a id="_idIndexMarker390"/>rule is that it is able to fire itself to ensure that all issues in the hierarchy are updated to the correct status.<p>In order to achieve this, we need to set the rule option that allows rules to be triggered by other rules.</p><p>Select <strong class="bold">Rule details</strong> in the rule-chain view on the left. In the <strong class="bold">Name</strong> field, set the name of the rule to <strong class="bold">Keep issue hierarchy statuses in sync</strong> and ensure that the <strong class="bold">Allow rule trigger</strong> checkbox is selected.</p><p>Your rule should look similar to the following two screenshots:</p><div><img src="img/B16551_Figure_7.2.jpg" alt="Figure 7.2 – Rule to keep epics and stories in sync (part 1)&#13;&#10;"/></div><p class="figure-caption">Figure 7.2 – Rule to keep epics and stories in sync (part 1)</p><p>In the preceding screenshot, we can see the rule details and the first part of the rule chain dealing with keeping stories in sync with sub-tasks.</p><div><img src="img/B16551_Figure_7.3.jpg" alt="Figure 7.3 – Keeping epics and stories in sync (part 2)&#13;&#10;"/></div><p class="figure-caption">Figure 7.3 – Keeping epics and stories in sync (part 2)</p><p>In this <a id="_idIndexMarker391"/>screenshot, we can see <a id="_idIndexMarker392"/>the second part of the <a id="_idIndexMarker393"/>rule chain, which deals with <a id="_idIndexMarker394"/>keeping epics in sync with their underlying user stories.</p></li>
				<li>Finally, click <strong class="bold">Save</strong>, and then click <strong class="bold">Turn it on</strong> to save and publish the rule.</li>
			</ol>
			<p>In this section, we have learned how to use automation rules to keep a hierarchy of issues in sync with each other and how we can allow a rule to trigger itself in order to achieve this.</p>
			<p>In the next section, we'll take a look at how we can automatically adjust the scope of a sprint by adding linked issues into the current sprint as well as notify the team when the scope of a sprint is changed.</p>
			<h1 id="_idParaDest-144"><a id="_idTextAnchor123"/>Managing the scope of a sprint</h1>
			<p>During any development life cycle, it is inevitable that at some point there will be a change to the <a id="_idIndexMarker395"/>scope of the sprint, either due to last-minute changes to the requirements or by the need to include an urgent bug fix.</p>
			<p>In this section, we'll firstly look at how we can change the scope of a sprint by including a newly linked issue to the sprint.</p>
			<p>We'll also look at how we can use automation rules to monitor the sprint and notify the team when the scope changes.</p>
			<h2 id="_idParaDest-145"><a id="_idTextAnchor124"/>Creating a rule to add a linked issue to the sprint</h2>
			<p>In this example, we are going to make use of the fact that we have both a private internal software development project (<em class="italic">My Application</em> with key <em class="italic">MAPP</em>) and a public support project (<em class="italic">My Application Support</em> with key <em class="italic">MAPS</em>) where customers can raise requests and report bugs.</p>
			<p>We are <a id="_idIndexMarker396"/>also going to assume that we have a team that monitors the public support project and triages incoming requests.</p>
			<p>Part of <a id="_idIndexMarker397"/>this triage involves examining high-priority bugs submitted by the organization's top customers and if verified, will create a linked bug in the private development project and add it to the current sprint.</p>
			<p>Let's take a look at how we can achieve this with an automation rule:</p>
			<ol>
				<li value="1">As we are working with more than a project, this rule needs to be set up by a user with Jira administrator permissions.</li>
				<li>Navigate to <strong class="bold">Settings</strong> (the cog icon in the top menu), select <strong class="bold">System</strong>, and then click on the <strong class="bold">Automation rules</strong> tab in the left menu and click <strong class="bold">Create rule</strong>.</li>
				<li>Select the <code>To Do</code></p><p><code>In Progress</code></p></li>
				<li>Next, we need to add in some conditions to ensure we only select the highest priority bugs in the support project.<p>We will <a id="_idIndexMarker398"/>use multiple issue field conditions in this example as they have a performance advantage over using a JQL condition.</p></li>
				<li>Check <a id="_idIndexMarker399"/>for the correct project by selecting <code>Project</code></p><p><code>equals</code></p><p><code>My Application Support (MAPS)</code></p></li>
				<li>Next, we'll ensure that this rule only executes for bug issue types.<p>Select <code>Issue Type</code></p><p><code>equals</code></p><p><code>Bug</code></p></li>
				<li>The last condition is to check that the bug has the highest priority.<p>Select <code>Priority</code></p><p><code>is one of</code></p><p><code>Highest</code></p></li>
				<li>The final <a id="_idIndexMarker400"/>step in this rule is to <a id="_idIndexMarker401"/>create the linked issue in our development project and add it to the current sprint.<p>Select <code>My Application (MAPP)</code></p><p><code>Same issue type</code></p><p><code>relates to</code></p><p><code>Trigger issue</code></p><p><code>Active Sprint (My Application Scrum Board)</code></p><p>Your rule should now look similar to the following screenshot:</p><div><img src="img/B16551_Figure_7.4.jpg" alt="Figure 7.4 – Creating a linked issue in the active sprint&#13;&#10;"/></div><p class="figure-caption">Figure 7.4 – Creating a linked issue in the active sprint</p></li>
				<li>Finally, select <code>Add critical bug to active sprint</code>.<p>Set the <strong class="bold">Scope</strong> field to <strong class="bold">Multiple projects</strong> and in the <strong class="bold">Restrict to projects</strong> field, select <a id="_idIndexMarker402"/>your internal and <a id="_idIndexMarker403"/>support projects. In this case, we'll select <strong class="bold">My Application</strong> and <strong class="bold">My Application Support</strong>.</p></li>
				<li>Finally, click <strong class="bold">Save</strong>, and then click <strong class="bold">Turn it on</strong> to publish and enable the rule.</li>
			</ol>
			<p>In this example, we have learned how to use automation rules to create a linked issue in a project and add it to the current sprint.</p>
			<p>In the next example, we'll see how we can watch for scope changes to the current sprint and notify the development team when this occurs.</p>
			<h2 id="_idParaDest-146"><a id="_idTextAnchor125"/>Creating a rule to notify the team when the scope changes</h2>
			<p>When the scope of an active sprint changes, we want to keep the team informed so that everyone <a id="_idIndexMarker404"/>on the team is kept abreast of what is happening.</p>
			<p>To do <a id="_idIndexMarker405"/>this, we'll create a rule that listens for a change in the <strong class="bold">Sprint</strong> field of an issue and if that sprint is currently the active sprint, we'll send a notification to our team's Slack channel.</p>
			<p>For this example, we'll send notifications to the <strong class="bold">#sprint-updates</strong> Slack channel using the Slack integration that we set up in <a href="B16551_04_Final_ASB_ePub.xhtml#_idTextAnchor080"><em class="italic">Chapter 4</em></a>, <em class="italic">Sending Automated Notifications</em>.</p>
			<p>Let's take a look at how this rule works:</p>
			<ol>
				<li value="1">In your Jira Software project, navigate to <strong class="bold">Project settings</strong>, click on the <strong class="bold">Automation</strong> link in the <strong class="bold">Project Settings</strong> menu, and then click <strong class="bold">Create rule</strong>.</li>
				<li>As there is no direct way to monitor changes to the active sprint, we'll instead set our rule to trigger when the <strong class="bold">Sprint</strong> field in an issue is changed.<p>To do this, we'll select the <strong class="bold">Field value changed</strong> trigger. In the <strong class="bold">Fields to monitor for changes</strong> dropdown, select <strong class="bold">Sprint</strong>.</p><p>Leave the <strong class="bold">For</strong> field blank that corresponds to <strong class="bold">All issue operations</strong>, and click <strong class="bold">Save</strong>.</p></li>
				<li>We need to ensure that the sprint that the issue was added to corresponds with the currently active sprint.<p>We can achieve this by selecting <code>sprint in openSprints()</code></p></li>
				<li>Next, we'll select <code>#sprint-updates</code>.</p><p>Your <a id="_idIndexMarker407"/>rule should look similar to the following screenshot:</p><div><img src="img/B16551_Figure_7.5.jpg" alt="Figure 7.5 – Monitoring scope changes to a sprint&#13;&#10;"/></div><p class="figure-caption">Figure 7.5 – Monitoring scope changes to a sprint</p></li>
				<li>We also need to ensure that this rule can be triggered by other automation rules; otherwise, scope changes created by other rules will not cause notifications to be sent.<p>Select <strong class="bold">Rule details</strong> in the rule-chain view on the left. In the <strong class="bold">Name</strong> field, set the name of the rule to <strong class="bold">Send notification to Slack when Sprint scope changes</strong> and ensure that the <strong class="bold">Allow rule trigger</strong> checkbox is selected.</p></li>
				<li>Finally, click <strong class="bold">Save</strong>, and then click <strong class="bold">Turn it on</strong> to publish and enable the rule.</li>
			</ol>
			<p>We <a id="_idIndexMarker408"/>have learned in this example how we can use the sprint field in an issue to monitor scope changes <a id="_idIndexMarker409"/>of a sprint and keep the team informed of these changes.</p>
			<p>By cutting down on manual effort using automation to keep issues synchronized and teams updated, you will enable your teams to be more efficient as they no longer need to manage the project tool and can instead focus on their actual tasks.</p>
			<h1 id="_idParaDest-147"><a id="_idTextAnchor126"/>Summary</h1>
			<p>In this chapter, we learned how we can use automation rules to minimize the administrative overhead usually involved in managing and working with Jira Software projects, and indeed these can be applied to most project types within Jira.</p>
			<p>In particular, we learned how to keep versions synchronized across projects, which is especially useful when you have a software project spanning multiple Jira projects, whether they be internal team projects or, as in our example, public projects for customers to log and track requests.</p>
			<p>Keeping hierarchies of issues in sync is a very common task faced in Jira projects and in this chapter, we learned how to use a looping rule to achieve this using the most common hierarchy encountered in Jira Software projects. Lastly, we learned how to maintain visibility of any scope changes to a sprint and how we can also use automation to adjust the scope of a sprint.</p>
			<p>With the exception of the sprint-specific examples we have looked at, the topics we have covered in this chapter apply equally to any other style of software development, including Kanban and waterfall, with some minor adjustments.</p>
			<p>Applying what we have learned in this chapter to your projects using automation will help reduce the amount of manual and repetitive administrative work and in doing so will enable your users to be both more efficient and productive.</p>
			<p>In the next chapter, we'll look at how to leverage automation rules to integrate with tools such as GitHub and Bitbucket to support DevOps processes.</p>
		</div>
	</body></html>