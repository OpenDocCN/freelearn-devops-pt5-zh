- en: Security and Monitoring
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '"Showing a strong success and visible benefits is key to getting others to
    agree to try your way of doing things.'
  prefs: []
  type: TYPE_NORMAL
- en: '- Frederic Rivain'
  prefs: []
  type: TYPE_NORMAL
- en: Security is one of the most important parts of application life cycle management,
    hence, this service increases value in the context of DevOps.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will cover user management, monitoring, and some sections
    of troubleshooting as well.
  prefs: []
  type: TYPE_NORMAL
- en: We will see how to create users and manage users in both Jenkins and VSTS. With
    open source and commercial tools, things don't change much in terms of functionality,
    but they might change with regard to the ease of doing it and extent to which
    support is available.
  prefs: []
  type: TYPE_NORMAL
- en: 'We will cover the following topics in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: User management in Jenkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: User management in **Visual Studio Team Services** (**VSTS**)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Monitoring Jenkins and Microsoft Azure
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Azure Web App troubleshooting and monitoring
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Security in Jenkins and VSTS
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Security is a major concern with respect to Jenkins and VSTS. However, it is
    not limited to that aspect only. Security is more about an overall perspective
    that includes application and infrastructure security. Infrastructure security
    becomes more crucial considering the fact that we operate in the cloud environment.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will cover user management in Jenkins and VSTS.
  prefs: []
  type: TYPE_NORMAL
- en: User management in Jenkins
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Security is all about **authentication** and **authorization**, which are parts
    of the AAA trio:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00052.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'For security configuration, go to Manage Jenkins and click on Configure Global
    Security in Jenkins:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00307.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'To enable security in Jenkins, click on Enable Security. By default, security
    is enabled in Jenkins:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00055.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: We need to change TCP port for JNLPagents to Random so agents can be configured.
  prefs: []
  type: TYPE_NORMAL
- en: For Access Control in Authentication, select Jenkins' own user database in the
    Security Realm section.
  prefs: []
  type: TYPE_NORMAL
- en: 'Check Allow users to sign up so new users can create an account:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00045.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In Authorization, select Matrix-based security to provide rights to all available
    users as required:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00059.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'We can also select Project-based matrix Authorization Strategy. In this case,
    we need to go to the individual build job or project and go to its configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00062.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Check Enable project-based security and give rights to individual users:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00064.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: It often happens that we accidently lock our Jenkins by not providing rights
    to admin users specifically and then saving the security configuration.
  prefs: []
  type: TYPE_NORMAL
- en: In such a scenario, to restore Jenkins access, go to JENKINS_HOME in any operating
    system on which you have installed Jenkins.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open `Config.xml`, change the value of `useSecurity` to `false` and restart
    Jenkins:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00067.gif)'
  prefs: []
  type: TYPE_IMG
- en: In the next section, we will see user management in VSTS.
  prefs: []
  type: TYPE_NORMAL
- en: User management in VSTS
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'For configuration and user management, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the newly created project PetClinic and click on the settings icon. On
    the Project profile page, the team information is available. Click on PetClinic
    Team:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00069.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'By default, the admin account is already available as a team member. Click
    on +Add... to add a new team member for collaboration:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00071.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Use sign-in addresses or group aliases and click on Save changes:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00074.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Verify the team members of the PetClinic Team in the dashboard:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00313.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Go to the main page of the team project and verify the Team Members section
    as well:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00079.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: We have successfully added a team member to the main team of the project. This
    is how we can create a project and manage a team.
  prefs: []
  type: TYPE_NORMAL
- en: Monitoring Jenkins and Microsoft Azure
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Azure App Service/Azure Web Apps comes with diagnose and solve problems to find
    out about resource health and solutions to some common problems.
  prefs: []
  type: TYPE_NORMAL
- en: Monitoring Jenkins
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In Jenkins, we can monitor master and different agents with the use of a monitoring
    plugin:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Go to Manage Jenkins|Manage Plugins and install Monitoring Plugins:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00061.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: After installing it successfully, go to Manage Jenkins and select Monitoring
    of Jenkins master.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on Jenkins nodes in the same section to watch monitoring of agents of
    Jenkins:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00082.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Verify the statistics of JavaMelody monitoring taken at a specific timestamp
    in the browser:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00084.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Click on Other charts to get more information on different aspects of Jenkins,
    such as buffer memory, threads count, swap space, and so on:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00086.jpeg)![](img/00171.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Scroll down and get detailed information on Threads:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00208.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Click on Debugging logs to get more details:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00255.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In the bottom section, we can find the debugging logs:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00018.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: We can also monitor different Build Jobs using the Build MonitorView plugin.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Go to Manage Jenkins|Manage Plugins and install the Build Monitor View plugin:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00153.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Once it is successfully installed, go to the Jenkins dashboard and click on
    the + sign.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide View name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Select Build Monitor View and click OK:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00174.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Select the number of jobs you want to monitor.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on OK:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00189.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'From a single window, we can monitor the status of all Build Jobs configured
    in Build Monitor View:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00203.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: In this book, we have deployed applications on Microsoft Azure Web Apps too,
    so let's see how to monitor Azure Web Apps and troubleshoot in the next section.
  prefs: []
  type: TYPE_NORMAL
- en: Azure Web Apps troubleshooting and monitoring
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let''s deep dive into Diagnose and solve problems to get more details:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00223.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Go to Azure App Services and select the Azure web application that we created
    earlier. Click on Diagnose and solve problems.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Another pane will be opened that will have the RESOURCE HEALTH indicator and
    SOLUTIONS TO COMMON PROBLEMS.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We can see that the MyPetClinic Azure web application is available and running
    normally based on the status and the green indicator.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In my encounters with Azure Web Apps, I have faced HTTP 5xx errors many times
    due to various reasons. It is also important to identify the root cause of an
    issue to fix it. However, there are some quick solution/suggestions given here:'
  prefs: []
  type: TYPE_NORMAL
- en: 'In RESOURCE HEALTH, click on More details to get the existing status of the
    MyPetClinic Azure web application:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00291.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Click on View History to find details of the Azure web application, regarding
    when it was available and unavailable:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00310.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Azure App Services - HTTP live traffic
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In SOLUTIONS TO COMMON PROBLEMS, we can assess live traffic to know whether
    existing resources can manage the current load or not.
  prefs: []
  type: TYPE_NORMAL
- en: 'If live traffic is normal, then it may not be an issue and we should go a step
    further to troubleshoot the problem:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00034.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: We can get HTTP live traffic based on one or all hostnames available in Azure
    App Services.
  prefs: []
  type: TYPE_NORMAL
- en: Azure App Services - CPU and memory consumption
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We can also get details regarding CPU and memory percentage to find the performance
    of the Azure web application and whether it is required to go for scaling operations:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00049.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'We already know that there is a main Azure web application, and other deployment
    slots are also available. We can get details of Azure Web Apps or the Sites In
    Service Plan too:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00037.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, we are looking at the details of the MyPetClinic(dev) deployment slot
    of Azure Web Apps:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00167.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'At a time, we can pick and choose the slots or select all of them to see CPU
    and memory utilization in the **App Service plan** (**ASP**):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00179.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Similarly, we can verify Http Statistics for the main Azure web application
    and deployment slots hosted in a specific ASP:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00004.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'We can also verify Network Statistics for the main Azure web application and
    deployment slots hosted in a specific ASP:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00005.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'If we keep the cursor on a specific location of the chart, then we will get
    all the details of that specific point for the main and other deployment slots:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00010.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: So far, we have seen the diagnose and solve problems section. In the next section,
    we will look at details related to activity logs.
  prefs: []
  type: TYPE_NORMAL
- en: Azure App Services - Activity log
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Activity log shows what actions have been performed in the Azure web application
    based on Subscription, Resource group, Resource, Resource type, Operation, Timespan,
    Event category, Event severity, and Event initiated by:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00013.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: We can see different operations, such as update, write, and delete operations.
  prefs: []
  type: TYPE_NORMAL
- en: Azure Application Insights for application monitoring
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the Azure resource management portal, go to Azure App Services, select the
    Azure web application, and go to the MONITORING section; click on Application
    Insights.
  prefs: []
  type: TYPE_NORMAL
- en: 'Application Insights helps us to identify and diagnose issues in Azure web
    applications. When we create an Azure web application, we have the option to create
    Application Insights associated with the Azure web application; if we haven''t
    done it, then we can create a new Application Insights resource too for our Azure
    web application:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00315.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Once the Application Insights resource is created, we can access it from the
    Azure web application also. Let's try to check the availability of the Azure web
    application from different regions.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the INVESTIGATE tab, click on Availability. There is no web test or data
    available:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00056.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s add a web test. Click on +Add web test. Provide Test name, URLping test
    in Test type, and URL to test the availability:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00065.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'In Test frequency, select 5 minutes, and in Test locations, select any five
    locations from where we want to test the availability of an Azure web application:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00046.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Set HTTP response: 200 as Success criteria and Alerts also. After all these
    configurations, click on Create:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00169.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'It will start pinging the Azure web application after some time, from the time
    zone we have configured in the web test. We can see TOTAL SUCCESSFUL TESTS, TOTAL
    FAILED TESTS, AVERAGE RESPONSE TIME, and other details:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00072.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: In the Application Insights portal, we can see the history of web tests as well.
  prefs: []
  type: TYPE_NORMAL
- en: Azure web application monitoring
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We have seen different types of log files in the Kudu editor. Let's see them
    in the Azure portal.
  prefs: []
  type: TYPE_NORMAL
- en: Diagnostics logs
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To enable or disable diagnostics logs, we need to go to Azure App Services
    in the Azure portal, click on the MyPetClinic Azure web application, and, in the
    MONITORING section, click on Diagnostics logs:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00196.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'We can enable or disable different kinds of logs based on the need and environment:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00209.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: Once changes are done, click on the Save button.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Security and monitoring are concepts that are too vast to be accommodated in
    one chapter, as they cover different aspects at huge length.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we have covered some aspects of user management and monitoring
    in Jenkins and VSTS. We have also covered how to diagnose a problem and troubleshoot
    it in Microsoft Azure App Services or Azure Web Apps.
  prefs: []
  type: TYPE_NORMAL
- en: This is the end of our journey in this book; however, there is no end to education.
  prefs: []
  type: TYPE_NORMAL
- en: 'The famous quote from Jiddu Krishnamurti says:'
  prefs: []
  type: TYPE_NORMAL
- en: '"There is no end to education. It is not that you read a book, pass an examination,
    and finish with education. The whole of life, from the moment you are born to
    the moment you die, is a process of learning"'
  prefs: []
  type: TYPE_NORMAL
- en: This book was downloaded from AvaxHome!
  prefs: []
  type: TYPE_NORMAL
- en: 'Visit my blog with more new books:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://avxhm.se/blogs/AlenMiler](https://tr.im/avaxhome)'
  prefs: []
  type: TYPE_NORMAL
