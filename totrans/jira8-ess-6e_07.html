<html><head></head><body>
		<div><h1 id="_idParaDest-187" class="chapter-number"><a id="_idTextAnchor187"/>7</h1>
			<h1 id="_idParaDest-188"><a id="_idTextAnchor188"/>Workflow and Business Process</h1>
			<p>In the previous chapters, we learned some of the basics of Jira and how to customize its data collection and presentation with custom fields and screens. In this chapter, we will dive in and take a look at workflows, one of the core and most powerful features of Jira.</p>
			<p>A workflow controls how issues in Jira move from one status to another as they are being worked on, often passing from one assignee to another. Unlike many other systems, Jira allows you to create your own workflows to resemble your processes.</p>
			<p>By the end of this chapter, you will have learned the following:</p>
			<ul>
				<li>What a workflow is and what it consists of</li>
				<li>The relationship between workflows and screens</li>
				<li>What statuses, transitions, conditions, validators, and post functions are</li>
				<li>How to create your own workflow with the workflow designer</li>
				<li>How to associate a workflow with projects</li>
			</ul>
			<p>Specifically, we will look at the following topics:</p>
			<ul>
				<li>Mapping business processes</li>
				<li>Understanding workflows</li>
				<li>Managing workflows</li>
				<li>Using the workflow designer</li>
				<li>Authoring a workflow</li>
				<li>Updating an existing workflow</li>
				<li>Understanding workflow schemes</li>
				<li>Applying a workflow scheme to projects</li>
				<li>Delegated workflow management</li>
				<li>Extending a workflow with workflow add-ons</li>
				<li>The <strong class="bold">human resources</strong> (<strong class="bold">HR</strong>) project</li>
			</ul>
			<h1 id="_idParaDest-189"><a id="_idTextAnchor189"/>Mapping business processes</h1>
			<p>It is often said that a good software system is one that adapts to your business and not one that requires your <a id="_idIndexMarker463"/>business to adapt to the software. Jira is an excellent example of the former. The power of Jira is that you can easily configure it to model your existing business processes through the use of workflows.<a id="_idTextAnchor190"/></p>
			<p>A business process flow can often be represented as a flow chart. For example, a typical approval flow may include tasks such as approval submission, approval review, and—finally—approval or rejection of the request, where the user needs to follow these tasks in sequential order. You can easily implement this as a Jira workflow. Each task will be represented as a workflow status, with transitions guiding you on how you can move from one status to the next. In fact, when working with workflows, it is often a good approach to first draft the logical flow of the process as a flow chart and then implement it as a workflow. As we will see, Jira provides many tools to help you visualize your workflows.</p>
			<p>Now that we have briefly seen how you can map a normal business process to a Jira workflow, it is time to take a closer look at the components of a workflow and how you can create your own workflows.</p>
			<h1 id="_idParaDest-190"><a id="_idTextAnchor191"/>Understanding workflows</h1>
			<p>A workflow is what Jira uses to model business processes. It is a flow of statuses (steps) that issues go through <a id="_idIndexMarker464"/>one by one, with paths between the statuses (transitions). All issues in Jira have a workflow applied, based on their issue type and project. Issues move through workflows from one status (for example, <strong class="bold">Open</strong>) to another (for example, <strong class="bold">Closed</strong>). Jira allows you to visualize and design workflows as a diagram, as shown here:</p>
			<div><div><img src="img/Figure_7.01_B18644.jpg" alt="Figure 7.1 – Jira workflow&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.1 – Jira workflow</p>
			<p>The preceding diagram shows a simple workflow in Jira. The rectangles represent the statuses, and the arrow lines represent transitions that link statuses together. As you can see, this looks a lot like a normal flow chart depicting the flow of a process.</p>
			<p>Also, notice that statuses have different colors. The color of a status is determined by the category it belongs to. There are three categories—<strong class="bold">To Do</strong> (gray), <strong class="bold">In Progress</strong> (blue), and <strong class="bold">Done</strong> (green). Categories help you to easily identify where along the workflow an issue is by using color as an indicator.</p>
			<p>Issues in Jira, starting from when they are created, go through a series of steps identified as issue <a id="_idIndexMarker465"/>statuses, such as <strong class="bold">In Progress</strong> and <strong class="bold">Closed</strong>. These movements are often triggered by user interactions. For example, when a user clicks on the <strong class="bold">Start Progress</strong> link, the issue is transitioned to the <strong class="bold">In Progress</strong> status, as shown in the following screenshot:</p>
			<div><div><img src="img/Figure_7.02_B18644.jpg" alt="Figure 7.2 – Transition options for issue&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.2 – Transition options for issue</p>
			<p>There is a definitive start of a workflow, which is when an issue is first created, but the end of a workflow can sometimes be ambiguous. For example, in the default workflow, issues can go from <strong class="bold">OPEN</strong> to <strong class="bold">CLOSED</strong> to <strong class="bold">REOPENED</strong> and back to <strong class="bold">CLOSED</strong>. By convention, when people talk about the end of a workflow, they are usually referring to a status named <strong class="bold">CLOSED</strong> or the status where issues are given a resolution. Once a resolution is given, the issue comes to a logical end. Several built-in features of Jira follow this convention; for example, issues with resolutions set will not be displayed on the <strong class="bold">Assigned to Me</strong> list on the home page.</p>
			<p>For this reason, when you close an issue, you should either prompt the user to select a resolution value by having it on a screen or automatically set the resolution value via a post function (post functions are covered later in this chapter). When you reopen an issue, you should also <a id="_idIndexMarker466"/>clear the resolution value from the issue, and this is usually done automatically via a post function as well.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">When work for an issue is completed, it should be given a resolution.</p>
			<h1 id="_idParaDest-191"><a id="_idTextAnchor192"/>Managing workflows</h1>
			<p>Workflows are <a id="_idIndexMarker467"/>controlled and managed centrally from the Jira administration console, so you need to be an administrator to create and configure workflows. To manage workflows, perform the following steps:</p>
			<ol>
				<li>Log in to Jira as a Jira administrator.</li>
				<li>Browse to the Jira administration console.</li>
				<li>Select the <strong class="bold">Issues</strong> tab and then the <strong class="bold">Workflows</strong> option. This will bring up the <strong class="bold">View Workflows</strong> page:</li>
			</ol>
			<div><div><img src="img/Figure_7.03_B18644.jpg" alt="Figure 7.3 – Workflow list page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.3 – Workflow list page</p>
			<p>From the <strong class="bold">View Workflows</strong> page, you will be able to manage all the available workflows and create new workflows. The page is divided into two sections, <strong class="bold">Active</strong> and <strong class="bold">Inactive</strong>. Active workflows are being used by projects, and inactive ones are not. By default, the <strong class="bold">Inactive</strong> section is collapsed, so the page will only display active workflows. The preceding screenshot shows both the sections being expanded.</p>
			<p>Jira comes with a default read-only workflow called <code>jira</code>, mostly used to remain backward compatible with existing projects, and this is applied to projects that do not have any specific workflow applied. For this reason, you cannot edit or delete this workflow. New projects <a id="_idIndexMarker468"/>will have their own workflows created based on the template selected. These project-specific workflows will have their names start with the project key, followed by the project’s template, such as <code>HR: Task Management Workflow</code>.</p>
			<h2 id="_idParaDest-192"><a id="_idTextAnchor193"/>Issue statuses</h2>
			<p>In a Jira workflow, an issue status represents a state in the workflow for an issue. It describes the current <a id="_idIndexMarker469"/>status of the issue. If we compare it to a flow chart, the <a id="_idIndexMarker470"/>highlighted rectangle indicates the current status of the issue along the process. Just as a task can only be in one stage of a business process, an issue can be in only one status at any given time; for example, an issue cannot be both open and closed at the same time.</p>
			<p>There is also a term called <strong class="bold">step</strong>, which is the workflow term for statuses. Since Jira has simplified its workflow <a id="_idIndexMarker471"/>administration, step and status can be used interchangeably. For consistency, we will be using the term <strong class="bold">status</strong> in this book, unless a separation needs to be made in special cases.</p>
			<h2 id="_idParaDest-193"><a id="_idTextAnchor194"/>Transitions</h2>
			<p>Statuses represent stages in a workflow, and the path that takes an issue from one status to the next is known as a <strong class="bold">transition</strong>. A transition links two statuses together. A transition cannot <a id="_idIndexMarker472"/>exist on its own, meaning it must have a start and finish status and can <a id="_idIndexMarker473"/>only have one of each. This means that a transition cannot conditionally split off to different destination statuses. Transitions are also one-way only. This means that if a transition takes an issue from status <em class="italic">A</em> to status <em class="italic">B</em>, you must create a new transition if you want to go back from status <em class="italic">B</em> to status <em class="italic">A</em>.</p>
			<p>Transitions have <a id="_idIndexMarker474"/>several components. These are set out here:</p>
			<ul>
				<li><strong class="bold">Conditions</strong>: Criteria must be met before a transition is available (visible) for users to execute. These are usually used to control permissions around how users can execute a transition.</li>
				<li><strong class="bold">Validators</strong>: These are the verifications that must pass before a transition can be executed. They are usually used together with transition screens.</li>
				<li><strong class="bold">Post functions</strong>: These are additional functions to be performed as part of the transition process.</li>
				<li><strong class="bold">Transition screen</strong>: This is an optional screen to be displayed when a user is executing a transition. It is usually used to capture additional information as a part of the transition.</li>
				<li><strong class="bold">Triggers</strong>: If you have integrated Jira with other development tools such as Bitbucket or GitHub, triggers <a id="_idIndexMarker475"/>can automatically execute a transition when an event happens, such as the creation of a new branch or when someone makes a code commit.</li>
			</ul>
			<p class="callout-heading">Important note</p>
			<p class="callout">A common trick is to create a transition that links back to itself. Since a transition can have its own screen and execute some business logic via post functions, you can use this kind of transition as a trigger in the <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>) to show a screen or run a post function without <a id="_idIndexMarker476"/>having to create complex customizations.</p>
			<p>Each of the first three <a id="_idIndexMarker477"/>components defines the behavior of transitions, allowing you to perform pre- and post-validations, as well as post-execution processing on transition execution. We will discuss these components in depth in the following sections.</p>
			<h3>Triggers</h3>
			<p>As described earlier, Jira <a id="_idIndexMarker478"/>needs to be integrated with one <a id="_idIndexMarker479"/>of the following systems before you can start using triggers:</p>
			<ul>
				<li>Atlassian Bitbucket</li>
				<li>Atlassian FishEye/Crucible</li>
				<li>GitHub</li>
			</ul>
			<p>Triggers will listen for changes from the integrated development tools, such as code commits, and when these happen, the trigger will automatically execute the workflow transition. Note that all permissions are ignored when this happens.</p>
			<h3>Conditions</h3>
			<p>Sometimes, you might want to have control over who can execute a transition or when a transition can be executed. For example, a transition to authorize an issue should be restricted to users in the managers group so that normal employees will not be able to authorize their own requests. This is where conditions come in.</p>
			<p><strong class="bold">Conditions</strong> are criteria <a id="_idIndexMarker480"/>that must be fulfilled before the user is allowed to execute a transition. If the conditions on transitions are not met, the transition will not be available to the user when <a id="_idIndexMarker481"/>viewing the issue. The following table shows a list of conditions that are shipped with Jira; other conditions can be added via third-party add-ons:</p>
			<div><div><table id="table001-4" class="No-Table-Style">
						<colgroup>
							<col/>
							<col/>
						</colgroup>
						<thead>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Condition</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Description</strong></p>
								</td>
							</tr>
						</thead>
						<tbody>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Code Committed Condition</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This allows a transition to execute only if the code has/has not (depending on configuration) been committed against this issue.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Hide Transition from User</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This will hide the transition from all users, and it can only be triggered by post functions. This is useful in situations where a transition will be triggered as part of an automated process rather than manually by a user.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">No Open Reviews Condition</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This allows a transition to execute only if there are no related open Crucible reviews.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Only Assignee Condition</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This only allows the issue’s current assignee to execute the transition.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Only Reporter Condition</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This only allows the issue’s reporter to execute the transition.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Permission Condition</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This only allows users with the given permission to execute the transition.</p>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<table id="table002-2" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">Condition</strong></p>
						</td>
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">Description</strong></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">Sub-Task Blocking Condition</strong></p>
						</td>
						<td class="No-Table-Style T---Body">
							<p>This blocks the parent issue transition depending on all its subtasks’ statuses.</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">Unreviewed Code Condition</strong></p>
						</td>
						<td class="No-Table-Style T---Body">
							<p>This allows a transition to execute only if there are no unviewed changesets related to this issue.</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">User Is In Group</strong></p>
						</td>
						<td class="No-Table-Style T---Body">
							<p>This only allows users in a given group to execute the transition.</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">User Is In Group Custom Field</strong></p>
						</td>
						<td class="No-Table-Style T---Body">
							<p>This only allows users in a given group custom field to execute a transition.</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style T---Body">
							<p><strong class="bold">User Is In Project Role</strong></p>
						</td>
						<td class="No-Table-Style T---Body">
							<p>This only allows users in a given project role to execute a transition.</p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 7.1 – Workflow conditions</p>
			<h3>Validators</h3>
			<p>Validators are similar <a id="_idIndexMarker482"/>to conditions, but they validate certain criteria before allowing a transition to complete. While conditions will hide a workflow transition from the user if its criteria are not <a id="_idIndexMarker483"/>met, validators will allow the user to see the transition but not allow the transition to execute if its criteria are not met.</p>
			<p>The most common use case for validators is to validate the user input during a transition. For example, you can validate if the user has entered data for all fields presented on the workflow screen. The following table shows a list of validators that come shipped with Jira; other validators can be added via third-party add-ons:</p>
			<div><div><table id="table003-2" class="T---Table">
						<colgroup>
							<col/>
							<col/>
						</colgroup>
						<tbody>
							<tr class="T---Table">
								<td class="T---Table T---Body">
									<p><strong class="bold">Validator</strong></p>
								</td>
								<td class="T---Table T---Body">
									<p><strong class="bold">Description</strong></p>
								</td>
							</tr>
							<tr class="T---Table">
								<td class="T---Table T---Body">
									<p><strong class="bold">Permission Validator</strong></p>
								</td>
								<td class="T---Table T---Body">
									<p>This validates that the user has the selected permission. This is useful when checking whether the person who has executed a transition has the required permissions.</p>
								</td>
							</tr>
							<tr class="T---Table">
								<td class="T---Table T---Body">
									<p><strong class="bold">User Permission Validator</strong></p>
								</td>
								<td class="T---Table T---Body">
									<p>This validates that the user has the selected permission where the <code>OSWorkflow</code> variable holding the username is configurable. This is obsolete.</p>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<p class="IMG---Figure">Table 7.2 – Workflow validators</p>
			<h3>Post functions</h3>
			<p>As the name suggests, post functions are functions that occur after (post) a transition has been executed. This <a id="_idIndexMarker484"/>allows you to perform additional processes <a id="_idIndexMarker485"/>once you have executed a transition. Jira makes heavy use of post functions internally to perform a lot of its functions. For example, when you transition an issue, Jira uses post functions to update its search indexes so that your search results will reflect the change in issue status.</p>
			<p>If a transition has failed to execute (for example, failing validation from validators), post functions attached to the transition will not be triggered. The following table shows a list of post functions that come shipped with Jira, and other post functions can be added via third-party add-ons:</p>
			<div><div><table id="table004-2" class="No-Table-Style">
						<colgroup>
							<col/>
							<col/>
						</colgroup>
						<tbody>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Post function</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Description</strong></p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Assign to Current User</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This assigns the issue to the current user if the current user has the assignable user permission.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Assign to Lead Developer</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This assigns the issue to the project/component lead developer.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Assign to Reporter</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This assigns the issue to the reporter.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Create Perforce Job Function</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This creates a Perforce job (if required) after completing the workflow transition.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Notify HipChat</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This sends a notification to one or more HipChat rooms.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Trigger a Webhook</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>If this post function is executed, Jira will post the issue content in <strong class="bold">JavaScript Object Notation</strong> (<strong class="bold">JSON</strong>) format to the <strong class="bold">Uniform Resource Locator</strong> (<strong class="bold">URL</strong>) specified.</p>
								</td>
							</tr>
							<tr class="No-Table-Style">
								<td class="No-Table-Style T---Body">
									<p><strong class="bold">Update Issue Field</strong></p>
								</td>
								<td class="No-Table-Style T---Body">
									<p>This updates a system field such as <strong class="bold">Summary</strong> to a given value.</p>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 7.3 – Workflow post functions</p>
			<p>We have looked at <a id="_idIndexMarker486"/>all the main components in <a id="_idIndexMarker487"/>a workflow. In the next section, we will look at how to design a workflow using the workflow designer tool.</p>
			<h1 id="_idParaDest-194"><a id="_idTextAnchor195"/>Using the workflow designer</h1>
			<p>Jira comes with a <a id="_idIndexMarker488"/>simple-to-use drag and drop tool called the <strong class="bold">workflow designer</strong>. This helps <a id="_idIndexMarker489"/>you create and configure workflows. If you are familiar with diagramming tools such as Microsoft Visio, you will feel right at home. There is also another older option, called <strong class="bold">text mode</strong>, available. However, since the <a id="_idIndexMarker490"/>designer is easier and has more features, we will focus on using the designer in this book.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">As your workflow becomes more complicated, text mode can be a better option to manage statuses and transitions in the workflow.</p>
			<p>The workflow designer is shown in the following screenshot. You have the workflow layout in the main panel and a few controls on top, namely the <strong class="bold">Add status</strong> and <strong class="bold">Add transition</strong> buttons. Note that the <strong class="bold">Diagram</strong> option is selected. If you click on the <strong class="bold">Text</strong> option, Jira will change to the old authoring tool:</p>
			<div><div><img src="img/Figure_7.04_B18644.jpg" alt="Figure 7.4 – Workflow designer&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.4 – Workflow designer</p>
			<p>From the workflow designer, you can drag and rearrange statuses and transitions. Clicking on <a id="_idIndexMarker491"/>each will open up its property window, as shown in the following screenshot, where the <strong class="bold">Resolve Issue</strong> transition is selected:</p>
			<div><div><img src="img/Figure_7.05_B18644.jpg" alt="Figure 7.5 – Editing a workflow&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.5 – Editing a workflow</p>
			<p>From here, we can view and update its properties, such as conditions and validators. If you have a complex <a id="_idIndexMarker492"/>workflow and the property window covers part of your workflow, you can either zoom out to reduce the size of the workflow diagram or drag the diagram around the page.</p>
			<h1 id="_idParaDest-195"><a id="_idTextAnchor196"/>Authoring a workflow</h1>
			<p>So, let’s take a look at <a id="_idIndexMarker493"/>how to create and set up a new workflow in Jira. To create a new workflow, all you need is a name and description, so let’s get started:</p>
			<ol>
				<li value="1">Browse to the <strong class="bold">View Workflows</strong> page.</li>
				<li>Click on the <strong class="bold">Add Workflow</strong> button.</li>
				<li>Enter a name and description for the new workflow in the <strong class="bold">Add Workflow</strong> dialog.</li>
				<li>Click on the <strong class="bold">Add</strong> button to create the workflow.</li>
			</ol>
			<p>The newly created workflow will only contain the default <strong class="bold">Create</strong> and <strong class="bold">Open</strong> statuses, so you will need to configure it by adding new statuses and transitions to make it useful. Let’s start by adding new statuses to the workflow using the following steps:</p>
			<ol>
				<li value="1">Click on the <strong class="bold">Add status</strong> button.</li>
				<li>Select an existing status from the drop-down list. If the status you need does not exist, you can create a new status by entering its name and pressing the <em class="italic">Enter</em> key on your keyboard.</li>
				<li>Check the <strong class="bold">Allow all statuses to transition to this one</strong> option if you want users to be able to move the issue into this status regardless of its current status. This will create a global transition, which is a convenient option, so you do not have to manually create multiple transitions for the status.</li>
			</ol>
			<p class="callout-heading">Important note</p>
			<p class="callout">If the global status is not representing a <strong class="bold">Done</strong> or <strong class="bold">Closed</strong> status, it is often a good idea to add a <strong class="bold">Clear Resolution</strong> post function to make sure the resolution field is always cleared when the issue is transitioned into the status.</p>
			<ol>
				<li value="4">Click on the <strong class="bold">Add</strong> button to add the status to your workflow, as illustrated in the following screenshot. You <a id="_idIndexMarker494"/>can repeat these steps to add as many statuses as you want to your workflow:</li>
			</ol>
			<div><div><img src="img/Figure_7.06_B18644.jpg" alt="Figure 7.6 – Adding a status&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.6 – Adding a status</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Try to reuse existing statuses, if possible, so that you do not end up with many similar statuses to manage.</p>
			<p>Now that the statuses are added to the workflow, they need to be linked with transitions so that issues can move from one status to the next. There are two ways to create a transition, as follows:</p>
			<ul>
				<li>Click on the <strong class="bold">Add transition</strong> button</li>
				<li>Select the originating status and then click and drag the arrow to the destination status</li>
			</ul>
			<p>Both options will <a id="_idIndexMarker495"/>bring up the <strong class="bold">Add Transition</strong> dialog, as shown in the following screenshot:</p>
			<div><div><img src="img/Figure_7.07_B18644.jpg" alt="Figure 7.7 – Add Transition dialog&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.7 – Add Transition dialog</p>
			<p>From the preceding screenshot, you can choose to either create a new transition with the <strong class="bold">New Transition</strong> tab or use an existing transition with the <strong class="bold">Reuse a transition</strong> tab.</p>
			<p>When creating a new transition, you will need to configure the following settings:</p>
			<ul>
				<li><strong class="bold">From status</strong>: This is the originating status. The transition will be available when the issue is in the selected status.</li>
				<li><strong class="bold">To status</strong>: This is the destination status. Once the transition is executed, the issue will be put into the selected status.</li>
				<li><code>Close Issue</code>.</li>
				<li><strong class="bold">Description</strong>: This is an optional text description showing the purpose of this transition. This will not be displayed to users.</li>
				<li><strong class="bold">Screen</strong>: This is an optional intermediate screen to be displayed when users execute the transition. For example, you display a screen to capture additional data as part of the transition. If you <a id="_idIndexMarker496"/>do not select a screen, the transition will be executed immediately. The following screenshot shows a workflow screen:</li>
			</ul>
			<div><div><img src="img/Figure_7.08_B18644.jpg" alt="Figure 7.8 – Transition screen&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.8 – Transition screen</p>
			<p>If you want to reuse an existing transition, simply click on the <strong class="bold">Reuse a transition</strong> tab, <strong class="bold">From status</strong> and <strong class="bold">To status</strong>, and <strong class="bold">Transition to reuse</strong>, as shown in the following screenshot:</p>
			<div><div><img src="img/Figure_7.09_B18644.jpg" alt="Figure 7.9 – Reuse a transition tab&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.9 – Reuse a transition tab</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Note that Jira will only list valid transitions based on the <strong class="bold">To status</strong> selection.</p>
			<p>You might be wondering when you should create a new transition and when you should reuse an existing transition. The big difference between the two is that when you reuse a transition, all instances <a id="_idIndexMarker497"/>of the reused transition (also known as the <code>Close Issue</code>; instead of creating separate transitions each time, you can create one transition and reuse it whenever you need a transition to close an issue. Later on, if you need to add a new validator to the transition to validate additional user input, you will only need to make the change once, rather than multiple times for each <code>Close Issue</code> transition.</p>
			<p>Another good practice to keep in mind is to not have a <em class="italic">dead-end</em> state in your workflow—for example, by allowing closed issues to be reopened. This will prevent users from accidentally closing an issue and not being able to correct the mistake.</p>
			<p>One thing people often overlook is that you can change the status an issue is transitioned to when it is first created. By default, an issue is placed in the <code>Create Issue</code> transition. By doing so, you can influence the issue creation process. For example, you can add a validator to it for additional checking before an issue is <a id="_idIndexMarker499"/>allowed to be created, or add a post function to perform additional tasks as soon as an issue is created.</p>
			<p>Now that we have seen how to add new statuses and transitions to a workflow, let’s look at adding triggers, conditions, validators, and post functions to a transition.</p>
			<h2 id="_idParaDest-196"><a id="_idTextAnchor197"/>Adding a trigger to transitions</h2>
			<p>You can only <a id="_idIndexMarker500"/>add triggers to transitions if Jira is integrated <a id="_idIndexMarker501"/>with at least one of the supported <a id="_idIndexMarker502"/>development tools. With triggers, you can <a id="_idIndexMarker503"/>automate some of your <strong class="bold">development-operations</strong> (<strong class="bold">DevOps</strong>) flow, such as automatically transitioning an issue into <a id="_idIndexMarker504"/>an <strong class="bold">In Review</strong> status when a <strong class="bold">pull request</strong> (<strong class="bold">PR</strong>) is created. To add triggers, perform the following steps:</p>
			<ol>
				<li value="1">Select a transition you want to add triggers to.</li>
				<li>Click on the <strong class="bold">Triggers</strong> link.</li>
				<li>Click on the <strong class="bold">Add trigger</strong> button. If you do not have any integrated development tools, this button will be disabled, as indicated in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Figure_7.10_B18644.jpg" alt="Figure 7.10 – Add trigger button&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.10 – Add trigger button</p>
			<ol>
				<li value="4">Select <a id="_idIndexMarker505"/>a trigger you want to add and click <a id="_idIndexMarker506"/>on the <strong class="bold">Next</strong> button.</li>
				<li>Confirm the <a id="_idIndexMarker507"/>trigger source is detected and click on the <strong class="bold">Add trigger</strong> button.</li>
			</ol>
			<h2 id="_idParaDest-197"><a id="_idTextAnchor198"/>Adding a condition to transitions</h2>
			<p>New transitions <a id="_idIndexMarker508"/>do not have any conditions by default. This means <a id="_idIndexMarker509"/>that anyone who has access to the <a id="_idIndexMarker510"/>issue will be able to execute the transition. Jira allows you to add any number of conditions to the transition. Here’s how to do this:</p>
			<ol>
				<li value="1">Select a transition you want to add conditions to.</li>
				<li>Click on the <strong class="bold">Conditions</strong> link.</li>
				<li>Click on the <strong class="bold">Add condition</strong> link, as shown in the following screenshot. This will bring you to the <strong class="bold">Add Condition To Transition</strong> page, which lists all the available conditions you can add:</li>
			</ol>
			<div><div><img src="img/Figure_7.11_B18644.jpg" alt="Figure 7.11 – Add condition link&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.11 – Add condition link</p>
			<ol>
				<li value="4">Select a condition you want to add.</li>
				<li>Click on the <strong class="bold">Add</strong> button to add the condition.</li>
				<li>Depending on the condition, you may be presented with the <strong class="bold">Add Parameters To Condition</strong> page <a id="_idIndexMarker511"/>where you can specify <a id="_idIndexMarker512"/>configuration options for the condition. For <a id="_idIndexMarker513"/>example, the <strong class="bold">User Is In Group</strong> condition will ask you to select a group to check against, shown as follows:</li>
			</ol>
			<div><div><img src="img/Figure_7.12_B18644.jpg" alt="Figure 7.12 – Configuring a condition&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.12 – Configuring a condition</p>
			<p>Newly added conditions are appended to the end of the existing list of conditions, creating a <code>AND</code> operator is used to group the conditions. This means that all conditions must pass for the entire condition group to pass. If one condition fails, the entire group fails, and the user will not be able to execute the transition. You can switch to using a logical <code>OR</code> operator, which means only one of the conditions in the group needs to pass for the entire group to pass. This is a very useful feature as it allows you to combine multiple conditions to form a more complex logical unit.</p>
			<p>For example, the <code>AND</code> operator, you can add multiple <code>OR</code> operator, then <a id="_idIndexMarker516"/>the user will only need to belong to one of the listed groups. The only restriction to this is that you cannot use both operators for the same condition group.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">One transition can only have one condition group, and each conditional group can only have one logical operator.</p>
			<h2 id="_idParaDest-198"><a id="_idTextAnchor199"/>Adding a validator to transitions</h2>
			<p>As with <a id="_idIndexMarker517"/>conditions, transitions by default do not <a id="_idIndexMarker518"/>have any validators associated. This means that <a id="_idIndexMarker519"/>transitions are completed as soon as they are executed. You can add validators to transitions to make sure that executions are only allowed to be complete when certain criteria are met. Use the following steps to add a validator to a transition:</p>
			<ol>
				<li value="1">Select a transition you want to add conditions to.</li>
				<li>Click on the <strong class="bold">Validators</strong> link.</li>
				<li>Click on the <strong class="bold">Add validator</strong> link, as shown in the following screenshot. This will bring you to the <strong class="bold">Add Validator To Transition</strong> page, which lists all the available validators you can add:</li>
			</ol>
			<div><div><img src="img/Figure_7.13_B18644.jpg" alt="Figure 7.13 – Add validator link&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.13 – Add validator link</p>
			<ol>
				<li value="4">Select a validator you want to add.</li>
				<li>Click on the <strong class="bold">Add</strong> button to add the validator.</li>
				<li>Depending on the validator, you may be presented with the <strong class="bold">Add Parameters To Validator</strong> page where you can specify configuration options for the validator. The <a id="_idIndexMarker520"/>following screenshot shows an <a id="_idIndexMarker521"/>example from the <strong class="bold">Fields required</strong> validator:</li>
			</ol>
			<div><div><img src="img/Figure_7.14_B18644.jpg" alt="Figure 7.14 – Configuring validators&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.14 – Configuring validators</p>
			<p>Similar to conditions, when there are multiple validators added to a transition, they form a validator group. Unlike conditions, you can only use a logical <code>AND</code> condition for the group. This means that in order to complete a transition, every validator added to the transition must pass its validation criteria. Transitions cannot selectively pass validations using a logical <code>OR</code> condition.</p>
			<p>The following screenshot shows a validator (the <strong class="bold">Fields required</strong> validator from <strong class="bold">Suite Utilities for Jira</strong> (<strong class="bold">JSU</strong>); refer <a id="_idIndexMarker522"/>to the <em class="italic">Extending a workflow with workflow add-ons</em> section) being placed on the transition, which validates whether <a id="_idIndexMarker523"/>the user has entered a value for the <strong class="bold">Resolution Details</strong> field:</p>
			<div><div><img src="img/Figure_7.15_B18644.jpg" alt="Figure 7.15 – Issue Fields required validator&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.15 – Issue Fields required validator</p>
			<h2 id="_idParaDest-199"><a id="_idTextAnchor200"/>Adding a post function to transitions</h2>
			<p>Transitions, by <a id="_idIndexMarker524"/>default, are created with <a id="_idIndexMarker525"/>several post functions. These post functions <a id="_idIndexMarker526"/>provide key services to Jira internal operations, so they cannot be deleted from the transition. These post functions perform the following operations:</p>
			<ul>
				<li>Set the issue status to the linked status of the destination workflow step</li>
				<li>Add a comment to an issue if one is entered during a transition</li>
				<li>Update the change history for an issue and store the issue in the database</li>
				<li>Re-index an issue to keep indexes in sync with the database</li>
				<li>Fire an event that can be processed by the listeners</li>
			</ul>
			<p>As you can see, these post functions provide some of the basic functions such as updating a search <a id="_idIndexMarker527"/>index and setting an issue’s status after <a id="_idIndexMarker528"/>transition execution, which is <a id="_idIndexMarker529"/>essential in Jira. Therefore, instead of letting users manually add them in and risk the possibility of leaving one or more out, Jira adds them for you automatically when you create a new transition, as described in the following steps:</p>
			<ol>
				<li value="1">Select a transition you want to add post functions to.</li>
				<li>Click on the <strong class="bold">Post Functions</strong> link.</li>
				<li>Click on the <strong class="bold">Add post function</strong> link, as illustrated in the following screenshot, and select a post function you want to add:</li>
			</ol>
			<div><div><img src="img/Figure_7.16_B18644.jpg" alt="Figure 7.16 – Add post function link&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.16 – Add post function link</p>
			<ol>
				<li value="4">Click on the <strong class="bold">Add</strong> button to add the post function.</li>
				<li>Depending <a id="_idIndexMarker530"/>on the post function, you <a id="_idIndexMarker531"/>may be presented with an <strong class="bold">Add Parameters To Function</strong> page where you can specify configuration options for <a id="_idIndexMarker532"/>the post function. The following screenshot shows an example from the <strong class="bold">Update Issue Field</strong> post function:</li>
			</ol>
			<div><div><img src="img/Figure_7.17_B18644.jpg" alt="Figure 7.17 – Configuring post function&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.17 – Configuring post function</p>
			<p>When a transition is executed, each post function is executed sequentially as it appears in the list, from top to bottom. If any post function in the list encounters an error during processing, you will receive an error, and the remaining post functions will not be executed.</p>
			<p>Since post functions are executed sequentially and some of them possess the ability to modify values and perform other tasks, their sequence of execution often becomes very important. For example, if you have a post function that changes the issue’s assignee to the current user and another post function that updates an issue field’s value with the issue’s assignee, obviously the update assignee post function needs to occur first, so you need to make sure that it is above the other post function.</p>
			<p>You can move <a id="_idIndexMarker533"/>the position of post functions up <a id="_idIndexMarker534"/>and down along the list by clicking on the <strong class="bold">Move Up</strong> and <strong class="bold">Move Down</strong> links. Note that not all post functions can be repositioned, such as the <strong class="bold">Re-index issue</strong> and <strong class="bold">Fire event issue</strong> post functions. They are locked in their positions to ensure <a id="_idIndexMarker535"/>data integrity is maintained in Jira.</p>
			<h1 id="_idParaDest-200"><a id="_idTextAnchor201"/>Updating an existing workflow</h1>
			<p>Jira lets you make <a id="_idIndexMarker536"/>changes to both active and inactive workflows. However, with active workflows, there are several restrictions, as outlined here:</p>
			<ul>
				<li>Existing workflow steps cannot be deleted</li>
				<li>The associated status for an existing step cannot be edited</li>
				<li>If an existing step has no outgoing transitions, it cannot have any new outgoing transitions added</li>
			</ul>
			<p>If you need to make these changes, you will have to either deactivate the workflow by removing the associations of the workflow with all projects or create a copy of the workflow.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">You can always make a copy of the active workflow, make your changes, and then swap the original with the copied workflow in your workflow scheme.</p>
			<p>When editing an active workflow, you are actually making changes to a draft copy of the workflow created by Jira. None of the changes you make will be applied until you publish your draft.</p>
			<p>Publishing a draft is a very simple process. All you have to do is this:</p>
			<ol>
				<li value="1">Click on the <strong class="bold">Publish Draft</strong> button. You will be prompted if you would like to first create a backup of the original workflow. It is recommended that you create a backup in case you need to undo your changes.</li>
				<li>Select either <code>Sales Workflow 1.0</code>) to keep track of the changes.</li>
				<li>Click on <a id="_idIndexMarker537"/>the <strong class="bold">Publish</strong> button to publish the draft workflow and apply changes, as shown in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Figure_7.18_B18644.jpg" alt="Figure 7.18 – Publish workflow&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.18 – Publish workflow</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Do not forget to publish your draft after you have made your changes.</p>
			<p>Now that we have <a id="_idIndexMarker538"/>covered how to create a workflow, we will look at how to map a workflow to an issue type next.</p>
			<h1 id="_idParaDest-201"><a id="_idTextAnchor202"/>Understanding workflow schemes</h1>
			<p>While workflows define and model business processes, there still needs to be a way to tell Jira the situations <a id="_idIndexMarker539"/>in which to apply the workflows. As with other configurations in Jira, this is achieved through the use of schemes. As we have seen in the previous chapters, schemes act as self-contained, reusable configuration units that associate specific configuration options with projects and, optionally, issue types.</p>
			<p>A workflow scheme establishes the association between workflows and issue types. The scheme can then be applied to multiple projects. Once applied, the workflows within the scheme become active.</p>
			<p>To view and manage workflow schemes, perform the following steps:</p>
			<ol>
				<li value="1">Log in to Jira as a Jira administrator user.</li>
				<li>Browse to the Jira administration console.</li>
				<li>Select the <strong class="bold">Issues</strong> tab and then the <strong class="bold">Workflow schemes</strong> option. This will bring up the <strong class="bold">Workflow schemes</strong> page, as shown in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Figure_7.19_B18644.jpg" alt="Figure 7.19 – Workflow schemes page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.19 – Workflow schemes page</p>
			<p>The <strong class="bold">Workflow schemes</strong> page shows each scheme’s workflow association. For example, in the <a id="_idIndexMarker540"/>preceding screenshot, we can see that for <strong class="bold">ISM: Insight ITSM Workflow Scheme</strong>, the <strong class="bold">Incident</strong> issue type is assigned to <strong class="bold">ISM: Insight ITSM Incident Workflow</strong>, while the <strong class="bold">Change</strong> issue type is assigned to <strong class="bold">ISM: Insight ITSM Change Workflow</strong>.</p>
			<h2 id="_idParaDest-202"><a id="_idTextAnchor203"/>Creating a workflow scheme</h2>
			<p>When a new project <a id="_idIndexMarker541"/>is created, a new workflow scheme will be created automatically for the project, so normally, you will not need to create new workflow schemes. However, there might be times—such as when experimenting with changes to the workflow—when you still want to keep existing configurations untouched as a backup. To create a new workflow scheme, perform the following steps:</p>
			<ol>
				<li value="1">Browse to the <strong class="bold">Workflow schemes</strong> page.</li>
				<li>Click on the <strong class="bold">Add workflow scheme</strong> button. This will take you to the <strong class="bold">Add Workflow Scheme</strong> dialog.</li>
				<li>Enter a name and description for the new workflow scheme. For example, you can choose to name your workflow after the project/issue type it will be applied to.</li>
				<li>Click on the <strong class="bold">Add</strong> button to create the workflow scheme.</li>
			</ol>
			<p>You will be taken back to the <strong class="bold">Workflow schemes</strong> page once the new scheme has been created, and it will be listed in the table of available workflow schemes.</p>
			<p>When you first create a new workflow scheme, the scheme is empty. This means it contains no <a id="_idIndexMarker542"/>associations of workflows and issue types, except the default association called <code>jira</code>). What you need to do next is configure the associations by assigning workflows to issue types.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">You can delete the default <code>jira</code>) association after you have added an association yourself.</p>
			<h2 id="_idParaDest-203"><a id="_idTextAnchor204"/>Configuring a workflow scheme</h2>
			<p>Workflow schemes <a id="_idIndexMarker543"/>contain associations between issue types and workflows. After you have created a workflow scheme, you need to configure and maintain the associations as your requirements change. For example, when a new issue type is added to the projects using the workflow scheme, you may need to add an explicit association for the new issue type.</p>
			<p>To configure a workflow scheme, perform the following steps:</p>
			<ol>
				<li value="1">Browse to the <strong class="bold">Workflow schemes</strong> page.</li>
				<li>Click on the <strong class="bold">Edit</strong> link for the workflow scheme you want to configure. This will take you to the workflow’s details page, as shown in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Figure_7.20_B18644.jpg" alt="Figure 7.20 – Configuring a workflow scheme&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.20 – Configuring a workflow scheme</p>
			<p>From this page, you <a id="_idIndexMarker544"/>will be able to see a list of existing associations, create new associations for issue types, and delete associations that are no longer relevant.</p>
			<h2 id="_idParaDest-204"><a id="_idTextAnchor205"/>Assigning an issue type to a workflow</h2>
			<p>Issue types and workflows have a many-to-one relationship. This means each issue type can be associated <a id="_idIndexMarker545"/>with one and only one workflow. One workflow can be associated with multiple issue types. This rule is applied on a per-workflow scheme basis, so you can have a different association of the same issue type in a different workflow scheme.</p>
			<p>When you add a new association, Jira will list all the issue types and all available workflows. Once you have assigned a workflow to the issue type, it will not appear in the list again until you remove the original association.</p>
			<p>Among the list of issue types, there is an option called <code>jira</code> workflow. As with normal issue types, you can have only one catch-all association.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">If all issue types will be using the same workflow, use the <strong class="bold">All Unassigned Issue Types</strong> option.</p>
			<p>There are two ways to assign a workflow to an issue type. If you want to add an issue type to one of the existing associations, perform the following steps:</p>
			<ol>
				<li value="1">Browse to the workflow scheme’s details page for the workflow scheme you want to configure by clicking on its <strong class="bold">Edit</strong> link.</li>
				<li>Click on the <strong class="bold">Assign</strong> link for the association you want to add an issue type to.</li>
				<li>Select issue types to add from the <strong class="bold">Assign Issue Type to Workflow</strong> dialog.</li>
				<li>Click on the <strong class="bold">Finish</strong> button.</li>
			</ol>
			<p>If you want to create a new association from scratch, perform the following steps:</p>
			<ol>
				<li value="1">Browse to <a id="_idIndexMarker546"/>the workflow scheme’s details page for the workflow scheme you want to configure.</li>
				<li>Select the <strong class="bold">Add Existing</strong> option from the <strong class="bold">Add Workflow</strong> menu. This will bring up the <strong class="bold">Add Existing Workflow</strong> dialog, as shown in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Figure_7.21_B18644.jpg" alt="Figure 7.21 – Adding a workflow to the workflow scheme&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.21 – Adding a workflow to the workflow scheme</p>
			<ol>
				<li value="3">Select a workflow to use and click on the <strong class="bold">Next</strong> button.</li>
				<li>Select issue types to associate with the workflow and click on the <strong class="bold">Finish</strong> button, as illustrated <a id="_idIndexMarker547"/>in the following screenshot. If you select an issue type that is already assigned, it will be removed from the old assignment and added to the currently selected workflow:</li>
			</ol>
			<div><div><img src="img/Figure_7.22_B18644.jpg" alt="Figure 7.22 – Assigning a workflow to an issue type&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.22 – Assigning a workflow to an issue type</p>
			<h2 id="_idParaDest-205"><a id="_idTextAnchor206"/>Editing or deleting an association</h2>
			<p>Once you have <a id="_idIndexMarker548"/>associated an issue type with a workflow in <a id="_idIndexMarker549"/>a scheme, you cannot add a new association for the same issue type. There is also a <strong class="bold">No edit</strong> option to change the association. What you need to do is to delete the existing association and create a new one using the following steps:</p>
			<ol>
				<li value="1">Browse to the workflow scheme’s details page for the workflow scheme you want to configure.</li>
				<li>Click on the <strong class="bold">Remove</strong> link for the association you want to remove.</li>
			</ol>
			<p>Once an association is deleted, you will be able to create a new one for the issue type. If you do not assign a new workflow to the issue type, the workflow with the <strong class="bold">All Unassigned Issue Types</strong> option will be applied.</p>
			<h1 id="_idParaDest-206"><a id="_idTextAnchor207"/>Applying a workflow scheme to projects</h1>
			<p>Workflow <a id="_idIndexMarker550"/>schemes are inactive by default after they are created. This means there are no projects in Jira using the workflow scheme. To activate a workflow scheme, you need to select a scheme and apply it to the project.</p>
			<p>When assigning a workflow scheme to a project, you need to follow four basic steps, as outlined next:</p>
			<ol>
				<li value="1">Browse to the project administration page for the project you want to apply the workflow scheme to.</li>
				<li>Select the <strong class="bold">Workflows</strong> option from the left panel.</li>
				<li>Click on the <strong class="bold">Switch Scheme</strong> button.</li>
				<li>Select a new workflow scheme to use and click on the <strong class="bold">Associate</strong> button.</li>
			</ol>
			<p>On the confirmation page, depending on the differences between the current and new workflow, you will be prompted to make migration decisions for existing issues. For example, if the current workflow has a status called <strong class="bold">Resolved</strong> and the new workflow does not (or it has something equivalent but with a different <strong class="bold">identifier</strong> (<strong class="bold">ID</strong>)), you need to specify the new status to place issues that are currently in the <strong class="bold">Resolved</strong> status. Once mapped, Jira will start migrating existing issues to the new status, as illustrated in the following screenshot:</p>
			<div><div><img src="img/Figure_7.23_B18644.jpg" alt="Figure 7.23 – Mapping workflow statuses&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.23 – Mapping workflow statuses</p>
			<p>The steps are set out here:</p>
			<ol>
				<li value="1">Select new workflow statuses for existing issues that are in statuses that do not exist in the new workflow.</li>
				<li>Click on the <strong class="bold">Associate</strong> button to start the migration.</li>
			</ol>
			<p>Once the migration starts, Jira will display a progress bar showing you the progress. Depending on the <a id="_idIndexMarker551"/>number of issues that need to be migrated, this process may take some time. It is recommended to allocate a time frame to perform this task as it can be quite resource-intensive for large instances.</p>
			<h1 id="_idParaDest-207"><a id="_idTextAnchor208"/>Delegated workflow management</h1>
			<p>Just as we saw in <a href="B18644_06.xhtml#_idTextAnchor154"><em class="italic">Chapter 6</em></a>, <em class="italic">Screen Management</em>, project administrators have also been <a id="_idIndexMarker552"/>empowered to make changes to workflows that are used only by their own projects, instead of having to rely entirely on the Jira administrator.</p>
			<p>There are, however, some restrictions to this, as outlined here:</p>
			<ul>
				<li>Only existing statuses can be used in the workflow</li>
				<li>If the status is already used by an issue in the project, the status cannot be deleted from the workflow</li>
				<li>Transition properties, conditions, validators, and post functions cannot be updated</li>
				<li>The workflow must not be shared with any other projects</li>
				<li>Workflows can only be updated in diagram mode</li>
			</ul>
			<p>This allows you to make changes such as adjusting statuses and transition flow to workflows that are dedicated to a single project, which would normally be the case since new <a id="_idIndexMarker553"/>workflows are automatically created with each new project. To make changes to workflows for your project as a project administrator, perform the following steps:</p>
			<ol>
				<li value="1">Browse to the target project’s administration page.</li>
				<li>Click on the <strong class="bold">Issue types</strong> option from the left panel.</li>
				<li>Select a workflow for the issue type you want to edit and click on the <strong class="bold">Edit</strong> button.</li>
				<li>Click on the <strong class="bold">Publish</strong> button once you are done with your changes. You can see an overview of this in the following screenshot:</li>
			</ol>
			<div><div><img src="img/Figure_7.24_B18644.jpg" alt="Figure 7.24 – Delegated workflow administration&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.24 – Delegated workflow administration</p>
			<p>Now we have <a id="_idIndexMarker554"/>covered all the out-of-the-box workflow features in Jira, let’s take a look at some of the third-party apps you can use to extend what you can do with workflows.</p>
			<h1 id="_idParaDest-208"><a id="_idTextAnchor209"/>Extending a workflow with workflow add-ons</h1>
			<p>There are a <a id="_idIndexMarker555"/>number of very useful add-ons that will provide additional components such as conditions, validators, and post functions. The following sections present some of the most popular workflow-related plugins.</p>
			<h2 id="_idParaDest-209"><a id="_idTextAnchor210"/>JSU</h2>
			<p>You can find a <a id="_idIndexMarker556"/>number of very useful conditions, validators, and post functions with this add-on. For example, the <strong class="bold">Update Issue Field</strong> post function that ships with Jira allows you to update any issue fields such as priority and assignee when a workflow transition completes. The JSU add-on complements this by providing a very similar <strong class="bold">Update Any Issue Field</strong> post function that handles custom fields. There are many other useful components such as the <strong class="bold">Copy Value From Other Field</strong> post <a id="_idIndexMarker557"/>function, which will allow you to implement some amazing logic with your workflow. It is a must-have add-on for any Jira instance. You can find out more at <a href="https://marketplace.atlassian.com/apps/5048/jsu-suite-utilities-for-jira">https://marketplace.atlassian.com/apps/5048/jsu-suite-utilities-for-jira</a>.</p>
			<h2 id="_idParaDest-210"><a id="_idTextAnchor211"/>Jira Workflow Toolbox (JWT)</h2>
			<p>As the name <a id="_idIndexMarker558"/>suggests, this is a workflow toolbox with a rich set of workflow conditions, validators, and post functions intended to fill many gaps when <a id="_idIndexMarker559"/>developing complex workflows. For example, it provides a condition and validator that allows you to specify checking <a id="_idIndexMarker560"/>rules with <strong class="bold">regular expressions</strong> (<strong class="bold">regexes</strong>). You can find out more at <a href="https://marketplace.atlassian.com/apps/29496/jira-workflow-toolbox">https://marketplace.atlassian.com/apps/29496/jira-workflow-toolbox</a>.</p>
			<h2 id="_idParaDest-211"><a id="_idTextAnchor212"/>Jira Misc Workflow Extensions (JMWE)</h2>
			<p>This is another plugin with an assortment of conditions, validators, and post functions. Normal post <a id="_idIndexMarker561"/>functions let you alter the current issue’s field values. This plugin provides post functions that will allow you to set a parent <a id="_idIndexMarker562"/>issue’s field values from subtasks, along with many other features. You can find out more at <a href="https://marketplace.atlassian.com/apps/292/jira-misc-workflow-extensions">https://marketplace.atlassian.com/apps/292/jira-misc-workflow-extensions</a>.</p>
			<h2 id="_idParaDest-212"><a id="_idTextAnchor213"/>Workflow Enhancer for Jira</h2>
			<p>This contains <a id="_idIndexMarker563"/>a variety of validators and conditions around comparisons of the value of a field with another field, and lets you set up validation <a id="_idIndexMarker564"/>logic to compare dates, numeric, and Boolean values; you can find out more at <a href="https://marketplace.atlassian.com/apps/575829/workflow-enhancer-for-jira">https://marketplace.atlassian.com/apps/575829/workflow-enhancer-for-jira</a>.</p>
			<h2 id="_idParaDest-213"><a id="_idTextAnchor214"/>ScriptRunner for Jira</h2>
			<p>This is a very <a id="_idIndexMarker565"/>useful and powerful add-on that allows you to create your own custom conditions, validators, and post functions by writing scripts. This does require you to have some programming <a id="_idIndexMarker566"/>knowledge and a good understanding of Jira’s <strong class="bold">application programming interface</strong> (<strong class="bold">API</strong>). You can <a id="_idIndexMarker567"/>find out more at <a href="https://marketplace.atlassian.com/apps/6820/scriptrunner-for-jira">https://marketplace.atlassian.com/apps/6820/scriptrunner-for-jira</a>.</p>
			<h1 id="_idParaDest-214"><a id="_idTextAnchor215"/>The HR project</h1>
			<p>We have seen the power of workflows and how we can enhance the usefulness of Jira by adapting to <a id="_idIndexMarker568"/>everyday business processes. With our HR project, we have already defined two issue types to represent the onboarding and dismissal of an employee; both of these use the same default workflow with two steps: <strong class="bold">To Do</strong> and <strong class="bold">Done</strong>. So, we will now customize the workflow to represent a real-world HR process.</p>
			<p>Our requirements for the business process would then include the following:</p>
			<ul>
				<li>The <strong class="bold">New Employee</strong> and <strong class="bold">Termination</strong> issue types will use a customized workflow, while the <strong class="bold">Task</strong> issue type will continue to use the existing one</li>
				<li>For the <strong class="bold">Termination</strong> issue type, we will add two additional steps: one to conduct an exit interview, and one to ensure that all necessary company assets are returned</li>
				<li>Ensure that only authorized personnel can transition the issue through the various statuses of the workflow</li>
			</ul>
			<p>The easiest way to implement these requirements would be to create a new workflow and add the extra process steps as new statuses. We will first do this to get our workflow structure in place. Later on, we will also look at how we can use other features in Jira and incorporate them into our workflow to make it more robust.</p>
			<h2 id="_idParaDest-215"><a id="_idTextAnchor216"/>Setting up workflows</h2>
			<p>The first step <a id="_idIndexMarker569"/>is to create a new workflow for <a id="_idIndexMarker570"/>our <strong class="bold">Termination</strong> issue type since we still want to keep the existing workflow for the <strong class="bold">Task</strong> issue type. The easiest way to get started is to clone the current workflow to save us some time. Follow the next steps to do that:</p>
			<ol>
				<li value="1">Browse to the <strong class="bold">View Workflows</strong> page.</li>
				<li>Click on the <code>HR: Task Management Workflow</code> workflow.</li>
				<li>Name the new workflow <code>HR: Termination Workflow</code>.</li>
				<li>Click on the <strong class="bold">Copy</strong> button to create our workflow.</li>
			</ol>
			<p>The next step is to add in the extra status we need. Make sure that you are in the workflow designer by selecting the <strong class="bold">Diagram</strong> option, then proceed as follows:</p>
			<ol>
				<li value="1">Click on the <strong class="bold">Add status</strong> button.</li>
				<li>Enter the name for our new status as <strong class="bold">In Exit Review</strong>, set the <strong class="bold">Category</strong> type to <strong class="bold">In Progress</strong>, and click on <strong class="bold">Add</strong>. You will need to hit the <em class="italic">Enter</em> key on your keyboard since we are creating a new status.</li>
				<li>Click on the <strong class="bold">Create</strong> button to create the workflow status.</li>
				<li>Repeat <em class="italic">steps 2</em> and <em class="italic">3</em> to create a new status called <strong class="bold">Collecting Assets</strong>.</li>
			</ol>
			<p>Now that we <a id="_idIndexMarker571"/>have our statuses added to <a id="_idIndexMarker572"/>our workflow, we need to connect them in the workflow with transitions. For now, we will make the workflow go in a sequence in the order of <strong class="bold">To Do</strong> | <strong class="bold">In Exit Review</strong> | <strong class="bold">Collecting Assets</strong> | <strong class="bold">Done</strong>. Let’s start by creating a transition going from <strong class="bold">To Do</strong> | <strong class="bold">In Exit Review</strong>, as follows:</p>
			<ol>
				<li value="1">Click on the <strong class="bold">Add transition</strong> button.</li>
				<li>Select <strong class="bold">To Do</strong> as the <strong class="bold">From</strong> status.</li>
				<li>Select <strong class="bold">In Exit Review</strong> as the <strong class="bold">To</strong> status.</li>
				<li>Name the new transition <strong class="bold">Conduct Exit Review</strong>.</li>
				<li>Select <strong class="bold">Workflow Screen</strong> for <strong class="bold">Screen</strong>.</li>
				<li>Click on the <strong class="bold">Add</strong> button to create the transition.</li>
				<li>Repeat <em class="italic">steps 1</em> to <em class="italic">6</em> to create two more transitions, linking <strong class="bold">In Exit Review</strong> to <strong class="bold">Collecting Assets</strong>, and <strong class="bold">Collecting Assets</strong> to <strong class="bold">Done</strong>.</li>
				<li>With the new transitions in place, we will also want to remove the existing transitions between <strong class="bold">To Do</strong> and <strong class="bold">Done</strong> so that people cannot skip the process steps.</li>
			</ol>
			<p>Your workflow will look something like the one shown in the following screenshot. You can rearrange the elements in the workflow to make the diagram flow more naturally:</p>
			<div><div><img src="img/Figure_7.25_B18644.jpg" alt="Figure 7.25 – HR workflow&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.25 – HR workflow</p>
			<p>The next customization we will do is to make sure that only authorized personnel can transition the issue <a id="_idIndexMarker573"/>along the workflow. For <a id="_idIndexMarker574"/>now, we will set it so only members of the <code>jira-administrators</code> group can transition an issue after it is created. Once we cover <a href="B18644_09.xhtml#_idTextAnchor256"><em class="italic">Chapter 9</em></a>, <em class="italic">Securing Jira</em>, we can change this security setting. Proceed as follows:</p>
			<ol>
				<li value="1">Click on the <strong class="bold">Conduct Exit Review</strong> transition and click on <strong class="bold">Conditions</strong> from the <strong class="bold">Transition property</strong> section.</li>
				<li>Click on the <strong class="bold">Add condition</strong> button to bring up the <strong class="bold">Add Condition To Transition</strong> page.</li>
				<li>Select the <strong class="bold">User Is In Group</strong> option.</li>
				<li>Select the <code>jira-administrator</code> group.</li>
				<li>Click on <strong class="bold">Add</strong> to add the condition to the transition.</li>
				<li>Repeat <em class="italic">steps 1</em> to <em class="italic">5</em> on the remaining transitions.</li>
			</ol>
			<p>Using the <code>jira-administrator</code> in this case—will see the transition with the condition applied to it.</p>
			<h2 id="_idParaDest-216"><a id="_idTextAnchor217"/>Applying the workflow</h2>
			<p>With our workflow in place <a id="_idIndexMarker577"/>and set up, we need to let Jira know the issue types that will be using our new workflow. Since we already have a workflow scheme in place for our project, we just need to associate the appropriate issue type with the workflow. Here’s how to do this:</p>
			<ol>
				<li value="1">Browse to the <strong class="bold">Workflow schemes</strong> page.</li>
				<li>Click on the <code>HR: Task Management Workflow Scheme</code>.</li>
				<li>Click on the <strong class="bold">Add Workflow</strong> menu and select the <strong class="bold">Add Existing</strong> option.</li>
				<li>Select our new <code>HR: Termination Workflow</code> option and click on the <strong class="bold">Next</strong> button.</li>
				<li>Select a <strong class="bold">Termination</strong> issue type.</li>
				<li>Click on <strong class="bold">Finish</strong> to create an association.</li>
				<li>Click on the <strong class="bold">Publish</strong> button to apply the change.</li>
			</ol>
			<p>This associates our new workflow with the<strong class="bold"> Termination</strong> issue type specifically created for our HR project and leaves the default workflow for the others.</p>
			<h2 id="_idParaDest-217"><a id="_idTextAnchor218"/>Putting it together</h2>
			<p>With our new <a id="_idIndexMarker578"/>workflow in place, we can now create a new <strong class="bold">Termination</strong> issue and start testing our implementation. Since we need to simulate a scenario where an unauthorized user cannot transition an issue after it is created, we need to create a new user. We will look at user management and security in <a href="B18644_09.xhtml#_idTextAnchor256"><em class="italic">Chapter 9</em></a>, <em class="italic">Securing Jira</em>. For now, we will simply add a new user to our system, as follows:</p>
			<ol>
				<li value="1">Browse to the Jira administration console.</li>
				<li>Select the <strong class="bold">Users management</strong> tab and click on the <strong class="bold">Users</strong> link.</li>
				<li>Click on the <strong class="bold">Create user</strong> button to bring up the <strong class="bold">Create New User</strong> dialog.</li>
				<li>Name the new user <code>john.doe</code> (John Doe).</li>
				<li>Set a password and email address for this new user.</li>
				<li>Uncheck the <strong class="bold">Send Notification Email</strong> option.</li>
				<li>Check the <strong class="bold">Jira Software</strong> option for <strong class="bold">Application access</strong>.</li>
				<li>Click on the <strong class="bold">Create</strong> button to create the user.</li>
			</ol>
			<p>Now, log in to Jira as a new business user, <code>john.doe</code>, and create a new <code>john.doe</code>) are not in the <code>jira-administrators</code> group. The administrator user we created in <a href="B18644_01.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>, <em class="italic"> Getting Started with Jira Data Center</em>, is in the <code>jira-administrators</code> group, so let’s log in as the administrator. Once logged in as the administrator, you will see our new transition, <strong class="bold">Conduct Exit Review</strong>, as shown in the following screenshot:</p>
			<div><div><img src="img/Figure_7.26_B18644.jpg" alt="Figure 7.26 – HR workflow transition 1&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.26 – HR workflow transition 1</p>
			<p>You will also see that, if you create a new task in the HR project, the task issue will continue to use the default workflow.</p>
			<p>With the current workflow set up, everything happens in sequential order. However, sometimes, you might need things to happen in parallel. For example, in the collecting assets step, there might be multiple assets to be collected for various teams, such as a laptop for IT and a key <a id="_idIndexMarker579"/>card for security. It will be a lot more efficient if you can perform them at the same time and be able to track them individually. One way you can do this is by creating subtasks for each asset under the issue (remember—an issue can only be assigned to one person), and then assigning the subtasks to the relevant team such as IT and security so that they can chase up with the employee to retrieve the asset. You can then set a condition on the <strong class="bold">Done</strong> transition to make sure that all subtasks are completed before they can be executed.</p>
			<p>This can be expanded upon to have the asset collection and exit interview as subtasks so that both can happen at the same time, and you can create different subtask issue types to differentiate them, as covered in <a href="B18644_04.xhtml#_idTextAnchor083"><em class="italic">Chapter 4</em></a>, <em class="italic">Working with Issues</em>. Your <strong class="bold">Termination</strong> issue may look something like this:</p>
			<div><div><img src="img/Figure_7.27_B18644.jpg" alt="Figure 7.27 – HR workflow transition 2&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.27 – HR workflow transition 2</p>
			<p>In this example, the <strong class="bold">Done</strong> transition will only be available when all subtasks are completed. This can <a id="_idIndexMarker580"/>be achieved by adding the <strong class="bold">Sub-Task Blocking Condition</strong> type to the <strong class="bold">Done</strong> issue transition.</p>
			<h1 id="_idParaDest-218"><a id="_idTextAnchor219"/>Summary</h1>
			<p>In this chapter, we looked at how Jira can be customized to adapt to your organization. At the heart of this powerful feature is a robust workflow system that allows you to model Jira workflows based on existing business processes. We also looked at the various components within a workflow, how to perform validations, and how postprocessing provides a level of process automation.</p>
			<p>In the next chapter, we will look at how we can combine the power of a workflow and its event-driven systems to facilitate communication through Jira notifications and the email system.</p>
		</div>
	</body></html>