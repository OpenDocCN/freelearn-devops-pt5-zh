<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Version Control</h1>
                </header>
            
            <article>
                
<p>In the previous chapter, we looked at the Force.com migration tool. We went through a step-by-step procedure for setting up Force.com or the Ant migration tool on a Windows and Linux machine, studied the files that are required to retrieve metadata from a sandbox, and how to provide credentials to access a sandbox. We looked at the procedure to deploy metadata on sandboxes and discussed how Force.com helps developers and DevOps in everyday life.</p>
<p>In this chapter, we will study the source code versioning system and its types. We will mainly focus on Git distributed version control, and operations performed on the Git repository, such as commit, push, merge, and so on. We will also go through the step-by-step procedure for setting up our own GitLab server, adding a repository, adding users, and creating a branch. We will discuss Git branching strategies and protecting branches. Finally, we will learn how to use Git with a Salesforce project and how to save Salesforce metadata to Git.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What is meant by SCVS?</h1>
                </header>
            
            <article>
                
<p><span><strong>Source Code Versioning System</strong> (</span><strong>SCVS</strong>) as the name indicates, it helps to manage source code changes over time. There are many source control versioning systems available such as CVS, SVN, Git, and so on. Version control maintains the history of every file change, and helps developers to track changes in an application. The main reasons behind having a version control system are to be able track changes in an application and to be able to revert back if something goes wrong. As code undergoes various changes, version control helps us to maintain a working version of code, and with the help of versioning, we can also maintain different environments such as testing, staging, and production. Multiple users can work on the same application source code simultaneously using version control.</p>
<p>There are two varieties of version control, centralized and distributed. In centralized version control, there is one central repository where each user gets their own working copy. If anyone commits their changes to the source control system, other co-users can get those changes by updating their working copy. Subversion and CVS are centralized version systems.</p>
<p>In distributed version control, each user gets a local repository and working copy. Changes made by the user are saved in their local repository when they commit code. Co-users can get those changes when the user pushes the changes to the remote repository.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Version control in Salesforce</h1>
                </header>
            
            <article>
                
<p>Salesforce has a limited audit capability to track changes in a sandbox. Making changes in the production environment is risky, and we are not able to see versions of files or track changes in a sandbox.</p>
<p>Reverting code in Salesforce is a very difficult task if we don't have version control in place.</p>
<p>Why doesn't Salesforce provide its own version control? Salesforce was basically designed for users to get their application running on the cloud without much understanding of the  code. We can build small applications in Salesforce with just clicks, so Salesforce didn't focus on having version control. In Salesforce, we can modify the Salesforce organization in place so we don't need to have code on a local machine.</p>
<p>Mostly people working on Salesforce think that there is lot of work involved in setting up version control for Salesforce, which is only required if we have large teams. To set up version control for Salesforce projects, developers and administrators need to learn how to use version control systems, and they might need some knowledge of the command-line instructions involved. But we have many integrations of Git where we don't need to know about commands as we can use buttons or tabs instead.</p>
<p>As we have mentioned here, Salesforce does not provide any in-built version control, so we need to set up a source code version control system. There are many version control systems, but the most popular version control system is Git. In the following section, we will go through the GitLab setup and using Git in a Salesforce project.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction to Git</h1>
                </header>
            
            <article>
                
<p>Git is a commonly used version control system invented by Linus Torvalds. It is a distributed type of version control which enables more than one developer to work on the same project simultaneously.</p>
<p>It helps to maintain versions of source code so that if anything goes wrong, you can always revert back to the working version of your source code. To use Git, you will need a repository that will store your source code and make it available to all who are working on it.</p>
<p>Git uses the GitHub as a hosting service for Git repositories, and so first of all, you will need a GitHub account so that you will be able to create a repository to store your source code. There are two types of repository:</p>
<ul>
<li><strong>Public repository:</strong> You can host public repositories on GitHub for free. These repositories will be accessible to all, so if you are going to save your important source code on GitHub, you should not save it on a public repository.</li>
<li><strong>Private repository:</strong> These repositories are protected; nobody can access them unless you give them access. You have to pay for private repositories.</li>
</ul>
<p>We have introduced GitHub, but for now we will be using GitLab. <span>GitLab is a fully featured open source Git server that you can install on your server. GitLab is a database-backend web application and is </span><span>available in both community and enterprise editions. </span></p>
<p>Let's move to our next point, which is setting up our own GitLab server.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up a GitLab server on a Linux instance</h1>
                </header>
            
            <article>
                
<p>To set up the server, an omnibus package installation is recommended. We will install the GitLab Community Edition on an Ubuntu 16.04 server. You can install GitLab on other operating systems such as Ubuntu, Centos, Debian, and so on; you can find a list here: <a href="https://about.gitlab.com/installation/">https://about.gitlab.com/installation/</a>. An omnibus package installation is the recommended method by GitLab itself, as the set up is easy and the upgrade process is also painless.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Prerequisites</h1>
                </header>
            
            <article>
                
<p>GitLab recommends using a server with the following configuration:</p>
<ul>
<li>2 cores</li>
<li>4 GB of RAM</li>
</ul>
<p>Install the required packages before installing GitLab Community Edition:   </p>
<pre><strong>$sudo apt-get update 
$sudo apt-get install ca-certificates curl openssh-server postfix</strong> </pre>
<p>For the Postfix installation, choose <span class="packt_screen">Internet Site</span> when prompted. On the next screen, enter your server's domain name or IP address to configure the system that will send mail:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/41906147-0b5a-4a4c-b251-105bf0518d4a.png" style="width:42.50em;height:26.92em;"/></div>
<p>Let's move on to the GitLab server installation.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing the GitLab server</h1>
                </header>
            
            <article>
                
<p>We have installed all required dependencies for the GitLab server. Run the following commands to install GitLab:</p>
<pre><strong>$curl -LO https://packages.gitlab.com/install/repositories<br/>/gitlab/gitlab-ce/script.deb.sh</strong>
<strong>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current </strong><strong>Dload  Upload   Total   Spent    Left  Speed</strong>
<strong>100  5933    0  5933    0     0  23796      0 --:--:-- --:--:-- --:--:-- 23827</strong>  </pre>
<p>You can examine <kbd>script.deb.sh</kbd> and check all the packages that will be installed and their configuration, as you need to know what is being installed on your server. Once you have verified <kbd>script.deb.sh</kbd>, you are good to go for the next step in the installation:</p>
<pre><strong>$ sudo bash script.deb.sh </strong>
<strong>Detected operating system as Ubuntu/xenial.</strong>
<strong>Checking for curl...</strong>
<strong>Detected curl...</strong>
<strong>Checking for gpg...</strong>
<strong>Detected gpg...</strong>
<strong>Running apt-get update... done.</strong>
<strong>Installing apt-transport-https... done.</strong>
<strong>Installing /etc/apt/sources.list.d/gitlab_gitlab-ce.list...done.</strong>
<strong>Importing packagecloud gpg key... done.</strong>
<strong>Running apt-get update... done.</strong></pre>
<p>The repository is set up! You can now install packages.</p>
<p>This script will set up our server to use the GitLab maintained repositories. After completing this script, we will install the actual GitLab application with <kbd><span><span>apt</span></span></kbd>:</p>
<pre><strong>$sudo apt-get install gitlab-ce</strong></pre>
<p>This will install the required components on our system, and the GitLab configuration file is <kbd>/etc/gitlab/gitlab.rb</kbd>. You can edit the configuration file and reconfigure the GitLab server:</p>
<pre><strong>$sudo gitlab-ctl reconfigure</strong></pre>
<p class="mce-root"/>
<p>After installation is complete, visit your GitLab external URL and set up a password for the root user:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/23e59a25-059a-449d-b414-a2dec15fc165.png"/></div>
<p>Log in with root user, and you will get the <span class="packt_screen">Welcome</span> page for GitLab, as shown in this screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3721efa6-24d6-4ca7-a5ca-86629aacb6ad.png"/></div>
<p>Now you have successfully set up GitLab, let's use it and create your first repository.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating your first project in GitLab</h1>
                </header>
            
            <article>
                
<p>Log in to your GitLab server and follow the steps to create your first project repository:</p>
<ol>
<li>Choose <span class="packt_screen">Create a Project</span> to create a project on the GitLab server. In the project, we will store all our code, configuration, and other information related to our application.</li>
<li>Provide a project name and description. For now, we will create a sample Hello World node application. Our project name is <kbd>Sample</kbd><em>.</em></li>
<li>Next, comes the visibility level of your project; it can be public, internal, or private.</li>
<li>Public  repositories can be cloned by anyone; any logged-in user can clone internal project <span>repositories</span>. To clone a private project, a user needs explicit access to clone the <span>repository</span>.</li>
<li>For now we will keep it public and check <span class="packt_screen">Initialize repository with a README</span> <span>for a quick start.</span></li>
<li>Click on <span class="packt_screen">Create Project</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/6e074c17-5960-4b97-9c42-c835aaf6e127.png"/></div>
<p class="mce-root"/>
<ol start="7">
<li>Clone the project URL:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/f41ad861-d991-4223-96d8-a6c065487bd9.png"/></div>
<ol start="8">
<li>If you have Git commands installed on your machine, run the following command to clone the repository to your local machine: </li>
</ol>
<pre style="padding-left: 90px"><strong>$git clone http://35.155.183.87/root/Sample.git</strong>
<strong>Cloning into 'Sample'...</strong>
<strong>remote: Enumerating objects: 3, done.</strong>
<strong>remote: Counting objects: 100% (3/3), done.</strong>
<strong>remote: Total 3 (delta 0), reused 0 (delta 0)</strong>
<strong>Unpacking objects: 100% (3/3), done.</strong>  </pre>
<p>You will see the <kbd>Readme.md</kbd> file is already created in the <kbd>Sample</kbd> project. <span>You are all set to start working with your Git repository:</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Working with a Git repository</h1>
                </header>
            
            <article>
                
<p>We have cloned the <span class="packt_screen">Sample</span> repository on our local machine. Now we will see how to work with the Git repository:</p>
<ol>
<li>Create a Node.js Hello World application that will create an HTTP server and respond to all requests on port <kbd>8080</kbd> with the string <kbd>Hello World</kbd>. Here is the sample code for the Node.js application:</li>
</ol>
<pre style="padding-left: 90px">var http = require("http"); 
 
http.createServer(function (request, response) { 
 
   // Send the HTTP header  
   // HTTP Status 200 OK 
   // Content Type is text/plain 
   response.writeHead(200, {'Content-Type': 'text/plain'}); 
    
   // Send response body as "Hello World" 
   response.end('Hello World\n'); 
}).listen(8080); 
 
// Print message 
console.log('Server running at http://127.0.0.1:8080/'); </pre>
<ol start="2">
<li>Save the code in  <kbd><strong>main.js</strong> </kbd>and add this file to our Git repository.</li>
<li>Check untracked changes in our Git repository with following command:</li>
</ol>
<pre style="padding-left: 90px"><strong>$git status 
On branch master 
Your branch is up to date with 'origin/master'. 
Untracked files: 
  (use "git add &lt;file&gt;..." to include in what will be committed) 
   main.js 
nothing added to commit but untracked files present (use "git add" to track)</strong></pre>
<ol>
<li style="list-style-type: none">By default, GitLab sets <strong>master</strong> branch as our default branch. The newly added <kbd>main.js</kbd> <span>file </span>is not present on the remote repository, and it is also not tracked in the local Git.</li>
</ol>
<ol>
<li style="list-style-type: none">Every file in the Git working directory is <strong>tracked</strong>, <strong>untracked</strong>, or <strong>ignored</strong>. The files which are committed or staged before are tracked files. Files that are not staged or committed are untracked files. The files that you don't want to add in the repository, such as files with credentials or machine-generated files, are mentioned in the <kbd>.gitignore</kbd> file.</li>
</ol>
<ol>
<li style="list-style-type: none">An example of a <kbd>.gitignore</kbd> file coded to ignore all files with a <kbd>.log</kbd> extension is as follows:</li>
</ol>
<pre style="padding-left: 90px"><strong>.gitignore 
# ignore all logs 
*.log</strong> </pre>
<ol start="4">
<li>Let's add the <kbd>main.js</kbd> file to the local repository; it needs to be indexed first. The <kbd>git add</kbd> command updates the index using the content found in the working directory. These changes will be staged for commit. You can add all changes into the index using <kbd>*</kbd> or the <kbd>-a</kbd> option in the  <kbd>git add</kbd> command:</li>
</ol>
<pre style="padding-left: 90px"><strong>$git add . 
$ git status 
On branch master 
Your branch is up to date with 'origin/master'. 
Changes to be committed: 
  (use "git reset HEAD &lt;file&gt;..." to unstage) 
          new file:   main.js</strong> </pre>
<ol start="5">
<li>The next step is to commit staged changes to the local repository:</li>
</ol>
<pre style="padding-left: 90px"><strong>$git commit -m "Add main.js file" 
[master 9d8892d] Add main.js file 
 1 file changed, 15 insertions(+) 
 create mode 100644 main.js</strong> </pre>
<p>The <kbd>commit</kbd> command is used to commit changes in the local repository. Other developers will not be able to see the changes. The important thing while committing your changes is to provide a commit message with the <kbd>-m</kbd> option in the command. Make sure your commit message relates to changes you're making in the code so that others using it will be able to understand your changes.</p>
<p>If you don't mention the filename, it will commit all the recent changes you made in the code.</p>
<p>The final step is to push your local changes to the remote repository; the push operation refers to pushing changes to the remote repository. While pushing changes, it is important to mention the origin of the changes:</p>
<pre><strong>$ git push origin master 
Username for 'http://35.155.183.87': priyanka 
Password for 'http://priyanka@35.155.183.87':  
Counting objects: 3, done. 
Delta compression using up to 4 threads. 
Compressing objects: 100% (3/3), done. 
Writing objects: 100% (3/3), 547 bytes | 547.00 KiB/s, done. 
Total 3 (delta 0), reused 0 (delta 0) 
To http://35.155.183.87/priyanka/Sample.git 
   aad9bc9..9d8892d  master -&gt; master</strong> </pre>
<p>Git will ask you for your credentials to authenticate the user and the push changes to the remote repository hosted on the GitLab server. Now you will be able to see those changes in the GitLab web URL.</p>
<p>It will look like this:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/4ceebb13-1b5c-4023-8156-c537446b9171.png" style="width:42.75em;height:25.00em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Viewing the commit history</h1>
                </header>
            
            <article>
                
<p>You can check logs using the command line, switch to the Git repository and run the <kbd>git log</kbd> command, as shown here, to check the most recent commits. This command without any extra argument shows commits made in the repository in reverse order. The command output also contains information such as the SHA-1 checksum, the commit message, the date and time of the commit, and author details:</p>
<pre><strong>$git log 
commit 9d8892da192fffb93a9a8a58fdf700632dabee3c (HEAD -&gt; master, origin/master, origin/HEAD) 
Author: Priyanka Dive &lt;user@example.com&gt; 
Date:   Mon Aug 27 00:56:39 2018 +0530 
 
    Add main.js file 
 
commit aad9bc971f4e69242e550f9e1771e23c1785b5e2 
Author: priyanka &lt;user@example.com&gt; 
Date:   Sun Aug 26 18:47:08 2018 +0000 
 
    Initial commit</strong> </pre>
<p>You can check Git commit messages with the timestamp and user details, as shown here:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/07b6d0f0-4fd0-476d-ba6d-45107a7fb47c.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding a user to GitLab</h1>
                </header>
            
            <article>
                
<p>The steps to add a user are as follows:</p>
<ol>
<li>Log in to GitLab with admin user (root).</li>
<li>Click the spanner icon (top right) to enter <span class="packt_screen">Admin area</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/e876e8bc-381f-4d24-be7e-991764ac3c9e.png" style="width:43.83em;height:9.08em;"/></div>
<ol start="3">
<li>You will see three buttons, <span class="packt_screen">New project</span>, <span class="packt_screen">New user</span>, and  <span class="packt_screen">New group</span>. Click on <span class="packt_screen">New user</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3ef2aa1a-a16a-4e08-a67b-3372d640e0fe.png" style="width:22.08em;height:29.92em;"/></div>
<ol start="4">
<li>Fill in the required information – <span class="packt_screen">Name</span>, <span class="packt_screen">Username</span>, and <span class="packt_screen">Email</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/fd0ae5ea-f625-4c0f-b72c-cd678e28af51.png" style="width:44.00em;height:30.17em;"/></div>
<ol start="5">
<li>Provide a project user limit as per your organization's rules. Also, if you want a user to be able to create a group, give them access to creating a group by checking <span class="packt_screen">Can create group</span>. If you want a user to have limited access, then select the <span class="packt_screen">Access level</span> to be <span class="packt_screen">Regular,</span> and if a user needs Admin privileges, then select the <span class="packt_screen">Access level</span> to be <span class="packt_screen">Admin</span> for the user:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/4319775c-1803-42c1-9ceb-7db6c1f18db8.png"/></div>
<ol start="6">
<li>After filling in all the required information, click on <span class="packt_screen">Create user</span>. This will create the user and send a password reset link to the user's Email ID.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Troubleshooting</h1>
                </header>
            
            <article>
                
<p>Consider the following error:</p>
<pre><strong>There was an error running gitlab-ctl reconfigure: 
execute[/opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8] (postgresql::enable line 80) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1' 
---- Begin output of /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8 ---- 
STDOUT: The files belonging to this database system will be owned by user "gitlab-psql". 
This user must also own the server process. 
STDERR: initdb: invalid locale settings; check LANG and LC_* environment variables 
---- End output of /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8 ---- 
Ran /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8 returned 1</strong> </pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Solution</h1>
                </header>
            
            <article>
                
<p>This issue can be due to the <kbd>LANG</kbd> and <kbd>LC_*</kbd> variables, which are unset in the Linux system. In the omnibus installation, we can set these variables using the following commands and run the installation command again or reconfigure GitLab:</p>
<pre><strong>$export LC_ALL="en_US.UTF-8" 
$export LC_CTYPE="en_US.UTF-8"</strong> </pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Branching strategy</h1>
                </header>
            
            <article>
                
<p>Branching is a very useful feature provided by Git. It helps to develop multiple features in parallel. Branching can be useful to define environment specific codes such as develop, test, stage, and production. Usually, the environment to Git branch mapping will be, for example, the code for the development environment stored in the <span class="packt_screen">develop</span><span> Git branch;</span> for the test environment, we use the <span class="packt_screen">test</span> Git branch, and so on. For the production environment, we use the <span class="packt_screen">master</span> branch, as it is the first default branch created when we create any Git repository.</p>
<p class="mce-root"/>
<p>Let's see how we can create a branch using the web UI:</p>
<ol>
<li>Log in to GitLab.</li>
<li>Go to your repository, <span class="packt_screen">Sample</span><em>,</em> that we created in the <em>Creating your first project in GitLab</em> section:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3c844a81-0773-4d00-a0ef-f12190ac71ee.png"/></div>
<ol>
<li style="list-style-type: none">As you see in this screenshot, we have only one branch which is the master, and is the default branch.</li>
</ol>
<ol start="3">
<li>Click on <span class="packt_screen">Branch</span>, you will be redirected to a page where you can see all the active branches for this repository. Currently, we have a <span class="packt_screen">master</span> branch:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/d47487d6-4589-463b-925b-568f041d5877.png"/></div>
<ol start="4">
<li>Click on <span class="packt_screen">New branch</span>, type in the branch name,  <kbd>develop. </kbd>We will be using this branch for development:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/67f342b7-1ca6-43e8-8e9c-6484992a54b8.png"/></div>
<ol start="5">
<li>Click on <span class="packt_screen">Create branch</span>. That's it. You can see the new branch that's been created from the master branch. You can now create another branch from the develop or master branch. As the develop branch is created from the master branch, all the code in the develop branch will be the same as in the master branch, for now:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/6f05b46a-92f0-451b-bf4c-d9620a397cd4.png"/></div>
<ol start="6">
<li>Now, if we go to <span class="packt_screen">Active Branches,</span> we can see two branches in the list. There is a difference between those two branches. The master branch is the default branch and the <strong>protected</strong> branch, but the newly created develop branch is not a protected branch. The only users who are authorized to make modifications in a protected branch are mostly senior developers or project leads. Due to this, we can avoid the problem of multiple developers simultaneously working on different features.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Handling branches using the Git CLI</h1>
                </header>
            
            <article>
                
<p>After the Git clone, you will, by default, get code for the default branch set on your repository. In our case, it is the master branch. Let's check which branch we have cloned using the following command:</p>
<pre><strong>$git branch 
* master</strong> </pre>
<p class="mce-root"/>
<p>The asterisk in front of the branch name indicates a current branch.</p>
<p>Let's create a <strong>test</strong> branch:</p>
<pre><strong>$git branch test</strong></pre>
<p>This will create a new branch named <kbd>test</kbd>, on your local Git repository:</p>
<pre>    <strong>$git branch</strong>
    <strong>* master</strong>
    <strong>  test</strong>
  </pre>
<p>Now you will see two branches in your local Git repository, the  <kbd>git branch &lt;BRANCH_NAME&gt;</kbd> command will create a branch from the current branch. So, the <span class="packt_screen">test</span> branch is created from the <span class="packt_screen">master</span> branch.</p>
<p>Switch to the newly created the <kbd>test</kbd> branch and <kbd>push</kbd> it to the <kbd>remote</kbd> repository:</p>
<pre>    <strong>$git checkout test</strong>
    <strong>Switched to branch 'test'</strong>
    
    <strong>$git push origin test</strong>
    <strong>Username for 'http://54.202.196.64': root</strong>
    <strong>Password for 'http://root@54.202.196.64': </strong>
    <strong>Total 0 (delta 0), reused 0 (delta 0)</strong>
    <strong>remote: </strong>
    <strong>remote: To create a merge request for test, visit:</strong>
    <strong>remote:   http://54.202.196.64/root/Sample/merge_requests/new?merge_request%5Bsource_branch%5D=test</strong>
    <strong>remote: </strong>
    <strong>To http://54.202.196.64/root/Sample.git</strong>
    <strong> * [new branch]      test -&gt; test</strong>
  </pre>
<p>Verify if you can see the <span class="packt_screen">test</span> branch in the GitLab web UI:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/0bc49c78-a4de-4603-adcf-f574081d66d5.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Merging changes from develop to master</h1>
                </header>
            
            <article>
                
<p>Let's see how to merge changes from the develop branch to the master branch:</p>
<ol>
<li>You can specify which branch to clone from the Git repository:</li>
</ol>
<pre style="padding-left: 90px"><strong>$git clone http://54.202.196.64/root/Sample.git -b develop</strong>
<strong>Cloning into 'Sample'...</strong>
<strong>remote: Enumerating objects: 6, done.</strong>
<strong>remote: Counting objects: 100% (6/6), done.</strong>
<strong>remote: Compressing objects: 100% (4/4), done.</strong>
<strong>remote: Total 6 (delta 0), reused 0 (delta 0)</strong>
<strong>Unpacking objects: 100% (6/6), done.</strong>  </pre>
<ol start="2">
<li>For testing, we will make a small change, such as changing the console log message from <kbd>Hello World</kbd> to <kbd>Hello Git</kbd>.  Add the changes to Git and push the changes to the remote develop branch:</li>
</ol>
<pre style="padding-left: 90px"><strong>$git add main.js</strong>
<strong>$git commit -m "Test merge request"</strong>
<strong>$git push origin develop</strong>
<strong>Counting objects: 3, done.</strong>
<strong>Delta compression using up to 4 threads.</strong>
<strong>Compressing objects: 100% (3/3), done.</strong>
<strong>Writing objects: 100% (3/3), 321 bytes | 321.00 KiB/s, done.</strong>
<strong>Total 3 (delta 1), reused 0 (delta 0)</strong>
<strong>remote: </strong>
<strong>remote: To create a merge request for develop, visit:</strong>
<strong>remote: http://54.202.196.64/root/Sample/merge_requests/new?merge_request%5Bsource_branch%5D=develop</strong>
<strong>remote: </strong>
<strong>To http://54.202.196.64/root/Sample.git</strong>
<strong>44fd847..a93bd41  develop -&gt; develop</strong></pre>
<ol start="3">
<li>If you want to create a merge request, open the URL shown in <kbd>remote</kbd>.</li>
<li>Assign it to the person who has the right to accept a merge request on the master branch:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/7afd5aae-3308-4fbf-b539-6f3ace6ef002.png"/></div>
<ol start="5">
<li>In our case, it is assigned to <span class="packt_screen">Administrator</span>. Fill out the required information and click <span class="packt_screen">Submit Merge Request</span>.</li>
<li>The Administrator user can see the merge request and, after verifying changes done by developers, if there are no merge conflicts and all previous checks are passed successfully, then the Administrator will accept the merge request by clicking on <span class="packt_screen">Merge</span>. Changes in test will be moved to the master branch:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/6d43bc9b-9d12-4cdd-b997-8cb2773a712b.png"/></div>
<p>The Administrator can modify the commit message, and remove the source branch if it is not required afterwards. If something goes wrong, the Administrator can revert the changes as well:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/613a13ec-68a0-434e-b9a2-279ff1ed43f6.png" style="width:36.83em;height:9.50em;"/></div>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using Git in the Eclipse IDE</h1>
                </header>
            
            <article>
                
<p>Steps 1 to 3 are already explained in <a href="ba728059-d1a1-4d85-baf1-ac032fcc4b3c.xhtml">Chapter 1</a>, <em>Salesforce Development and Delivery Process</em>:</p>
<ol>
<li>Eclipse installation</li>
<li>Install the Force.com IDE plugin</li>
<li>Configure Force.com project in Eclipse</li>
</ol>
<p>We will continue with the next steps in the following sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring Git and pushing code to Git</h1>
                </header>
            
            <article>
                
<p>Now we need to configure Git.</p>
<ol>
<li>Create the repository in a new folder by right-clicking on the folder and selecting  <span class="packt_screen">Git repository here...</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/0a3d3234-0f56-4354-aa5a-3e58f88565f2.png"/></div>
<ol start="2">
<li>Here, we are not selecting the <span class="packt_screen">Make it Bare</span> and click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/bc9b2b70-393e-4fa8-90b1-3d0f2ab3d15d.png"/></div>
<ol start="3">
<li>You will see the next screen. Click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/8d783631-0f56-43ec-bf46-4d67ca7a62c5.png"/></div>
<ol start="4">
<li>Right-click on the folder and select <span class="packt_screen">TortoiseGit</span> and click on <span class="packt_screen">Settings</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/9cf475de-165d-470d-9a9e-3d014470ad02.png"/></div>
<ol start="5">
<li>You will see the next screen. Click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/1de26064-7707-47e2-8e6a-4cb9ff8decdf.png"/></div>
<ol start="6">
<li>Select the Git and enter the <span class="packt_screen">Name</span> and <span class="packt_screen">Email</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/b84aad3b-e9c7-4c8f-8f0d-c9c5e36b2915.png"/></div>
<ol start="7">
<li>You will see the next screen. Select the Git and click on <span class="packt_screen">Remote</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/db226253-3903-4891-b9f7-9cd19dfebb2d.png"/></div>
<ol start="8">
<li>Open the Git project in the browser and select the project.</li>
<li>Copy the HTTP URL from the project:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/7e912ccd-8b5d-40c4-9f70-a253cddcc3a3.png"/></div>
<ol start="10">
<li>Enter the copied URL in <span class="packt_screen">URL</span> and <span class="packt_screen">Push URL</span>. Select <span><span class="packt_screen">All</span> in</span> <span>the</span> <span class="packt_screen">Tags</span><span> field and </span>click on the <span class="packt_screen">Add New/Save</span> button:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/316cad16-87ce-49c7-8fb6-99b38285e876.png"/></div>
<ol start="11">
<li>Click on the <span class="packt_screen">Yes</span> button:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/f9e48ef1-2b57-4d52-89e4-5b8b7f91fb85.png"/></div>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="12">
<li>You will see this screen. Click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/619d8dfd-758e-4202-9ba0-a509eb285aa2.png"/></div>
<ol start="13">
<li>Enter the Git credentials in this screen:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/58aed3e3-cf49-46ab-8da0-adc3bdad5dca.png"/></div>
<ol start="14">
<li>Click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3ab4161d-1b1b-4744-9261-8327b91b8321.png"/></div>
<ol start="15">
<li>Once you have completed the process, click on the <span class="packt_screen">Close</span> button:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/1affd969-3f5e-4b40-92a9-8c93bf4ac9ce.png"/></div>
<ol start="16">
<li>Finally, click on <span class="packt_screen">OK:</span></li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/8f9507bd-3742-4900-9a8b-7ed6ed540894.png"/></div>
<p>Now you have to pull the files from the Git repository, the steps are as follows:</p>
<ol>
<li>Right-click on the same file and select <span class="packt_screen">TortoiseGit</span> and click on <span class="packt_screen">Pull...</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/de86ea7a-9ff3-4510-9aec-d166d4c19eb7.png"/></div>
<ol start="2">
<li>You will get one popup, as shown. Select <span class="packt_screen">...</span> to select <span class="packt_screen">Remote</span> <span class="packt_screen">Branch</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/67726e25-8b96-4476-8e15-9dde9ef413d7.png"/></div>
<ol start="3">
<li>Here you can see all the list of remote branches, select the specific branch and click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/8fb207b9-3b5f-484d-8893-56ce4791fea5.png"/></div>
<ol start="4">
<li>Once the process is complete, click on <span class="packt_screen">Close</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/90c8d6c8-5027-418d-92be-60c4d0407234.png"/></div>
<ol>
<li style="list-style-type: none">Now the connection has been created and all the files copied to the local folder from the Git repository.</li>
</ol>
<p class="mce-root"/>
<ol start="5">
<li>Add your files into this folder:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/4a9386f9-be4b-4129-aca2-40ea9f0dc712.png"/></div>
<ol start="6">
<li>Right-click on the same folder and select the <span class="packt_screen">TortoiseGit</span> and click on <span class="packt_screen">Add...</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/92357740-772d-4da5-a46c-1597eb5733e0.png"/></div>
<ol start="7">
<li>Select all the files and click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/86b87bf2-1377-463a-891c-28cdbed3079c.png"/></div>
<ol start="8">
<li>Once the process is complete, click on <span class="packt_screen">Commit...</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/dc533217-4134-475d-8968-a8ad01220038.png"/></div>
<ol start="9">
<li>Now add the commit message and click on <span class="packt_screen">Commit &amp; Push</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/defa7325-e9c0-4dc0-8790-b6702cd639f2.png"/></div>
<ol start="10">
<li>To see all the remote branches, select the <span class="packt_screen">...</span> button:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/ac360500-b055-4ff3-ab9f-8fecbc4b94dc.png"/></div>
<ol start="11">
<li>Here you see all the branches, select the specific branch:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/d8ef0a17-c015-445e-b0f6-a97a3b2aee28.png"/></div>
<ol start="12">
<li>Now click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/d4387f5c-a17c-4de1-829b-23399b14104b.png"/></div>
<ol start="13">
<li>Once the process is complete, click on <span class="packt_screen">Close</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/535b8f67-e3fa-486a-bef7-fdf6922f0237.png"/></div>
<p class="mce-root"/>
<ol start="14">
<li>Now all the files are moved to the Git repository. Check on the Git repository:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/f9e20018-aa5b-45fb-b57c-a914f1657f31.png"/></div>
<ol start="15">
<li>Check all the files have been committed correctly:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/aed8b7ec-707c-44ee-a012-fcf6a2980bee.png"/></div>
<p>All code is successfully committed in the Git repository.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we learned about version control systems. We have seen what version control we have in Salesforce and why we need a version control system such as Git. We learned how to install GitLab on on-premise servers using the most recommended method by GitLab itself—the omnibus setup. After setting up our own GitLab server, we learned how to create our first project in GitLab using a web UI. We worked with the Git repository using Git commands, such as <kbd>git clone</kbd>,  <kbd>add</kbd>, <kbd>commit</kbd>, <kbd>push</kbd>, and so on.</p>
<p>We discussed the branching strategy in Git and general scenarios where we need to work with different branches. We have learned about concepts such as protected branch, and default branch. We also got to know how we can create a new branch from an existing branch, and merge code from one branch to another branch. Finally, we learned  how to use Git for our Salesforce project with Eclipse.</p>
<p>In the next chapter, we will go to our next stage, which is Continuous Integration using a Jenkins server. We will learn how Jenkins helps us to automate our daily tasks, such as retrieving and deploying metadata using the Force.com migration tool and Git.</p>


            </article>

            
        </section>
    </body></html>