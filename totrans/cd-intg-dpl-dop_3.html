<html><head></head><body>
<div class="book" title="Chapter&#xA0;3.&#xA0;DevOps &#x2013; Continuous Integration and Delivery"><div class="book" id="I3QM2-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03" class="calibre1"/>Chapter 3. DevOps – Continuous Integration and Delivery</h1></div></div></div><p class="calibre8">In this lesson, we will learn about implementing DevOps core process such as source code repository, code review, artifacts repository, continuous testing, continuous development, and continuous integration. We will focus on few popular tools such as Git, Jenkins, Maven, Gerrit, Nexus, Selenium, and so on.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Continuous integration</strong></span> (<span class="strong"><strong class="calibre2">CI</strong></span>)</li><li class="listitem"><span class="strong"><strong class="calibre2">Continuous delivery</strong></span> (<span class="strong"><strong class="calibre2">CD</strong></span>)</li><li class="listitem">Jenkins tool setup</li><li class="listitem">Configuration management-Jenkins</li><li class="listitem">Source code management—Git</li><li class="listitem">Build management—Maven</li><li class="listitem">Source code review—Gerrit</li><li class="listitem">Repository management—Nexus</li><li class="listitem">Test Automation—Selenium</li><li class="listitem">Continuous deployment—Pipelines</li><li class="listitem">Jenkins client setup</li><li class="listitem">Jenkins security</li><li class="listitem">Jenkins metrics</li></ul></div><p class="calibre8">Continuous integration and continuous delivery are popular and valuable processes to ensure high-quality and timely software delivery. Continuous integration is the integrated software development process where multiple developers adhere to the agile methodology and adapt it to best practices like the following:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Ensure all development code is subject to a version control system</li><li class="listitem">An adequate code review process is incorporated</li><li class="listitem">Changes to code are integrated, tested, and built quickly</li><li class="listitem">Build process is integrated to run unit tests and automated</li><li class="listitem">Attend to the build errors immediately, turn around quickly</li><li class="listitem">Tracking and Metrics of build results and repository management.</li><li class="listitem">Transparency and a user-friendly build process</li></ul></div><p class="calibre8">Continuous delivery is the process of extending the continuous integration.</p><div class="book"><ul class="itemizedlist"><li class="listitem">The most current and latest version of the software is readily available</li><li class="listitem">Changes passing through the testing cycle from the technical and quality standpoint are ready for deployment</li><li class="listitem">Automate the shipment and deployment process</li></ul></div><p class="calibre8">The continuous integration process is depicted as follows:</p><div class="mediaobject"><img src="../images/00015.jpeg" alt="DevOps – Continuous Integration and Delivery" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">The continuous integration process is detailed following:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">The developer's environment</strong></span>: Developers create code changes in a local workspace with an Integrated Development Environment runtime and with build tools physically installed on PC, or a cloud-based (Web IDE). They do unit level testing, data validations, code performance checks, and so on. The code changes done by the developer are pushed to the source code management system.</li><li class="listitem">The typical continuous integration and deployment cycle is comprises of setting up a CI/CD infrastructure and processes as listed:<div class="book"><ul class="itemizedlist1"><li class="listitem">The source code version and repository management system</li><li class="listitem">A process scheduler to initiate the orchestration pipeline</li><li class="listitem">A build process to manage code builds and scheduled tests</li><li class="listitem">Build nodes for executing the build</li><li class="listitem">Testing process on identified test nodes for automated testing</li><li class="listitem">Build outcome artifact repository</li><li class="listitem">Artefact repository to store build results</li><li class="listitem">Scenario and acceptance tests on test nodes</li><li class="listitem">Application installation with deploy tool on to runtime systems</li><li class="listitem">Acceptance tests for applications deployed on the runtime systems</li></ul></div></li></ul></div><p class="calibre8">The quality manager will approve the acceptance tests to agree to deployment test systems.</p><p class="calibre8">The delivery manager will approve the application deployment to production.</p></div>

<div class="book" title="Chapter&#xA0;3.&#xA0;DevOps &#x2013; Continuous Integration and Delivery">
<div class="book" title="Best Practices for CI/CD"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch03lvl1sec16" class="calibre1"/>Best Practices for CI/CD</h1></div></div></div><p class="calibre8">Let's take a look at the best practices for CI/CD:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Using version control</strong></span>: In collaborative development environments with simultaneous development there will be multiple challenges:<div class="book"><ul class="itemizedlist1"><li class="listitem">A source code management system defines a single source of truth for the code after placing the code under a version control system. The source code will be reproducible by effectively adopting the merge process for mainline development and loop lines for bug fixes and so on in the system. Git is a popular source code management system and GitHub is a cloud variant as a <span class="strong"><strong class="calibre2">Software as Service</strong></span> (<span class="strong"><strong class="calibre2">SaaS</strong></span>) model:</li></ul></div></li><li class="listitem"><span class="strong"><strong class="calibre2">Automate the build</strong></span>: Standardized automated build procedure will stabilize the build process to produces dependable results. The matured build process must contain the build description and all the dependencies to execute the build with a standardized build tool installation. Jenkins is the most versatile tool for build schedules; it offers a convenient UI and also has plug-ins integrating most popular tools for continuous integration.</li><li class="listitem"><span class="strong"><strong class="calibre2">Tests in the build</strong></span>: A few tests are to be performed to validate effectiveness and fitness of code beyond just the syntactical correctness of the code as follows:<div class="book"><ul class="itemizedlist1"><li class="listitem">Unit tests operate directly on build results</li><li class="listitem">Static code checks on source code prior to developer check-in. Git pre-commit triggers or CI system could be used to set up a gating or non-gating check</li><li class="listitem">Scenario tests for new build applications to be installed and started</li><li class="listitem">Functional performance of the code</li></ul></div></li></ul></div><p class="calibre8">Unit test frameworks are popular across source code technologies like JUnit for Java. Selenium Framework provides graphical user interfaces and browser behavior.</p><p class="calibre8">Implementing these tests on the developer's workstation early as part of the build saves time and effort addressing bugs discovered later in the development process.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Early and frequent commit of code</strong></span>: In a distributed development environment with multiple projects, each team or developer intends to integrate their code with the mainline. Also, the feature branches change to be integrated into the main line. It's a best practice to integrate code quickly and early. The time delay increases between new changes and merging with the mainline will increase the risk of product instability, the time taken, and complications as the main-line evolves from the baseline. Hence each developer working with the feature branch should push their code at least once per day. For main branch inactive projects, the high effort for constant rebasing must be evaluated before implementing.</li><li class="listitem"><span class="strong"><strong class="calibre2">Every change to be built</strong></span>: Developer changes are to be incorporated into the mainline, however, they can potentially destabilize the mainline affecting its integrity for the developers relying on the main line.</li></ul></div><p class="calibre8">Continuous integration addresses this with the best practice of continuous build for any code change committed. Any broken build requires immediate action as a broken build blocks the entire evolution of the mainline and it will be expensive depending on the frequency of commits and such issues. These issues can be minimized by enforcing branch level builds.</p><p class="calibre8">Push for review in Gerrit or pull request in GitHub are effective mechanisms to propose changes and check the quality of changes by identifying problems before they're pushed into the mainline, causing rework.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Address build errors quickly</strong></span>: The best practice of building at the branch level for each change will put the onus on the respective developers to fix their code build issues immediately rather than propagate it to the main branch. This forms a continuous cycle of Change-Commit-Build-Fix at each respective branch level.</li><li class="listitem"><span class="strong"><strong class="calibre2">Build fast</strong></span>: The quick turnaround of builds, results, and tests by automatic processes should be vital inputs for the developer workflow; a short wait time will be good for the performance of the continuous integration process on overall cycle efficiency.</li></ul></div><p class="calibre8">This is a balancing act between integrating new changes securely to the main branch and simultaneously building, validating, and scenario testing. At times, there could be conflicting objectives so trade-offs need to be achieved to find a compromise between different levels of acceptance criteria, considering the quality of the mainline is most important. Criteria include syntactical correctness, unit tests, and fast-running scenario tests for changes incorporated.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Pre-production run</strong></span>: Multiple setups and environments at various stages of the production pipeline cause errors. This would apply to developer environments, branch level build configurations, and central main build environments. Hence the machines where scenario tests are performed should be similar and have a comparable configuration to the main production systems.</li></ul></div><p class="calibre8">Manual adherence to an identical configuration is a herculean task; this is where DevOps value addition and core value proposition and treat the infrastructure setup and configuration similar to writing code. All the software and configuration for the machine are defined as source files which enable you to recreate identical systems; we will cover them in more detail in <a class="calibre1" title="Chapter 4. DevOps Continuous Deployment" href="part0032_split_000.html#UGI02-9e1d43bf5c22491b83b15944fc98f0e3">Lesson 4</a>, <span class="strong"><em class="calibre9">DevOps Continuous Deployment</em></span>.</p><div class="book"><ul class="itemizedlist"><li class="listitem">The build process is transparent: The build status and records of the last change must be available to ascertain the quality of the build for everyone. Gerrit is a change review tool and can be effectively used to record and track code changes, the build status, and related comments. Jenkins flow plugins offer build team and developers a complete end to end overview of the continuous integration process for source code management tools, the build scheduler, the test landscape, the artifact repository, and others as applicable.</li><li class="listitem">Automate the deployment: Installation of the application to a runtime system in an automated way is called deployment and there are several ways to accomplish this.<div class="book"><ul class="itemizedlist1"><li class="listitem">Automated scenario tests should be part of the acceptance process for changes proposed. These can be triggered by builds to ensure product quality.</li><li class="listitem">Multiple runtime systems like JEE servers are set up to avoid single-instance bottlenecks of serializing test requests and the ability to run parallel test queries. Using a single system also has associated overheads in recreating the environment with change overhead for every test case, causing a degeneration a performance.</li><li class="listitem">Docker or container technology to install and start runtime systems on demand in well-defined states, to be removed afterward.</li><li class="listitem">Automated test cases, since the frequency and time of validations of new comments, is not predictable in most cases, so scheduling daily jobs at a given time is an option to explore, where the build is deployed to a test system and notified after successful deployment.</li><li class="listitem">The deployment to production is a manual conscious decision satisfying all quality standards and ensure the change is appropriate to be deployed to production. If it can also be automated with confidence, that's the highest accomplishment of automated continuous deployment too.</li></ul></div></li></ul></div><p class="calibre8">Continuous delivery means that any change integrated is validated adequately so that it is ready to be deployed to production. It doesn't require every change to be deployed to production automatically.</p></div></div>

<div class="book" title="Jenkins Setup"><div class="book" id="J2B82-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec17" class="calibre1"/>Jenkins Setup</h1></div></div></div><p class="calibre8">We will start with Jenkins as it's the core component of the continuous integration process. The Jenkins process workflow is shown as follows:</p><div class="mediaobject"><img src="../images/00016.jpeg" alt="Jenkins Setup" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">See the Jenkins homepage at: <a class="calibre1" href="https://jenkins.io/index.html">https://jenkins.io/index.html</a>, shown as follows:</p><div class="mediaobject"><img src="../images/00017.jpeg" alt="Jenkins Setup" class="calibre10"/></div><p class="calibre11"> </p></div>

<div class="book" title="Jenkins Setup">
<div class="book" title="Prerequisites to Install Jenkins"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec12" class="calibre1"/>Prerequisites to Install Jenkins</h2></div></div></div><p class="calibre8">Jenkins installation and configuration requirements should be planned well as prescribed on the Jenkins homepage based on the following parameters:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Operating system--Linux versions of Ubuntu/Debian, Red Hat/Fedora/CentOS, openSUSE, FreeBSD, OpenBSD, Gentoo, Windows, macOS X</li><li class="listitem">JDK version</li><li class="listitem">Memory</li><li class="listitem">Disk space</li><li class="listitem">Java Containers--The Jenkins WAR file can run on any servlet-supported engine such as tomcat or Glassfish application servers.</li></ul></div><p class="calibre8">Jenkins can be installed in different modes as per its utility:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Standalone</strong></span>: Jenkins can run standalone in its own process using its own built-in web server (Jetty) for experimentation and small projects</li><li class="listitem"><span class="strong"><strong class="calibre2">Servlet-based</strong></span>: It can also run as one servlet framework for development projects</li><li class="listitem"><span class="strong"><strong class="calibre2">Multi-node setup for staging or production</strong></span>: Distributed client-server setup; the Jenkins advanced installation procedure is recommended</li></ul></div><div class="book" title="Standalone Installation"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec15" class="calibre1"/>Standalone Installation</h3></div></div></div><p class="calibre8">A standalone installation as suggested in the name is all by itself on a single machine (as opposed to multiple systems for different tasks):</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Standalone installation requires JDK to be installed on the system.</li><li class="listitem" value="2">Download the <code class="literal">Jenkins.war</code> file.</li><li class="listitem" value="3">Open the command prompt and, at the location of the <code class="literal">Jenkins.war</code> file, run the command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">C:&gt;Java -jar Jenkins.war</strong></span>
</pre></div><div class="mediaobject"><img src="../images/00018.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div><p class="calibre8">During initialization, a few tasks will run and the following screen will appear during the installation process:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">The initial screen page will ask about the plugin options:<div class="mediaobject"><img src="../images/00019.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Plugins will be installed as per the selected configuration in the preceding option:<div class="mediaobject"><img src="../images/00020.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">After successful installation, the following admin credential creation page will pop up:<div class="mediaobject"><img src="../images/00021.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4"><span class="strong"><strong class="calibre2">Accessing Jenkins</strong></span>: After successful installation, Jenkins can be accessed through a web browser from your local machine as follows:<p class="calibre15">
<code class="literal">http://localhost:8080</code>
</p></li><li class="listitem" value="5">The Jenkins dashboard will open at this link:<div class="mediaobject"><img src="../images/00022.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="6">The <span class="strong"><strong class="calibre2">Manage Jenkins</strong></span> option in the dashboard will provide various options to configure various parameters:<div class="mediaobject"><img src="../images/00023.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">The <span class="strong"><strong class="calibre2">Manage Plugins</strong></span> option in the dashboard is an important option with a very wide choice of plugins to integrate with source code systems, authentication systems, various development platforms, and so on.<div class="mediaobject"><img src="../images/00024.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p><p class="calibre15">Installing Jenkins on a Servlet Engine needs the installation of Tomcat or Glassfish.</p><div class="mediaobject"><img src="../images/00025.jpeg" alt="Standalone Installation" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="8">Copy the <code class="literal">Jenkins.war</code> file it to the web apps folder in the <code class="literal">tomcat</code> folder.</li><li class="listitem" value="9">Start the Tomcat server from the Tomcat <code class="literal">bin</code> directory.</li><li class="listitem" value="10"><code class="literal">http://localhost:8080/Jenkins</code> --access Jenkins on Tomcat server.</li></ol><div class="calibre12"/></div></div><div class="book" title="Linux System Installation on Ubuntu"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch03lvl3sec16" class="calibre1"/>Linux System Installation on Ubuntu</h3></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the server and update: <code class="literal">sudo apt-get -y update</code>.</li><li class="listitem" value="2">Install Java: <code class="literal">sudo apt-get install -y default-jdk</code>.</li><li class="listitem" value="3">Download an Ubuntu version from <code class="literal">Jenkins-ci.org</code> site using the <code class="literal">wget</code> command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">wget http://pkg.jenkins-ci.org/debian-rc/binary/jenkins_2.0_all.deb.</strong></span>
</pre></div></li><li class="listitem" value="4">Package install <code class="literal">sudo dpkg - i Jenkins.zip</code>.</li><li class="listitem" value="5">Dependency resolve by <code class="literal">sudo apt - get -f install</code>.</li><li class="listitem" value="6">Access Jenkins on port <code class="literal">http://localhost:8080/Jenkins</code>.</li><li class="listitem" value="7">Continue with the steps listed in preceding figure.</li><li class="listitem" value="8">To initialize Jenkins at startup, add the command <code class="literal">/etc/init.d/jenkins</code> start in <code class="literal">/etc/rc.local</code> file.</li></ol><div class="calibre12"/></div></div></div></div>

<div class="book" title="Git (SCM) Integration with Jenkins" id="K0RQ1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec18" class="calibre1"/>Git (SCM) Integration with Jenkins</h1></div></div></div><p class="calibre8">Git is the most popular source code management system and offers extensive benefits such as:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Version control lets you maintain multiple versions of the code for different purposes</li><li class="listitem">A code repository is required to keep all project-related code in one place</li><li class="listitem">Collaboration among users and intervention for debugging purposes</li></ul></div><p class="calibre8">Git can be downloaded from <a class="calibre1" href="https://git-scm.com/downloads">https://git-scm.com/downloads</a>:</p><div class="mediaobject"><img src="../images/00026.jpeg" alt="Git (SCM) Integration with Jenkins" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Multiple platforms versions such as Linux, Windows, and so on are available within desktop and web flavors.</p><p class="calibre8">There can be multiple types of repositories:</p><div class="book"><ul class="itemizedlist"><li class="listitem">A public repository created on GitHub can give read access to everyone but write or commit access is given to chosen individuals or groups</li><li class="listitem">A private repository permits collaborators for participation and is a paid subscription to GitHub</li><li class="listitem">A local repository is a desktop version without the need for an internet connection</li><li class="listitem">A remote repository is a web-based repository for extended features like issue management and pull requests</li></ul></div><p class="calibre8">GitHub provides options to synchronize code changes from a single computer or between multiple computers.</p><p class="calibre8">Pull changes will sync code changes from a desktop with an online repository and clone options will create a new copy of the repository on the computer.</p><p class="calibre8">Performing these tasks enables us to maintain source code on cloud-based SaaS system</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Create a sign-in account on GitHub.</li><li class="listitem" value="2">Create a project repository for organizing your project-related code.<div class="mediaobject"><img src="../images/00027.jpeg" alt="Git (SCM) Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div></div>

<div class="book" title="Git (SCM) Integration with Jenkins" id="K0RQ1-9e1d43bf5c22491b83b15944fc98f0e3">
<div class="book" title="Integrating GitHub with Jenkins"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec13" class="calibre1"/>Integrating GitHub with Jenkins</h2></div></div></div><p class="calibre8">To integrate a GitHub repository with Jenkins, follow these steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">In <span class="strong"><strong class="calibre2">Manage Plugins</strong></span>, search for Git plugin under the filter section and install it.</li><li class="listitem" value="2">If it's installed by default, we can find it on the <span class="strong"><strong class="calibre2">Installed</strong></span> tab as follows:<div class="mediaobject"><img src="../images/00028.jpeg" alt="Integrating GitHub with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">After Jenkins is restarted, create new item on the Jenkins home page will give the following screen:<div class="mediaobject"><img src="../images/00029.jpeg" alt="Integrating GitHub with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">Select a job name and the next screen will show Git options as following, under the <span class="strong"><strong class="calibre2">Source Code Management</strong></span> tab. You can add other SCM tools like CVS, subversion, and so on, in a similar manner:<div class="mediaobject"><img src="../images/00030.jpeg" alt="Integrating GitHub with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Enter the Git repository address of the local machine or a web link in the preceding repository URL placeholder to configure Git with Jenkins.</li></ol><div class="calibre12"/></div></div></div>
<div class="book" title="Maven (Build) Tool Integration with Jenkins"><div class="book" id="KVCC2-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec19" class="calibre1"/>Maven (Build) Tool Integration with Jenkins</h1></div></div></div><p class="calibre8">Let's perform the following steps for Maven (build) tool integration with Jenkins:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Download Maven from <a class="calibre1" href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a>; this is the latest version of the binary file:<div class="mediaobject"><img src="../images/00031.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Extract the downloaded Maven file to a folder.</li><li class="listitem" value="3">Open <span class="strong"><strong class="calibre2">Manage Jenkins</strong></span>:<div class="mediaobject"><img src="../images/00032.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p><p class="calibre15">Select Maven Plugins as follows and install them without the restart option.</p><div class="mediaobject"><img src="../images/00033.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">Monitor plugin progress as follows:<div class="mediaobject"><img src="../images/00034.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Under <span class="strong"><strong class="calibre2">Configure</strong></span> tools, add Maven by giving the repository location:<div class="mediaobject"><img src="../images/00035.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="6">Create a new item job with the Maven project option:<div class="mediaobject"><img src="../images/00036.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">The Maven option in build environment is as follows:<div class="mediaobject"><img src="../images/00037.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="8">The project is created as follows:<div class="mediaobject"><img src="../images/00038.jpeg" alt="Maven (Build) Tool Integration with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div></div>
<div class="book" title="Building Jobs with Jenkins"><div class="book" id="LTSU2-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec20" class="calibre1"/>Building Jobs with Jenkins</h1></div></div></div><p class="calibre8">Let's perform the following steps for building jobs with Jenkins:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">A simple application builds and runs the program:<div class="mediaobject"><img src="../images/00039.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">The source code repository options as listed as follows:<div class="mediaobject"><img src="../images/00040.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">We can specify the location of files which need to be built either from a source Git code repository or the URL from GitHub:<div class="mediaobject"><img src="../images/00041.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">Builds can be executed with multiple options, command modes, and Maven and so on:<div class="mediaobject"><img src="../images/00042.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Command-line programs can be executed as follows:<div class="mediaobject"><img src="../images/00043.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="6">After saving, the build option is visible, and history is also available:<div class="mediaobject"><img src="../images/00044.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">Build progress can be seen and repository available as follows:<div class="mediaobject"><img src="../images/00045.jpeg" alt="Building Jobs with Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div></div>
<div class="book" title="Source Code Review &#x2013; Gerrit" id="MSDG1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec21" class="calibre1"/>Source Code Review – Gerrit</h1></div></div></div><p class="calibre8">Code review is an important function in the software development framework. Having a good collaborative tool like Gerrit for a code review process is very appropriate and needed. Gerrit initiates a pull-based workflow to initiate change requests, wherein comments are included even for source code to allow the change to be merged into the code repository through the workflow process. Gerrit maintains a local repository of the mirrored Git project repositories with reference repositories. Gerrit creates another maintenance branch from master branch to track reviews to the code; it creates a change-id identifier for the commit message to keep track of each change in a code review.</p><p class="calibre8">Gerrit allows for code change comparisons and a reviewer can give one of five ratings:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">+2</strong></span>: Looks good, approved</li><li class="listitem"><span class="strong"><strong class="calibre2">+1</strong></span>: Looks good, but needs additional approval</li><li class="listitem"><span class="strong"><strong class="calibre2">0</strong></span>: No comments</li><li class="listitem"><span class="strong"><strong class="calibre2">-1</strong></span>: Suggest not submit this</li><li class="listitem"><span class="strong"><strong class="calibre2">-2</strong></span>: Block the submit<div class="mediaobject"><img src="../images/00046.jpeg" alt="Source Code Review – Gerrit" class="calibre10"/></div><p class="calibre14"> </p></li></ul></div></div>
<div class="book" title="Installation of Gerrit" id="NQU21-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec22" class="calibre1"/>Installation of Gerrit</h1></div></div></div><p class="calibre8">Let's perform the following steps to install Gerrit:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Download Gerrit from <a class="calibre1" href="https://www.gerritcodereview.com/">https://www.gerritcodereview.com/</a>.</li><li class="listitem" value="2">Follow the installation instructions as per the platform option and access Gerrit on port <code class="literal">8080</code> as follows to create users and projects:<div class="mediaobject"><img src="../images/00047.jpeg" alt="Installation of Gerrit" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Configure in Jenkins under <span class="strong"><strong class="calibre2">Manage Plugins</strong></span> for Gerrit:<div class="mediaobject"><img src="../images/00048.jpeg" alt="Installation of Gerrit" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div><p class="calibre8">Version control tools listed in the <a class="calibre1" title="Chapter 2. DevOps Framework" href="part0014_split_000.html#DB7S1-9e1d43bf5c22491b83b15944fc98f0e3">Lesson 2</a>, <span class="strong"><em class="calibre9">DevOps Framework</em></span>, for example Gerrit the web-based code review interface, allow reviewing changes online to push changes from any Git client and then auto-merging them with the master; it can also be configured as a remote Git repository.</p><p class="calibre8">Gerrit configuration includes user creation, Secure Shell (SSH) set up to exchange data with a Gerrit server. The configuration file <code class="literal">/etc/gerrit.config</code> has extensive parameters you need to set as per configuration requirements.</p></div>
<div class="book" title="Repository Management" id="OPEK1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec23" class="calibre1"/>Repository Management</h1></div></div></div><p class="calibre8">Maintaining multiple build version artifacts is the key feature of repository management and Nexus is a popular repository manager. It can be downloaded from <a class="calibre1" href="http://www.sonatype.org/nexus/downloads/">http://www.sonatype.org/nexus/downloads/</a>.</p><p class="calibre8">After installation, it can be accessed from <code class="literal">http://&lt;nexus host&gt;:8081/nexus</code>:</p><div class="mediaobject"><img src="../images/00049.jpeg" alt="Repository Management" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Nexus can be configured with plugins for Jenkins integration:</p><div class="mediaobject"><img src="../images/00050.jpeg" alt="Repository Management" class="calibre10"/></div><p class="calibre11"> </p></div>

<div class="book" title="Testing with Jenkins"><div class="book" id="PNV62-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec24" class="calibre1"/>Testing with Jenkins</h1></div></div></div><p class="calibre8">Jenkins provides many out-of-the-box functionalities and plugins for testing. The site <a class="calibre1" href="https://wiki.jenkins.io/display/JENKINS/xUnit+Plugin">https://wiki.jenkins.io/display/JENKINS/xUnit+Plugin</a> provides the plugins:</p><div class="mediaobject"><img src="../images/00051.jpeg" alt="Testing with Jenkins" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">A list of available testing plugins is shown as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">JUnit itself</li><li class="listitem">AUnit</li><li class="listitem">MSTest (imported from MSTest Plugin)</li><li class="listitem">NUnit (imported from NUnit Plugin)</li><li class="listitem">UnitTest++</li><li class="listitem">Boost Test Library</li><li class="listitem">PHPUnit</li><li class="listitem">Free Pascal Unit</li><li class="listitem">CppUnit</li><li class="listitem">MbUnit</li><li class="listitem">Google test</li><li class="listitem">EmbUnit</li><li class="listitem">gtester/glib</li><li class="listitem">QTestLib</li></ul></div></div>

<div class="book" title="Testing with Jenkins">
<div class="book" title="Setting up Unit Testing"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec14" class="calibre1"/>Setting up Unit Testing</h2></div></div></div><p class="calibre8">Let's perform the following steps to set up unit testing:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Pick up the project we have set up:<div class="mediaobject"><img src="../images/00052.jpeg" alt="Setting up Unit Testing" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Choose build option:<div class="mediaobject"><img src="../images/00053.jpeg" alt="Setting up Unit Testing" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Choose an <span class="strong"><strong class="calibre2">Advanced</strong></span> option:<div class="mediaobject"><img src="../images/00054.jpeg" alt="Setting up Unit Testing" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">Enter the location of <code class="literal">build.xml</code>:<div class="mediaobject"><img src="../images/00055.jpeg" alt="Setting up Unit Testing" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Select the option of post-build option and choose <span class="strong"><strong class="calibre2">Publish JUnit test result report</strong></span>:<div class="mediaobject"><img src="../images/00056.jpeg" alt="Setting up Unit Testing" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="6">In the test <code class="literal">reports.xml</code>, enter the reports created a folder in our project so that Jenkins picks the resulting XML files produced by running of the JUnit test cases:<div class="mediaobject"><img src="../images/00057.jpeg" alt="Setting up Unit Testing" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div><p class="calibre8">We can select the build and drill-down to the test results.</p></div></div>

<div class="book" title="Testing with Jenkins">
<div class="book" title="Automated Test Suite"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec15" class="calibre1"/>Automated Test Suite</h2></div></div></div><p class="calibre8">Continuous integration is the process of verifying a build to objectively access its readiness for the next level; this is accomplished with automated testing. So, the build artifacts are set to be tested automatically; Selenium is the most popular framework for this.</p><p class="calibre8">It can be downloaded from the following site:</p><div class="mediaobject"><img src="../images/00058.jpeg" alt="Automated Test Suite" class="calibre10"/></div><p class="calibre11"> </p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Under <span class="strong"><strong class="calibre2">Jenkins</strong></span>, <span class="strong"><strong class="calibre2">Plugin Manager</strong></span>, select the Selenium plugin and install, restart to initiate:<div class="mediaobject"><img src="../images/00059.jpeg" alt="Automated Test Suite" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Configure the <code class="literal">selenium server JAR</code> file:<div class="mediaobject"><img src="../images/00060.jpeg" alt="Automated Test Suite" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Configure the project we created to be set for this automated framework:<div class="mediaobject"><img src="../images/00061.jpeg" alt="Automated Test Suite" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">In the build process, add the option, <span class="strong"><strong class="calibre2">SeleniumHQ htmlSuite Run</strong></span>:<div class="mediaobject"><img src="../images/00062.jpeg" alt="Automated Test Suite" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Selenium IDE will generate Test Suite, the Selenium test is enabled with SuiteFile by launching the Selenium driver:<div class="mediaobject"><img src="../images/00063.jpeg" alt="Automated Test Suite" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div></div></div>
<div class="book" title="Continuous Delivery- Build Pipeline" id="QMFO1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec25" class="calibre1"/>Continuous Delivery- Build Pipeline</h1></div></div></div><p class="calibre8">Continuous delivery is the process of building a robust pipeline from software development to deployment.</p><div class="mediaobject"><img src="../images/00064.jpeg" alt="Continuous Delivery- Build Pipeline" class="calibre10"/></div><p class="calibre11"> </p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Install the Build Pipeline plugin from <span class="strong"><strong class="calibre2">Manage Plugins</strong></span> as follows:<div class="mediaobject"><img src="../images/00065.jpeg" alt="Continuous Delivery- Build Pipeline" class="calibre10"/></div><p class="calibre14"> </p><div class="mediaobject"><img src="../images/00066.jpeg" alt="Continuous Delivery- Build Pipeline" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">To set up the Build Pipeline, Click on the <span class="strong"><strong class="calibre2">+</strong></span> symbol, next to the <span class="strong"><strong class="calibre2">All</strong></span> tab on the dashboard:<div class="mediaobject"><img src="../images/00067.jpeg" alt="Continuous Delivery- Build Pipeline" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Select <span class="strong"><strong class="calibre2">Build Pipeline View</strong></span> and choose a name for the pipeline:<div class="mediaobject"><img src="../images/00068.jpeg" alt="Continuous Delivery- Build Pipeline" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">Select the <span class="strong"><strong class="calibre2">Options</strong></span> and the project created:<div class="mediaobject"><img src="../images/00069.jpeg" alt="Continuous Delivery- Build Pipeline" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">The delivery pipeline view is created with the status of each stage of the project.</li></ol><div class="calibre12"/></div></div>

<div class="book" title="Jenkins Features" id="RL0A1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec26" class="calibre1"/>Jenkins Features</h1></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">Client-server</li><li class="listitem">Security</li><li class="listitem">Reporting</li></ul></div><p class="calibre8">Larger projects need multiple machines to be configured instead of centralized builds on one machine. Also, there are requirements for several different environments for test builds. Slave machines are effective to offload these loads from a master server.</p><p class="calibre8">They need a bi-directional communication link from the master through a TCP/IP socket, with only a slave agent instead of the full Jenkins package or compiled binaries.</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">To set up slave/nodes under Jenkins, configure and select the manage nodes option and create a new node:<div class="mediaobject"><img src="../images/00070.jpeg" alt="Jenkins Features" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Select name and <span class="strong"><strong class="calibre2">Dumb Slave</strong></span> option.<div class="mediaobject"><img src="../images/00071.jpeg" alt="Jenkins Features" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">The slave node details are to be given, then choose to let Jenkins consider the Windows slave as a Windows service. Details such as name node and login credentials of the machine are required.<div class="mediaobject"><img src="../images/00072.jpeg" alt="Jenkins Features" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">The slave machine will be available as follows; new jobs can be configured to run on this slave machine.<div class="mediaobject"><img src="../images/00073.jpeg" alt="Jenkins Features" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre12"/></div></div>

<div class="book" title="Jenkins Features" id="RL0A1-9e1d43bf5c22491b83b15944fc98f0e3">
<div class="book" title="Security in Jenkins"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch03lvl2sec16" class="calibre1"/>Security in Jenkins</h2></div></div></div><p class="calibre8">Users with relevant permissions can be set up with security configuration:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Under <span class="strong"><strong class="calibre2">Manage Jenkins</strong></span>, select <span class="strong"><strong class="calibre2">Configure Global Security</strong></span>, and choose to <span class="strong"><strong class="calibre2">Enable security</strong></span> option:<div class="mediaobject"><img src="../images/00074.jpeg" alt="Security in Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Once you save the options, you will be prompted for an admin user.<div class="mediaobject"><img src="../images/00075.jpeg" alt="Security in Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Under <span class="strong"><strong class="calibre2">Jenkins Manage</strong></span> setup, choose <span class="strong"><strong class="calibre2">Manage Users Options</strong></span> to create users and then set up authorizations required to execute jobs with matrix based security:</li><li class="listitem" value="4">The <span class="strong"><strong class="calibre2">Reporting Options</strong></span>, <span class="strong"><strong class="calibre2">Metrics Options</strong></span>, and <span class="strong"><strong class="calibre2">Reporting Plugins</strong></span> can be installed.<div class="mediaobject"><img src="../images/00076.jpeg" alt="Security in Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="5">Many Metrics are available such as the Build History Metrics Plugin:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre2">Mean Time To Failure</strong></span> (<span class="strong"><strong class="calibre2">MTTF</strong></span>)</li><li class="listitem"><span class="strong"><strong class="calibre2">Mean Time To Recovery</strong></span> (<span class="strong"><strong class="calibre2">MTTR</strong></span>)</li><li class="listitem">Standard deviation of build times</li></ul></div><div class="mediaobject"><img src="../images/00077.jpeg" alt="Security in Jenkins" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="6">It can be installed under <span class="strong"><strong class="calibre2">Manage Plugins</strong></span> choosing the <span class="strong"><strong class="calibre2">Build History Metrics Plugin</strong></span>, the above metrics will be reflected on the job page.</li><li class="listitem" value="7">To see a graphical representation, use Hudson global-build-stats and <span class="strong"><strong class="calibre2">Global Build Stats</strong></span> plugins under <span class="strong"><strong class="calibre2">Manage Plugins</strong></span>. Setting the options, initialize stats, create new chart options, and all the existing builds records will be displayed.</li></ol><div class="calibre12"/></div></div></div>
<div class="book" title="Summary" id="SJGS1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec27" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this lesson, we learned about processes and tools for implementing continuous development, continuous integration, and continuous deployment with the use of repository management, code reviews, and test automation.</p><p class="calibre8">In the next lesson, we will cover the topics of infrastructure configuration management as code for continuous deployment with tools such as Chef, Puppet, and Ansible. We will discuss on continuous monitoring process with tools Splunk and Nagios.</p></div>
<div class="book" title="Assessments" id="TI1E1-9e1d43bf5c22491b83b15944fc98f0e3"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch03lvl1sec28" class="calibre1"/>Assessments</h1></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Continuous delivery is the process of extending the __________.<div class="book"><ol class="orderedlist1"><li class="listitem" value="1">Continuous deployment</li><li class="listitem" value="2">Continuous monitoring</li><li class="listitem" value="3">Continuous integration</li><li class="listitem" value="4">Continuous delivery</li></ol><div class="calibre12"/></div></li><li class="listitem" value="2">State whether the following is True or False: The delivery manager will approve the acceptance tests to agree to deployment test systems.</li><li class="listitem" value="3">Which among the following are effective mechanisms to propose changes and check the quality of changes by identifying problems before they're pushed into the mainline, causing rework?<div class="book"><ol class="orderedlist1"><li class="listitem" value="1">Pull for review in Gerrit</li><li class="listitem" value="2">Pull request in SVN</li><li class="listitem" value="3">Push request in GitHub</li><li class="listitem" value="4">Pull request in GitHub</li></ol><div class="calibre12"/></div></li><li class="listitem" value="4">Which command is used to install Jenkins?<div class="book"><ol class="orderedlist1"><li class="listitem" value="1">C:&gt;java Jenkins.war</li><li class="listitem" value="2">C:&gt;Java -jar Jenkins.war</li><li class="listitem" value="3">C:&gt;Java –jar Jenkins.war</li><li class="listitem" value="4">C:&gt;java –jar Jenkins.war</li></ol><div class="calibre12"/></div></li><li class="listitem" value="5">Which among the following is the process of building a robust pipeline from software development to deployment?<div class="book"><ol class="orderedlist1"><li class="listitem" value="1">Continuous monitoring</li><li class="listitem" value="2">Continuous deployment</li><li class="listitem" value="3">Continuous integration</li><li class="listitem" value="4">Continuous delivery</li></ol><div class="calibre12"/></div></li></ol><div class="calibre12"/></div></div></body></html>