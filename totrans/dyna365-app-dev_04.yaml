- en: Define Business Rules Using Business Rule Designer
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用业务规则设计器定义业务规则
- en: In the previous chapter, we saw how the new Visual Process Designer can be used
    to create business process flows using the drag-and-drop capabilities. In this
    chapter, we will see how the same visual drag-and-drop process designer can be
    used to create business rules. Business rules were first introduced in Dynamics
    CRM 2013\. Basically, business rules let's define rules such as setting fields
    to required/not required, show/hide fields, lock/unlock fields, and so on—that
    is, conditions and actions on our CRM Form/Entity easily through an intuitive
    interface, for which we had to write either JavaScript or develop plugins earlier.
    Business rules were enhanced further in a subsequent version of Dynamics CRM.
    With Dynamics 365, the Business Rules Designer interface has been completely revamped,
    with capabilities of dragging and dropping components, along with additional features
    such as Minimap, Snapshot, and so on.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们了解了如何使用新的可视化流程设计器通过拖放功能创建业务流程图。在本章中，我们将看到如何使用相同的可视化拖放流程设计器创建业务规则。业务规则首次在
    Dynamics CRM 2013 中引入。基本上，业务规则允许我们定义规则，例如设置字段为必填/非必填、显示/隐藏字段、锁定/解锁字段等——也就是说，使用直观的界面轻松定义
    CRM 表单/实体上的条件和操作，而之前我们需要编写 JavaScript 或开发插件才能实现。后续版本的 Dynamics CRM 进一步增强了业务规则。随着
    Dynamics 365 的发布，业务规则设计器的界面得到了彻底改造，具备了拖放组件的能力，并新增了小地图、快照等功能。
- en: 'In this chapter, we will be covering the following points:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Overview of business rules in Dynamics 365
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Dynamics 365 中业务规则概览
- en: Understand the different components and how to use them in the new Business
    Rule Designer
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解新业务规则设计器中的不同组件及其使用方法
- en: Implement new recommendation actions introduced in Dynamics 365
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Dynamics 365 中实施新的推荐操作
- en: Other features of the Business Rule Designer
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 业务规则设计器的其他功能
- en: Evolution of business rules
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 业务规则的发展
- en: As mentioned earlier, business rules were first introduced in CRM 2013\. It
    provided a simple declarative interface through which the system customizer, developer,
    or a power user can easily create validations and business rules without writing
    a single line of code. The business rule interface consisted of a set of conditions, actions
    to be taken when those conditions were met, along with a description as a convention
    to understand what the business rule does.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，业务规则首次在 CRM 2013 中引入。它提供了一个简单的声明性界面，系统自定义员、开发者或高级用户可以轻松创建验证和业务规则，而无需编写一行代码。业务规则界面由一组条件组成，满足这些条件时要执行的操作，以及作为约定的描述，以便理解业务规则的作用。
- en: With CRM 2015, many of the limitations of CRM 2013 were addressed. Business
    rules in CRM 2013 were restricted to run only on the client side. For the server
    side, writing a plugin or any other custom code was still required. This was addressed
    in CRM 2015 by adding a new option named Entity in Scope. The business rule with
    a scope as Entity will run both on the client side and server side.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在 CRM 2015 中，许多 CRM 2013 的限制得到了改善。CRM 2013 中的业务规则仅限于在客户端运行。对于服务器端，仍然需要编写插件或其他自定义代码。这一问题在
    CRM 2015 中得到了改善，新增了名为“实体范围”的选项。具有实体范围的业务规则将在客户端和服务器端都运行。
- en: For the Entity scope, if a rule is triggered from forms either during the creation
    or updating of a record, the rule will first run on the client side and then again
    on the server side. Therefore, a rule having an action such as Set Sales Amount
    to Sales Amount + 10 will result in a rule validation failure as it will a create
    a cyclical reference.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 对于实体范围，如果规则是在表单中触发的，无论是在创建还是更新记录时，规则将首先在客户端运行，然后再在服务器端运行。因此，如果一个规则包含像“将销售金额设置为销售金额
    + 10”这样的操作，就会导致规则验证失败，因为它会创建一个循环引用。
- en: The second biggest update to business rules in CRM 2015 was the support for
    `if...else` conditions and the possibility of combining multiple expressions in
    a condition using `AND`/`OR` logic. In CRM 2013, to define a simple rule having
    an `else` condition, we had to write two business rules.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: CRM 2015 中业务规则的第二大更新是支持 `if...else` 条件，并且可以使用 `AND`/`OR` 逻辑在条件中组合多个表达式。在 CRM
    2013 中，要定义一个包含 `else` 条件的简单规则，我们必须编写两个业务规则。
- en: In business rules, an expression in a condition can only be combined using either
    `AND` condition or using `OR` condition, but not both.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在业务规则中，条件中的表达式只能使用 `AND` 条件或 `OR` 条件组合，但不能同时使用两者。
- en: 'For example, a rule such as in the Contact form, If Martial Status field has
    value Married then make Spouse/Partner Name field as Business Required, else set
    its requirement level as `none`. Here, we would have ended up writing two business
    rules, one for making the Business Required field and the other for setting its
    requirement level as `none`. With the support of `if...else` statements since
    CRM 2015, we now just need to write a single business rule, shown as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在联系人表单中，如果“婚姻状况”字段的值为“已婚”，则将“配偶/伴侣姓名”字段设置为“业务必填”，否则将其设置为“无”。在这里，我们将只需编写一个业务规则，而不是过去需要编写两个业务规则，一个用于设置字段为业务必填，另一个用于将其设置为“无”，这得益于
    CRM 2015 以来支持的“if...else”语句。
- en: '![](img/68fc3a80-68a9-42ba-bfc5-854209c50df3.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](img/68fc3a80-68a9-42ba-bfc5-854209c50df3.png)'
- en: Another update in CRM 2015 was the addition of the new action named Set default
    value for setting the default value of the field.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: CRM 2015 的另一个更新是添加了名为“设置默认值”的新操作，用于设置字段的默认值。
- en: 'Different action in CRM 2013\. The following screenshot shows different actions
    that are available in Dynamics 2013:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: CRM 2013 中的不同操作。以下截图显示了 Dynamics 2013 中可用的不同操作：
- en: '![](img/4a1c3994-cb92-409d-adf4-dbcf6000624e.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4a1c3994-cb92-409d-adf4-dbcf6000624e.png)'
- en: 'Different action in CRM 2015 (with new Set default value action). The following
    screenshot shows different actions that are available in Dynamics 2015 include
    the new Set Default value action:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: CRM 2015 中的不同操作（包括新的“设置默认值”操作）。以下截图显示了在 Dynamics 2015 中可用的不同操作，包括新的“设置默认值”操作：
- en: '![](img/6cc28a60-8d1f-4fae-9281-25a6d30fc20b.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6cc28a60-8d1f-4fae-9281-25a6d30fc20b.png)'
- en: CRM 2015, along with the action of setting a default value for a field, also
    brought the feature of clearing the value of a field through business rules.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: CRM 2015 还引入了为字段设置默认值的操作，同时通过业务规则清除字段值的功能。
- en: 'The next release, CRM 2016, added the ability to invoke a business rule based
    on business process flow properties. Shown as follows, we have defined both the
    Business Process rule and active stage rule in the conditions; that is, if Business
    Process equals Opportunity Sales Process and Active Stage is Propose. The following
    screenshot shows the usage of business process flow while defining business rule:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个版本，CRM 2016，添加了根据业务流程属性调用业务规则的功能。如下所示，我们在条件中定义了业务流程规则和活动阶段规则；即，如果业务流程等于“销售机会流程”并且活动阶段为“建议”。以下截图显示了在定义业务规则时使用业务流程流程的情况：
- en: '![](img/c390dc6f-7507-408b-bf14-1f762a35e788.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c390dc6f-7507-408b-bf14-1f762a35e788.png)'
- en: Similar to the active stage rule, we could define a condition based on the selected
    stage rule in CRM 2016.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 与 CRM 2016 中的活动阶段规则类似，我们可以根据 CRM 2016 中选择的阶段规则定义条件。
- en: Creating business rules based on business process flows is detailed at [https://msdn.microsoft.com/en-us/library/mt639372.aspx](https://msdn.microsoft.com/en-us/library/mt639372.aspx).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 创建基于业务流程的业务规则的详细信息，请参阅 [https://msdn.microsoft.com/en-us/library/mt639372.aspx](https://msdn.microsoft.com/en-us/library/mt639372.aspx)。
- en: With the December 2016 update for Dynamics 365, we now have a newly updated
    editor for defining business rules, a new action called Recommendation, along
    with some new features.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 随着 2016 年 12 月更新的 Dynamics 365，我们现在拥有了一个全新更新的编辑器，用于定义业务规则，一个称为“推荐”的新操作，以及一些新功能。
- en: In this section, we covered the journey of business rules from CRM 2013 to CRM
    2016\. Now, let us have a look at the new Business Rule Designer and all the components
    inside Dynamics 365 in detail.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们详细介绍了业务规则从 CRM 2013 到 CRM 2016 的发展历程。现在，让我们详细查看 Dynamics 365 中的新业务规则设计器及其所有组件。
- en: Getting to know the new Business Rule Designer
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解新业务规则设计器
- en: 'To have a quick look at the new designer, open any entity for customization
    and select Business Rules on the left navigation and click on the New button.
    This will open up the new Business Rule Designer introduced in Dynamics 365 with
    a completely new look and feel. The new designer allows us to add a component
    such as conditions and actions using the drag-and-drop feature:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 要快速查看新设计器，请打开任何实体进行自定义，选择左侧导航中的“业务规则”，然后点击“新建”按钮。这将打开在 Dynamics 365 中引入的全新业务规则设计器，具有全新的外观和感觉。新设计器允许我们使用拖放功能添加组件，如条件和操作：
- en: '![](img/ff7aeff4-c381-425d-b43f-48bcd6a54462.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ff7aeff4-c381-425d-b43f-48bcd6a54462.png)'
- en: 'The key point to remember here is that the business rules are still the same
    fundamentally; it is only the editor for it that has been updated. We still have
    the same options available for Scope that we had; that is, Entity, All Forms,
    and the individual forms for that entity:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这里需要记住的关键点是，业务规则在本质上仍然是相同的；只是编辑器发生了更新。我们仍然可以使用之前可用的范围选项，即**实体**、**所有表单**以及该实体的单独表单：
- en: '![](img/0bdbcb83-600a-47e9-849c-eca7c20e64f0.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0bdbcb83-600a-47e9-849c-eca7c20e64f0.png)'
- en: 'Let us pause and do a quick recap of the Scope:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们暂停一下，快速回顾一下范围：
- en: '| **Scope type** | **Description** |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| **范围类型** | **描述** |'
- en: '| Entity | The business rule runs on all forms of the Entity including Quick
    Create and server-side. |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| 实体 | 业务规则适用于该实体的所有表单，包括快速创建和服务器端。 |'
- en: '| All Forms | The business rule runs on all forms of the Entity including Quick
    Create. |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| 所有表单 | 业务规则适用于该实体的所有表单，包括快速创建。 |'
- en: '| **Specific Form (information, account, and so on)** | The business rule runs
    only on that specific form of the Entity. |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| **特定表单（信息、账户等）** | 业务规则仅在该实体的特定表单上运行。 |'
- en: The Business Rule Designer's components are basically grouped into Flow and
    Actions.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 业务规则设计器的组件基本上分为流程和操作。
- en: Condition components come under Flow and the various actions that are available
    are Recommendation, Show Error Message, Set Default Value, Set Visibility, Lock/Unlock,
    Set Field Value, and Set Business Required.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 条件组件属于流程，而可用的各种操作包括推荐、显示错误消息、设置默认值、设置可见性、锁定/解锁、设置字段值和设置业务必填项。
- en: The Recommendation is a new action added in Dynamics 365, using which we can
    suggest that the user perform an activity based on some condition. We will cover
    it in detail in the up coming sections.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐是Dynamics 365中新增的一项操作，通过它我们可以根据某些条件建议用户执行某个活动。我们将在接下来的章节中详细介绍。
- en: The new designer also allows for the searching of these components. The search
    is of type instant search, which shows the result while we are still typing in
    the search box.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 新的设计器还允许搜索这些组件。搜索是即时搜索类型，在我们仍在输入时就会显示结果。
- en: 'For example, typing in set in the search box shows the actions with set in
    their names in the drop-down, and also filters the visible components:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在搜索框中输入set会显示带有set名称的操作，并在下拉框中筛选出可见的组件：
- en: '![](img/e7566885-056e-4542-8c52-7def63d0826f.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7566885-056e-4542-8c52-7def63d0826f.png)'
- en: Every component—that is Condition and Action, has its specific set of properties.
    Before we look at the properties of each of these components, let us see how we
    can add these components in the Business Rule Designer canvas.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 每个组件——即条件和操作，都有其特定的属性。在查看这些组件的属性之前，让我们先看看如何在业务规则设计器画布中添加这些组件。
- en: Specifying conditions using condition components
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用条件组件指定条件
- en: While creating a new business rule, the business rule designer opens with a
    single condition already added.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建新的业务规则时，业务规则设计器会打开，并且已经添加了一个条件。
- en: 'To add more conditions, we can click on the Add button on the toolbar and select
    Add Condition:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加更多条件，我们可以点击工具栏上的**添加**按钮并选择**添加条件**：
- en: '![](img/81e6fa18-cd4e-4849-959f-008e5f5e6992.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](img/81e6fa18-cd4e-4849-959f-008e5f5e6992.png)'
- en: 'The other option is to drag and drop the condition component from the Components
    tab into the designer canvas. Selecting the condition in the designer will show
    the properties specific to the condition component in the Properties tab:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种选择是将条件组件从**组件**选项卡拖放到设计器画布中。选择设计器中的条件时，会在**属性**选项卡中显示该条件组件的特定属性：
- en: '![](img/6b6219b7-a228-4556-9b25-b5ca8f3a648b.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b6219b7-a228-4556-9b25-b5ca8f3a648b.png)'
- en: Let us look at some of the properties of the condition component.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下条件组件的一些属性。
- en: '![](img/939bf1e8-5225-4dcf-91e7-c563f1efa7fb.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/939bf1e8-5225-4dcf-91e7-c563f1efa7fb.jpg)'
- en: 'Clicking on + New adds a new rule to the rules section. For example, Rule 2
    in the following image:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 点击 + 新建会在规则部分添加一个新规则。例如，以下图片中的规则2：
- en: '![](img/cef6945c-17fe-414a-b10d-1ca2a14688ee.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cef6945c-17fe-414a-b10d-1ca2a14688ee.png)'
- en: 'The following image shows the Rule Logic and the Condition Expression (Text
    View) property inside the properties tab. The Apply button applies the condition
    and the Discard button can be used to **undo** the last action performed, similar
    to the *Ctrl* + *Z* command:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图片显示了规则逻辑和属性选项卡中的条件表达式（文本视图）属性。**应用**按钮应用条件，而**丢弃**按钮可用于**撤销**上一步操作，类似于*Ctrl*
    + *Z*命令：
- en: '![](img/66a56771-1287-43ed-96b7-4743cbcd53e9.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/66a56771-1287-43ed-96b7-4743cbcd53e9.png)'
- en: Now, let us have a look at the properties of the different type of actions available
    for business rules.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看可用于业务规则的不同类型操作的属性。
- en: Taking actions for conditions using action components
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用操作组件对条件执行操作
- en: 'An action can be added in the same way as a condition, by clicking on the Add
    button on the toolbar and selecting the action that we want to add. The action
    can also be added by dragging it from the Components tab and associating it to
    a condition, shown as follows. Here, we have dragged the Show Error Message action
    from Components tab and linked it to our existing New Condition:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 可以像添加条件一样添加操作，方法是点击工具栏上的“添加”按钮，并选择我们要添加的操作。也可以通过从“组件”选项卡中拖动操作并将其与条件关联来添加操作，具体如下所示。这里，我们从“组件”选项卡中拖动了“显示错误消息”操作，并将其与我们现有的新条件链接：
- en: '![](img/8d9f926d-2e58-4316-b9c8-f2e1efff4b7a.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d9f926d-2e58-4316-b9c8-f2e1efff4b7a.png)'
- en: 'This adds the Show Error Message action to the condition:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这将“显示错误消息”（Show Error Message）操作添加到条件中：
- en: '![](img/1815f67d-02e5-4254-8355-41c0fc848cc3.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1815f67d-02e5-4254-8355-41c0fc848cc3.png)'
- en: 'Let us now have a look at the properties of all the different actions available:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们来看看所有不同操作的属性：
- en: 'Lock/Unlock: This action can be used to define whether a field needs to be
    locked or unlocked:'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 锁定/解锁：此操作可用于定义一个字段是否需要被锁定或解锁：
- en: '![](img/6d496a42-144b-4e07-b971-74591bafc4fc.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6d496a42-144b-4e07-b971-74591bafc4fc.png)'
- en: 'This is how the locked field Probability will display inside the opportunity
    form:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 这是锁定字段“概率”（Probability）在商机表单中的显示方式：
- en: '![](img/47c44d00-93fe-4877-9a1c-f7ef169d7067.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/47c44d00-93fe-4877-9a1c-f7ef169d7067.png)'
- en: 'Show Error Message: This action can be used to show the error message on a
    particular field:'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示错误消息（Show Error Message）：此操作可用于在特定字段上显示错误消息：
- en: '![](img/7c2cb03c-3b32-4a53-b3e3-b523e6aa6246.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7c2cb03c-3b32-4a53-b3e3-b523e6aa6246.png)'
- en: 'This is how the error message shows up inside opportunity form. Hovering over
    the red cross icon shows the error message:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这是错误消息在商机表单中的显示方式。将鼠标悬停在红色叉图标上可以查看错误消息：
- en: '![](img/427c3d97-f28e-4845-9797-811473f6c0c6.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/427c3d97-f28e-4845-9797-811473f6c0c6.png)'
- en: 'Set Field Value: The Set Field Value action can be used to define a value for
    a field. The value can be set using the following options. Based on the field''s
    data type, the options will vary:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置字段值：设置字段值操作可以用于为字段定义一个值。值可以使用以下选项设置。根据字段的数据类型，选项会有所不同：
- en: '![](img/32020ad5-7ca6-4d71-8145-b8c32f66f86b.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/32020ad5-7ca6-4d71-8145-b8c32f66f86b.png)'
- en: 'Value: This can be used to specify the field''s value directly'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值（Value）：此选项可以直接指定字段的值
- en: 'Field: This can be used to specify the field''s value to another field''s value'
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字段（Field）：此选项可用于将字段的值指定为另一个字段的值
- en: 'Formula: This can be used to specify the field''s value by applying a formula
    (this option is available for the Date Time, Whole Number, and Decimal fields)'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公式（Formula）：此选项可通过应用公式来指定字段的值（此选项适用于日期时间、整数和小数字段）
- en: 'Clear: This clears the field''s value (this option is not available for the
    boolean and option set fields)'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清除（Clear）：此操作会清除字段的值（此选项对于布尔类型和选项集字段不可用）
- en: 'For example, we can use the Set Field Value action to define a rule that sets
    the estimated close date to be 100 days from the day the opportunity is created
    using formula, shown as follows:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们可以使用“设置字段值”（Set Field Value）操作来定义一个规则，利用公式将预计关闭日期设置为从商机创建之日起100天，具体如下所示：
- en: '![](img/8d6f1b5c-ecd0-4ae5-8ce9-8f6721c2d26b.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d6f1b5c-ecd0-4ae5-8ce9-8f6721c2d26b.png)'
- en: 'Set Business Required: The Set Business Required action can be used to set
    a field to be either Business Required or non-mandatory:'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置业务必填（Set Business Required）：设置业务必填操作可用于将字段设置为“业务必填”或非强制性：
- en: '![](img/3f39ea08-7aad-46b9-b100-d0185f37dad1.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3f39ea08-7aad-46b9-b100-d0185f37dad1.png)'
- en: 'Set Visibility: The Set Visibility section can be used to show or hide the
    field:'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置可见性：设置可见性部分可用于显示或隐藏字段：
- en: '![](img/8f8d62e2-b4b6-4dde-9dac-cceba6b44e9c.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8f8d62e2-b4b6-4dde-9dac-cceba6b44e9c.png)'
- en: 'Recommendation: As we saw earlier, Recommendation is a new action introduced
    in Dynamics 365\. The different properties of Recommendation are:'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 推荐：如前所述，推荐是Dynamics 365中引入的新操作。推荐的不同属性如下：
- en: '![](img/f3584baa-1cf1-4279-a5b0-89edd2f6919a.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3584baa-1cf1-4279-a5b0-89edd2f6919a.png)'
- en: 'Recommendation is a special type of action, which itself has an Actions inside
    it:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐（Recommendation）是一种特殊类型的操作，它本身包含了其他操作：
- en: '![](img/093d8f4e-d96d-4ef5-ac93-74c979ab8e46.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/093d8f4e-d96d-4ef5-ac93-74c979ab8e46.png)'
- en: 'This Actions is of type Set Field Value:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 该操作属于“设置字段值”（Set Field Value）类型：
- en: '![](img/7f33681f-9b4b-49b1-9e49-5eca47b0dbde.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7f33681f-9b4b-49b1-9e49-5eca47b0dbde.png)'
- en: It is the same Set Field Value action that we covered earlier. To see all the
    components in action, let us implement a recommendation business rule.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这与我们之前讨论的设置字段值操作相同。为了看到所有组件的实际效果，让我们实现一个推荐业务规则。
- en: Recommendation in action
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 推荐操作
- en: Now we have some basic understanding of different properties of the recommendation
    action and the different components of the Business Rule Designer, let us implement
    a scenario to see them in action. The scenario we will implement would be, for
    an example, if the Sales Stage selected is Propose, we would recommend the user
    to set the probability as `80`.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们对推荐操作的不同属性和业务规则设计器的不同组件有了一些基本了解，接下来我们将实现一个场景，看看它们如何发挥作用。我们将实现的场景是，如果选择的销售阶段是建议，我们将建议用户将概率设置为`80`。
- en: Let us implement it step by step.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们一步步地实现它。
- en: 'There are four ways of creating a new Business Rule in CRM:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在CRM中创建新业务规则有四种方式：
- en: 'At Field Level:'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在字段级别：
- en: Open the Entity for customization
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开实体进行自定义
- en: Click and open the field
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并打开字段
- en: 'Select Business Rule in the left navigation and click on New to create a new
    business rule:'
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧导航中选择业务规则，并点击新建以创建一个新的业务规则：
- en: '![](img/80066f73-e6bf-403b-ba1c-9fdaeafd1a88.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/80066f73-e6bf-403b-ba1c-9fdaeafd1a88.png)'
- en: 'At Entity level:'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在实体级别：
- en: Open the Entity for customization
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开实体进行自定义
- en: 'Select Business Rule in the left navigation and click on New to create a new
    business rule:'
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧导航中选择业务规则，并点击新建以创建一个新的业务规则：
- en: '![](img/a2ae6e5f-487a-410e-bcd6-057938b41115.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a2ae6e5f-487a-410e-bcd6-057938b41115.png)'
- en: 'From form:'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从表单：
- en: 'Open the form for customization. Click on the Business Rules ribbon button:'
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开自定义表单，点击业务规则功能区按钮：
- en: '![](img/a3b5e2bc-d96c-416f-bc4e-56cab9c09076.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a3b5e2bc-d96c-416f-bc4e-56cab9c09076.png)'
- en: 'This opens the Business Rule Explorer on the right panel of the form, which
    lets us create a new business rule by clicking on the New Business Rule button:'
  id: totrans-106
  prefs:
  - PREF_OL
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将在表单的右侧面板中打开业务规则资源管理器，允许我们通过点击新建业务规则按钮来创建新的业务规则：
- en: '![](img/616ec5e2-0d40-4096-8d54-a8e599de45d6.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/616ec5e2-0d40-4096-8d54-a8e599de45d6.png)'
- en: Another way that we can define the business rule from within the Form is by
    opening the form for customization, double-clicking on any of the fields or selecting
    any of the fields, and clicking on the Change Properties ribbon button to open
    the Field Properties dialog box. We can then select the Business Rule tab and
    click on New to create a new business rule.
  id: totrans-108
  prefs:
  - PREF_OL
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另一种可以从表单内定义业务规则的方式是通过打开自定义表单，双击任何字段或选择任何字段，然后点击更改属性功能区按钮以打开字段属性对话框。然后我们可以选择业务规则选项卡并点击新建以创建新的业务规则。
- en: 'Coming back to our scenario, let''s select Opportunity entity for customization
    and create a new business rule with the following details:'
  id: totrans-109
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回到我们的场景，选择机会实体进行自定义，并创建一个新的业务规则，详细信息如下：
- en: '| **Rule name** | Recommendation for Sales Stage. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| **规则名称** | 销售阶段推荐。 |'
- en: '| **Description** | Recommend probability to be 80 for Sales Stage - Proposed.
    |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 将销售阶段-建议的概率推荐为80。 |'
- en: 'Select the condition component and define the rule *When Sales Stage equals
    to Propose*, shown as follows, in the Properties tab:'
  id: totrans-112
  prefs:
  - PREF_OL
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择条件组件并在属性选项卡中定义规则*当销售阶段等于建议时*，如下所示：
- en: '![](img/68da0680-9594-41d1-a3f0-69a717ef9e0e.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/68da0680-9594-41d1-a3f0-69a717ef9e0e.png)'
- en: Click on Apply to apply the condition
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击应用以应用条件
- en: Next, we need to add a Recommend Action to this condition
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要为此条件添加一个推荐操作
- en: 'Either click on the Add button on the toolbar or drag the Recommendation action
    from the Components tab:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以点击工具栏上的添加按钮，或从组件选项卡中拖动推荐操作：
- en: '![](img/a25ad221-371d-403f-a168-275d5a509ae4.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a25ad221-371d-403f-a168-275d5a509ae4.png)'
- en: 'Select the Recommendation action and define its properties, shown as follows,
    and click on Apply:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择推荐操作并定义其属性，如下所示，然后点击应用：
- en: '![](img/62928df5-171f-473d-98b7-617bb52480c8.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/62928df5-171f-473d-98b7-617bb52480c8.png)'
- en: 'Next, we need to define the Action (Set Field Value) that is part of Recommendation.
    For this, select the New Action section within Recommendation:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要定义作为推荐的一部分的操作（设置字段值）。为此，请在推荐中选择新建操作部分：
- en: '![](img/0e4b7945-a1ef-41e0-b8ae-ce183324a10c.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e4b7945-a1ef-41e0-b8ae-ce183324a10c.png)'
- en: 'We will define the action as `Set probability field value as 80`, shown as
    follows, and click on Apply:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将操作定义为`设置概率字段值为80`，如下所示，然后点击应用：
- en: '![](img/994f6661-d828-4bf8-9dcf-1b3cd3abaf7f.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](img/994f6661-d828-4bf8-9dcf-1b3cd3abaf7f.png)'
- en: 'This is how our final rule will look inside the designer canvas. Click on Save
    to save the rule; it will also validate the rule for any errors. We can also click
    on Validate to validate our rule at any point, while we are still defining it:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我们最终规则在设计器画布中的样子。点击“保存”以保存规则；它也会验证规则是否有错误。在我们定义规则的过程中，随时可以点击“验证”来验证规则：
- en: '![](img/8ca5aa22-8ccf-4571-8ad3-b6ff71ff06b6.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ca5aa22-8ccf-4571-8ad3-b6ff71ff06b6.png)'
- en: On successful validation, we will get a Validation Successful message.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 验证成功后，我们将看到“验证成功”消息。
- en: '![](img/452f30c4-7097-45c6-ad83-553f43416d34.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/452f30c4-7097-45c6-ad83-553f43416d34.png)'
- en: 'In the case of any error, the Validate will show the error message, shown as
    follows, highlighted in red. We can check the properties tab to figure out the
    cause of the error. Before we can save and publish the business rule, we need
    to fix all the errors:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 如果出现任何错误，“验证”将显示错误消息，并以红色高亮显示。我们可以查看属性标签页以找出错误原因。在保存并发布业务规则之前，我们需要修复所有错误：
- en: '![](img/6b796b13-9eb0-4af8-8b80-6306257a685f.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b796b13-9eb0-4af8-8b80-6306257a685f.png)'
- en: Next, we need to click on Activate to activate the rule.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要点击激活按钮以激活规则。
- en: 'To see the business rule in action, we need to open the opportunity record
    and set the value of sales stage to Propose:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看业务规则的实际应用，我们需要打开机会记录并将销售阶段的值设置为“提议”：
- en: '![](img/57b3bb4e-9617-4df8-b76b-f5c19c312fc8.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/57b3bb4e-9617-4df8-b76b-f5c19c312fc8.png)'
- en: 'This shows the information icon next to the Probability field. Clicking on
    it opens the Recommendation box with the recommendation title and details that
    we set earlier:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 这将显示概率字段旁边的信息图标。点击它将打开推荐框，显示我们之前设置的推荐标题和详细信息：
- en: '![](img/17c163e1-461a-48c3-b00a-d1663f44ba2c.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/17c163e1-461a-48c3-b00a-d1663f44ba2c.png)'
- en: 'We can click on the Dismiss button to close the recommendation dialog box.
    Clicking on Apply will update the probability value to 80, as we had defined it
    in the Set Field Value Action, shown as follows:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以点击“关闭”按钮来关闭推荐对话框。点击“应用”将把概率值更新为80，这是我们在“设置字段值操作”中定义的，具体如下：
- en: '![](img/b1255e60-449a-4b43-b45f-206a7dbb6138.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b1255e60-449a-4b43-b45f-206a7dbb6138.png)'
- en: So, now we have implemented our Recommendation rule. Now, let us cover other
    additional features of the Business Rule Designer in the next section.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经实现了推荐规则。接下来，让我们在下一节中介绍业务规则设计器的其他附加功能。
- en: Additional features of Business Rule Designer
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 业务规则设计器的附加功能
- en: Apart from the provision of creating rules, there are some additional features
    introduced in the new Business Rule Designer, let us have a quick look at those
    new features.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 除了创建规则的功能外，新的业务规则设计器还引入了一些额外的功能，让我们快速浏览一下这些新功能。
- en: Cut, copy, and paste the component
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 剪切、复制和粘贴组件
- en: The toolbar within the Business Rule Designer gives the option to cut, copy,
    paste, and delete the component.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 业务规则设计器中的工具栏提供了剪切、复制、粘贴和删除组件的选项。
- en: 'To cut or copy the component, select the component and press the Cut or Copy
    button in the toolbar. Or, we can also use our keyboard shortcuts (*CTRL* + *C* or
    *CTRL* + *X*) to copy or cut:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 要剪切或复制组件，选择该组件并点击工具栏中的“剪切”或“复制”按钮。或者，我们也可以使用键盘快捷键（*CTRL* + *C* 或 *CTRL* + *X*）来复制或剪切：
- en: '![](img/77cdd192-3602-450a-a128-23b5df604c9a.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/77cdd192-3602-450a-a128-23b5df604c9a.png)'
- en: 'Clicking on Paste (or *CTRL* + *V*) shows the different area with the + symbol
    where the copied component can be added:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“粘贴”（或*CTRL* + *V*）会显示一个带有+符号的区域，可以在该区域添加已复制的组件：
- en: '![](img/614e1a4e-6d4a-422a-bf4c-454070b229f5.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/614e1a4e-6d4a-422a-bf4c-454070b229f5.png)'
- en: Clicking on + adds the copied component to that specific location.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 点击+会将复制的组件添加到指定位置。
- en: Deleting the component
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除组件
- en: To delete the component, just select the component and click on the Delete button
    (or press *CTRL* + *X*) on the toolbar. This will open a Confirm Deletion dialog
    box.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除组件，只需选择该组件并点击工具栏上的“删除”按钮（或按*CTRL* + *X*）。这将打开确认删除对话框。
- en: Clicking on OK on the Confirm Deletion dialog box removes the component.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在“确认删除”对话框中点击“确定”将删除该组件。
- en: Taking a snapshot of the business rule
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 拍摄业务规则的快照
- en: 'Clicking on the Snapshot button on the toolbar saves the current state of the
    business rule as an image file:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 点击工具栏上的“快照”按钮将当前业务规则的状态保存为图像文件：
- en: '![](img/d96dbfcc-a09a-47ec-aabe-5f2f6af2bada.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d96dbfcc-a09a-47ec-aabe-5f2f6af2bada.png)'
- en: The file is saved with the name of the business rule with the `.png` extension.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 文件以业务规则的名称保存，扩展名为`.png`。
- en: Set zoom level and Fit to Canvas for ease of readability
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置缩放级别并适应画布以提高可读性
- en: 'We can set the zoom level of the Business Rule Designer by clicking the - and
    + lenses. The third option is for Fit to Canvas, which makes the business rule
    definition auto-adjust to fit the Business Rule Designer canvas:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过点击 - 和 + 镜头来设置商务规则设计器的缩放级别。第三个选项是“适应画布”，它使商务规则定义自动调整以适应商务规则设计器的画布：
- en: '![](img/b4c797cc-e58a-4a92-be82-f456fdd78f0d.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b4c797cc-e58a-4a92-be82-f456fdd78f0d.png)'
- en: Navigating easily using Minimap
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用迷你地图轻松导航
- en: 'The Business Rule Designer canvas also has Minimap component that gives a mini
    view of the designed business rules:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 商务规则设计器画布还具有迷你地图组件，可以提供已设计商务规则的迷你视图：
- en: '![](img/cfbadd2d-d688-4b3d-812a-9caa592a4555.png)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cfbadd2d-d688-4b3d-812a-9caa592a4555.png)'
- en: 'It also allows to easily navigate inside the designer canvas. Using Minimap,
    we have easily scrolled to the bottom-right corner of our business rule definition
    inside the designer where we have the Lock/Unlock action component, shown as follows:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 它还允许在设计器画布内轻松导航。使用迷你地图，我们可以轻松滚动到商务规则定义的右下角，在那里我们可以看到锁定/解锁操作组件，如下所示：
- en: '![](img/c9227520-3643-492c-9dce-2e4cfe891a13.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c9227520-3643-492c-9dce-2e4cfe891a13.png)'
- en: Using Business Rule (Text View) to read through the business rule
  id: totrans-162
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用商务规则（文本视图）阅读商务规则
- en: The Business Rule (Text View) component inside the designer canvas displays
    the text view of the rule defined.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 设计器画布中的商务规则（文本视图）组件显示定义的规则的文本视图。
- en: 'For the Recommendation rule that we defined earlier:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们之前定义的推荐规则：
- en: '![](img/6e4f4ad3-fa6f-4d21-98b2-2ee2290f8763.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6e4f4ad3-fa6f-4d21-98b2-2ee2290f8763.png)'
- en: 'The Business Rule (Text View) will show the following content:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 商务规则（文本视图）将显示以下内容：
- en: '![](img/4908e2e3-6011-4011-87be-e5f896caaea4.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4908e2e3-6011-4011-87be-e5f896caaea4.png)'
- en: A few key points about business rules
  id: totrans-168
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关于商务规则的几个关键点
- en: 'The following are important points regarding business rules that we need to
    consider before we decide on using them:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是关于商务规则的一些重要要点，在我们决定是否使用它们之前需要考虑：
- en: We cannot use the business rule to hide tabs and sections of a form.
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们不能使用商务规则来隐藏表单的选项卡和部分。
- en: The `OnChange` event of the field will not be triggered if that field's value
    is set using a business rule.
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果通过商务规则设置字段的值，则该字段的 `OnChange` 事件将不会被触发。
- en: There is a limitation of 10 `if...else` conditions in a business rule.
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商务规则中有一个 `if...else` 条件的限制，最多为 10 个。
- en: The business rule will not run if it references a field that is not in the form.
    It will not show any error message.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果商务规则引用了表单中没有的字段，它将不会运行，也不会显示任何错误消息。
- en: The business rule, if not defined with Scope as Entity, will run only during
    the load of the form and when the value of a field changes. It will not run on
    save of the form.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '如果商务规则没有定义为实体范围（Scope: Entity），它只会在表单加载时和字段值更改时运行。它不会在表单保存时运行。'
- en: Business rules run in order of their activation. So, if we have multiple interrelated
    business rules defined for an Entity, the business rule that was activated first
    will run first followed by the other business rule in order of their activation.
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商务规则按激活顺序执行。所以，如果我们为一个实体定义了多个相互关联的商务规则，首先激活的商务规则会先执行，之后的商务规则按激活顺序执行。
- en: If we have both JavaScript and business rules defined for a specific field,
    JavaScript will be executed first.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们为某个特定字段定义了 JavaScript 和商务规则，JavaScript 将首先执行。
- en: Business rules don't support whole number fields with the TimeZone, Duration,
    or Language formats.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商务规则不支持具有时区、持续时间或语言格式的整数字段。
- en: Business rules are cached for Dynamics 365 for tablets app, when that app is
    opened. So, for any change to be reflect, the app needs to be closed and re-opened.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商务规则会在 Dynamics 365 的平板应用中进行缓存，当该应用打开时。如果有任何更改需要反映，必须关闭并重新打开该应用。
- en: Summary
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered how business rules have evolved starting from CRM
    2013 to Dynamics 365\. We have an entirely new designer that makes it more intuitive
    to write and define business rules. We also had a detailed look at the new Recommendation
    action that was added in Dynamics 365 along with a host of new features.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了商务规则如何从 CRM 2013 到 Dynamics 365 的演变。我们有了一个全新的设计器，使得编写和定义商务规则更加直观。我们还详细了解了
    Dynamics 365 中新增的推荐操作以及一系列新功能。
- en: In the next chapter, we will look at Microsoft PowerApps and how it can be used
    to create custom business apps.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将了解 Microsoft PowerApps 及其如何用于创建自定义商务应用。
