<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">DevOps - Continuous Integration and Delivery</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will learn about implementing DevOps core process such as source code repository, code review, artifacts repository, continuous testing, continuous development, continuous integration. As discussed in previous chapters on big data and cloud, these processes are highly valuable to apply to every phase. We will focus on few popular tools like Git, Jenkins, Maven, Gerrit, Nexus, Selenium, and so on.</p>
<ul>
<li><strong>Continuous integration</strong> (<strong>CI</strong>)</li>
<li><strong>Continuous delivery</strong> (<strong>CD</strong>)</li>
<li>Jenkins tool setup</li>
<li>Configuration management-Jenkins</li>
<li>Source code management-Git</li>
<li>Build management- Maven</li>
<li>Source code review-Gerrit</li>
<li>Repository management-Nexus</li>
<li>Test Automation- Selenium</li>
<li>Continuous deployment-Pipelines</li>
<li>Jenkins client setup</li>
<li>Jenkins security</li>
<li>Jenkins metrics</li>
</ul>
<p>Continuous integration and continuous delivery are popular and valuable processes to ensure high-quality and timely software delivery. Continuous integration is the integrated software development process where multiple developers adhere to the agile methodology and adapt it to best practices like the following:</p>
<ul>
<li>Ensure all development code is subject to a version control system</li>
<li>An adequate code review process is incorporated</li>
<li>Changes to code are integrated, tested, and built quickly</li>
<li>Build process is integrated to run unit tests and automated</li>
<li>Attend to the build errors immediately, turn around quickly</li>
<li>Tracking and Metrics of build results and repository management.</li>
<li>Transparency and a user-friendly build process</li>
</ul>
<p>Continuous delivery is the process of extending the continuous integration.</p>
<ul>
<li>The most current and latest version of the software is readily available</li>
<li>Changes passing through the testing cycle from the technical and quality standpoint are ready for deployment</li>
<li>Automate the shipment and deployment process</li>
</ul>
<p>The continuous integration process is depicted as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e36b05fa-c2f4-454f-b052-1e2e003b4045.png"/></div>
<p>The continuous integration process is detailed following:</p>
<ul>
<li><strong>The developer's environment</strong>: Developers create code changes in a local workspace with an Integrated Development Environment runtime and with build tools physically installed on PC, or a cloud-based (Web IDE). They do unit level testing, data validations, code performance checks, and so on. The code changes done by the developer are pushed to the source code management system.</li>
<li>The typical continuous integration and deployment cycle is comprises of setting up a CI/CD infrastructure and processes as listed:
<ul>
<li>The source code version and repository management system</li>
<li>A process scheduler to initiate the orchestration pipeline</li>
<li>A build process to manage code builds and scheduled tests</li>
<li>Build nodes for executing the build</li>
<li>Testing process on identified test nodes for automated testing</li>
<li>Build outcome artifact repository</li>
<li>Artefact repository to store build results</li>
<li>Scenario and acceptance tests on test nodes</li>
<li>Application installation with deploy tool on to runtime systems</li>
<li>Acceptance tests for applications deployed on the runtime systems</li>
</ul>
</li>
</ul>
<p>The quality manager will approve the acceptance tests to agree to deployment test systems.</p>
<p>The delivery manager will approve the application deployment to production.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Best practices for CI/CD</h1>
                </header>
            
            <article>
                
<ul>
<li><strong>Using version control</strong>: In collaborative development environments with simultaneous development there will be multiple challenges:
<ul>
<li>A source code management system defines a single source of truth for the code after placing the code under a version control system. The source code will be reproducible by effectively adopting the merge process for mainline development and loop lines for bug fixes and so on in the system. Git is a popular source code management system and GitHub is a cloud variant as a <strong>Software as Service</strong> (<span><strong>SaaS</strong>) </span>model:</li>
</ul>
</li>
<li><strong>Automate the build</strong>: Standardized automated build procedure will stabilize the build process to produces dependable results. The matured build process must contain the build description and all the dependencies to execute the build with a standardized build tool installation. Jenkins is the most versatile tool for build schedules; it offers a convenient UI and also has plug-ins integrating most popular tools for continuous integration.</li>
<li><strong>Tests in the build</strong>: A few tests are to be performed to validate effectiveness and fitness of code beyond just the syntactical correctness of the code as follows:
<ul>
<li>Unit tests operate directly on build results</li>
<li>Static code checks on source code prior to developer check-in. Git pre-commit triggers or CI system could be used to set up a gating or non-gating check</li>
<li>Scenario tests for new build applications to be installed and started</li>
<li>Functional performance of the code:</li>
</ul>
</li>
</ul>
<p style="padding-left: 60px">Unit test frameworks are popular across source code technologies like JUnit for Java. Selenium Framework provides graphical user interfaces and browser behavior.</p>
<p style="padding-left: 60px">Implementing these tests on the developer's workstation early as part of the build saves time and effort addressing bugs discovered later in the development process.</p>
<ul>
<li><strong>Early and frequent commit of code</strong>: In a distributed development environment with multiple projects, each team or developer intends to integrate their code with the mainline. Also, the feature branches change to be integrated into the main line. It's a best practice to integrate code quickly and early. The time delay increases between new changes and merging with the mainline will increase the risk of product instability, the time taken, and complications as the main-line evolves from the baseline. Hence each developer working with the feature branch should push their code at least once per day. For main branch inactive projects, the high effort for constant rebasing must be evaluated before implementing.</li>
<li><strong>Every change to be built</strong>: Developer changes are to be incorporated into the mainline, however, they can potentially destabilize the mainline affecting its integrity for the developers relying on the main line.</li>
</ul>
<p style="padding-left: 60px">Continuous integration addresses this with the best practice of continuous build for any code change committed. Any broken build requires immediate action as a broken build blocks the entire evolution of the mainline and it will be expensive depending on the frequency of commits and such issues. These issues can be minimized by enforcing branch level builds.</p>
<p style="padding-left: 60px">Push for review in Gerrit or pull request in GitHub are effective mechanisms to propose changes and check the quality of changes by identifying problems before they're pushed into the mainline, causing rework.</p>
<ul>
<li><strong>Address build errors quickly</strong>: The best practice of building at the branch level for each change will put the onus on the respective developers to fix their code build issues immediately rather than propagate it to the main branch. This forms a continuous cycle of Change-Commit-Build-Fix at each respective branch level.</li>
<li><strong>Build fast</strong>: The quick turnaround of builds, results, and tests by automatic processes should be vital inputs for the developer workflow; a short wait time will be good for the performance of the continuous integration process on overall cycle efficiency.</li>
</ul>
<p style="padding-left: 60px">This is a balancing act between integrating new changes securely to the main branch and simultaneously building, validating, and scenario testing. At times, there could be conflicting objectives so trade-offs need to be achieved to find a compromise between different levels of acceptance criteria, considering the quality of the mainline is most important. Criteria include syntactical correctness, unit tests, and fast-running scenario tests for changes incorporated.</p>
<ul>
<li><strong>Pre-production run</strong>: Multiple setups and environments at various stages of the production pipeline cause errors. This would apply to developer environments, branch level build configurations, and central main build environments. Hence the machines where scenario tests are performed should be similar and have a comparable configuration to the main production systems.</li>
</ul>
<p style="padding-left: 60px">Manual adherence to an identical configuration is a herculean task; this is where DevOps value addition and core value proposition and treat the infrastructure setup and configuration similar to writing code. All the software and configuration for the machine are defined as source files which enable you to recreate identical systems; we will cover them in more detail in <a href="1346153b-eecd-4c59-8275-b93d9ba29cbd.xhtml" target="_blank">Chapter 8</a>, <em>DevOps Continuous Deployment</em>.</p>
<ul>
<li><strong>The build process is transparent</strong>: The build status and records of the last change must be available to ascertain the quality of the build for everyone. Gerrit is a change review tool and can be effectively used to record and track code changes, the build status, and related comments. Jenkins flow plugins offer build team and developers a complete end to end overview of the continuous integration process for source code management tools, the build scheduler, the test landscape, the artifact repository, and others as applicable.</li>
<li><strong>Automate the deployment</strong>: Installation of the application to a runtime system in an automated way is called deployment and there are several ways to accomplish this.
<ul>
<li>Automated scenario tests should be part of the acceptance process for changes proposed. These can be triggered by builds to ensure product quality.</li>
</ul>
<ul>
<li>Multiple runtime systems like JEE servers are set up to avoid single-instance bottlenecks of serializing test requests and the ability to run parallel test queries. Using a single system also has associated overheads in recreating the environment with change overhead for every test case, causing a degeneration a performance.</li>
<li>Docker or container technology to install and start runtime systems on demand in well-defined states, to be removed afterward (we will discuss container technology in <a href="f88de5ac-d98c-49fe-a172-ac4ed44d19b1.xhtml" target="_blank">Chapter 9</a>, <em>Containers, IoT, and Microservices</em>, in depth).</li>
<li>Automated test cases, since the frequency and time of validations of new comments, is not predictable in most cases, so scheduling daily jobs at a given time is an option to explore, where the build is deployed to a test system and notified after successful deployment.</li>
<li>The deployment to production is a manual conscious decision satisfying all quality standards and ensure the change is appropriate to be deployed to production. If it can also be automated with confidence, that's the highest accomplishment of automated continuous deployment too.</li>
</ul>
</li>
</ul>
<p>Continuous delivery means that any change integrated is validated adequately so that it is ready to be deployed to production. It doesn't require every change to be deployed to production automatically.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Jenkins setup </h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>We will start with Jenkins as it's the core component of the continuous integration process. The Jenkins process workflow is shown as follows:</span></p>
<div class="CDPAlignCenter CDPAlign"><img height="319" src="assets/d95cdcce-4919-49f0-8391-7cec0eb4be86.png" width="133"/></div>
<p>See the Jenkins homepage at: <a href="https://jenkins.io/index.html">https://jenkins.io/index.html</a>, shown as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4d22589a-5e08-4dbc-a9e3-47b16372576f.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Prerequisites to install Jenkins</h1>
                </header>
            
            <article>
                
<p>Jenkins installation and configuration requirements should be planned well as prescribed on the Jenkins homepage based on the following parameters:</p>
<ul>
<li>Operating system--Linux versions of Ubuntu/Debian, Red Hat/Fedora/CentOS, openSUSE, FreeBSD, OpenBSD, Gentoo, Windows, macOS X</li>
<li>JDK version</li>
<li>Memory</li>
<li>Disk space</li>
<li>Java Containers--The Jenkins WAR file can run on any servlet-supported engine such as tomcat or Glassfish application servers.</li>
</ul>
<p>Jenkins can be installed in different modes as per its utility:</p>
<ul>
<li><strong>Standalone</strong>: Jenkins can run standalone in its own process using its own built-in web server (Jetty) for experimentation and small projects</li>
<li><strong>Servlet-based</strong>: It can also run as one servlet framework for development projects.</li>
<li><strong>Multi-node setup for staging or production</strong>: Distributed client-server setup; the Jenkins advanced installation procedure is recommended.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Standalone Installation</h1>
                </header>
            
            <article>
                
<p>A standalone installation as suggested in the name is all by itself on a single machine (as opposed to multiple systems for different tasks):</p>
<ol>
<li>Standalone installation requires JDK to be installed on the system.</li>
<li>Download the <kbd>Jenkins.war</kbd> file</li>
<li>Open the command prompt and, at the location of the <kbd>Jenkins.war</kbd> <span>file, run the command:</span></li>
</ol>
<pre style="padding-left: 60px"><strong>C:&gt;Java -jar Jenkins.war</strong></pre>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/1023bb7c-2d4b-445a-b456-001db44e13f8.png"/></div>
<p>During initialization, a few tasks will run and the following screen will appear during the installation process:</p>
<ol>
<li>The initial screen page will ask about the plugin options:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="193" src="assets/b2b09892-7fc3-464b-bedd-6761dd623968.png" width="400"/></div>
<ol start="2">
<li>Plugins will be installed as per the selected configuration in the preceding option:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/67ff4682-7f8c-4225-a622-1cef59ec5d1b.png"/></div>
<ol start="3">
<li>After successful installation, the following admin credential creation page will pop up:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/dade695b-d0f9-4b78-ad0c-c1996efec3a1.png"/></div>
<ol start="4">
<li><strong>Accessing Jenkins</strong>: After successful installation, Jenkins can be accessed through a web browser from your local machine as follows:</li>
</ol>
<pre style="padding-left: 60px"><strong>http://localhost:8080</strong></pre>
<ol start="5">
<li>The Jenkins dashboard will open at this link:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/77ea33da-e5e2-45d2-9759-e53fe6057c6f.png"/></div>
<div class="packt_figure"/>
<ol start="6">
<li>The <span class="packt_screen">Manage Jenkins</span> option in the dashboard will provide various options to configure various parameters:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b96c851b-a3dd-497a-896c-8032d79c3e32.png"/></div>
<ol start="7">
<li>The <span class="packt_screen">Manage Plugins</span> option in the dashboard is an important option with a very wide choice of plugins to integrate with source code systems, authentication systems, various development platforms, and so on.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="217" src="assets/845dfdd9-263a-4103-8623-677a9dd5e337.png" width="480"/></div>
<p>Installing Jenkins on a Servlet Engine needs the installation of Tomcat or Glassfish.</p>
<div class="CDPAlignCenter CDPAlign"><img height="344" src="assets/023906b8-1488-460d-8e8e-54d960ef1ae0.png" width="442"/></div>
<ol>
<li>Copy the <kbd>Jenkins.war</kbd> file it to the web apps folder in the <kbd>tomcat</kbd> folder.</li>
<li>Start the Tomcat server from the Tomcat <kbd>bin</kbd> directory.</li>
<li><kbd>http://localhost:8080/Jenkins</kbd>--access Jenkins on Tomcat server.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Linux system installation on Ubuntu</h1>
                </header>
            
            <article>
                
<ol start="1">
<li>Log into the server and update: <kbd>sudo apt-get -y update</kbd>.</li>
<li>Install Java: <kbd>sudo apt-get install -y default-jdk</kbd>.</li>
<li>Download an Ubuntu version from <kbd>Jenkins-ci.org</kbd> site using <kbd>wget</kbd> command: <kbd>wget http://pkg.jenkins-ci.org/debian-rc/binary/jenkins_2.0_all.deb</kbd>.</li>
<li>Package install--<kbd>sudodpkg - i Jenkins.zip</kbd>.</li>
<li>Dependency resolve by <kbd>sudo apt - get -f install</kbd>.</li>
<li>Access Jenkins on port <kbd>http://localhost:8080/Jenkins</kbd>.</li>
<li>Continue with the steps listed in preceding figure.</li>
<li>To initialize Jenkins at startup, add the command <kbd>/etc/init.d/jenkins</kbd> start in <kbd>/etc/rc.local</kbd> file.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Git (SCM) integration with Jenkins</h1>
                </header>
            
            <article>
                
<p>Git is the most popular source code management system and offers extensive benefits such as:</p>
<ul>
<li>Version control lets you maintain multiple versions of the code for different purposes</li>
<li>A code repository is required to keep all project-related code in one place</li>
<li>Collaboration among users and intervention for debugging purposes</li>
</ul>
<p>Git can be downloaded from <a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5de08797-f6da-4d93-9121-e46e2e69aaf3.png"/></div>
<p>Multiple platforms versions such as Linux, Windows, and so on are available within desktop and web flavors.</p>
<p>There can be multiple types of repositories:</p>
<ul>
<li>A public repository created on GitHub can give read access to everyone but write or commit access is given to chosen individuals or groups</li>
<li>A private repository permits collaborators for participation and is a paid subscription to GitHub</li>
<li>A local repository is a desktop version without the need for an internet connection</li>
<li>A remote repository is a web-based repository for extended features like issue management and pull requests</li>
</ul>
<p>GitHub provides options to synchronize code changes from a single computer or between multiple computers.</p>
<p>Pull changes will sync code changes from a desktop with an online repository and clone options will create a new copy of the repository on the computer.</p>
<p>Performing these tasks enables us to maintain source code on cloud-based SaaS system</p>
<ol>
<li>Create a sign-in account on GitHub.</li>
<li>Create a project repository for organizing your project-related code.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="509" src="assets/5a3aa549-4fb1-4162-81ed-84508e5f39e5.png" width="841"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Integrating GitHub with Jenkins</h1>
                </header>
            
            <article>
                
<p>To integrate a GitHub repository with Jenkins, follow these steps:</p>
<ol>
<li>In <span class="packt_screen">Manage Plugins</span>, search for Git plugin under the filter section and install it.</li>
<li>If it's installed by default, we can find it on the <span class="packt_screen">Installed</span> tab as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1d966a59-59c2-4140-8c7d-c1d055d41b0f.png"/></div>
<ol start="3">
<li>After Jenkins is restarted, create new item on the Jenkins homepage will give the following screen:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/933bdefe-ff63-4fef-9e33-530714772650.png"/></div>
<ol start="4">
<li>Select a job name and the next screen will show Git options as following, under the <span class="packt_screen">Source Code Management</span> tab. You can add other SCM tools like CVS, subversion, and so on, in a similar manner:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/15151cb8-b8bb-48de-9bea-3be5e787cf75.png"/></div>
<ol start="5">
<li><span>Enter the Git repository address of the local machine or a web link in the preceding repository URL placeholder to configure Git with Jenkins.</span></li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Maven (Build) tool Integration with Jenkins</h1>
                </header>
            
            <article>
                
<ol start="1">
<li>Download Maven from <a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a>; this is the latest version of the binary file:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/71baaf1c-5220-4d2b-98c0-5f7b725740f5.png"/></div>
<ol start="2">
<li>Extract the downloaded Maven file to a folder.</li>
</ol>
<ol start="3">
<li>Open <span class="packt_screen">Manage Jenkins</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e5a8a0b5-dab2-47dc-8897-27d636325c8c.png"/></div>
<ol start="4">
<li>Select Maven Plugins as follows and install them without the restart option.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d6894617-6f82-4837-a66c-fc7dc8a7bd70.png"/></div>
<div class="packt_figure">
<div class="CDPAlignCenter CDPAlign"/>
</div>
<ol start="5">
<li>Monitor plugin progress as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e71aeadc-2044-4c0e-a05e-f531f8b1305e.png"/></div>
<ol start="6">
<li>Under <span class="packt_screen">Configure</span> tools, add Maven by giving the repository location:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ea3ad8fe-a991-4a87-9cbb-260498a3ba85.png"/></div>
<ol start="7">
<li>Create a new item job with the Maven project option:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="277" src="assets/5ae301e5-cd1c-43b1-9aa3-399c3a6c5b5c.png" width="532"/></div>
<ol start="8">
<li>The Maven option in build environment is as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="274" src="assets/fc85d052-6df1-43e1-b221-2567465227d0.png" width="523"/></div>
<ol start="9">
<li>The project is created as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="256" src="assets/235c694f-5ac6-4059-a35f-da0c6d70d737.png" width="498"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Building jobs with Jenkins</h1>
                </header>
            
            <article>
                
<ol>
<li>A simple application builds and runs the program:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="213" src="assets/80509ac9-7d5a-408d-b263-5733ed067502.png" width="511"/></div>
<ol start="2">
<li>The source code repository options as listed as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/05120459-f354-4054-a3fe-b5e1e07aeda6.png"/></div>
<ol start="3">
<li>We can specify the location of files which need to be built either from a source Git code repository or the URL from GitHub:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/21e0eaa3-d8ce-47a1-8b10-d8b676b9d977.png"/></div>
<ol start="4">
<li>Builds can be executed with multiple options, command modes, and Maven and so on:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2dade0e8-ad21-4e5b-b099-5f8e7f5c9a23.png"/></div>
<ol start="5">
<li>Command-line programs can be executed as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5ce358d3-530f-40e0-a436-9a91d276f007.png"/></div>
<ol start="6">
<li>After saving, the build option is visible, and history is also available:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="197" src="assets/28ccb656-2b6d-437e-a016-6e7d2595901a.png" width="498"/></div>
<ol start="7">
<li>Build progress can be seen and repository available as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="372" src="assets/64b1ba58-560a-40c5-bdb6-ec5bce00f079.png" width="569"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Source code review - Gerrit</h1>
                </header>
            
            <article>
                
<p>Code review is an important function in the software development framework. Having a good collaborative tool like Gerrit for a code review process is very appropriate and needed. Gerrit initiates a pull-based workflow to initiate change requests, wherein comments are included even for source code to allow the change to be merged into the code repository through the workflow process. Gerrit maintains a local repository of the mirrored Git project repositories with reference repositories. Gerrit creates another maintenance branch from master branch to track reviews to the code; it creates a change-id identifier for the commit message to keep track of each change in a code review.</p>
<p>Gerrit allows for code change comparisons and a reviewer can give one of five ratings:</p>
<ul>
<li><strong>+2</strong>: Looks good, approved</li>
<li><strong>+1</strong>: Looks good, but needs additional approval</li>
<li><strong>0</strong>: No comments</li>
<li><strong>-1</strong>: Suggest not submit this</li>
<li><strong>-2</strong>: Block the submit</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="304" src="assets/584cf9b4-4c19-470b-8255-d6cb9118218f.png" width="459"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installation of Gerrit</h1>
                </header>
            
            <article>
                
<ol>
<li>Download Gerrit from<a href="https://www.gerritcodereview.com/"> <span class="URLPACKT">https://www.gerritcodereview.com/</span></a><span class="URLPACKT">.</span></li>
<li>Follow the installation instructions as per the platform option and access Gerrit on port <kbd>8080</kbd> as follows to create users and projects:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="313" src="assets/3a7694fe-e9f4-4c4d-b5f2-b0c04cf5c753.png" width="506"/></div>
<ol start="3">
<li>Configure in Jenkins under <span class="packt_screen">Manage Plugins</span> for Gerrit:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/85ba7ddf-ae1a-43fb-89b0-d6ef0dbcdd55.png"/></div>
<p>Version control tools listed in the <a href="e29b859b-9aca-4186-982c-5cd4204f9c63.xhtml" target="_blank">Chapter 3</a>,  <em>DevOps Framework</em>, for example Gerrit the web-based code review interface, allow reviewing changes online to push changes from any git client and then auto-merging them with the master; it can also be configured as a remote git repository.</p>
<p>Gerrit configuration includes user creation, <strong>Secure Shell</strong> (<strong>SSH</strong>) set up to exchange data with a Gerrit server. The configuration file <kbd>/etc/gerrit.config</kbd> has extensive parameters you need to set as per configuration requirements.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Repository management</h1>
                </header>
            
            <article>
                
<p>Maintaining multiple build version artifacts is the key feature of repository management and Nexus is a popular repository manager. It can be downloaded from <span class="URLPACKT"><a href="http://www.sonatype.org/nexus/downloads/">http://www.sonatype.org/nexus/downloads/</a>.</span></p>
<p>After installation, it can be accessed from <kbd>http://&lt;nexus host&gt;:8081/nexus</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img height="291" src="assets/f3f289e7-68d9-4f01-b94b-20afce5bc704.png" width="568"/></div>
<p>Nexus can be configured with plugins for Jenkins integration:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5335b425-58bd-4966-a561-80c6fbd59ea4.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Testing with Jenkins</h1>
                </header>
            
            <article>
                
<div class="packt_figure CDPAlignCenter CDPAlign">
<p><span>Jenkins provides many out-of-the-box functionalities and plugins for testing. The site</span> <a href="https://wiki.jenkins.io/display/JENKINS/xUnit+Plugin">https://wiki.jenkins.io/display/JENKINS/xUnit+Plugin</a> <span>provides the plugins:</span></p>
<p><img height="315" src="assets/d9486e0e-48b4-41ee-a09f-6222e60017bd.png" width="633"/></p>
</div>
<p>A list of available testing plugins is shown as follows:</p>
<ul>
<li>JUnit itself</li>
<li>AUnit</li>
<li>MSTest (imported from MSTest Plugin)</li>
<li>NUnit (imported from NUnit Plugin)</li>
<li>UnitTest++</li>
<li>Boost Test Library</li>
<li>PHPUnit</li>
<li>Free Pascal Unit</li>
<li>CppUnit</li>
<li>MbUnit</li>
<li>Google test</li>
<li>EmbUnit</li>
<li>gtester/glib</li>
<li> QTestLib</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up unit testing</h1>
                </header>
            
            <article>
                
<ol>
<li>Pick up the project we have set up:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/32081772-acfc-4503-abe9-2d6cd835d615.png"/></div>
<ol start="2">
<li>Choose build option:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="493" src="assets/51736d0d-bcc8-4f3f-9f00-a96132764fcf.png" width="393"/></div>
<ol start="3">
<li>Choose an <span class="packt_screen">Advanced</span> option:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="473" src="assets/2c772bb4-44a0-40cb-aef3-4a17384e348f.png" width="362"/></div>
<ol start="4">
<li>Enter the location of <kbd>build.xml</kbd>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="496" src="assets/26eb3a28-dfc9-4755-b5c4-b814cfbfc05e.png" width="432"/></div>
<ol start="5">
<li>Select the option of post-build <span>option and choose - <kbd>Publish JUnit test result report</kbd>:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="440" src="assets/92870671-e152-4e9e-acf8-249e1fee02d3.png" width="401"/></div>
<ol start="6">
<li>In the test <kbd>reports.xml</kbd>, enter the reports created a folder <span>in our project so that</span> Jenkins <span>picks the resulting</span> XML files <span>produced by running of the</span> JUnit <span>test cases:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="447" src="assets/cd6a6315-214f-4dc2-967e-dc7c39600e50.png" width="425"/></div>
<p>We can select the build and drill-down to the test results.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Automated test suite</h1>
                </header>
            
            <article>
                
<p>Continuous integration is the process of verifying a build to objectively access its readiness for the next level; this is accomplished with automated testing. So, the build artifacts are set to be tested automatically; Selenium is the most popular framework for this.</p>
<p>It can be downloaded from the following site:</p>
<div class="CDPAlignCenter CDPAlign"><img height="383" src="assets/2d44a5fc-36f7-425c-be2e-077d59ac5a47.png" width="492"/></div>
<ol>
<li>Under <span class="packt_screen">Jenkins</span>, <span class="packt_screen">Plugin Manager</span>, select the Selenium plugin and install, restart to initiate:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e378bbe5-e17d-4826-8655-7a89187b5457.png"/></div>
<ol start="2">
<li>Configure the selenium server JAR file:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="441" src="assets/e4e3fb47-5017-4be1-ae3f-fbc4a00f36eb.png" width="533"/></div>
<ol start="3">
<li>Configure the project we created to be set for this automated framework:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="137" src="assets/bcdf0c28-d269-4144-b5e0-a7ba71adbb28.png" width="470"/></div>
<ol start="4">
<li>In the build process, add the option, <kbd>SeleniumHQhtmlSuite Run</kbd>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="350" src="assets/085a6757-f34b-4f22-92a7-6b06e72be9b6.png" width="399"/></div>
<ol start="5">
<li>Selenium IDE will generate TestSuite, the Selenium test is enabled with SuiteFile by launching the selenium driver:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="439" src="assets/15b60dc9-3739-4bab-bfd7-c1bd4ae7d3c1.png" width="453"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Continuous delivery- Build Pipeline</h1>
                </header>
            
            <article>
                
<p>Continuous delivery is the process of building a robust pipeline from software development to deployment.</p>
<div class="CDPAlignCenter CDPAlign"><img height="158" src="assets/97dd4574-06df-4199-aeda-d227f0f3f142.png" width="357"/></div>
<ol>
<li>Install the Build Pipeline plugin from <span class="packt_screen">Manage Plugins</span> as follows:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/73c2a410-1e4d-44cf-ae62-3af1a30fdf68.png"/></div>
<div class="packt_figure">
<div class="CDPAlignCenter CDPAlign"><img height="217" src="assets/f4434cc2-3803-4c68-ba5f-a5ebad45126f.png" width="461"/></div>
</div>
<ol start="2">
<li>To set up the Build Pipeline, Click on the + symbol, next to the <span class="packt_screen">All</span> tab on the dashboard:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e6565349-59ed-4cd4-aac6-2ef7949c238b.png"/></div>
<div class="packt_figure"/>
<ol start="3">
<li>Select <span class="packt_screen">Build Pipeline View</span> and choose a name for the pipeline:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6847d750-fc90-4c33-9025-7a2265128329.png"/></div>
<ol start="4">
<li>Select the <span class="packt_screen">Options</span> and the project created:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fa999a44-e60b-43d4-b9fd-3ba48db17933.png"/></div>
<ol start="5">
<li>The delivery pipeline view is created with the status of each stage of the project.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Jenkins features</h1>
                </header>
            
            <article>
                
<ul>
<li>Client-server</li>
<li>Security</li>
<li>Reporting</li>
</ul>
<p>Larger projects need multiple machines to be configured instead of centralized builds on one machine. Also, there are requirements for several different environments for test builds. Slave machines are effective to offload these loads from a master server.</p>
<p>They need a bi-directional communication link from the master through a TCP/IP socket, with only a slave agent instead of the full Jenkins package or compiled binaries.</p>
<ol>
<li>To set up slave/nodes under Jenkins, configure and select the manage nodes option and create a new node:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="164" src="assets/ccf96fd5-bedf-4430-944c-d9b4b9815816.png" width="512"/></div>
<ol start="2">
<li>Select name and <span class="packt_screen">Dumb Slave</span> option.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="187" src="assets/8cbb123d-4f59-46d0-8361-a5123cea4a44.png" width="489"/></div>
<ol start="3">
<li>The slave node details are to be given, then <span>choose to let Jenkins consider the Windows slave as a Windows service. Details such</span> as name <span>node and login credentials of the machine are required.</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="290" src="assets/072c2f4b-1664-44eb-9f39-685ce6278966.png" width="468"/></div>
<ol start="4">
<li>The slave machine will be available as follows; new jobs can be configured to run on this slave machine.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="219" src="assets/31086168-3b10-45b6-8965-149128040f97.png" width="524"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Security in Jenkins</h1>
                </header>
            
            <article>
                
<p>Users with relevant permissions can be set up with security configuration:</p>
<ol>
<li>Under <span class="packt_screen">Manage Jenkins</span>, select <span class="packt_screen">Configure Global Security</span>, and choose to <span class="packt_screen">Enable security</span> option:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/4444e6da-25e0-41ec-9b1d-7cf37e59dcdf.png"/></div>
<ol start="2">
<li>Once you save the options, you will be prompted for an admin user.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="174" src="assets/ee39b2a6-2e78-467a-aa04-039a518de7c0.png" width="454"/></div>
<ol start="3">
<li>Under <span class="packt_screen">Jenkins Manage</span> setup, choose <span class="packt_screen">Manage Users Options</span> to create users and then set up <span>authorizations required to execute jobs with</span> matrix based <span>security:</span></li>
</ol>
<ol start="4">
<li>The <span class="packt_screen">Reporting Options</span>, <span class="packt_screen">Metrics Options</span>, and <span class="packt_screen">Reporting Plugins</span> can be installed.</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="476" src="assets/4c457380-9d48-41e5-bdd3-492d452c49be.png" width="441"/></div>
<ol start="5">
<li>Many Metrics are available such as the Build History Metrics Plugin:
<ul>
<li><strong>Mean Time To Failure</strong> (<strong>MTTF</strong>)</li>
<li><strong>Mean Time To Recovery</strong> (<strong>MTTR</strong>)</li>
<li>Standard deviation of build times</li>
</ul>
</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="159" src="assets/550ddbf1-dba1-4a88-81cd-12a54a32d649.png" width="281"/></div>
<ol start="6">
<li>It can be installed under <span class="packt_screen">Manage Plugins</span> choosing the <span class="packt_screen">Build History Metrics Plugin</span>, the above metrics will be reflected on the job page.</li>
<li>To see a graphical representation, use Hudson global-build-stats and <span class="packt_screen">Global Build Stats</span> plugins under <span class="packt_screen">Manage Plugins</span>. Setting the options, initialize stats, create new chart options, and all the existing builds records will be displayed.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we learnt about processes and tools for implementing continuous<br/>
development, continuous integration, and continuous deployment with the use of repository management, code reviews, and test automation.</p>
<p>In the next chapter, we will cover the topics of infrastructure configuration management as code for continuous deployment with tools such as Chef, Puppet, and Ansible. We will discuss on continuous monitoring process with tools Splunk and Nagios.</p>


            </article>

            
        </section>
    </body></html>