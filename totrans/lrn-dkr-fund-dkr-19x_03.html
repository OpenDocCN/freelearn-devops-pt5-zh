<html><head></head><body>
        

                            
                    <h1 class="header-title">Setting Up a Working Environment</h1>
                
            
            
                
<p>In the last chapter, we learned what Docker containers are and why they're important. We learned what kinds of problems containers solve in a modern software supply chain.</p>
<p>In this chapter, we are going to prepare our personal or working environment to work efficiently and effectively with Docker. We will discuss in detail how to set up an ideal environment for developers, DevOps, and operators that can be used when working with Docker containers.</p>
<p>This chapter covers the following topics:</p>
<ul>
<li>The Linux command shell</li>
<li>PowerShell for Windows</li>
<li style="font-weight: 400">Installing and using a package manager</li>
<li>Installing Git and cloning the code repository</li>
<li>Choosing and installing a code editor</li>
<li>Installing Docker for Desktop on macOS or Windows</li>
<li>Installing Docker Toolbox</li>
<li>Installing Minikube</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Technical requirements</h1>
                
            
            
                
<p class="mce-root">For this chapter, you will need a laptop or a workstation with either macOS or Windows, preferably Windows 10 Professional, installed. You should also have free internet access to download applications and permission to install those applications on your laptop.</p>
<p>It is also possible to follow along with this book if you have a Linux distribution as your operating system, such as Ubuntu 18.04 or newer. I will try to indicate where commands and samples differ significantly from the ones on macOS or Windows.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">The Linux command shell</h1>
                
            
            
                
<p>Docker containers were first developed on Linux for Linux. It is hence natural that the primary command-line tool used to work with Docker, also called a shell, is a Unix shell; remember, Linux derives from Unix. Most developers use the Bash shell. On some lightweight Linux distributions, such as Alpine, Bash is not installed and consequently one has to use the simpler Bourne shell, just called <em>sh</em>. Whenever we are working in a Linux environment, such as inside a container or on a Linux VM, we will use either <kbd>/bin/bash</kbd> or <kbd>/bin/sh</kbd>, depending on their availability.</p>
<p>Although Apple's macOS X is not a Linux OS, Linux and macOS X are both flavors of Unix and hence support the same set of tools. Among those tools are the shells. So, when working on macOS, you will probably be using the Bash shell.</p>
<p>In this book, we expect from you a familiarity with the most basic scripting commands in Bash and PowerShell, if you are working on Windows. If you are an absolute beginner, then we strongly recommend that you familiarize yourself with the following cheat sheets:</p>
<ul>
<li><em>Linux Command Line Cheat Sheet</em> by Dave Child at <a href="http://bit.ly/2mTQr8l" target="_blank">http://bit.ly/2mTQr8l</a></li>
<li><em>PowerShell Basic Cheat Sheet</em> at <a href="http://bit.ly/2EPHxze" target="_blank">http://bit.ly/2EPHxze</a></li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">PowerShell for Windows</h1>
                
            
            
                
<p>On a Windows computer, laptop, or server, we have multiple command-line tools available. The most familiar is the command shell. It has been available on any Windows computer for decades. It is a very simple shell. For more advanced scripting, Microsoft has developed PowerShell. PowerShell is very powerful and very popular among engineers working on Windows. On Windows 10, finally, we have the so-called<em> Windows Subsystem for Linux</em>, which allows us to use any Linux tool, such as the Bash or Bourne shells. Apart from this, there are also other tools that install a Bash shell on Windows, for example, the Git Bash shell. In this book, all commands will use Bash syntax. Most of the commands also run in PowerShell.</p>
<p>Our recommendation for you is hence to either use PowerShell or any other Bash tool to work with Docker on Windows.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Using a package manager</h1>
                
            
            
                
<p>The easiest way to install software on a macOS or Windows laptop is to use a good package manager. On macOS, most people use Homebrew, and on Windows, Chocolatey is a good choice. If you're using a Debian-based Linux distribution such as Ubuntu, then the package manager of choice for most is <kbd>apt</kbd>, which is installed by default. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Homebrew on macOS</h1>
                
            
            
                
<p>Homebrew is the most popular package manager on macOS, and it is easy to use and very versatile. Installing Homebrew on macOS is simple; just follow the instructions at <a href="https://brew.sh/" target="_blank">https://brew.sh/</a>:<a href="https://brew.sh/"/></p>
<ol>
<li>In a nutshell, open a new Terminal window and execute the following command to install Homebrew:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</strong></pre>
<ol start="2">
<li>Once the installation is finished, test whether Homebrew is working by entering <kbd>brew --version</kbd> in the Terminal. You should see something like this:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ brew --version</strong><br/>Homebrew 2.1.4<br/>Homebrew/homebrew-core (git revision 77d1b; last commit 2019-06-07)</pre>
<ol start="3">
<li>Now, we are ready to use Homebrew to install tools and utilities. If we, for example, want to install the Vi text editor, we can do so like this:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ brew install vim</strong></pre>
<p>This will then download and install the editor for you.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Chocolatey on Windows</h1>
                
            
            
                
<p>Chocolatey is a popular package manager for Windows, built on PowerShell. To install the Chocolatey package manager, please follow the instructions at <a href="https://chocolatey.org/" target="_blank">https://chocolatey.org/</a> or open a new PowerShell window in admin mode and execute the following command:</p>
<pre><strong>PS&gt; Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))</strong></pre>
<p>It is important to run the preceding command as an administrator, otherwise, the installation will not succeed.</p>
<ol>
<li>Once Chocolatey is installed, test it with the <kbd>choco --version</kbd> command. You should see output similar to the following:</li>
</ol>
<pre style="padding-left: 60px"><strong>PS&gt; choco --version</strong><br/>0.10.15</pre>
<ol start="2">
<li>To install an application such as the Vi editor, use the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>PS&gt; choco install -y vim</strong></pre>
<p style="padding-left: 60px">The <kbd>-y</kbd> parameter makes sure that the installation happens without asking for reconfirmation.</p>
<p>Please note that once Chocolatey has installed an application, you need to open a new PowerShell window to use that application.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Git</h1>
                
            
            
                
<p>We are using Git to clone the sample code accompanying this book from its GitHub repository. If you already have Git installed on your computer, you can skip this section:</p>
<ol>
<li>To install Git on your macOS, use the following command in a Terminal window:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ choco install git</strong></pre>
<ol start="2">
<li>To install Git on Windows, open a PowerShell window and use Chocolatey to install it:</li>
</ol>
<pre style="padding-left: 60px"><strong>PS&gt;</strong> <strong>choco install git -y</strong></pre>
<ol start="3">
<li>Finally, on your Debian or Ubuntu machine, open a Bash console and execute the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ sudo apt update &amp;&amp; sudo apt install -y git</strong></pre>
<ol start="4">
<li>Once Git is installed, verify that it is working. On all platforms, use the following:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ git --version</strong></pre>
<p style="padding-left: 60px">This should output something along the lines of the following:</p>
<pre style="padding-left: 60px">git version 2.16.3</pre>
<ol start="5">
<li>Now that Git is working, we can clone the source code accompanying this book from GitHub. Execute the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ cd ~</strong><br/><strong>$ git clone https://github.com/PacktPublishing/Learn-Docker---Fundamentals-of-Docker-19.x-Second-Edition fod-solution</strong></pre>
<p style="padding-left: 60px">This will clone the content of the master branch into your local folder, <kbd>~/fod-solution</kbd>. This folder will now contain all of the sample solutions for the labs we are going to do together in this book. Refer to these sample solutions if you get stuck.</p>
<p>Now that we have installed the basics, let's continue with the code editor.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Choosing a code editor</h1>
                
            
            
                
<p>Using a good code editor is essential to working productively with Docker. Of course, which editor is the best is highly controversial and depends on your personal preference. A lot of people use Vim, or others such as Emacs, Atom, Sublime, or <strong>Visual Studio Code</strong> (<strong>VS Code</strong>), to just name a few. VS Code is a completely free and lightweight editor, yet it is very powerful and is available for macOS, Windows, and Linux. According to Stack Overflow, it is currently by far the most popular code editor. If you are not yet sold on another editor, I highly recommend that you give VS Code a try.</p>
<p>But if you already have a favorite code editor, then please continue using it. As long as you can edit text files, you're good to go. If your editor supports syntax highlighting for Dockerfiles and JSON and YAML files, then even better. The only exception will be <a href="b6647803-2c5c-4b9d-9a4a-a836ac356329.xhtml" target="_blank">Chapter 6</a>, <em>Debugging Code Running in a Container</em>. The examples presented in that chapter will be heavily tailored toward VS Code. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing VS Code on macOS</h1>
                
            
            
                
<p>Follow these steps for installation:</p>
<ol>
<li>Open a new Terminal window and execute the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ brew cask install visual-studio-code</strong></pre>
<ol start="2">
<li>Once VS Code has been installed successfully, navigate to your home directory (<kbd>~</kbd>) and create a folder, <kbd>fundamentals-of-docker</kbd>; then navigate into this new folder:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>$ mkdir ~/fundamentals-of-docker &amp;&amp; cd ~/fundamentals-of-docker</strong></pre>
<ol start="3">
<li class="mce-root">Now open VS Code from within this folder:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>$ code .</strong></pre>
<p class="mce-root">Don't forget the period (.) in the preceding command. VS will start and open the current folder (<kbd>~/fundamentals-of-docker</kbd>) as the working folder.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing VS Code on Windows</h1>
                
            
            
                
<p>Follow these steps for installation:</p>
<ol>
<li>Open a new PowerShell window in admin mode and execute the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>PS&gt;</strong> <strong>choco install vscode -y</strong></pre>
<ol start="2">
<li>Close your PowerShell window and open a new one, to make sure VS Code is in your path.</li>
<li>Now navigate to your home directory and create a folder, <kbd>fundamentals-of-docker</kbd>; then navigate into this new folder:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>PS&gt;</strong> <strong>mkdir ~\fundamentals-of-docker; cd ~\fundamentals-of-docker</strong></pre>
<ol start="4">
<li class="mce-root">Finally open Visual Studio Code from within this folder:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>PS&gt;</strong> <strong>code .</strong></pre>
<p class="mce-root">Don't forget the period (.) in the preceding command. VS will start and open the current folder (<kbd>~\fundamentals-of-docker</kbd>) as the working folder.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing VS Code on Linux</h1>
                
            
            
                
<p>Follow these steps for installation:</p>
<ol>
<li>On your Debian or Ubuntu-based Linux machine, open a Bash Terminal and execute the following statement to install VS Code:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ sudo snap install --classic code</strong></pre>
<ol start="2">
<li>If you're using a Linux distribution that's not based on Debian or Ubuntu, then please follow the following link for more details: <a href="https://code.visualstudio.com/docs/setup/linux" target="_blank">https://code.visualstudio.com/docs/setup/linux</a></li>
<li>Once VS Code has been installed successfully, navigate to your home directory (<kbd>~</kbd>) and create a folder, <kbd>fundamentals-of-docker</kbd>; then navigate into this new folder:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>$ mkdir ~/fundamentals-of-docker &amp;&amp; cd ~/fundamentals-of-docker</strong></pre>
<ol start="4">
<li class="mce-root">Now open Visual Studio Code from within this folder:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>$ code .</strong></pre>
<p class="mce-root">Don't forget the period (.) in the preceding command. VS will start and open the current folder (<kbd>~/fundamentals-of-docker</kbd>) as the working folder.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing VS Code extensions</h1>
                
            
            
                
<p class="mce-root">Extensions are what make VS Code such a versatile editor. On all three platforms, macOS, Windows, and Linux, you can install VS Code extensions the same way:</p>
<ol>
<li class="mce-root">Open a Bash console (or PowerShell in Windows) and execute the following group of commands to install the most essential extensions we are going to use in the upcoming examples in this book:</li>
</ol>
<pre style="padding-left: 60px"><strong>code --install-extension vscjava.vscode-java-pack</strong><br/><strong>code --install-extension ms-vscode.csharp</strong><br/><strong>code --install-extension ms-python.python</strong><br/><strong>code --install-extension ms-azuretools.vscode-docker</strong><br/><strong>code --install-extension eamodio.gitlens</strong></pre>
<p style="padding-left: 60px">We are installing extensions that enable us to work with Java, C#, .NET, and Python much more productively. We're also installing an extension built to enhance our experience with Docker.</p>
<ol start="2">
<li>After the preceding extensions have been installed successfully, restart VS Code to activate the extensions. You can now click the extensions icon in the activity pane on the left-hand side of VS Code to see all of the installed extensions.</li>
</ol>
<p>Next, let's install Docker for Desktop.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker for Desktop</h1>
                
            
            
                
<p class="mce-root">If you are using macOS or have Windows 10 Professional installed on your laptop, then we strongly recommend that you install Docker for Desktop. This platform gives you the best experience when working with containers.<br/></p>
<div><br/>Docker for Desktop is not supported on Linux at this time. Please refer to the <em>Installing Docker CE on Linux</em> section for more details.</div>
<p>Note that older versions of Windows or Windows 10 Home edition cannot run Docker for Windows. Docker for Windows uses Hyper-V to run containers transparently in a VM but Hyper-V is not available on older versions of Windows; nor is it available in the Home edition of Windows 10. In this case, we recommend that you use Docker Toolbox instead, which we will describe in the next section.</p>
<p>Follow these steps:</p>
<ol start="1">
<li>No matter what OS you're using, navigate to the Docker start page at <a href="https://www.docker.com/get-started" target="_blank">https://www.docker.com/get-started</a>.</li>
<li>On the right-hand side of the loaded page, you'll find a big blue button saying Download Desktop and Take a Tutorial. Click this button and follow the instructions. You will be redirected to Docker Hub. If you don't have an account on Docker Hub yet, then create one. It is absolutely free, but you need an account to download the software. Otherwise, just log in.</li>
<li>Once you're logged in, look out for this on the page:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-846 image-border" src="img/e00d0017-d436-41eb-b4f0-f7b35a4e5c8a.png" style="width:17.50em;height:17.58em;"/></p>
<p>Download Docker Desktop on Docker Hub</p>
<ol start="4">
<li>Click the blue Download Docker Desktop button. You should then see a screen like the following:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="img/c9a4cfdc-fdbb-44dd-bbaf-7999541220a6.png" style="width:64.67em;height:32.25em;"/></p>
<p>Download screen for Docker for Desktop for macOS</p>
<p>Note that if you're on a Windows PC, the blue button will say Download Docker Desktop for Windows instead.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker for Desktop on macOS</h1>
                
            
            
                
<p>Follow these steps for installation:</p>
<ol>
<li>Once you have successfully installed Docker for Desktop for macOS, please open a Terminal window and execute the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker version</strong></pre>
<p style="padding-left: 60px">You should see something like this:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-medium wp-image-1164 image-border" src="img/c44f8efb-03f9-4991-8911-1baf60e21c35.png" style="width:34.75em;height:35.00em;"/></p>
<p>Docker version on Docker for Desktop</p>
<ol start="2">
<li>To see whether you can run containers, enter the following command into the terminal window and hit <em>Enter</em>:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker run hello-world</strong></pre>
<p style="padding-left: 60px">If all goes well, your output should look something like the following:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/1601a10a-3104-4c94-bdf7-9f5fbd3df2aa.png" style="width:53.17em;height:37.42em;"/></p>
<p>Running Hello-World on Docker for Desktop for macOS</p>
<p>Next, we will install Docker on Windows.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker for Desktop on Windows</h1>
                
            
            
                
<p>Follow these steps for installation:</p>
<ol>
<li>Once you have successfully installed Docker for Desktop for Windows, please open a PowerShell window and execute the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>PS&gt; docker --version</strong><br/>Docker version 19.03.5, build 633a0ea</pre>
<ol start="2">
<li>To see whether you can run containers, enter the following command into the PowerShell window and hit <em>Enter</em>:</li>
</ol>
<pre style="padding-left: 60px"><strong>PS&gt; docker run hello-world</strong></pre>
<p>If all goes well, your output should look similar to the preceding figure.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker CE on Linux</h1>
                
            
            
                
<p>As mentioned earlier, Docker for Desktop is only available for macOS and Windows 10 Pro. If you're using a Linux machine, then you can use the Docker <strong>Community</strong> <strong>Edition</strong> (<strong>CE</strong>), which consists of Docker Engine, plus a few additional tools, such as the Docker <strong>Command Line Interface</strong> (<strong>CLI</strong>) and <kbd>docker-compose</kbd>.</p>
<p>Please follow the instructions at the following link to install Docker CE for your particular Linux distribution—in this case, Ubuntu: <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker Toolbox</h1>
                
            
            
                
<p>Docker Toolbox has been available for developers for a few years. It precedes newer tools such as Docker for Desktop. The Toolbox allows a user to work very elegantly with containers on any macOS or Windows computer. Containers must run on a Linux host. Neither Windows nor macOS can run containers natively. Hence, we need to run a Linux VM on our laptop, where we can then run our containers. Docker Toolbox installs VirtualBox on our laptop, which is used to run the Linux VMs we need.</p>
<p>As a Windows user, you might already be aware that there are so-called Windows containers that run natively on Windows, and you are right. Microsoft has ported Docker Engine to Windows and it is possible to run Windows containers directly on Windows Server 2016 or newer, without the need for a VM. So, now we have two flavors of containers, Linux containers and Windows containers. The former only runs on a Linux host and the latter only runs on a Windows server. In this book, we are exclusively discussing Linux containers, but most of the things we'll learn also apply to Windows containers.<br/>
<br/>
If you are interested in Windows containers, we strongly recommend the book <em>Docker on Windows, Second Edition</em>: <a href="https://www.packtpub.com/virtualization-and-cloud/docker-windows-second-edition" target="_blank">https://www.packtpub.com/virtualization-and-cloud/docker-windows-second-edition</a>.</p>
<p>Let's start by installing the Docker Toolbox on a macOS.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker Toolbox on macOS</h1>
                
            
            
                
<p>Follow these steps for installation:</p>
<ol>
<li>Open a new Terminal window and use Homebrew to install the toolbox:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ brew cask install docker-toolbox </strong></pre>
<p style="padding-left: 60px">You should see something like this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/f323a67a-9f10-4c81-935d-45dcc77c5e19.png" style="width:58.08em;height:31.92em;"/></p>
<p>Installing Docker Toolbox on macOS</p>
<ol start="2">
<li>To verify that Docker Toolbox has been installed successfully, try to access <kbd>docker-machine</kbd> and <kbd>docker-compose</kbd>, two tools that are part of the installation:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker-machine --version</strong><br/>docker-machine version 0.15.0, build b48dc28d<br/><strong>$ docker-compose --version</strong><br/>docker-compose version 1.22.0, build f46880f</pre>
<p>Next, we will install Docker Toolbox on Windows.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Docker Toolbox on Windows</h1>
                
            
            
                
<p>Open a new Powershell window in admin mode and use Chocolatey to install Docker Toolbox:</p>
<pre><strong>PS&gt;</strong> <strong>choco install docker-toolbox -y</strong></pre>
<p>The output should look similar to this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/c3d8eb48-3017-4bd2-a27b-c89e7aad66f4.png" style="width:51.00em;height:21.50em;"/></p>
<p>Installing Docker Toolbox on Windows 10</p>
<p>We will now be setting up Docker Toolbox.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting up Docker Toolbox</h1>
                
            
            
                
<p>Follow these steps for setup:</p>
<ol>
<li>Let's use <kbd>docker-machine</kbd> to set up our environment. First, we list all Docker-ready VMs we have currently defined on our system. If you have just installed Docker Toolbox, you should see the following output:</li>
</ol>
<div><img src="img/ca24a687-1929-473d-9ba7-7e68294fea9f.png" style="width:43.67em;height:6.58em;"/></div>
<p>List of all Docker-ready VMs</p>
<ol start="2">
<li>OK, we can see that there is a single VM called <kbd>default</kbd> installed, but it is currently in the <kbd>STATE</kbd> of <kbd>stopped</kbd>. Let's use <kbd>docker-machine</kbd> to start this VM so we can work with it:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker-machine start default</strong></pre>
<p style="padding-left: 60px">This produces the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/4eb6cf4e-c51b-4946-8e4f-d140f2fafd9a.png" style="width:68.42em;height:13.33em;"/></p>
<p>Starting the default VM in Docker Toolbox</p>
<p style="padding-left: 60px">If we now list the VMs again, we should see this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/0adc5a3b-7c37-4ccc-a004-5b2cc76aabdb.png" style="width:64.58em;height:6.25em;"/></p>
<p>Listing the running VMs in Docker Toolbox</p>
<p style="padding-left: 60px">The IP address used might be different in your case, but it will definitely be in the <kbd>192.168.0.0/24</kbd> range. We can also see that the VM has Docker version <kbd>18.06.1-ce</kbd> installed.</p>
<ol start="3">
<li>If, for some reason, you don't have a default VM or you have accidentally deleted it, you can create it using the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker-machine create --driver virtualbox default<br/></strong></pre>
<p style="padding-left: 60px">This will generate the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/0ab00ba7-5fd8-432f-a234-8ccd5ef4de10.png" style="width:61.50em;height:34.42em;"/></p>
<p>Creating a new default VM in Docker Toolbox</p>
<p style="padding-left: 60px">If you carefully analyze the preceding output, you will see that <kbd>docker-machine</kbd> automatically downloaded the newest ISO file for the VM from Docker. It realized that my current version was outdated and replaced it with version <kbd>v18.09.6</kbd>.</p>
<ol start="4">
<li>To see how to connect your Docker client to the Docker Engine running on this virtual machine, run the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker-machine env default<br/></strong></pre>
<p style="padding-left: 60px">This outputs the following:</p>
<pre style="padding-left: 60px">export DOCKER_TLS_VERIFY="1"<br/>export DOCKER_HOST="tcp://192.168.99.100:2376"<br/>export DOCKER_CERT_PATH="/Users/gabriel/.docker/machine/machines/default"<br/>export DOCKER_MACHINE_NAME="default"<br/># Run this command to configure your shell:<br/># eval $(docker-machine env default)</pre>
<ol start="5">
<li>We can execute the command listed on the last line in the preceding code snippet to configure our Docker CLI to use Docker running on the <kbd>default</kbd> VM:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ eval $(docker-machine env default)<br/></strong></pre>
<ol start="6">
<li>And now we can execute the first Docker command:</li>
</ol>
<pre style="padding-left: 60px"><strong>$ docker version</strong></pre>
<p style="padding-left: 60px">This should result in the following output:</p>
<p> </p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-848 image-border" src="img/8072de88-4665-4b5a-b5a5-f3994515624b.png" style="width:25.83em;height:23.25em;"/></p>
<p>Output of docker version</p>
<p style="padding-left: 60px">We have two parts here, the client and the server part. The client is the CLI running directly on your macOS or Windows laptop, while the server part is running on the <kbd>default</kbd> VM in VirtualBox.</p>
<ol start="7">
<li>Now, let's try to run a container:</li>
</ol>
<pre style="padding-left: 60px" class="mce-root"><strong>$ docker run hello-world</strong></pre>
<p style="padding-left: 60px">This will produce the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/ba44f8ff-7ebe-4840-9466-a7a136e67152.png" style="width:44.00em;height:31.00em;"/></p>
<p style="padding-left: 60px">The preceding output confirms that Docker Toolbox is working as expected and can run containers.</p>
<p>Docker Toolbox is a great addition even when you normally use Docker for Desktop for your development with Docker. Docker Toolbox allows you to create multiple Docker hosts (or VMs) in VirtualBox and connect them to a cluster, on top of which you can run Docker Swarm or Kubernetes.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Minikube</h1>
                
            
            
                
<p>If you cannot use Docker for Desktop or, for some reason, you only have access to an older version of the tool that does not yet support Kubernetes, then it is a good idea to install Minikube. Minikube provisions a single-node Kubernetes cluster on your workstation and is accessible through <kbd>kubectl</kbd>, which is the command-line tool used to work with Kubernetes.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Installing Minikube on macOS and Windows</h1>
                
            
            
                
<p>To install Minikube for macOS or Windows, navigate to the following link: <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/" target="_blank">https://kubernetes.io/docs/tasks/tools/install-minikube/</a>.</p>
<p>Follow the instructions carefully. If you have Docker Toolbox installed, then you already have a hypervisor on your system since the Docker Toolbox installer also installed VirtualBox. Otherwise, I recommend that you install VirtualBox first.</p>
<p>If you have Docker for macOS or Windows installed, then you already have <kbd>kubectl</kbd> installed with it, so you can skip that step too. Otherwise, follow the instructions on the site.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Testing Minikube and kubectl</h1>
                
            
            
                
<p>Once Minikube is successfully installed on your workstation, open a Terminal and test the installation. First, we need to start Minikube. Enter <kbd>minikube start</kbd> at the command line. This command may take a few minutes or so to complete. The output should look similar to the following:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/918657bb-5dc5-4eca-8220-4139caa69112.png" style="width:50.17em;height:14.00em;"/></p>
<p>Starting Minikube</p>
<p>Note, your output may look slightly different. In my case, I am running Minikube on a Windows 10 Pro computer. On a Mac notifications are quite different, but this doesn't matter here.</p>
<p>Now, enter <kbd>kubectl version</kbd> and hit <em>En</em><em>ter</em> to see something like the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="img/b695efb9-10b2-4ee8-9877-020e89021230.png"/></p>
<p>Determining the version of the Kubernetes client and server</p>
<p>If the preceding command fails, for example, by timing out, then it could be that your <kbd>kubectl</kbd> is not configured for the right context. <kbd>kubectl</kbd> can be used to work with many different Kubernetes clusters. Each cluster is called a context. To find out which context <kbd>kubectl</kbd> is currently configured for, use the following command:</p>
<pre><strong>$ kubectl config current-context</strong><br/><strong>minikube</strong></pre>
<p>The answer should be <kbd>minikube</kbd>, as shown in the preceding output. If this is not the case, use <kbd>kubectl config get-contexts</kbd> to list all contexts that are defined on your system and then set the current context to <kbd>minikube</kbd>, as follows:</p>
<pre><strong>$ kubectl config use-context minikube</strong></pre>
<p>The configuration for <kbd>kubectl</kbd>, where it stores the contexts, is normally found in <kbd>~/.kube/config</kbd>, but this can be overridden by defining an environment variable called <kbd>KUBECONFIG</kbd>. You might need to unset this variable if it is set on your computer.</p>
<p>For more in-depth information about how to configure and use Kubernetes contexts, consult the link at <a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank">https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/</a>.<a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/"/></p>
<p>Assuming Minikube and <kbd>kubectl</kbd> work as expected, we can now use <kbd>kubectl</kbd> to get information about the Kubernetes cluster. Enter the following command:</p>
<pre><strong>$ kubectl get nodes</strong><br/>NAME STATUS ROLES AGE VERSION<br/>minikube Ready master 47d v1.17.3</pre>
<p>Evidently, we have a cluster of one node, which in my case has Kubernetes<kbd> v1.17.3</kbd> installed on it.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In this chapter, we set up and configured our personal or working environment so that we can productively work with Docker containers. This equally applies for developers, DevOps, and operations engineers. In that context, we make sure that we use a good editor, have Docker for macOS or Docker for Windows installed, and can use <kbd>docker-machine</kbd> to create VMs in VirtualBox or Hyper-V, which we can then use to run and test containers.</p>
<p>In the next chapter, we're going to learn all of the important facts about containers. For example, we will explore how we can run, stop, list, and delete containers, but more than that, we will also dive deep into the anatomy of containers. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Questions</h1>
                
            
            
                
<p>Based on your reading of this chapter, please answer the following questions:</p>
<ol>
<li style="font-weight: 400">What is <kbd>docker-machine</kbd> used for? Name three to four scenarios.</li>
<li>With Docker for Windows, you can develop and run Linux containers.</li>
</ol>
<p style="padding-left: 60px">A. True<br/>
B. False</p>
<ol start="3">
<li style="font-weight: 400">Why are good scripting skills (such as Bash or PowerShell) essential for the productive use of containers?</li>
<li style="font-weight: 400">Name three to four Linux distributions on which Docker is certified to run.</li>
<li style="font-weight: 400">Name all of the Windows versions on which you can run Windows containers.</li>
</ol>
<p class="mce-root"/>
<p class="mce-root"/>


            

            
        
    

        

                            
                    <h1 class="header-title">Further reading</h1>
                
            
            
                
<p>Consider the following links for further reading:</p>
<ul>
<li><em>Chocolatey - The Package Manager for Windows</em> at<em> </em><a href="https://chocolatey.org/">https://chocolatey.org/</a></li>
<li><em>Install Docker Toolbox on Windows:</em> <a href="https://dockr.ly/2nuZUkU">https://dockr.ly/2nuZUkU</a></li>
<li><em>Run Docker on Hyper-V with Docker Machine</em> at <a href="http://bit.ly/2HGMPiI" target="_blank">http://bit.ly/2HGMPiI</a></li>
<li><em>Developing inside a Container</em> at <a href="https://code.visualstudio.com/docs/remote/containers">https://code.visualstudio.com/docs/remote/containers</a></li>
</ul>


            

            
        
    </body></html>