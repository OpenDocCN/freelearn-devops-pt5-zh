<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Case Studies</h1>
                </header>
            
            <article>
                
<p>In this chapter, we'll be going through the entire process of mobile DevOps, from mobile application development and integration, to continuous testing and deployment.</p>
<p>We'll be using two applications as case studies to show the entire process:</p>
<ul>
<li>A basic Hello World GUI</li>
<li>A ButtonWidget</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Case study 1 - Hello World GUI</h1>
                </header>
            
            <article>
                
<p>In this case study, we'll be covering the mobile DevOps cycle with a simple Android application that will have a <span class="packt_screen">MainActivity</span> with a <kbd>Hello World</kbd> text label on it.</p>
<p>This study is going to cover the entire process in brief, and show you a step-by-step workflow.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Prerequisites</h1>
                </header>
            
            <article>
                
<p>Since these case studies will be covering all the steps involved in the lifecycle, it will not be possible to cover these topics in detail and explain different parts of the IDE and Android development fundamentals.</p>
<p>The following are the minimum prerequisites to follow this chapter smoothly. If you need a greater understanding of any of the following topics, please refer to previous chapters:</p>
<ul>
<li>It is assumed that you have Visual Studio and Xamarin installed on your computer, and configured and ready for Android application development. If you do not have Visual Studio and Xamarin installed on your system, please refer to <a href="1f45b30c-388e-4fd2-b2e6-cfe6d906cd7b.xhtml" target="_blank"><span class="ChapterrefPACKT">Chapter 3</span></a>, <em>Cross-Platform Mobile App Development with Xamarin</em>, and install them first.</li>
<li>A basic understanding of Visual Studio.</li>
<li>A basic understanding of Android development fundamentals.</li>
<li>You should have a working Git account that you are able to access.</li>
</ul>
<p>Let's get started with the following steps to put together a complete practical workflow for mobile app development:</p>
<ol>
<li>Open Visual Studio and go to <span class="packt_screen">File</span> | <span class="packt_screen">New</span>| <span class="packt_screen">Project</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/0adef156-b51c-4ae5-8ab3-30c5f99548a6.png" style=""/></div>
<ol start="2">
<li>In the next window, select <span class="packt_screen">Android</span> from the left-hand pane and then <span class="packt_screen">Blank App (Android)</span>. Give your project a name and also tick the <span class="packt_screen">Create a new Git repository</span> checkbox (this will create a new Git repository for your project) and click <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/a50272bb-6a8d-4bd7-9927-a74b4644bf7f.png"/></div>
<ol start="3">
<li>Visual Studio will create a new project called <kbd>HelloWorld</kbd> for you:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/8790195b-d895-4cc1-b292-b1b1af866b9a.png"/></div>
<ol start="4">
<li>Once this is done, open <span class="packt_screen">Solution Explorer</span> to see the project structure. Go to <span class="packt_screen">View</span> | <span class="packt_screen">Solution Explorer</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/320dbcc4-cc61-4219-b6ab-a04aed94fad2.png" style=""/></div>
<ol start="5">
<li>In <span class="packt_screen">Solution Explorer</span>, expand the <kbd>Resources</kbd> folder and the <kbd>layout</kbd> folder, and find a file called <kbd>Main.axml</kbd>. This is the layout file, or you can say the view, of our <span class="packt_screen">MainActivity</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/90e9a277-33bc-45c8-a177-3d31d88f97c1.png" style=""/></div>
<ol start="6">
<li>Open <kbd>Main.axml</kbd> by double-clicking on it. This should open the layout designer for you:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/349c5dd8-f1ea-49f3-b2e2-b080df025fd2.png"/></div>
<ol start="7">
<li>If you are not able to see the toolbox on the left-hand side, go to <span class="packt_screen">View</span> | <span class="packt_screen">Toolbox</span> to make it appear:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/1fc79b8a-144a-45ae-9935-064c8a71d46b.png"/></div>
<ol start="8">
<li>Now, we will just add a text view on the activity, which says, <kbd>HelloWorld</kbd>.</li>
</ol>
<ol start="9">
<li>From the toolbox on the left, select <span class="packt_screen">Text (Medium)</span> from the <span class="packt_screen">Form Widgets</span> section and drag and drop it to the <span class="packt_screen">Activity View</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/e8a8550d-af30-4b6b-bb6f-9743ab36c66b.png" style=""/></div>
<ol start="10">
<li>Double-click on the text view and change its text to <kbd>Hello World</kbd>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/da8a089b-6d34-40da-9c5c-003436fb5bee.png"/></div>
<ol start="11">
<li>Awesome, the <kbd>HelloWorld</kbd> app is done, now we just need to build the solution to make sure everything is fine and ready to be deployed on an Android device or emulator.</li>
<li>Right-click on the solution and click on <span class="packt_screen">Build Solution</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/b0558428-e2a7-43a4-a069-9e88b7619dcc.png"/></div>
<ol start="13">
<li>This will build the solution for you and it should say <span class="packt_screen">Build Succeeded</span> in the bottom-left corner, on the blue line, when it's done.</li>
</ol>
<ol start="14">
<li>To deploy and test the application on an emulator, click on the Android Emulator Manager (AVD) icon from the toolbar at the top:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/9c1f2620-2636-4510-8948-9bb5c01cd9ec.png" style=""/></div>
<ol start="15">
<li>This will open Android Emulator Manager, where you can select any existing virtual device from the list provided by Visual Studio and hit the <span class="packt_screen">Start</span> button:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/c4c96f52-6a83-4d97-a8d3-c8807bc09fa2.png"/></div>
<ol start="16">
<li>Then, click on <span class="packt_screen">Launch</span> without changing any configurations in the next window:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/d46dbe0e-ad83-4e39-9a80-971ecacd534a.png" style=""/></div>
<ol start="17">
<li>This should start a new AVD on your machine:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/29b4a1c9-55e3-4b70-b290-264398e18886.png" style=""/></div>
<ol start="18">
<li>Now, come back to Visual Studio after the AVD has started and hit the play button by selecting your device from the list to deploy and starting your application on the AVD:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/522131df-442e-42f8-851a-5a4fd18c657f.png"/></div>
<ol start="19">
<li>Once the application is deployed, it will be opened on the AVD and you should be able to see your <span class="packt_screen">Hello World</span> text on the <span class="packt_screen">MainActivity</span> screen:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/134f64d5-6a15-4249-8f3d-b250cff31b9c.png" style=""/></div>
<ol start="20">
<li>Congratulations, your <span class="packt_screen">HelloWorld</span> app is up and running on the emulator!</li>
</ol>
<ol start="21">
<li>It is time to push our newly created project to the Git remote repository. Remember that we have created a local repository already while creating the project, so now we need to connect this local repository to a remote Git repository and then push the code.</li>
<li>Click on the push logo in the bottom-right corner in Visual Studio. It will open <span class="packt_screen">Team Explorer</span>, as shown in the following screenshot:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/7b12e4bf-2550-45e4-b97a-c05c1418888d.png" style=""/></div>
<ol start="23">
<li>Now, before publishing we need to create a repository in GitHub to connect to this local repository.</li>
<li>Head over to GitHub and log in to your account.</li>
<li>Create a new repository called <kbd>HelloWorld</kbd> and copy the URL to that repository.</li>
<li>Once done, come back to Visual Studio and hit <span class="packt_screen">Publish Git Repo</span>, as shown in the preceding screenshot, then copy the link to the repository and hit <span class="packt_screen">Publish</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/41c3402e-1723-4ef7-8094-fd6701e6fa2d.png" style=""/></div>
<ol start="27">
<li>Visual Studio might ask you to provide your credentials for the first time to connect to Git, but once done it should configure the remote repository with the local one.</li>
<li>After this, click on the edit icon that says <span class="packt_screen">Changes (2)</span> to commit your changes locally.</li>
<li>Make some commit comments and then hit <span class="packt_screen">Commit All</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/6105f2e9-4052-4bf0-8d8e-dbe48c07d2d3.png" style=""/></div>
<ol start="30">
<li>Next, click on the <span class="packt_screen">Sync</span> link to share your committed changes with the remote repository:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3b6bc70e-07a4-42a2-a8af-3a83f453795f.png" style=""/></div>
<ol start="31">
<li>On the next page, hit <span class="packt_screen">Push</span> to push your changes to the GitHub remote repository.</li>
</ol>
<p>Since there isn't much to test in this application, we'll be covering that in the next case study.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Case study 2 - ButtonWidget</h1>
                </header>
            
            <article>
                
<p>In this case study, we'll be creating a new Android application that will have a button which that show a new text view when clicked. We'll also be writing UITest for this application:</p>
<ol>
<li>Create a new blank Android application project in Visual Studio, name it <kbd>ButtonWidget</kbd>, and click <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/44e1124c-48aa-4bbd-b076-a79644b5d102.png"/></div>
<ol start="2">
<li>After creating the project, open the <kbd>Main.axml</kbd> file from <span class="packt_screen">Resources</span> | <span class="packt_screen">Layout</span> in <span class="packt_screen">Solution Explorer</span>.</li>
<li>Then, add a text view and a button to the view from the <span class="packt_screen">Toolbox</span> on the left.</li>
<li>Give each of these IDs to identify them in the code. You can select them, then show the property window, and give them IDs there:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/9644673b-558e-4368-bf9a-a68fa792e42d.png" style=""/></div>
<ol start="5">
<li>Also, set the <span class="packt_screen">visibility</span> of the text view to hidden, because we'll be showing this text only on a button-click:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/89de4430-dd45-4a53-ac58-7b194ccdea12.png" style=""/></div>
<ol start="6">
<li>Now, open the <kbd>MainActivity.cs</kbd> file from <span class="packt_screen">Solution Explorer</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/ee70252c-ca55-41d1-bd4a-b9287031cb93.png"/></div>
<ol start="7">
<li>In <kbd>MainActivtiy.cs</kbd>, add code to show the text view when the button is clicked. Change your code to match what is shown in the following screenshot:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3bbe63a1-8d91-448c-9d64-54e285a1e336.png"/></div>
<ol start="8">
<li>That's it. The coding part is done for the application. Now, the text view will be added, but will not be shown in the application until the button is clicked.</li>
</ol>
<ol start="9">
<li>Build your application and hit <span class="packt_screen">Run</span>. You'll see that the text view is not visible when the app loads:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/10ba6cb1-939a-4388-8f25-61079af598c3.png" style=""/></div>
<ol start="10">
<li>Now, click on the button and see that the text view appears:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/d24641e8-c35a-4913-bb35-cdf2e3c3c097.png" style=""/></div>
<ol start="11">
<li>Now that the application is working, let's write Xamarin.UITest for it and upload it to Xamarin Test Cloud.</li>
<li>Add a new test project to the solution:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3565e2ba-8734-433d-9813-3e69d74d84d2.png" style=""/></div>
<ol start="13">
<li>In the <span class="packt_screen">Add New Project</span> window, click on <span class="packt_screen">Test</span> from the left pane and then select <span class="packt_screen">UI Test App (Xamarin.UITest</span> | <span class="packt_screen">Android</span>). Give the project a name and click <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/4bcdd9d2-d95a-43a0-affe-3ca4fc6c2775.png"/></div>
<ol start="14">
<li>Next, we need to add a reference to the application project, so the <kbd>UITest</kbd> project can build and run the application.</li>
<li>Right-click on <span class="packt_screen">References</span> under the <kbd>UITest</kbd> project and click on <span class="packt_screen">Add Reference</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/0b73f11c-3356-4169-9814-632ddad7a0fa.png"/></div>
<ol start="16">
<li>On the next screen, select <span class="packt_screen">Projects</span> from the left section and then select the <span class="packt_screen">ButtonWidget</span> (the application project we want to test) and click on <span class="packt_screen">OK</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/38341c66-f34a-4cf2-bd66-13e07bcab24e.png"/></div>
<ol start="17">
<li>We are all set to start writing our tests for the <span class="packt_screen">ButtonWidget</span> app. Open the <kbd>Tests.cs</kbd> file from <span class="packt_screen">Solution Explorer</span> under <span class="packt_screen">TestProjectName</span> | <span class="packt_screen">Tests.cs</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/468cda17-f83b-4e41-9f68-56b0278c7f2b.png" style=""/></div>
<ol start="18">
<li>Now, change the code to add a new test in the <kbd>Tests.cs</kbd> file, to test that the text view is displayed when the button is pressed:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/b92ab4d2-63aa-4b62-b08b-39ca101d30d1.png" style=""/></div>
<ol start="19">
<li>Now, rebuild and deploy the solution, then click <span class="packt_screen">Test</span> | <span class="packt_screen">Windows</span> | <span class="packt_screen">Test Explorer</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/b6038ee3-5ba8-4db2-ab76-d3973f5734de.png" style=""/></div>
<ol start="20">
<li>You should be able to see the tests written in the <span class="packt_screen">Test Explorer</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/751b7f05-210d-41ef-9aa5-73e6f6d1c66e.png" style=""/></div>
<ol start="21">
<li>Click on <span class="packt_screen">Run All</span> to run the tests.</li>
<li>Now, to upload these tests to Xamarin Test Cloud, log in to your Xamarin Test Cloud account.</li>
<li>Go to <span class="packt_screen">Account Settings</span> | <span class="packt_screen">Teams &amp; Apps</span>.</li>
<li>Click on the <span class="packt_screen">New Team</span> button to create a new team.</li>
<li>Add members to the team and then click on <span class="packt_screen">New Test Run</span>.</li>
<li>This will open a self-guiding dialog box, where we can select the platform, choose devices, and much more.</li>
<li>Set the operating system as <span class="packt_screen">Android</span> and then the devices of your choice, and go to the last step.</li>
<li>You'll find a screen like the following, where you get a command to upload the tests to Xamarin Test Cloud:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/89bb7340-5521-4a9b-9d5c-2047a7268ebf.png"/></div>
<ol start="29">
<li>Before you upload your application to Xamarin Test Cloud, it is important to build your application in the Release build configuration.</li>
<li>Add internet permissions to the project in the project's manifest file.</li>
<li>Once you have built the project with Release, you are ready to upload your application on Xamarin and tune the UITests there. Use the command from the previous step, modify <kbd>Xamarin.UITest.[version]</kbd> to your UITest version, then enter the APK filename with the full path to the APK and a relative path to the <kbd>UITest</kbd> folder, and then run it in the root directory of your project.</li>
<li>Once you have made these changes to the command, go to the root directory, open command prompt windows there, and run the command to upload UITests to Xamarin:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/3d0b9530-5bc8-4527-a5eb-7bc36037e213.png"/></div>
<ol start="33">
<li>With this, the application is being deployed and tested on Xamarin Test Cloud on real physical devices.</li>
<li>You can use this command with your CI tool to automate this process as part of continuous integration and continuous testing.</li>
</ol>
<ol start="35">
<li>On checking back in Xamarin Test Cloud's web application, we can see that the test has passed on the selected device:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/9189052e-6d35-4595-8823-ca026fad6345.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we have gone through the entire process of application development, deployment, writing test cases, and testing the application by using continuous testing on Xamarin Test Cloud. There were two case studies used in this chapter to explain the process step by step, from creating a simple Android project to writing UITests and using Test Cloud for continuous testing.</p>


            </article>

            
        </section>
    </body></html>