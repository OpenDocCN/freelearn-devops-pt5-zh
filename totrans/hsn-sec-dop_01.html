<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">DevSecOps Drivers and Challenges</h1>
                
            
            <article>
                
<p class="calibre2"><span class="calibre6">Due to the rapid release of cloud services, law enforcement, security incidents, and tenants' data protection, the security is indispensable to cloud/internet services. Moving security activities from right to left during the development lifecycle and having built-in security practices in the continuous integration pipeline are the goals of DevSecOps.</span><br class="calibre5"/></p>
<p class="calibre2">The business environment, culture, law compliance, and external market drive relate to how the DevSecOps security assurance program rolls out in an organization. The DevSecOps or security assurance program management involved with the whole organization across all business units and the key success to DevSecOps will require all stakeholders to agree with the goal and approaches.</p>
<p class="calibre2">We will cover the following topics in this chapter:</p>
<ul class="calibre10">
<li class="calibre11">Security compliance (ISO 2700x, FIPS, CSA-CCM)</li>
<li class="calibre11">Legal/law compliance—<strong class="calibre1">General Data Protection Regulation</strong> (<strong class="calibre1">GDPR</strong>)</li>
<li class="calibre11">New technology (third-party, cloud, containers, and virtualization)</li>
<li class="calibre11">Cloud service hacks/abuse</li>
<li class="calibre11">Rapid release</li>
</ul>
<p class="calibre2">As shown in the following diagram, this is how external drivers and challenges impact on a team when delivering secure cloud services:</p>
<div class="cdpaligncenter"><img src="../images/00005.jpeg" class="calibre17"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Security compliance</h1>
                
            
            <article>
                
<p class="calibre2">For cloud services, it's very important to have security compliance-ready. Security compliance not only shows how the security controls of the cloud service meet security standards but also demonstrates security trustworthiness for customers and partners. Security compliance provides an overview of a security assurance program, but it won't specifically tell us which security technical approach it should apply. For frequent cloud service releases, constantly monitoring and auditing to meet security compliance can be a big challenge.</p>
<p class="calibre2">Although most cloud service providers are security compliance ready (ISO, PCI, FedRAMP, SOC, and so on), it's still the cloud service customer's responsibility to secure data and manage their own application compliance assessment. Both cloud service customers and providers need to maintain system or application audit logs, configuration lists, and change histories for compliance assessment. The compliance assessment should be considered a continuous activity—not a one-time audit check.</p>
<p class="calibre2">In this chapter, we will introduce key cloud services security compliance as a reference to building a security assurance program, and how these security compliance standards relate to DevSecOps.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">ISO 27001</h1>
                
            
            <article>
                
<p class="calibre2">ISO 27001 is an <strong class="calibre4">information security management system</strong> (<strong class="calibre4">ISMS</strong>). It provides an overview of organization-level security assurance programs. ISO 27001 won't specify a technical security approach, but it provides a complete set of a security management programs. As the diagram shows, the segments in the upper parts may be more directly related to DevOps security practices, such as compliance, business continuity, operation security, access control, software development, cryptography, incident management, and communication. This will serve as a guideline to further developing our own DevOps security program:</p>
<p class="cdpaligncenter1"><img class="alignnone1" src="../images/00006.jpeg"/></p>
<p class="calibre2">We won't introduce ISO 27001 details, but the following table summarizes how ISO 27001 relates to each role and the DevOps team:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre21">
<p class="calibre2"><strong class="calibre4">Role</strong></p>
</td>
<td class="calibre22">
<p class="calibre2"><strong class="calibre4">Company/organization security policy</strong></p>
</td>
<td class="calibre23">
<p class="calibre2"><strong class="calibre4">Operation or DevOps team</strong></p>
</td>
<td class="calibre24">
<p class="calibre2"><strong class="calibre4">Development team</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre21">
<p class="calibre2">ISO 27001 chapters</p>
</td>
<td class="calibre22">
<p class="calibre2">5  Information security policies</p>
<p class="calibre2">6 <span class="calibre6">Organization of information security</span></p>
<p class="calibre2">7 <span class="calibre6">Human resource security</span></p>
<p class="calibre2">8 Assess management</p>
<p class="calibre2">15 Supplier <span class="calibre6">relationships </span></p>
<p class="calibre2">11 Physical and environmental <span class="calibre6">security </span></p>
</td>
<td class="calibre23">
<p class="calibre2"> </p>
<p class="calibre2">9 Access Control</p>
<p class="calibre2">10 Cryptography</p>
<p class="calibre2">12 Operation security</p>
<p class="calibre2">13 Communication security</p>
<p class="calibre2">17 <span class="calibre6">Information security aspects of business continuity management</span></p>
<p class="calibre2">16 <span class="calibre6">Information security incident management</span></p>
<p class="calibre2">18 <span class="calibre6">Compliance; with internal requirements, such as policies, and external requirements, such as laws</span></p>
<p class="calibre2">19 Cloud services control</p>
</td>
<td class="calibre24">
<p class="calibre2">14 System development</p>
<p class="calibre2">10 Cryptography</p>
<p class="calibre2">9 Access control</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">
ISO 27017 and ISO 27018</h1>
                
            
            <article>
                
<p class="calibre2">ISO 27018 is mainly for the protection of <strong class="calibre4">personally identifiable information</strong> (<strong class="calibre4">PII</strong>) in the cloud. It's an extended security compliance based on ISO 27001 and ISO 27002. On top of ISO 27001/27002, ISO 27018 additionally defines PII protection security requirements</p>
<p class="calibre2">ISO 27017 provides both service providers and cloud service consumers with the ability to implement security controls for cloud services. ISO 27017 is an extension to ISO 27002 to address cloud-specific security issues.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Cloud Security Alliance (CSA)</h1>
                
            
            <article>
                
<p class="calibre2">As there are many cloud security compliance methods out there, we may get frustrated trying to follow each of them. The <strong class="calibre4">CSA (Cloud Security Alliance)</strong>  <strong class="calibre4">Cloud Controls Matrix</strong> (<strong class="calibre4">CCM</strong>) consolidated most <span class="calibre6">security compliance methods</span> into one matrix called CCM. Take application and interface application security as an example—CCM includes all security compliance controls such as ISO, FedRAMP, and NIST 800-53 related to this area, and defines the control ID. The key benefit of referring to CCM is that we can simply focus on CCM and know all other <span class="calibre6">security compliance regulations</span> will be met as well. </p>
<p class="calibre2">In addition, CSA provides a <strong class="calibre4">Consensus Assessments Initiative Questionnaire</strong> (<strong class="calibre4">CAIQ</strong>). It's a yes/no questionnaire for cloud consumers or cloud provides to do security self-assessment and to understand the <span class="calibre6">requirements</span> of security controls. <strong class="calibre4">Google Vendor Security Assessment Questionnaires (VSAQ)</strong> also provide a security assessment questionnaire in terms of Web Application Security, Security and Privacy Program, Infrastructure Security and Physical and Datacenter Security.</p>
<p class="calibre2">Furthermore, if you are looking for the top cloud threats and security control mitigations, <strong class="calibre4">Cloud Security Alliance</strong> (<strong class="calibre4">CSA</strong>) cloud top threats provide guidelines. At the time of writing, it defines the top 12 cloud threats, mappings to threat analysis, CCM/Control ID, and the domains of CSA Security Guidance reference. The following table shows related CSA security guides and how to apply security practices in your organization:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre25">
<p class="calibre2"><strong class="calibre4">CSA security guides</strong></p>
</td>
<td class="calibre26">
<p class="calibre2"><strong class="calibre4">What it is?</strong></p>
</td>
<td class="calibre27">
<p class="calibre2"><strong class="calibre4">When to apply?</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre25">
<p class="calibre2">CSA Security Guidance reference</p>
</td>
<td class="calibre26">
<p class="calibre2">Cloud security white paper</p>
</td>
<td class="calibre27">
<p class="calibre2">If your organization needs a cloud service security guideline or white paper, this can be a good reference.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre25">
<p class="calibre2">Cloud top threats</p>
</td>
<td class="calibre26">
<p class="calibre2">Top 12 cloud threats and mappings to threat analysis, CCM/Control ID, and domains of CSA Security Guidance reference</p>
</td>
<td class="calibre27">
<p class="calibre2">It can be the basis for cloud threat modeling.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre25">
<p class="calibre2">CAIQ</p>
</td>
<td class="calibre26">
<p class="calibre2">Yes/no questionnaire</p>
</td>
<td class="calibre27">
<p class="calibre2">A list of yes/no questions for self-assessment to understand existing security control <span class="calibre6">requirements</span>.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre25">
<p class="calibre2">CSA CCM</p>
</td>
<td class="calibre26">
<p class="calibre2">One consolidated worldwide security standard mapping</p>
</td>
<td class="calibre27">
<p class="calibre2">It's a great consolidated reference and includes most security compliance standards (ISO 27001, PCI, NIST, and so on). It's the only matrix you need to review security standards compliance.</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Federal Information Processing Standards (FIPS)</h1>
                
            
            <article>
                
<p class="calibre2">The FIPS mainly defines minimum security requirements for the use of cryptographic modules. Every organization that is not going to get<span class="calibre6"> a </span>FIPS<span class="calibre6"> </span>certificate should also refer to it. It's highly recommended that you refer to <em class="calibre16">Security Requirements for Cryptographic Modules</em><span class="calibre6"> </span>to understand what cryptographic modules may be considered safe, legacy, or weak.<span class="calibre6"> </span></p>
<p class="calibre2">For developers who would like to learn how to implement cryptographic modules correctly, the following resources are recommended.</p>
<ul class="calibre10">
<li class="calibre11">OWASP Cryptographic Storage Cheat Sheet. </li>
<li class="calibre11">OWASP Guide to Cryptography</li>
<li class="calibre11">OWASP Key Management Cheat Sheet</li>
</ul>
<p class="calibre2">Here is a summary of the minimum security requirements for each cryptography algorithm and its usage:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Usage scenario</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Unsafe cryptography algorithm</strong></p>
<p class="calibre2"><strong class="calibre4">(key length)</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Legacy Systems Only</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Recommended </strong><strong class="calibre4">cryptography algorithm</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Symmetric encryption</p>
</td>
<td class="calibre28">
<p class="calibre2">Blowfish, DES, Skipjack, RC4</p>
</td>
<td class="calibre28">
<p class="calibre2">3 DES only when</p>
<p class="calibre2">(key 1 != key 2 != key 3)</p>
</td>
<td class="calibre28">
<p class="calibre2">AES &gt; 128 bits</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Asymmetric encryption</p>
</td>
<td class="calibre28">
<p class="calibre2">RSA (&lt; 1024 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">RSA (1024 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">RSA (&gt; 1024 bits)</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Hash</p>
</td>
<td class="calibre28">
<p class="calibre2">MD5</p>
</td>
<td class="calibre28">
<p class="calibre2">SHA1 (1024 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">SHA256</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Digital signature</p>
</td>
<td class="calibre28">
<p class="calibre2">RSA (&lt; 1024 bits)</p>
<p class="calibre2">DSA (&lt; 1024 bits)</p>
<p class="calibre2">ECDSA (&lt;= 160 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">DSA (1024 bits)</p>
<p class="calibre2">RSA (1024 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">RSA (&gt;=2048 bits)</p>
<p class="calibre2">DSA (&gt;=2048 bits)</p>
<p class="calibre2">ECDSA (&gt;=256 bits)</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2"><span class="calibre6">Hellman </span>key exchange<span class="calibre6"> (</span>DH<span class="calibre6">)</span></p>
</td>
<td class="calibre28">
<p class="calibre2">DH ( &lt; 1024 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">DH (1024-2047 bits)</p>
</td>
<td class="calibre28">
<p class="calibre2">DH (&gt;=2048 bits)</p>
<p class="calibre2">ECDH(&gt;-256 bits)</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Center for Internet Security (CIS) and OpenSCAP – securing your infrastructure</h1>
                
            
            <article>
                
<p class="calibre2">The CIS defines security benchmarks and the <strong class="calibre4">National Checklist Program</strong> (<strong class="calibre4">NCP</strong>), defined by the NIST SP 800-70, provides guidance on the security configurations of the operating system, database, virtualization, framework, and applications.</p>
<p class="calibre2">The IT and operation team are primarily responsible for ensuring the security of the infrastructure. However, the development team may also share some responsibilities for securing the infrastructure. For example, the development team may decide to deliver the application package in the form of a container or to apply Infrastructure as Code frameworks, such as <strong class="calibre4">Puppet</strong> or <strong class="calibre4">Chef</strong>. These technologies allow development teams to define a secure configuration, even in the development stage, and the operation team just needs to apply the secure configuration definition during application deployment.</p>
<p class="mce-root">In addition, it's also the development team's job to provide a list of configuration changes for every release's deployment. This will allow the operation team to review if the configuration changes are secure and appropriate. Due to the complexity and the amount of configuration that needs to be reviewed, the adoption of scanning tools to check if all the configurations are secure and comply with industry best practices is necessary. Cloud service providers may provide such scanning services or tools. Here, we recommend open source tools such as CIS-CAT Lite provided by CIS and OpenSCAP.</p>
<p class="calibre2">The journey to secure the infrastructure and platform can be completed in three stages. The first stage is to define a secure configuration baseline by referring to industry practices such as CIS or NIST NCP. Then, we may apply tools such as Chef or Puppet to ensure every deployment includes a secure configuration as well. The final stage is to do constant monitoring of frequent configuration changes and security compliance assessment.  </p>
<p class="cdpaligncenter1"><img class="alignnone2" src="../images/00007.jpeg"/></p>
<p class="calibre2">Typical infrastructure components are listed in the following table. CIS provides secure configuration suggestions to each system component and also tools to do the scanning against the security best practice baseline. </p>
<p class="calibre2">CIS provides the CIS Benchmark, which defines the secure configuration of operating systems, server software, cloud services, networking devices, and so on. It helps operation teams to understand how to secure and configure an infrastructure and platform.</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Infrastructure layers</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">System</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Web services</p>
</td>
<td class="calibre28">Apache, Nginx, IIS</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Database</p>
</td>
<td class="calibre28">MS SQL, MySQL, Oracle, MongoDB</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Virtualization/container</p>
</td>
<td class="calibre28">VMware, Docker, Kubernetes</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Networking</p>
</td>
<td class="calibre28">Cisco devices</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Operating systems</p>
</td>
<td class="calibre28">
<p class="calibre2">Windows, Linux, Ubuntu, CentOS, SUSE</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">In addition to CIS Benchmark documents, CIS also provides tools to infrastructure or operation teams for secure configuration scanning. The CIS Security website provides related security configuration scanning tools to download. </p>
<div class="cdpaligncenter2"><img src="../images/00008.jpeg" class="calibre29"/></div>
<div class="cdpaligncenter3">Source: https://www.cisecurity.org/cybersecurity-tools/</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">National Checklist Program (NCP) repository</h1>
                
            
            <article>
                
<p class="calibre2">The NCP repository provides secure configuration for specific software components. For example, if you are looking for Apache security configuration or the CIS of Apache, you may use the NCP to do the search.  The screenshot is from the NIST NCP (National Checklist Program).</p>
<p class="cdpaligncenter1"><img class="alignnone3" src="../images/00009.jpeg"/></p>
<div class="cdpaligncenter3">Source: https://nvd.nist.gov/ncp/repository</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">OpenSCAP tools</h1>
                
            
            <article>
                
<p class="calibre2">OpenSCAP is similar to CIS security benchmarks; it also provides a secure configuration baseline. In addition, OpenSCAP also provides different kinds of tool for operation or infrastructure teams to do secure configuration evaluation and scanning. Depending on the requirements, there are four kinds of tool provided, as shown in the following screenshot:</p>
<div class="cdpaligncenter2"><img src="../images/00010.jpeg" class="calibre30"/></div>
<div class="cdpaligncenter3">Source: https://www.open-scap.org/tools/</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Legal and security compliance</h1>
                
            
            <article>
                
<p class="calibre2">The EU GDPR, which came into force in May 2018, protects all EU citizens from privacy and data breaches. According to the GDPR FAQ:</p>
<div class="packt_quote">"The GDPR not only applies to organizations located within the EU but it also applies to all companies processing and holding the personal data of data subjects residing in the European Union, regardless of the company's location."</div>
<p class="calibre2">In other words, if a company is providing services to customers in the European Union, its data handling will need to comply entirely with GDPR. From a DevSecOps point of view, it's related to data collection, handling, storage, backup, modification, transport, and removal—in a secure manner. According to GDPR A<span class="calibre6">rticle </span>5, there are six privacy principles:</p>
<ul class="calibre10">
<li class="calibre11">Lawfulness, fairness, and transparency</li>
<li class="calibre11">Purpose limitations</li>
<li class="calibre11">Data minimization</li>
<li class="calibre11">Accuracy</li>
<li class="calibre11">Storage limitations</li>
<li class="calibre11">Integrity and confidentiality</li>
</ul>
<p class="calibre2">GDPR, like other security compliance policies, doesn't define the technical approach to achieve it. GDPR can still be too high-level for an engineering team. It needs to translate into software security requirements, design, threat modeling, tools, and so on. The following table summarizes typical security practices for the engineering team:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Stage</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Common security practices for privacy or sensitive info handing</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Design</p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Privacy Impact Assessment</strong> (<strong class="calibre4">PIA</strong>)</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Coding</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">Data masking library</li>
<li class="calibre11">Anonymous toolbox</li>
<li class="calibre11">RAPPOR—privacy-preserving reporting algorithms</li>
<li class="calibre11">Encryption storage (RSA, ASE)</li>
<li class="calibre11">Secure erasure</li>
<li class="calibre11">Secure communication protocol (such as <span>TLS v1.2, </span>SSH v2, SFTP, SNMP v3)</li>
<li class="calibre11">Cookie consent</li>
<li class="calibre11">Data Vault</li>
<li class="calibre11">Key management</li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Testing</p>
</td>
<td class="calibre28">
<p class="calibre2">OWASP testing for weak cryptography, testing for error handling, testing for configuration, and so on</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Deployment</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">OWASP configuration and deployment management testing</li>
<li class="calibre11">CIS secure environment configuration</li>
<li class="calibre11">Sensitive information in Git</li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Monitoring</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">ELK for log analysis</li>
<li class="calibre11">Integrity monitoring (IDS/IPS) to monitor any unauthorized changes</li>
<li class="calibre11">CIS secure configuration monitoring</li>
<li class="calibre11">Sensitive information leakage in Git</li>
</ul>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">New technology (third-party, cloud, containers, and virtualization)</h1>
                
            
            <article>
                
<p class="calibre2">New technologies such as virtualization, Docker, and microservices introduce new methods of software delivery and speeds up application deployment, but also brings new security threats and risks. We will briefly discuss how these new technologies change the practices of security and DevOps.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Virtualization</h1>
                
            
            <article>
                
<p class="calibre2">It's very common to install application services on top of a virtualized OS. Virtualization technology helps to make the most physical machine resources such as the CPU, memory, and disks. However, virtualization is a shared OS technology. It also introduces security risks such as VM escape, information leakage, and denial-of-service for applications running on top of virtualization.</p>
<p class="calibre2">Security practices in guest OS virtualization are normally involved with both OS and virtualization hardening. Here are some key security configurations related to virtualization. Refer to CIS Benchmarks for details:</p>
<ul class="calibre10">
<li class="calibre11">Limit <span>informative messages</span> from the VM to the VMX file</li>
<li class="calibre11">Limit sharing console connections</li>
<li class="calibre11">Disconnect unauthorized devices (USB, DVD, serial devices, and so on)</li>
<li class="calibre11">Disable <strong class="calibre1">BIOS Boot Specification</strong> (<strong class="calibre1">BBS</strong>)</li>
<li class="calibre11">Disable guest-host interaction protocol handler</li>
<li class="calibre11">Disable host guest filesystem server</li>
<li class="calibre11">Disable VM console paste operations</li>
<li class="calibre11">Disable virtual disk shrinking</li>
<li class="calibre11">Do not send host information to guests</li>
</ul>
<p class="calibre2">The following diagram shows the adoption of virtualization. Virtualization adds a hypervisor layer on top of the physical server so that the virtualized guest OS can run on top of it:</p>
<div class="cdpaligncenter2"><img src="../images/00011.jpeg" class="calibre31"/></div>
<p class="calibre2">In addition to the secure configuration of virtualization, applying a security patch to virtualization is also a must for operation or IT teams. </p>
<p class="calibre2">In addition, the following resources may help you to search f<span class="calibre6">or <strong class="calibre4">Common Vulnerabilities and Exposures</strong> (</span><strong class="calibre4">CVE</strong>) in vulnerability databases:</p>
<ul class="calibre10">
<li class="calibre11">Exploit Database <a href="https://www.exploit-db.com/" target="_blank" class="calibre9">https://www.exploit-db.com/</a></li>
<li class="calibre11">SecLists <a href="http://seclists.org/fulldisclosure/" target="_blank" class="calibre9">http://seclists.org/fulldisclosure/</a></li>
<li class="calibre11"><span>Vulnerability Notes Database </span><a href="https://www.kb.cert.org/vuls/" target="_blank" class="calibre9">https://www.kb.cert.org/vuls/</a></li>
</ul>
<p class="calibre2">To search for the vulnerabilities of a specific product or vendor, refer to the URL search for VMware as following:</p>
<ul class="calibre10">
<li class="calibre11"><a href="https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=VMware" class="calibre9">https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=VMware</a></li>
<li class="calibre11"><a href="https://www.cvedetails.com/vendor/252/Vmware.html" class="calibre9">https://www.cvedetails.com/vendor/<strong class="calibre1">252/</strong>Vmware.html</a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Dockers</h1>
                
            
            <article>
                
<p class="calibre2">The introduction of Docker provides software package delivery and installation with new choices and can be one of the best ways to isolate different applications without using a whole separate OS virtual machine. Software can be packaged into a container by Docker. A container, like a VM image, includes everything needed to run application services such as runtime, system libraries, and settings. The key difference between a virtual machine image and a container is that the container doesn't actually include the whole OS. The container only includes key necessary system libraries and every container shares the same OS kernel during runtime. Therefore, Docker containers can boot up within seconds and use much less memory or far fewer disks than virtualization images.</p>
<p class="calibre2">The use of Docker can also greatly help operation teams to do deployment and secure configuration since a Docker container includes every configuration and the settings you need to run. To understand Docker security practices, check out the <strong class="calibre4">CIS Docker Benchmark</strong> and <strong class="calibre4">Docker security</strong> in the <em class="calibre16">Further reading</em> section. </p>
<p class="calibre2">Key secure practices and configurations of Docker are listed here:</p>
<ul class="calibre10">
<li class="calibre11">Separate partition for containers</li>
<li class="calibre11">Updated Linux kernel</li>
<li class="calibre11">Only allow trusted users to control the Docker daemon</li>
<li class="calibre11">Audit the Docker daemon, files, and directories</li>
<li class="calibre11">Restrict network traffic between containers</li>
<li class="calibre11">TLS authentication for the Docker daemon</li>
<li class="calibre11">Do not bind Docker to another IP/port or a Unix socket</li>
<li class="calibre11">Docker daemon configuration files permissions</li>
<li class="calibre11">Container runtime (Linux Kernel capabilities, SSH, ports, memory, CPU, IPC)</li>
</ul>
<p class="calibre2">The following diagram shows the key difference between virtualization and Docker. Virtualization is a guest OS level while Docker is actually an application-level isolation and shares the same guest OS:</p>
<p class="cdpaligncenter1"><img class="alignnone4" src="../images/00012.gif"/></p>
<p class="calibre2">Here is a summary of the known security vulnerabilities identified in Docker.</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre32"><strong class="calibre1"><span>CVE ID</span></strong></td>
<td class="calibre21"><strong class="calibre1"><span>Related CWE ID</span></strong></td>
<td class="calibre33"><strong class="calibre1">Description</strong></td>
</tr>
<tr class="calibre20">
<td class="calibre32">CVE-2014-5282</td>
<td class="calibre21">20</td>
<td class="calibre33">
<p class="calibre2"><span class="calibre6">Docker before 1.3 does not properly validate image IDs, which allows remote attackers to redirect to another image through the loading of untrusted images via <strong class="calibre4">Docker load</strong>.</span></p>
<p class="calibre2"> </p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre32"><span>CVE-2017-14992</span></td>
<td class="calibre21">20</td>
<td class="calibre33">
<p class="calibre2">Lack of content verification in Docker-CE (also known as Moby), and earlier allows a remote attacker to launch a Denial of Service attack via a crafted image layer payload; a.k.a Gzip bombing.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre32"><span>CVE-2017-7297</span></td>
<td class="calibre21">264</td>
<td class="calibre33">
<p class="calibre2">Rancher Labs rancher server 1.2.0+ is vulnerable to authenticated users disabling access control via an API call. This is fixed in versions rancher/server:v1.2.4, rancher/server:v1.3.5, rancher/server:v1.4.3, and rancher/server:v1.5.3.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre32"><span>CVE-2016-9962</span></td>
<td class="calibre21">362</td>
<td class="calibre33">
<p class="calibre2">RunC allowed additional container processes via runc exec to be ptraced by the pid 1 of the container. This allows the main processes of the container, if running as root, to gain access to file-descriptors of these new processes during initialization and can lead to container escapes or modification of runC state before the process is fully placed inside the container.</p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre32"><span>CVE-2014-0047</span></td>
<td class="calibre21">n/a</td>
<td class="calibre33">
<p class="calibre2"><span class="calibre6">Docker before 1.5 allows local users to have an unspecified impact via vectors involving unsafe /tmp usage.</span></p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">Here is a tip to query a specific vulnerability.  Take '<span class="calibre6">CVE-2014-0047</span>' as an example; just replace the CVE ID number at the end of the following URL.</p>
<ul class="calibre10">
<li class="calibre11"><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0047" class="calibre9">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0047</a></li>
<li class="calibre11"><a href="https://nvd.nist.gov/vuln/detail/CVE-2014-0047" class="calibre9">https://nvd.nist.gov/vuln/detail/CVE-2014-0047</a></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Infrastructure as Code (IaC)</h1>
                
            
            <article>
                
<p class="calibre2">Puppet, Chef, Ansible, and SaltStack are tools to apply IaC. The key advantage of using these tools is that any system configuration can be defined in a text file at the design stage and changes can be managed by versions. This will help both operation or development teams to build security configuration baselines such as file permissions, firewall rules, web configurations, or MySQL connections. Once the security configuration baseline is defined, the operation team can monitor any unauthorized changes or roll back the configuration to previous specific versions.</p>
<p class="calibre2">For example, we may have baseline security firewall rules for a web services environment to only allow ports <kbd class="calibre12">80</kbd> and <kbd class="calibre12">443</kbd>. All an operation team needs to do is to define the firewall rules by using one of the tools (Puppet, Chef, Ansible, SaltStack), and the framework will apply the rules, audit, and even correct changes if other ports are opened by mistake or by other service deployments.</p>
<p class="calibre2">The DevSec Hardening Framework project available at <a href="https://github.com/dev-sec" target="_blank" class="calibre9">https://github.com/dev-sec</a> provides Ansible, Chef, and Puppet secure configuration baseline template scripts.</p>
<p class="calibre2">The following diagram shows how IaC (for example, Puppet) works:</p>
<div class="cdpaligncenter2"><img src="../images/00013.jpeg" class="calibre34"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Cloud services hacks/abuse</h1>
                
            
            <article>
                
<p class="calibre2">A CSA survey on the top cloud security concerns has identified the following 12 issues:</p>
<ul class="calibre10">
<li class="calibre11">Data breaches</li>
<li class="calibre11">Weak identity, credentials, and access management</li>
<li class="calibre11">Insecure APIs</li>
<li class="calibre11">System and application vulnerabilities</li>
<li class="calibre11">Account hijacking</li>
<li class="calibre11">Malicious insiders</li>
<li class="calibre11"><strong class="calibre1">Advanced Persistent Threats</strong> (<strong class="calibre1">APTs</strong>)</li>
<li class="calibre11">Data loss</li>
<li class="calibre11">Insufficient due diligence</li>
<li class="calibre11">Abuse and nefarious use of cloud services</li>
<li class="calibre11">Denial of service</li>
<li class="calibre11">Shared technology issues</li>
</ul>
<p class="calibre2">In addition, service abuse has also become a headache for most e-commerce or shopping sites. Let's take one example to understand how hackers or misconduct users can benefit from it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Case study – products on sale</h1>
                
            
            <article>
                
<p class="calibre2">Assume that one online shopping store is going to have a 50% discount on one new model phone for only the first 100 customers; it will be available at 12:00 on February 1.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">What do hackers do?</h1>
                
            
            <article>
                
<p class="calibre2">For this kind of sale with 50 % profit is a great attraction for malicious users to do something. What underground users typically may do involves the massive registration of user accounts. There can be more than 10,000 users accounts registered in a short period of time just before the sales. At the moment of the sale, they will use automated scripts to trigger purchase behaviors and finish the orders within seconds. Once they have ordered or occupied all the phones, they may either sell them at higher prices or even not pay for the orders.</p>
<p class="calibre2"><em class="calibre16">Is this illegal?</em> These behaviors follow the business rules for registration and purchases. Although the behavior may not be against the law, it may be considered misconduct or service abuse. Therefore, this kind of on-sale activity may require additional business rules and regulations. After all, it's not purely hacking behavior. We will discuss this in later chapters. Here, we provide an overview of alleviating measures, which can be by means of business rules or technical approaches:</p>
<ul class="calibre10">
<li class="calibre11">The sale is only limited to those customers with a certain period of purchase history</li>
<li class="calibre11">Apply CAPTCHA to distinguish humans from machines</li>
<li class="calibre11">Two-factor authentication and registration via phone SMS</li>
<li class="calibre11">Detection and correlation of IP, phone number, email, account ID, physical address, and GeoIP location</li>
<li class="calibre11">Unusual page browsing behavior such as skipping products and jumping to the purchase directly</li>
<li class="calibre11">Unusual massive logins or registration from the same IP or devices</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Rapid release</h1>
                
            
            <article>
                
<p class="calibre2">Rapid, frequent, and iterative releases are very common for cloud services. This normally drives the need for DevOps practices. This can be both an opportunity and a challenge to security. The challenge is that a short period of frequent releases may not include enough time to do a full cycle of security testing. There are three maturity levels of DevOps practices:</p>
<table border="1" class="calibre18">
<tbody class="calibre19">
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Maturity level</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Achieved</strong></p>
</td>
<td class="calibre28">
<p class="calibre2"><strong class="calibre4">Technology adoption</strong></p>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Continuous integration</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11"> Source code repository and version control</li>
<li class="calibre11">CI workflow with a daily build and unit testing</li>
</ul>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">Jenkins</li>
<li class="calibre11">Git</li>
<li class="calibre11">Unit testing</li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Continuous delivery</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">Automated deploy to the staging environment</li>
<li class="calibre11">Integration testing on the staging environment</li>
<li class="calibre11">Deployment to production is done manually</li>
</ul>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">IaC(Puppet)</li>
<li class="calibre11">Docker</li>
</ul>
</td>
</tr>
<tr class="calibre20">
<td class="calibre28">
<p class="calibre2">Continuous deployment</p>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">Automated deployment and acceptance testing on production</li>
<li class="calibre11">Production changes or configuration management</li>
</ul>
</td>
<td class="calibre28">
<ul class="calibre10">
<li class="calibre11">IaC (puppet)</li>
<li class="calibre11">Docker</li>
<li class="calibre11">Automated acceptance testing</li>
<li class="calibre11">Configuration monitoring</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">The adoption of DevOps practices means more collaboration between development, QA, IT, and operation teams, and more in-progress adoption of continuous integration or continuous delivery tools. This provides a good foundation to move to DevSecOps. Depending on the maturity level of the existing CI/CD, security practices or tools can be added on top of the existing CI/CD framework. It's the most effective and least learning curve to introduce security is don't change existing development, QA, IT, operation team the way they work. Building security tools around the existing CI/CD is still the best approach. We will explore this more in upcoming chapters.</p>
<p class="calibre2">The diagram below shows the security involved with development, QA, and operations through the whole CI/CD lifecycle.</p>
<p class="cdpaligncenter1"><img class="alignnone5" src="../images/00014.jpeg"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, we discussed external factors that drive the need for security such as security compliance, regulations, and the market. In addition, the adoption of new technologies also brings about new challenges such as Docker, virtualization, cloud services, and IaC. </p>
<p class="calibre2">For security compliance, we briefly discussed ISO 27001 and some security best practices/tools introduced by CSA  such as CCM, cloud security guide, CAIQ, and Cloud top threats. FIPS was also discussed for the correct usage of cryptography. In terms of infrastructure security, CIS and OpenSCAP were introduced. Finally, the EU GDPR law regulates and drives the security requirements of data and privacy protection. </p>
<p class="calibre2">Based on all these security challenges and compliance rules, we introduced one small case study for cloud services, which could be hacked and abused. Moreover, what security technologies may apply to DevOps practices. In upcoming chapters, we will further discuss how security goals, metrics, and security assurance programs apply to different kinds of organization and practices. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Questions</h1>
                
            
            <article>
                
<ol class="calibre13">
<li value="1" class="calibre11">Does<span> </span>FIPS<span> </span>define the security requirements for cryptography?</li>
<li value="2" class="calibre11">Which of the following defines the security compliance is primarily focused on personal data privacy? 
<ol class="calibre14">
<li value="1" class="calibre11">ISO 27018</li>
<li value="2" class="calibre11">FIPS </li>
<li value="3" class="calibre11">GDPR </li>
<li value="4" class="calibre11">CIS</li>
</ol>
</li>
<li value="3" class="calibre11">What can be considered cloud service abuse?          
<ol class="calibre14">
<li value="1" class="calibre11">Account sharing   </li>
<li value="2" class="calibre11">Brute-force logins   </li>
<li value="3" class="calibre11">API abuse</li>
<li value="4" class="calibre11">All of the above</li>
</ol>
</li>
</ol>
<ol start="4" class="calibre13">
<li value="4" class="calibre11">What is the CIS security benchmark used for?
<ol class="calibre14">
<li value="1" class="calibre11">Anti-virus     </li>
<li value="2" class="calibre11">Defining secure configuration of the OS, platform, databases, and so on</li>
<li value="3" class="calibre11">Firewall   </li>
<li value="4" class="calibre11">Integrity</li>
</ol>
</li>
<li value="5" class="calibre11">Which role is involved with security practices during the DevOps cycle?      
<ol class="calibre14">
<li value="1" class="calibre11">QA   </li>
<li value="2" class="calibre11">RD     </li>
<li value="3" class="calibre11">Operations   </li>
<li value="4" class="calibre11">All of the above </li>
</ol>
</li>
<li value="6" class="calibre11">How does the technology Infrastructure as Code help security operation teams?     
<ol class="calibre14">
<li value="1" class="calibre11">Virus detection   </li>
<li value="2" class="calibre11">Secure configuration   </li>
<li value="3" class="calibre11">Intrusion detection   </li>
<li value="4" class="calibre11">Encryption</li>
</ol>
</li>
<li value="7" class="calibre11">Which of the following is not a privacy principle?               
<ol class="calibre14">
<li value="1" class="calibre11">Spoofing        </li>
<li value="2" class="calibre11"><span>Purpose limitations         </span></li>
<li value="3" class="calibre11"><span>Storage limitations   </span></li>
<li value="4" class="calibre11"><span>Accuracy</span></li>
</ol>
</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Further reading</h1>
                
            
            <article>
                
<p class="calibre2">Read the following links for further readings:</p>
<ul class="calibre10">
<li class="calibre11"><span><strong class="calibre1">CSA (Cloud Security Alliance) Security White Papers:</strong><a href="https://cloudsecurityalliance.org/download/" class="calibre9"> </a><a href="https://cloudsecurityalliance.org/download/" target="_blank" class="calibre9">https://cloudsecurityalliance.org/download/</a></span></li>
<li class="calibre11"><strong class="calibre1">NIST Security Considerations in the System Development Life Cycle</strong>:<span> </span><a href="https://nvlpubs.nist.gov/nistpubs/legacy/sp/nistspecialpublication800-64r2.pdf" target="_blank" class="calibre9">https://nvlpubs.nist.gov/nistpubs/legacy/sp/nistspecialpublication800-64r2.pdf</a></li>
<li class="calibre11"><strong class="calibre1">ISO 29100 </strong><strong class="calibre1">information technology security techniques privacy framework</strong><span>:</span><span> </span><a href="https://www.iso.org/standard/45123.html" target="_blank" class="calibre9">https://www.iso.org/standard/45123.html</a></li>
<li class="calibre11">
<p class="calibre2"><span class="calibre6"><strong class="calibre4">NIST National Checklist Program</strong></span> <a href="https://nvd.nist.gov/ncp/repository" class="calibre9">https://nvd.nist.gov/ncp/repository</a></p>
</li>
<li class="calibre11"><strong class="calibre1">OWASP Guide to Cryptography</strong> <a href="https://www.owasp.org/index.php/Guide_to_Cryptography" class="calibre9">https://www.owasp.org/index.php/Guide_to_Cryptography</a></li>
<li class="calibre11"><strong class="calibre1">NVD (National Vulnerability Database)</strong><span> </span><a href="https://nvd.nist.gov/" class="calibre9">https://nvd.nist.gov/</a></li>
<li class="calibre11"><strong class="calibre1">CVE details</strong> <a href="https://cvedetails.com/" class="calibre9">https://cvedetails.com/</a></li>
<li class="calibre11"><span><strong class="calibre1">CIS Cybersecurity Tools</strong> </span><a href="https://www.cisecurity.org/cybersecurity-tools/" target="_blank" class="calibre9"><span>https://www.cisecurity.org/cybersecurity-tools/</span></a></li>
<li class="calibre11"><strong class="calibre1">Security aspects of virtualization by ENISA</strong>: <a href="https://www.enisa.europa.eu/publications/security-aspects-of-virtualization/" class="calibre9">https://www.enisa.europa.eu/publications/security-aspects-of-virtualization/at_download/fullReport</a></li>
<li class="calibre11"><strong class="calibre1">CIS Benchmarks also provides a security guide for VMware, Docker, and Kubernetes</strong>:<span> </span><a href="https://www.cisecurity.org/cis-benchmarks/" class="calibre9">https://www.cisecurity.org/cis-benchmarks/</a></li>
<li class="calibre11"><strong class="calibre1">OpenStack's hardening of the virtualization layer provides a secure guide to building the virtualization layer</strong>: <a href="https://docs.openstack.org/security-guide/compute/hardening-the-virtualization-layers.html" target="_blank" class="calibre9">https://docs.openstack.org/security-guide/compute/hardening-the-virtualization-layers.html</a></li>
<li class="calibre11"><strong class="calibre1">Docker security</strong><span> </span>at<span> </span><a href="https://docs.docker.com/engine/security/security/" target="_blank" class="calibre9"><span>https://docs.docker.com/engine/security/security/</span></a></li>
</ul>


            </article>

            
        </section>
    </body></html>