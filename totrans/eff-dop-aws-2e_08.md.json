["```\nmodule \"flow-log-prerequisite\" {\n   source = \"github.com/giuseppeborgese/effective_devops_with_aws__second_edition//terraform- modules//vpc-flow-logs-prerequisite\"\n   prefix = \"devops2nd\"\n }\noutput \"role\" { value = \"${module.flow-log-prerequisite.rolename}\" }\noutput \"loggroup\" { value = \"${module.flow-log-prerequisite.cloudwatch_log_group_arn}\" }\n```", "```\nterraform init -upgrade\n Upgrading modules...\n - module.flow-log-prerequisite\n Updating source \"github.com/giuseppeborgese/effective_devops_with_aws__second_edition//terraform-modules//vpc-flow-logs-prerequisite\"\nInitializing the backend...\nInitializing provider plugins...\n....\n```", "```\nterraform plan -out /tmp/tf11.out\n Refreshing Terraform state in-memory prior to plan...\n The refreshed state will be used to calculate this plan, but will not \n be persisted to local or remote state storage.\n...\n...\nAn execution plan has been generated and is shown below.\n Resource actions are indicated with the following symbols:\n + create\nTerraform will perform the following actions:\n+ module.flow-log-prerequisite.aws_cloudwatch_log_group.flow_log\n id: <computed>\n arn: <computed>\n name: \"devops2nd_flowlogs\"\n retention_in_days: \"0\"\n+ module.flow-log-prerequisite.aws_iam_role.flow_role\n id: <computed>\n arn: <computed>\n assume_role_policy: \"{\\n \\\"Version\\\": \\\"2012-10-17\\\",\\n \\\"Statement\\\": [\\n {\\n \\\"Sid\\\": \\\"\\\",\\n \\\"Effect\\\": \\\"Allow\\\",\\n \\\"Principal\\\": {\\n \\\"Service\\\": \\\"vpc-flow-logs.amazonaws.com\\\"\\n },\\n \\\"Action\\\": \\\"sts:AssumeRole\\\"\\n }\\n ]\\n}\\n\"\n create_date: <computed>\n force_detach_policies: \"false\"\n max_session_duration: \"3600\"\n name: \"devops2nd_flowlogs\"\n path: \"/\"\n unique_id: <computed>\n+ module.flow-log-prerequisite.aws_iam_role_policy.flow_policy\n id: <computed>\n name: \"devops2nd_flowlogs\"\n policy: \"{\\n \\\"Version\\\": \\\"2012-10-17\\\",\\n \\\"Statement\\\": [\\n {\\n \\\"Action\\\": [\\n \\\"logs:CreateLogGroup\\\",\\n \\\"logs:CreateLogStream\\\",\\n \\\"logs:PutLogEvents\\\",\\n \\\"logs:DescribeLogGroups\\\",\\n \\\"logs:DescribeLogStreams\\\"\\n ],\\n \\\"Effect\\\": \\\"Allow\\\",\\n \\\"Resource\\\": \\\"*\\\"\\n }\\n ]\\n}\\n\"\n role: \"${aws_iam_role.flow_role.id}\" Plan: 3 to add, 0 to change, 0 to destroy.\n-----------------------------------------------------------------------\n```", "```\nterraform apply /tmp/tf11.out\n```", "```\ntf11 apply /tmp/tf11.out\n module.flow-log-prerequisite.aws_cloudwatch_log_group.flow_log: Creating...\n arn: \"\" => \"<computed>\"\n name: \"\" => \"devops2nd_flowlogs\"\n retention_in_days: \"\" => \"0\"\n module.flow-log-prerequisite.aws_iam_role.flow_role: Creating...\n arn: \"\" => \"<computed>\"\n assume_role_policy: \"\" => \"{\\n \\\"Version\\\": \\\"2012-10-17\\\",\\n \\\"Statement\\\": [\\n {\\n \\\"Sid\\\": \\\"\\\",\\n \\\"Effect\\\": \\\"Allow\\\",\\n \\\"Principal\\\": {\\n \\\"Service\\\": \\\"vpc-flow-logs.amazonaws.com\\\"\\n },\\n \\\"Action\\\": \\\"sts:AssumeRole\\\"\\n }\\n ]\\n}\\n\"\n create_date: \"\" => \"<computed>\"\n force_detach_policies: \"\" => \"false\"\n max_session_duration: \"\" => \"3600\"\n name: \"\" => \"devops2nd_flowlogs\"\n path: \"\" => \"/\"\n unique_id: \"\" => \"<computed>\"\n module.flow-log-prerequisite.aws_iam_role.flow_role: Creation complete after 2s (ID: devops2nd_flowlogs)\n module.flow-log-prerequisite.aws_iam_role_policy.flow_policy: Creating...\n name: \"\" => \"devops2nd_flowlogs\"\n policy: \"\" => \"{\\n \\\"Version\\\": \\\"2012-10-17\\\",\\n \\\"Statement\\\": [\\n {\\n \\\"Action\\\": [\\n \\\"logs:CreateLogGroup\\\",\\n \\\"logs:CreateLogStream\\\",\\n \\\"logs:PutLogEvents\\\",\\n \\\"logs:DescribeLogGroups\\\",\\n \\\"logs:DescribeLogStreams\\\"\\n ],\\n \\\"Effect\\\": \\\"Allow\\\",\\n \\\"Resource\\\": \\\"*\\\"\\n }\\n ]\\n}\\n\"\n role: \"\" => \"devops2nd_flowlogs\"\n module.flow-log-prerequisite.aws_cloudwatch_log_group.flow_log: Creation complete after 3s (ID: devops2nd_flowlogs)\n module.flow-log-prerequisite.aws_iam_role_policy.flow_policy: Creation complete after 1s (ID: devops2nd_flowlogs:devops2nd_flowlogs)\nApply complete! Resources: 3 added, 0 changed, 0 destroyed.\n Outputs:\nloggroup = arn:aws:logs:us-east-1:790419456202:log-group:devops2nd_flowlogs:*\n role = devops2nd_flowlogs\n```", "```\n{\n    \"Version\": \"2012-10-17\",\n    \"Id\": \"Policy1415115909152\",\n     \"Statement\": [\n        {\n            \"Sid\": \"Access-to-specific-VPCE-only\",\n            \"Principal\": \"*\",\n            \"Action\": \"s3:*\",\n            \"Effect\": \"Deny\",\n            \"Resource\": [\"arn:aws:s3:::my_secure_bucket\",\n                         \"arn:aws:s3:::my_secure_bucket/*\"],\n            \"Condition\": {\n                \"StringNotEquals\": {\n     \"aws:sourceVpce\": \"vpce-039f31bfec07367ea\"\n                 }\n             }\n        }\n       ]\n }\n```", "```\nmodule \"webapp-playground\" {\n  source = \"github.com/giuseppeborgese/effective_devops_with_aws__second_edition//terraform-modules//webapp-playground\"\n  subnet_public_A = \"subnet-a94cabf4\"\n  subnet_public_B = \"subnet-54840730\"\n  subnet_private = \"subnet-54840730\"\n  vpc_id = \"vpc-3901d841\"\n  my_ami = \"ami-b70554c8\"\n  pem_key_name = \"effectivedevops\"\n}\n```", "```\nterraform init -upgrade\nterraform plan -out /tmp/tf11.out\nPlan: 12 to add, 0 to change, 0 to destroy. \nterraform apply /tmp/tf11.out\n```", "```\nterraform destroy -target module.webapp-playground\n```", "```\nmodule \"limit_admin_WAF\" {\n  source = \"github.com/giuseppeborgese/effective_devops_with_aws__second_edition//terraform-modules//limit-the-admin-area\"\n  alb_arn = \"${module.webapp-playground.alb_arn}\"\n  my_office_ip = \"146.241.179.87/32\"\n  admin_suburl = \"/subdir\"\n}\n```", "```\nterraform plan -out /tmp/tf11.out\nterraform init -upgrade\nterraform apply /tmp/tf11.out \n```", "```\nalb_url = playground-1940933132.us-east-1.elb.amazonaws.com\nloggroup = arn:aws:logs:us-east-1:790419456202:log-group:devops2nd_flowlogs:*\nrole = devops2nd_flowlogs\ngiuseppe@Giuseppes-MacBook-Air ~/p/effectivedevops>\n```", "```\ngiuseppe@Giuseppes-MacBook-Air ~> curl http://playground-1940933132.us-east-1.elb.amazonaws.com/subdir/\n This is a sub directory\ngiuseppe@Giuseppes-MacBook-Air ~> curl http://playground-1940933132.us-east-1.elb.amazonaws.com/\n This is a playground main directory\ngiuseppe@Giuseppes-MacBook-Air ~>\n```", "```\n[ec2-user@ip-172-31-6-204 ~]$ curl http://playground-1940933132.us-east-1.elb.amazonaws.com/\n This is a playground main directory\n [ec2-user@ip-172-31-6-204 ~]$ curl http://playground-1940933132.us-east-1.elb.amazonaws.com/subdir/\n <html>\n <head><title>403 Forbidden</title></head>\n <body bgcolor=\"white\">\n <center><h1>403 Forbidden</h1></center>\n </body>\n </html>\n```", "```\nterraform destroy -target module.limit_admin_WAF\n```", "```\n/* module \"limit_admin_WAF\" {\n source\n.............\n} */\n```", "```\n module \"limit_admin_WAF\" {\n source = \"github.com/giuseppeborgese/effective_devops_with_aws__second_edition//terraform-modules//ddos_protection\"\n alb_arn = \"${module.webapp-playground.alb_arn}\"\n admin_suburl = \"subdir\"\n }\n```", "```\nterraform init --upgrade\nterraform plan -out /tmp/tf11.out\nterraform apply /tmp/tf11.out\n Outputs:\nalb_url = playground-1757904639.us-east-1.elb.amazonaws.com\n```", "```\n curl playground-1757904639.us-east-1.elb.amazonaws.com\n```", "```\ncurl playground-1757904639.us-east-1.elb.amazonaws.com/subdir/ \n```", "```\ncurl -O https://raw.githubusercontent.com/giuseppeborgese/effective_devops_with_aws__second_edition/master/terraform-modules/ddos_protection/test_protection.sh\nchmod +x test_protection.sh\n./test_protection.sh ...\n```", "```\nThis is a subdirectory\n 538\nThis is a subdirectory\n 539\nThis is a subdirectory\n 540\nThis is a subdirectory\n 541\nThis is a subdirectory\n```", "```\n259\n <html>\n <head><title>403 Forbidden</title></head>\n <body bgcolor=\"white\">\n <center><h1>403 Forbidden</h1></center>\n </body>\n </html>\n 260\n <html>\n <head><title>403 Forbidden</title></head>\n <body bgcolor=\"white\">\n <center><h1>403 Forbidden</h1></center>\n </body>\n </html>\n```"]