<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch02"/>Chapter 2. User Management</h1></div></div></div><p>A collaboration tool<a id="id126" class="indexterm"/> such as Confluence is nothing without its users, <a id="id127" class="indexterm"/>using the tool for collaboration. In this chapter we will learn different ways to add users to our Confluence instance and learn how to manage those users.</p><p>We will also learn that in a corporate situation, where user management often already exists, it is very easy to configure Confluence to make use of that existing user infrastructure.</p><p>In this chapter we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Manually adding users to Confluence</li><li class="listitem" style="list-style-type: disc">Inviting users</li><li class="listitem" style="list-style-type: disc">Administrating your users</li><li class="listitem" style="list-style-type: disc">Managing user groups</li><li class="listitem" style="list-style-type: disc">Connecting to an external user directory</li></ul></div><div><div><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Understanding authentication</h1></div></div></div><p>Authentication in <a id="id128" class="indexterm"/>Confluence takes place at different levels within the application,<a id="id129" class="indexterm"/> for example, when retrieving information from the database or when displaying this information on a Confluence page. The technology that is used depends on the request made to Confluence or your configuration. The following are a few examples of authentication technologies.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec20"/>Password authentication</h2></div></div></div><p>Password authentication <a id="id130" class="indexterm"/>is, by default, delegated<a id="id131" class="indexterm"/> from Seraph to the user management system. If you use a <strong>Single sign-on</strong> (<strong>SSO</strong>) system<a id="id132" class="indexterm"/> this might not be necessary. The authenticator gets<a id="id133" class="indexterm"/> all the necessary credentials from your SSO provider.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec21"/>Seraph</h2></div></div></div><p>Seraph<a id="id134" class="indexterm"/> is an <a id="id135" class="indexterm"/>open source framework developed by Atlassian and almost all authentication in Confluence is done using this framework. The goal of Seraph is to provide a simple, extensible authentication system that can be used on any application server.</p><p>Seraph is implemented as a filter. Filters dynamically intercept every authentication request and response to your application and use and transforms the information in the request or response. The purpose of Seraph is to associate the request with a particular user (or no user if the request is anonymous). Seraph supports HTTP Basic Authentication and form-based authentication, and can look up credentials already stored in the user's session.</p><p>Seraph itself isn't used for user management. It only checks the credentials of the incoming requests and delegates any user management functions, including finding the users and checking a user's password.</p><p>If you want to integrate Confluence with your own SSO infrastructure, you can write your own Seraph authenticator. See <a class="ulink" href="http://docs.atlassian.com/atlassian-seraph">http://docs.atlassian.com/atlassian-seraph</a> for more <a id="id136" class="indexterm"/>information on Seraph.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Adding users</h1></div></div></div><p>There are a <a id="id137" class="indexterm"/>couple of options available for adding users to your <a id="id138" class="indexterm"/>Confluence installation. The options do not exclude each other so it's possible to use them all, depending on your installation and how open your Confluence should be to the outside world.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec22"/>Manually adding users</h2></div></div></div><p>As you are<a id="id139" class="indexterm"/> just getting started with Confluence, adding users manually is probably the way you want to go. Adding users is an option only available to Confluence administrators or system administrators.</p><p>To add a user, navigate to the Administration Console in Confluence (<strong>Administration</strong> | <strong>Confluence Admin</strong>) and select <strong>users</strong> from the left menu. As shown in the following screenshot, click on the <strong>Add Users</strong> tab:</p><div><img src="img/9526_02_01.jpg" alt="Manually adding users"/></div><p>While filling <a id="id140" class="indexterm"/>out the form there are a few things you have to keep in mind:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The username must be lowercase and unique to Confluence. If your company has a username policy, it's best to use this in Confluence too. If there is no username policy, I like to use <code class="literal">firstname.lastname</code> as a standard, that is, <code class="literal">arthur.dent</code> or <code class="literal">ford.prefect</code>.</li><li class="listitem" style="list-style-type: disc">You can choose to send an e-mail to the user you have just created by selecting the corresponding checkbox. In this case, the password fields are ignored as the user will receive a link to set up their own password. If you choose to not send an e-mail, the password fields are required. Such an e-mail will look something like the following figure:<div><img src="img/9526_02_02.jpg" alt="Manually adding users"/></div></li><li class="listitem" style="list-style-type: disc">After creating a user, Confluence will redirect you to the user details screen where we<a id="id141" class="indexterm"/> can change some of the user details. This will be discussed further on.</li></ul></div><p>In the same way you can add more users.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec23"/>Open registration</h2></div></div></div><p>If your Confluence is a public<a id="id142" class="indexterm"/> installation or running on a local network, an open registration<a id="id143" class="indexterm"/> is available. The open registration allows all your users to register themselves with Confluence as shown in the following screenshot:</p><div><img src="img/9526_02_03.jpg" alt="Open registration"/></div><p>Your users can enter their own name, e-mail address, username, and password, but be aware, when users are allowed<a id="id144" class="indexterm"/> to register themselves, they can choose their own username, which may not comply with your company policy.</p><p>Users are directly added to the Confluence-users group and will get the permissions associated with that group.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec24"/>Inviting users</h2></div></div></div><p>Instead of adding <a id="id145" class="indexterm"/>all your users manually, it is also possible to send them a signup URL. This option is available in both public and private Confluence installations. When your users visit the URL in a browser, the Confluence signup screen will appear.</p><p>You can send invites from the Administration Console using the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Users</strong> in the left-hand menu.</li><li class="listitem">Click on the <strong>Invite Users</strong> tab. The following screen will be displayed:<div><img src="img/9526_02_04.jpg" alt="Inviting users"/></div></li></ol></div><p>Add the e-mail addresses of the users you want to invite and, if needed, include a custom message for<a id="id146" class="indexterm"/> them to read. They will receive an e-mail with the message and an invite URL.</p><p>The invite URL has a security token as an argument. With this token, your users will be able to sign up themselves if your Confluence instance is set to be accessible privately. The security token can be reset on the <strong>Invite Users</strong> page; resetting it will make all the previously sent invites invalid, and they will be obsolete.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Managing groups</h1></div></div></div><p>Groups <a id="id147" class="indexterm"/>are collections of users. A group can be used to <a id="id148" class="indexterm"/>successfully manage a large number of users. Administrators are allowed to create groups in Confluence and add users to these groups. Permissions are then assigned to groups instead of users to allow easier management.</p><p>There are two default groups already available in Confluence, and these are special groups:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>confluence-administrators</strong>: This<a id="id149" class="indexterm"/> group represents the "super users". The members of this group can access the Administration Console and perform side-wide administrative actions, such as installing plugins or changing the security of your site.</li><li class="listitem" style="list-style-type: disc"><strong>confluence-users</strong>: This<a id="id150" class="indexterm"/> is the default group for all new users. Users in this group are allowed to log in to Confluence and add to your license user-limit.</li></ul></div><div><div><h3 class="title"><a id="tip03"/>Tip</h3><p>
<strong>The Confluence administrator permission and the confluence-administrators group are not related</strong>
</p><p>Although the name suggests they are related, they are not. Granting a user or group the Confluence Administrator permission is not the same as adding the user to the confluence-administrators group. The Confluence Administrator permission gives the user access to only a subset of the administrator functions and not complete access.</p><p>You can find more information on the differences between administrator roles in the <em>Global permissions</em> section in <a class="link" href="ch06.html" title="Chapter 6. Securing Your Content">Chapter 6</a>, <em>Securing Your Content</em>.</p></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec25"/>Creating groups</h2></div></div></div><p>To add a <a id="id151" class="indexterm"/>group to Confluence, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Groups</strong> in the left-hand menu.</li><li class="listitem">Select <strong>Add Group</strong> just below the table with the already existing groups.</li><li class="listitem">Type the new group name.</li><li class="listitem">Click on the <strong>Save</strong> button.</li></ol></div><p>To prepare your Confluence installation for the future within your company, it is good practice to think of a naming convention before starting to create groups. A naming convention that worked for me looks like <code class="literal">&lt;product&gt;-&lt;space&gt;-&lt;role&gt;</code>. So all space administrators in Confluence, working on the project <code class="literal">MyExample</code> would be in the group <code class="literal">confluence-myexample-administrators</code> and all the users in <code class="literal">confluence-myexample-users</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec26"/>Adding users to groups</h2></div></div></div><p>To assign <a id="id152" class="indexterm"/>users to groups, in order to determine their permissions, you have to be a Confluence administrator. There are two ways of editing group memberships in Confluence. They are as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">From the user details screen</li><li class="listitem" style="list-style-type: disc">From the group management screen</li></ul></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec12"/>Editing group membership from the user details screen</h3></div></div></div><p>One way of<a id="id153" class="indexterm"/> editing the group membership of a particular user is via the user details screen. This method only allows you to update one user at the time.</p><p>To edit a user's group membership, you have to go to the user details screen for that user. We will dive into finding users in the next section, for now we use the Administration Console.</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Users</strong> in the left-hand menu.</li><li class="listitem">Select <strong>Show all users</strong> to get an overview with all the users in Confluence.</li><li class="listitem">Click on the link on the username you want to edit.</li><li class="listitem">Select the <strong>Edit Groups</strong> link below the user's details, then the following screen will be displayed:<div><img src="img/9526_02_05.jpg" alt="Editing group membership from the user details screen"/></div></li><li class="listitem">Check the boxes in front of the groups to which you want to add the user, or uncheck the box for any group  to remove the user from it.</li><li class="listitem">Submit the changes by clicking on the <strong>Save</strong> button.</li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec13"/>Editing group membership via the group management screen</h3></div></div></div><p>If you want to <a id="id154" class="indexterm"/>add multiple users to the same group at the same time, it is possible to use the group management screen, which allows you to do this.</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Groups</strong> in the left-hand menu.</li><li class="listitem">Select the group to which you want to add users.</li><li class="listitem">The <strong>Group Members</strong> screen appears, displaying all the users who are members of this group. Click on the link <strong>Add Members</strong>.</li><li class="listitem">In the <strong>Add Members</strong> textbox, type in the usernames of the people you want to add to the group. You can also search for users by clicking on the search icon next to the box as shown in the following screenshot:<div><img src="img/9526_02_07.jpg" alt="Editing group membership via the group management screen"/></div></li><li class="listitem">When you have added all the users you want to add to this group, click on the <strong>Add</strong> button to save your changes.</li></ol></div><p>You can delete users from a group on the <strong>Group Members</strong> screen. By clicking on the icon on the same row as the user, the membership of that user will be removed.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Administrating users</h1></div></div></div><p>We are now <a id="id155" class="indexterm"/>able to add users and groups to Confluence, <a id="id156" class="indexterm"/>and administer group memberships. There will be a point where we have to look up a user, change his or her details, or send a new password.</p><div><div><div><div><h2 class="title"><a id="ch02lvl2sec27"/>Searching for users</h2></div></div></div><p>When we<a id="id157" class="indexterm"/> want to add users to certain groups, spaces, or do anything that has to do with permissions, we have the option to search for users. Whenever you are able to search for users within Confluence, a magnifying glass icon will be shown. When we click on this icon, a new pop up will be shown, giving us the following two options to search for users:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Simple search</li><li class="listitem" style="list-style-type: disc">Membership search</li></ul></div><div><div><h3 class="title"><a id="note03"/>Note</h3><p>Note that the search is not case sensitive; it doesn't make a difference if you type either upper- or lowercase text. Wildcards are supported but there is no need to use them, the search will return the same results.</p></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec14"/>Using the simple user search</h3></div></div></div><p>To search via <a id="id158" class="indexterm"/>the simple user search:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>User</strong> tab on the <strong>User Search</strong> screen, as shown in the following screenshot.</li><li class="listitem">Type some information about the user into the search box. You can use any part of the user's username, full name, or e-mail address.</li><li class="listitem">Click on <strong>Search</strong>.<p>Confluence will return a list of matching users. You can check the boxes in front of the usernames to select the users you where looking for.</p><div><img src="img/9526_02_09.jpg" alt="Using the simple user search"/></div></li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec15"/>Using the membership search</h3></div></div></div><p>It is also possible <a id="id159" class="indexterm"/>to search for users who are members of a certain group with the membership search.</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>Membership</strong> tab on the <strong>User Search</strong> screen.</li><li class="listitem">Type all or a part of the group name in the search box.</li><li class="listitem">Click on <strong>Search</strong>.</li></ol></div><p>Confluence will return a list of users who are member of the groups matching your search. In the following example, I searched for "confluence". The results show all users belonging to the <strong>confluence-administrators</strong> group and all users belonging to the <strong>confluence-users</strong> group:</p><div><img src="img/9526_02_10.jpg" alt="Using the membership search"/></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec28"/>Editing user details</h2></div></div></div><p>To change the <a id="id160" class="indexterm"/>details of a user, you need Confluence Administrator permissions. The user details include the user's name, password, e-mail address, group membership, and the ability to access Confluence. Users are allowed to change their own details, but not their group memberships.</p><p>Updating a user's details <a id="id161" class="indexterm"/>can be done via the user details screen as displayed in the upcoming screenshot. There are two ways to navigate to this screen.</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The first is via the Administration Console, using the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Users</strong> in the left-hand menu.</li><li class="listitem">Search for the user, or use the <strong>Show all users</strong> link.</li><li class="listitem">Click on the link of the user you want to edit.</li></ol></div></li><li class="listitem" style="list-style-type: disc">The second way is via the user profile, using the following steps:<div><ol class="orderedlist arabic"><li class="listitem">If you are not in the Administration Console, you can quickly go to the user details screen via the user's profile.</li><li class="listitem">Click on a user's full name in Confluence to go to that user's profile page. A full name can be, for example, be found on any page in Confluence as displayed in the following screenshot:</li></ol></div><div><img src="img/9526_02_15.jpg" alt="Editing user details"/></div></li><li class="listitem" style="list-style-type: disc">Click on the <strong>Administrator User</strong> link on the left.<p>You should now see the user details screen and the links allowing you to edit the details.</p><div><img src="img/9526_02_06.jpg" alt="Editing user details"/></div></li></ul></div><p>The following is the <a id="id162" class="indexterm"/>explanation on the different links present on the user details page. Note that not all available options are displayed on the previous screenshot.</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Link</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>View Profile</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>View the user's profile.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Edit Groups</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Add the user to or remove the user from a group.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Edit Details</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Change the user details such as the user's name, e-mail address, contact details, and department information.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Set Password</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Change the user's password.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Remove</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Remove the user from Confluence, which is only possible when the user didn't add or edit any content on the site.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Disable</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Disable access to Confluence for this user. You can use this option when a user has already added or changed any content on the site. Disabling a user will also remove the user from your license count.</p>
</td></tr></tbody></table></div><div><div><h3 class="title"><a id="note04"/>Note</h3><p>Changing a username in Confluence is currently not supported via the interface and can only be done via the database. If you need to change a username, read <a class="ulink" href="https://confluence.atlassian.com/x/nXUC">https://confluence.atlassian.com/x/nXUC</a> for more information.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec29"/>Resetting the password</h2></div></div></div><p>At some <a id="id163" class="indexterm"/>point in time, a user might lose their password and send you an e-mail with the question if you could reset it. Fortunately, Confluence has a <strong>Forgot your password?</strong> link on its login screen, which users can use themselves:</p><div><img src="img/9526_02_11.jpg" alt="Resetting the password"/></div><p>The <strong>Forgot you password?</strong> link allows a user to ask for a password reset. The user needs to fill in his/her username and will receive an e-mail with a reset link. The user's password isn't changed unless the link is used and a new password is saved.</p><p>If you don't have an e-mail server set up or an external user directory configured, this option is not available. In case of an external user directory, you will need to redirect your users to that system password recovery option.</p><p>If you haven't set up an e-mail server, you will have to reset the password manually via the <strong>Set Password</strong> option on the user's detail screen, as mentioned before. This password reset has to be done by an administrator.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Public signup</h1></div></div></div><p>It is possible<a id="id164" class="indexterm"/> to enable a public signup for your <a id="id165" class="indexterm"/>Confluence site. People can then add their own usernames and log in to the site immediately.</p><p>If you want to restrict your site to a particular set of users, you may want to restrict the e-mail domains or disable public signup completely.</p><p>To enable or disable public signup:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Users</strong> in the left-hand menu.</li><li class="listitem">Select the <strong>User Signup Options</strong> tab.<div><img src="img/9526_02_12.jpg" alt="Public signup"/></div></li></ol></div><p>The preceding screenshot shows us a couple of options.</p><p>We can enable or disable the public signup with a single checkbox. Enabling public signup also gives us the possibility to restrict the users' e-mail addresses to one or more domains.</p><div><div><h3 class="title"><a id="note05"/>Note</h3><p>You need to set up an e-mail server before you can configure domain-restricted signup. Confluence will send an e-mail to the person signing up, asking to click on a link to verify their e-mail address.</p></div></div><p>A very useful feature is to notify administrators by e-mail when an account is created. This way you <a id="id166" class="indexterm"/>can still detect if someone is signing up who shouldn't or grant extra permissions to users who need them.</p></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec18"/>External user directories</h1></div></div></div><p>So far we<a id="id167" class="indexterm"/> have learned how to get users into our <a id="id168" class="indexterm"/>Confluence installation. This is very useful but what if your company has its own LDAP server or is already using some other Atlassian products, such as JIRA or Crowd?</p><p>Within Confluence we can configure one or more external user directories. A <strong>user directory</strong>
<a id="id169" class="indexterm"/> is a place where you store information about users and groups, including some other user information. This information can be the person's full name, e-mail address, or department. When an external user directory is configured, Confluence will also use the directory to authenticate a user.</p><p>Confluence has support for the following external directories:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Microsoft Active Directory</li><li class="listitem" style="list-style-type: disc">Various LDAP directory servers including OpenLDAP, Apache Directory Server, and Novell eDirectory</li><li class="listitem" style="list-style-type: disc">Atlassian Crowd</li><li class="listitem" style="list-style-type: disc">Atlassian JIRA</li></ul></div><p>You can add as many external directories as you need. Note that you can change the order of the directories, determining which directory will search first.</p><div><img src="img/9526_02_13.jpg" alt="External user directories"/></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec30"/>The effect of directory order</h2></div></div></div><p>When you have <a id="id170" class="indexterm"/>more than one directory configured, the order of those directories is important and affects a couple of things within Confluence.</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Login</strong>: The directory order is significant during the authentication of the user, especially if the user exists in multiple directories. During login, the application will search the directories in the specified order, and will use the password of the <em>first occurrence of the user</em> to validate the login.</li><li class="listitem" style="list-style-type: disc"><strong>Permissions</strong>: In the same way as the login mechanism, Confluence will look for group memberships only in the first directory where the username appears, based on the directory order.<p>For example:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You have two directories: the employees directory and the customers directory</li><li class="listitem" style="list-style-type: disc">The employee directory is first in the directory order</li><li class="listitem" style="list-style-type: disc">A username <code class="literal">arthur.dent</code> exists in both directories</li><li class="listitem" style="list-style-type: disc">The user <code class="literal">arthur.dent</code> is a member of group G1 in the employees directory and group G2 in the customers directory</li><li class="listitem" style="list-style-type: disc">Based on directory order, the user <code class="literal">arthur.dent</code> only has permissions based on group G1, not G2</li></ul></div></li><li class="listitem" style="list-style-type: disc"><strong>Updating users and groups</strong>: If you update a user or group via Confluence's administration <a id="id171" class="indexterm"/>screen, the update will only be made in the first directory where Confluence has write permissions.<p>For example:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You have two user directories: a read/write LDAP directory and the internal directory</li><li class="listitem" style="list-style-type: disc">The LDAP directory is the first directory</li><li class="listitem" style="list-style-type: disc">A username <code class="literal">arthur.dent</code> exists in both directories</li><li class="listitem" style="list-style-type: disc">You update the e-mail address of the user <code class="literal">arthur.dent</code> via Confluence's Administration Console</li><li class="listitem" style="list-style-type: disc">The e-mail address will only be updated in the LDAP directory, not in the internal directory</li></ul></div></li></ul></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec31"/>Limitations when using external directories</h2></div></div></div><p>When using <a id="id172" class="indexterm"/>external directories, there are a couple of limitations you should be aware of.</p><div><div><div><div><h3 class="title"><a id="ch02lvl3sec16"/>Build-in user management</h3></div></div></div><p>The first limitation <a id="id173" class="indexterm"/>you should be aware of depends on the read/write configuration of your external directory. If Confluence can't write to your external directory, or you don't want it to, you have to disable the built-in user management.</p><p>To disable management of users and groups within Confluence:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>Security Configuration</strong> in the left-hand menu.</li><li class="listitem">Click on <strong>Edit</strong>.</li><li class="listitem">Check the <strong>External user management</strong> checkbox.</li><li class="listitem">Click on <strong>Save</strong>.</li></ol></div><p>If the built-in user management is disabled, users won't be able to:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Signup</li><li class="listitem" style="list-style-type: disc">Reset their password</li><li class="listitem" style="list-style-type: disc">Update their profile</li></ul></div><p>Also, administrators won't be able to:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add new users and groups</li><li class="listitem" style="list-style-type: disc">Assign users to groups from Confluence</li></ul></div><p>All these features <a id="id174" class="indexterm"/>are now delegated to the administration of your external user management and they have to be performed there.</p></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec17"/>Editing directories</h3></div></div></div><p>It's not <a id="id175" class="indexterm"/>possible to edit, disable, or remove the directory your user belongs to. This precaution is to prevent administrators from locking themselves out of the Confluence, by changing the directory configuration in a way that prevents them from logging in or removing their administration permissions.</p><p>In some cases, reordering the directories will change the directory that you're currently using, if your user exists in both directories. This behavior can be used to make changes to existing directories.</p><div><div><h3 class="title"><a id="note06"/>Note</h3><p>It's recommended to keep an administrator account in your internal directory (which can't be deleted) and use that internal user to make changes to the settings of other external directories.</p></div></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec32"/>Connecting to an LDAP directory</h2></div></div></div><p>Connecting to<a id="id176" class="indexterm"/> an LDAP directory server is useful if your users and groups are stored in a corporate directory. When configuring the <a id="id177" class="indexterm"/>LDAP directory in Confluence, <a id="id178" class="indexterm"/>you can choose to make it Read Only, Read Only with Local Groups, or Read/Write. In the last case, any changes you make to your users and groups in Confluence will reflect in your LDAP directory.</p><div><div><div><div><h3 class="title"><a id="ch02lvl3sec18"/>Connecting to LDAP</h3></div></div></div><p>To connect Confluence to an LDAP directory, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>User Directories</strong> in the left-hand menu.</li><li class="listitem">Click on <strong>Add Directory</strong>. Select one of these types and click on <strong>Next</strong>:<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Microsoft Active Directory</strong>: This option provides a quick way to add an AD directory, as it is one of the popular choices.</li><li class="listitem" style="list-style-type: disc"><strong>LDAP</strong>: You will be able to choose a more specific LDAP directory type on the next screen.</li></ul></div></li><li class="listitem">Enter the <a id="id179" class="indexterm"/>values for the required settings as described in the following table.</li><li class="listitem">Save the directory settings.</li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec19"/>Server settings</h3></div></div></div><p>The following are<a id="id180" class="indexterm"/> the different settings required for setting up <a id="id181" class="indexterm"/>an external user directory:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Name</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Enter a descriptive name that will help you identify the LDAP server. For example, <code class="literal">MyCompany Employee Directory</code> or <code class="literal">MyCompany Customer Directory</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Directory Type</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Select the type of LDAP server you will connect to. The value you select here will determine the default values for many options on the screen.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Hostname</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The hostname of your directory server.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Port</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The port on which your directory server is listening. For example, <strong>389</strong> (default LDAP port), <strong>10398</strong>, or <strong>636</strong> (LDAP over SSL).</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Use SSL</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Check this checkbox if the connection to your LDAP server is an SSL connection.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Username</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The distinguished name of the user that the application will use when connecting to the directory server. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">cn=administrator,cn=users,dc=ad,dc=mycompany,dc=com</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cn=user,dc=domain,dc=name</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">user@domain.name</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Password</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The password of the user specified.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec20"/>LDAP schema settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Base DN</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <a id="id182" class="indexterm"/>root <strong>distinguished name</strong> (<strong>DN</strong>) to use<a id="id183" class="indexterm"/> when running queries against the directory server. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">o=myCompany,c=com</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">cn=users,dc=ad,dc=myCompany,dc=com</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Additional User DN</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This value is <a id="id184" class="indexterm"/>used in addition to the base DN to limit the scope when searching and loading users. If no value is supplied, search will start from the base DN:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">ou=Users</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Additional Group DN</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This value is used in addition to the base DN when searching and loading groups.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec21"/>LDAP permissions</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Read Only</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Users,<a id="id185" class="indexterm"/> groups, and memberships<a id="id186" class="indexterm"/> are retrieved from your LDAP server and cannot be modified in Confluence.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Read Only, with Local Groups</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Users, groups, and memberships are retrieved from your LDAP server and cannot be modified in Confluence. However, users from LDAP can be added to groups maintained in Confluence's internal directory.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Read/Write</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Modifying users, groups, and memberships in Confluence will cause the changes to be applied directly to your LDAP server. Your configured LDAP user will need to have modification permissions on your LDAP server.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Default Group Memberships</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This field only appears if you select the <strong>Read Only, with Local Groups</strong> permission. If you would like to automatically add users to a group or groups, enter those names here. The first time a user logs in, their group memberships will be checked and added accordingly. On subsequent logins, memberships will not be added automatically, allowing deleting a user from one of the default groups.</p>
</td></tr></tbody></table></div><div><div><h3 class="title"><a id="note07"/>Note</h3><p>The <strong>Read Only, with Local Groups</strong> option is a very powerful configuration and is in many cases the best setup. Users and groups can still be managed in your company's centralized user management system. But you as an administrator still have the option to create new groups and change memberships of those groups, giving you the control you need in Confluence without cluttering your LDAP server. ines</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec22"/>Advanced settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Enable Nested Groups</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Some<a id="id187" class="indexterm"/> directory services<a id="id188" class="indexterm"/> allow you to define a group as a member of another group, which is called <strong>Nested Groups</strong>. If you are using groups to manage permissions, check this box to enable the use of nested groups.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Use Paged results</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Useful when querying large user directories, this option returns the results in specified pages instead of all the results at once.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Follow Referrals</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Choose whether to allow the directory server to redirect requests to other servers. It is generally needed for Active Directory servers configured without proper DNS, to prevent a <code class="literal">javax.naming.PartialResultException: Unprocessed Continuation Reference(s)</code> error.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Naive DN Matching</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>If your directory server will always return a consistent string representation of a DN, you can enable naive DN matching. Using naive DN matching will result in a significant performance improvement, so it's recommended to use it wherever possible.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Enable Incremental Synchronization</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Enabling incremental synchronization causes only changes since the last synchronization to be queried when synchronizing a directory.</p>
<p>Be aware that when using this option, the configured user account must have read access to:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">uSNChanged</code> attribute of all users and groups that need to be synchronized</li><li class="listitem" style="list-style-type: disc">The objects and attributes in the Active Directory deleted objects container</li></ul></div>
<p>If these conditions are not met, it's possible that changes in your LDAP may not be synchronized correctly to Confluence.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Synchronization Interval (minutes)</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Specify the interval in minutes between directory updates. The default value is 60 minutes.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Read Timeout (seconds)</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This is the time to wait for a response to be received. If there is no response within the specified time period, the read attempt will be stopped. A value of 0 means there is no limit. The default value is 120 seconds.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Search Timeout (seconds)</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This is the time to wait for a response from a search operation. A value of 0 means there is no limit. The default value is 60 seconds.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Connection Timeout (seconds)</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This is the time to wait when opening new server connections, or getting a connection from the connection pool. A value of 0 means wait indefinitely for a pooled connection to become available, or to wait for the default TCP timeout to take effect when creating a new connection.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec23"/>User schema settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>User Object Class</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id189" class="indexterm"/> is the name of the<a id="id190" class="indexterm"/> class used for the LDAP user object. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">inetorgperson</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">user</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Object Filter</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The filter to use when searching for user objects. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">(objectclass=inetorgperson)</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">(&amp;(objectCategory=Person)(sAMAccountName=*))</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Name Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the username. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">cn</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">sAMAccountName</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Name RDN Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <strong>relative distinguished name</strong> (<strong>RDN</strong>) to use when loading the username. The RDN is the portion of your DN that is not related to the directory tree structure. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">cn</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User First Name Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the user's first name. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">givenName</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Last Name Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the user's last name. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">sn</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Display Name Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the user's full name. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">displayName</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Email Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the user's e-mail address. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">mail</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Password Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <a id="id191" class="indexterm"/>attribute field to use when loading the user's password. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">userPassword</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Password Encryption</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Choose the encryption algorithm used for passwords on your directory. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">SHA</li><li class="listitem" style="list-style-type: disc">MD5</li><li class="listitem" style="list-style-type: disc">PLAINTEXT</li></ul></div>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec24"/>Group schema settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Group Object Class</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a id="id192" class="indexterm"/> is the name<a id="id193" class="indexterm"/> of the class used for the LDAP group object. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">groupOfUniqueNames</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">group</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Group Object Filter</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The filter to use when searching group objects. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">(objectclass=groupOfUniqueNames)</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">(objectCategory=group)</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Group Name Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the group's name. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">cn</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Group Description Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading the group's description. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">description</code></li></ul></div>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec25"/>Membership schema settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Setting</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Group members Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <a id="id194" class="indexterm"/>attribute <a id="id195" class="indexterm"/>field to use when loading the group's members. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">uniqueMember</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">member</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>User Membership Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The attribute field to use when loading a user's group memberships. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">memberOf</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Use the User Membership Attribute</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Check this checkbox if your LDAP server supports the group membership attribute on the user.</p>
<p>If the checkbox is checked, Confluence will use the group membership attribute on the user when retrieving the list of groups to which a user belongs. This will result in a more efficient retrieval.</p>
<p>If the checkbox is not checked, Confluence will use the member attribute on the group for the search.</p>
<p>Note that, if you use a nested group, this option is ignored and thus Confluence will use the members attribute on the group.</p>
</td></tr></tbody></table></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec33"/>Connecting to a Crowd directory</h2></div></div></div><p>Atlassian Crowd<a id="id196" class="indexterm"/> is an application security<a id="id197" class="indexterm"/> framework that can handle the authentication and authorization for your web-based applications, which is not just restricted to <a id="id198" class="indexterm"/>Confluence or JIRA. With Crowd, it's possible to integrate multiple user directories into one directory and add support for single sign-on and centralized identity management.</p><p>Crowd is a very useful option if you have multiple web-based applications and multiple user directories you want to configure, especially if you want to add SSO to those applications as well.</p><div><div><div><div><h3 class="title"><a id="ch02lvl3sec26"/>Connecting to Crowd</h3></div></div></div><p>Use the following steps to connect to Crowd:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to your Crowd Administration Console and define Confluence as an application. <a id="id199" class="indexterm"/>More information about this step can be found at <a class="ulink" href="https://confluence.atlassian.com/x/rQcD">https://confluence.atlassian.com/x/rQcD</a>.</li><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>User Directories</strong> in the left-hand menu.</li><li class="listitem">Click on <strong>Add Directory</strong> and select the <strong>Atlassian Crowd</strong> option.</li><li class="listitem">Enter the value for the settings (explained in the following table).</li><li class="listitem">Save the directory settings.</li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec27"/>Server settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Settings</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Name</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>A<a id="id200" class="indexterm"/> descriptive name <a id="id201" class="indexterm"/>of your Crowd server. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Crowd Server</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">MyCompany Crowd</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Server URL</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The web address of your Crowd console server. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">http://www.mycompany.com:8095/crowd</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">https://crowd.mycompany.com/</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Application Name</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The name to authenticate Confluence with Crowd. This is the application name you created when setting up Crowd for Confluence.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Application Password</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The password for the configured application name. This must be the same as the password you have registered in Crowd for Confluence.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec28"/>Crowd permissions</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Settings</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Read Only</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <a id="id202" class="indexterm"/>user, group, and membership<a id="id203" class="indexterm"/> information in this directory can only be modified via Crowd. It's not possible to change any information via the Confluence Administration Console.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Read/Write</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>If you modify a user, group, or membership via Confluence administration screens, these changes will be applied directly to Crowd. Please note, that Confluence needs modification permissions in Crowd.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec29"/>Advanced settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Settings</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Enable Nested Groups</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Before<a id="id204" class="indexterm"/> enabling <a id="id205" class="indexterm"/>nested groups, be sure that the directories in Crowd support this feature. When nested groups are enabled, you can define a group as a member of another group, allowing inheritance of permissions from its parent group.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Enable Incremental Synchronization</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>If this is checked, only changes since the last synchronization will be retrieved when synchronizing a directory.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Synchronization Interval (minutes)</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Specify the interval in minutes between directory updates. The default value is 60 minutes.</p>
</td></tr></tbody></table></div></div></div><div><div><div><div><h2 class="title"><a id="ch02lvl2sec34"/>Connecting to JIRA for user management</h2></div></div></div><p>If you are also<a id="id206" class="indexterm"/> running JIRA within your organization, it is <a id="id207" class="indexterm"/>possible to use JIRA as user management for Confluence. The advantage of this approach is that your user management system is not in multiple locations, but just in JIRA.</p><div><div><h3 class="title"><a id="note08"/>Note</h3><p>Note that if you have more then 500 users, or over five applications connecting to JIRA, this integration is not recommended. LDAP or Crowd would be a better and a more stable option in such a case.</p></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec30"/>Connecting to JIRA</h3></div></div></div><p>The method of connecting Confluence to JIRA changed in JIRA 4.3 and later. I will assume you will be using JIRA 4.3 or later for this exercise; if you are running an older version of JIRA, you will find more information online at <a class="ulink" href="https://confluence.atlassian.com/x/hg6zDQ">https://confluence.atlassian.com/x/hg6zDQ</a>.</p><p>To connect Confluence<a id="id208" class="indexterm"/> to JIRA 4.3 or later, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Go to your JIRA administration screen and define the Confluence application to JIRA, using the following steps:<div><ol class="orderedlist arabic"><li class="listitem">For JIRA 4.3.x, select <strong>Other Applications</strong> from the <strong>Users, Groups &amp; Roles</strong> section of the <strong>Administration</strong> menu.</li><li class="listitem">For JIRA 4.4 or later, select <strong>Users</strong> | <strong>JIRA User Server</strong> in the administration mode.</li><li class="listitem">Click on <strong>Add Application</strong>.</li><li class="listitem">Enter the application name and password that Confluence will use when accessing JIRA.</li><li class="listitem">Enter the IP address or addresses of your Confluence server, for example, <code class="literal">192.168.10.42</code>.</li><li class="listitem">Save the new application.</li></ol></div></li><li class="listitem">Set up<a id="id209" class="indexterm"/> Confluence to use a JIRA user directory, using the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Browse to the Administration Console (<strong>Administration</strong> | <strong>Confluence Admin</strong>).</li><li class="listitem">Choose <strong>User Directories</strong> in the left-hand menu.</li><li class="listitem">Click on <strong>Add Directory</strong> and select the <strong>Atlassian JIRA</strong> option.</li><li class="listitem">Enter the value for the settings (explained in the following table).</li><li class="listitem">Save the directory settings.</li></ol></div></li><li class="listitem">Make sure the Confluence groups are available in JIRA by performing the following steps:<div><ol class="orderedlist arabic"><li class="listitem">Add the <strong>confluence-users</strong> and <strong>confluence-administrators</strong> groups in JIRA.</li><li class="listitem">Add your own username as a member of both groups.</li></ol></div></li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec31"/>Server settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Settings</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="bottom">
<p><strong>Name</strong></p>
</td><td style="text-align: left" valign="bottom">
<p>A descriptive name of your JIRA server. For example:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">JIRA Server</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">MyCompany JIRA</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="bottom">
<p><strong>Server URL</strong></p>
</td><td style="text-align: left" valign="bottom">
<p>The web address of your JIRA server. Examples:</p>
<div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">http://www.mycompany.com:8080/crowd</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">https://jira.mycompany.com/</code></li></ul></div>
</td></tr><tr><td style="text-align: left" valign="bottom">
<p><strong>Application Name</strong></p>
</td><td style="text-align: left" valign="bottom">
<p>The name to authenticate Confluence with JIRA. This is the application name you created when setting up JIRA for Confluence.</p>
</td></tr><tr><td style="text-align: left" valign="bottom">
<p><strong>Application Password</strong></p>
</td><td style="text-align: left" valign="bottom">
<p>The password for the configured application name. This must be the same as the password you have registered in JIRA for Confluence.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec32"/>JIRA server permissions</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Settings</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Read Only</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <a id="id210" class="indexterm"/>user, group, and membership<a id="id211" class="indexterm"/> information in this directory can only be modified via JIRA. It's not possible to change any information via the Confluence Administration Console.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Read/Write</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>If you modify a user, group, or membership via Confluence administration screens, these changes will be applied directly to JIRA.</p>
</td></tr></tbody></table></div></div><div><div><div><div><h3 class="title"><a id="ch02lvl3sec33"/>Advanced settings</h3></div></div></div><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Settings</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Enable Nested Groups</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Before <a id="id212" class="indexterm"/>enabling nested groups,<a id="id213" class="indexterm"/> be sure that nested groups are enabled on the JIRA server. When nested groups are enabled, you can define a group as a member of another group, allowing inheritance of permissions from its parent group.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Enable Incremental Synchronization</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>If this is checked, only changes since the last synchronization will be retrieved when synchronizing a directory.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Synchronization Interval (minutes)</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>Specify the interval in minutes between directory updates. The default value is 60 minutes.</p>
</td></tr></tbody></table></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Summary</h1></div></div></div><p>In this chapter we have learned how we can add users to our Confluence installation. There are many options available, such as manually adding users, inviting users to sign up themselves, or having an open registration for users.</p><p>We have seen that if your company already has a user management system in place, Confluence can easily make use of that, either fully delegating authentication and authorization, or just partially.</p><p>Now that we have a running Confluence installation and have invited some users to use it, we are off to one of the most important parts of Confluence, creating content. In the next chapter we will go into how we can create engaging content with the Confluence editor.</p></div></body></html>