<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Define Business Rules Using Business Rule Designer</h1>
                </header>
            
            <article>
                
<p>In the previous chapter, we saw how the new Visual Process Designer can be used to create business process flows using the drag-and-drop capabilities. In this chapter, we will see how the same visual drag-and-drop process designer can be used to create business rules. Business rules were first introduced in Dynamics CRM 2013. Basically, business rules let's define rules such as setting fields to required/not required, show/hide fields, lock/unlock fields, and so on<span>—</span>that is, conditions and actions on our CRM Form/Entity easily through an intuitive interface, for which we had to write either JavaScript or develop plugins earlier. Business rules were enhanced further in a subsequent version of Dynamics CRM. With Dynamics 365, the Business Rules Designer interface has been completely revamped, with capabilities of dragging and dropping components, along with additional features such as Minimap, Snapshot, and so on.</p>
<p>In this chapter, we will be covering the following points:</p>
<ul>
<li>Overview of business rules in Dynamics 365</li>
<li>Understand the different components and how to use them in the new Business Rule Designer</li>
<li>Implement new recommendation actions introduced in Dynamics 365</li>
<li>Other features of the Business Rule Designer</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Evolution of business rules</h1>
                </header>
            
            <article>
                
<p>As mentioned earlier, business rules were first introduced in CRM 2013. It provided a simple declarative interface through which the system customizer, developer, or a power user can easily create validations and business rules without writing a single line of code. The business rule interface consisted of a set of <span class="packt_screen">conditions, </span><span class="packt_screen">actions</span> to be taken when those conditions were met, along with a <span class="packt_screen">description</span> as a convention to understand what the business rule does.</p>
<p>With CRM 2015, many of the limitations of CRM 2013 were addressed. Business rules in CRM 2013 were restricted to run only on the client side. For the server side, writing a plugin or any other custom code was still required. This was addressed in CRM 2015 by adding a new option named <span class="packt_screen">Entity</span> in <span class="packt_screen">Scope</span>. The business rule with a <span class="packt_screen">scope</span> as <span class="packt_screen">Entity</span> will run both on the client side and server side.</p>
<div class="packt_infobox">For the Entity scope, if a rule is triggered from forms either during the creation or updating of a record, the rule will first run on the client side and then again on the server side. Therefore, a rule having an action such as Set Sales Amount to Sales Amount + 10 will result in a rule validation failure as it will a create a cyclical reference.</div>
<p>The second biggest update to business rules in CRM 2015 was the support for <kbd>if...else</kbd> conditions and the possibility of combining multiple expressions in a condition using <kbd>AND</kbd>/<kbd><span><span>OR</span></span></kbd> logic. In CRM 2013, to define a simple rule having an <kbd>else</kbd> condition, we had to write two business rules.</p>
<div class="packt_infobox">In business rules, an expression in a condition can only be combined using either <kbd>AND</kbd> condition or using <kbd>OR</kbd> condition, but not both.</div>
<p>For example, a rule such as in the Contact form, If <span class="packt_screen">Martial Status</span> field has value <span class="packt_screen">Married</span> then make <span class="packt_screen">Spouse/Partner Name</span> field as <span class="packt_screen">Business Required</span>, else set its requirement level as <kbd>none</kbd>. Here, we would have ended up writing two business rules, one for making the <span class="packt_screen">Business Required</span> field and the other for setting its requirement level as <kbd>none</kbd>. With the support of <kbd>if...else</kbd> statements since CRM 2015, we now just need to write a single business rule, shown as follows:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="327" src="assets/68fc3a80-68a9-42ba-bfc5-854209c50df3.png" width="377"/></div>
<p>Another update in CRM 2015 was the addition of the new action named <span class="packt_screen">Set default value</span> for setting the default value of the field.</p>
<p>Different action in CRM 2013. The following screenshot shows different actions that are available in Dynamics 2013:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="149" src="assets/4a1c3994-cb92-409d-adf4-dbcf6000624e.png" width="231"/></div>
<p>Different action in CRM 2015 (with new <span class="packt_screen">Set default value </span>action). The following screenshot shows different actions that are available in Dynamics 2015 include the new <span class="packt_screen">Set Default value</span> action:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="107" src="assets/6cc28a60-8d1f-4fae-9281-25a6d30fc20b.png" width="215"/></div>
<p>CRM 2015, along with the action of setting a default value for a field, also brought the feature of clearing the value of a field through business rules.</p>
<p>The next release, CRM 2016, added the ability to invoke a business rule based on business process flow properties. Shown as follows, we have defined both the Business Process rule and active stage rule in the conditions; that is, if <span class="packt_screen">Business Process</span> equals <span class="packt_screen">Opportunity Sales Process</span> and <span class="packt_screen">Active Stage</span> is <span class="packt_screen">Propose</span>. The following screenshot shows the usage of business process flow while defining business rule:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="201" src="assets/c390dc6f-7507-408b-bf14-1f762a35e788.png" width="514"/></div>
<p>Similar to the active stage rule, we could define a condition based on the selected stage rule in CRM 2016.</p>
<div class="packt_infobox">Creating business rules based on business process flows is detailed at <a href="https://msdn.microsoft.com/en-us/library/mt639372.aspx">https://msdn.microsoft.com/en-us/library/mt639372.aspx</a>.</div>
<p>With the December 2016 update for Dynamics 365, we now have a newly updated editor for defining business rules, a new action called Recommendation, along with some new features.</p>
<p>In this section, we covered the journey of business rules from CRM 2013 to CRM 2016. Now, let us have a look at the new Business Rule Designer and all the components inside Dynamics 365 in detail.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting to know the new Business Rule Designer</h1>
                </header>
            
            <article>
                
<p>To have a quick look at the new designer, open any entity for customization and select <span class="packt_screen">Business </span><span class="packt_screen">Rules</span> on the left navigation and click on the <span class="packt_screen">New</span> button. This will open up the new Business Rule Designer introduced in Dynamics 365 with a completely new look and feel. The new designer allows us to add a component such as conditions and actions using the drag-and-drop feature:</p>
<div class="CDPAlignCenter CDPAlign"><img height="361" src="assets/ff7aeff4-c381-425d-b43f-48bcd6a54462.png" width="563"/></div>
<p>The key point to remember here is that the business rules are still the same fundamentally; it is only the editor for it that has been updated. We still have the same options available for <span class="packt_screen">Scope</span> that we had; that is, <span class="packt_screen">Entity</span>, <span class="packt_screen">All Forms,</span> and the individual forms for that entity:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="142" src="assets/0bdbcb83-600a-47e9-849c-eca7c20e64f0.png" width="204"/></div>
<p>Let us pause and do a quick recap of the Scope:</p>
<table class="table">
<tbody>
<tr>
<td>
<p><strong>Scope type</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><span class="packt_screen">Entity</span></p>
</td>
<td>
<p>The business rule runs on all forms of the <span class="packt_screen">Entity</span> including <span class="packt_screen">Quick Create</span> and server-side.</p>
</td>
</tr>
<tr>
<td>
<p><span class="packt_screen">All Forms</span></p>
</td>
<td>
<p>The business rule runs on all forms of the Entity including <span class="packt_screen">Quick Create</span>.</p>
</td>
</tr>
<tr>
<td>
<p><strong>Specific Form (information, account, and so on)</strong></p>
</td>
<td>
<p>The business rule runs only on that specific form of the <span class="packt_screen">Entity</span>.</p>
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>The Business Rule Designer's components are basically grouped into <span class="packt_screen">Flow</span> and <span class="packt_screen">Actions</span>.</p>
<p><span class="packt_screen">Condition</span> components come under <span class="packt_screen">Flow</span> and the various actions that are available are <span class="packt_screen">Recommendation</span>, <span class="packt_screen">Show Error Message</span>, <span class="packt_screen">Set Default Value</span>, <span class="packt_screen">Set Visibility</span>, <span class="packt_screen">Lock/Unlock</span>, <span class="packt_screen">Set Field Value</span>, and <span class="packt_screen">Set Business Required.</span></p>
<p>The <span class="packt_screen">Recommendation</span> is a new action added in Dynamics 365, using which we can suggest that the user perform an activity based on some condition. We will cover it in detail in the up coming sections.</p>
<p>The new designer also allows for the searching of these components. The search is of type instant search, which shows the result while we are still typing in the search box.</p>
<p>For example, typing in <span class="packt_screen">set</span> in the search box shows the actions with set in their names in the drop-down, and also filters the visible components:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="283" src="assets/e7566885-056e-4542-8c52-7def63d0826f.png" width="376"/></div>
<p>Every component<span>—</span>that is <span class="packt_screen">Condition</span> and <span class="packt_screen">Action</span>, has its specific set of properties. Before we look at the properties of each of these components, let us see how we can add these components in the Business Rule Designer canvas.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Specifying conditions using condition components</h1>
                </header>
            
            <article>
                
<p>While creating a new business rule, the business rule designer opens with a single condition already added.</p>
<p>To add more conditions, we can click on the <span class="packt_screen">Add</span> button on the toolbar and select <span class="packt_screen">Add Condition:</span></p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="383" src="assets/81e6fa18-cd4e-4849-959f-008e5f5e6992.png" width="335"/></div>
<p>The other option is to drag and drop the condition component from the <span class="packt_screen">Components</span> tab into the designer canvas. Selecting the condition in the designer will show the properties specific to the condition component in the <span class="packt_screen">Properties</span> tab:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="587" src="assets/6b6219b7-a228-4556-9b25-b5ca8f3a648b.png" width="348"/></div>
<p>Let us look at some of the properties of the condition component.</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img height="530" src="assets/939bf1e8-5225-4dcf-91e7-c563f1efa7fb.jpg" width="519"/></div>
<p>Clicking on <span class="packt_screen">+ New</span> adds a new rule to the rules section. For example, <span class="packt_screen">Rule 2</span> in the following image:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="545" src="assets/cef6945c-17fe-414a-b10d-1ca2a14688ee.png" width="335"/></div>
<p>The following image shows the <span class="packt_screen">Rule Logic</span> and the <span class="packt_screen">Condition Expression (Text View)</span> property inside the properties tab. The <span class="packt_screen">Apply</span> button applies the condition and the <span class="packt_screen">Discard</span> button can be used to <strong>undo</strong> the last action performed, similar to the <em><span class="KeyPACKT">Ctrl</span></em> + <em><span class="KeyPACKT">Z</span></em> command:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="366" src="assets/66a56771-1287-43ed-96b7-4743cbcd53e9.png" width="358"/></div>
<p>Now, let us have a look at the properties of the different type of actions available for business rules.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Taking actions for conditions using action components</h1>
                </header>
            
            <article>
                
<p>An action can be added in the same way as a condition, by clicking on the <span class="packt_screen">Add</span> button on the toolbar and selecting the action that we want to add. The action can also be added by dragging it from the <span class="packt_screen">Components</span> tab and associating it to a condition, shown as follows. Here, we have dragged the <span class="packt_screen">Show Error Message</span> action from <span class="packt_screen">Components</span> tab and linked it to our existing <span class="packt_screen">New Condition:</span></p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/8d9f926d-2e58-4316-b9c8-f2e1efff4b7a.png"/></div>
<p>This adds the <span class="packt_screen">Show Error Message</span> action to the condition:</p>
<div class="CDPAlignCenter CDPAlign"><img height="169" src="assets/1815f67d-02e5-4254-8355-41c0fc848cc3.png" width="502"/></div>
<p>Let us now have a look at the properties of all the different actions available:</p>
<ul>
<li><span class="packt_screen">Lock</span>/<span class="packt_screen">Unlock</span>: This action can be used to define whether a field needs to be locked or unlocked:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="303" src="assets/6d496a42-144b-4e07-b971-74591bafc4fc.png" width="292"/></div>
<p style="padding-left: 90px">This is how the locked field <span class="packt_screen">Probability</span> will display inside the opportunity form:</p>
<div class="CDPAlignCenter CDPAlign"><img height="67" src="assets/47c44d00-93fe-4877-9a1c-f7ef169d7067.png" width="274"/></div>
<ul>
<li><span class="packt_screen">Show Error Message</span>: This action can be used to show the error message on a particular field:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="369" src="assets/7c2cb03c-3b32-4a53-b3e3-b523e6aa6246.png" width="355"/></div>
<p style="padding-left: 90px">This is how the error message shows up inside opportunity form. Hovering over the red cross icon shows the error message:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="91" src="assets/427c3d97-f28e-4845-9797-811473f6c0c6.png" width="394"/></div>
<ul>
<li><span class="packt_screen">Set Field Value</span>: The Set Field Value action can be used to define a value for a field. The value can be set using the following options. Based on the field's data type, the options will vary:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="144" src="assets/32020ad5-7ca6-4d71-8145-b8c32f66f86b.png" width="316"/> </div>
<ul>
<li style="padding-left: 60px"><span class="packt_screen">Value</span>: This can be used to specify the field's value directly
<ul>
<li><span class="packt_screen">Field</span>: <span>This </span>can be used to specify the field's value to another field's value</li>
<li><span class="packt_screen">Formula</span>: <span>This </span>can be used to specify the field's value by applying a formula (this option is available for the <span class="packt_screen">Date Time</span>, <span class="packt_screen">Whole Number</span>, and <span class="packt_screen">Decimal fields</span>)</li>
<li><span class="packt_screen">Clear</span>: <span>This </span>clears the field's value (this option is not available for the boolean and option set fields)</li>
</ul>
</li>
</ul>
<p>For example, we can use the <span class="packt_screen">Set Field Value</span> action to define a rule that sets the estimated close date to be 100 days from the day the opportunity is created using formula, shown as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img height="487" src="assets/8d6f1b5c-ecd0-4ae5-8ce9-8f6721c2d26b.png" width="299"/></div>
<ul>
<li><span class="packt_screen">Set Business Required</span>: The <span class="packt_screen">Set Business Required</span> action can be used to set a field to be either <span class="packt_screen">Business Required</span> or non-mandatory:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="278" src="assets/3f39ea08-7aad-46b9-b100-d0185f37dad1.png" width="271"/> </div>
<ul>
<li><span class="packt_screen">Set Visibility</span>: The <span class="packt_screen">Set Visibility</span> section can be used to show or hide the field:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="270" src="assets/8f8d62e2-b4b6-4dde-9dac-cceba6b44e9c.png" width="268"/></div>
<ul>
<li><span class="packt_screen">Recommendation</span>: As we saw earlier, <span class="packt_screen">Recommendation</span> is a new action introduced in Dynamics 365. The different properties of <span class="packt_screen">Recommendation</span> are:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img height="202" src="assets/f3584baa-1cf1-4279-a5b0-89edd2f6919a.png" width="517"/></div>
<p>Recommendation is a special type of action, which itself has an <span class="packt_screen">Actions</span> inside it:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="204" src="assets/093d8f4e-d96d-4ef5-ac93-74c979ab8e46.png" width="261"/></div>
<p>This <span class="packt_screen">Actions</span> is of type <span class="packt_screen">Set Field Value</span>:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="374" src="assets/7f33681f-9b4b-49b1-9e49-5eca47b0dbde.png" width="330"/></div>
<p>It is the same <span class="packt_screen">Set Field Value</span> action that we covered earlier. To see all the components in action, let us implement a recommendation business rule.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Recommendation in action</h1>
                </header>
            
            <article>
                
<p>Now we have some basic understanding of different properties of the recommendation action and the different components of the Business Rule Designer, let us implement a scenario to see them in action. The scenario we will implement would be, for an example, if the <span class="packt_screen">Sales Stage</span> selected is <span class="packt_screen">Propose</span>, we would recommend the user to set the probability as <kbd>80</kbd>.</p>
<p>Let us implement it step by step.</p>
<p>There are four ways of creating a new Business Rule in CRM:</p>
<ul>
<li>At <span class="packt_screen">Field</span> Level:
<ol>
<li>Open the <span class="packt_screen">Entity</span> for customization</li>
<li>Click and open the field</li>
<li>Select <span class="packt_screen">Business Rule</span> in the left navigation and click on <span class="packt_screen">New</span> to create a new business rule:</li>
</ol>
</li>
</ul>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/80066f73-e6bf-403b-ba1c-9fdaeafd1a88.png"/></div>
<ul>
<li>At Entity level:
<ol>
<li>Open the <span class="packt_screen">Entity</span> for customization</li>
<li>Select <span class="packt_screen">Business Rule</span> in the left navigation and click on <span class="packt_screen">New</span> to create a new business rule:</li>
</ol>
</li>
</ul>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="279" src="assets/a2ae6e5f-487a-410e-bcd6-057938b41115.png" width="320"/></div>
<ul>
<li>From form:
<ol>
<li>Open the form for customization. Click on the <span class="packt_screen">Business Rules</span> ribbon button:</li>
</ol>
</li>
</ul>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="119" src="assets/a3b5e2bc-d96c-416f-bc4e-56cab9c09076.png" width="481"/></div>
<ol start="2">
<li style="list-style-type: none">
<ol start="2">
<li>This opens the <span class="packt_screen">Business Rule Explorer</span> on the right panel of the form, which lets us create a new business rule by clicking on the <span class="packt_screen">New Business Rule</span> button:</li>
</ol>
</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="401" src="assets/616ec5e2-0d40-4096-8d54-a8e599de45d6.png" width="367"/></div>
<ol start="3">
<li style="list-style-type: none">
<ol start="3">
<li>Another way that we can define the business rule from within the Form is by opening the form for customization, double-clicking on any of the fields or selecting any of the fields, and clicking on the <span class="packt_screen">Change Properties</span> ribbon button to open the <span class="packt_screen">Field Properties</span> dialog box. We can then select the <span class="packt_screen">Business Rule</span> tab and click on <span class="packt_screen">New</span> to create a new business rule.</li>
<li>Coming back to our scenario, let's select <span class="packt_screen">Opportunity</span> entity for customization and create a new business rule with the following details:</li>
</ol>
</li>
</ol>
<table class="table">
<tbody>
<tr>
<td>
<p><strong>Rule name</strong></p>
</td>
<td>
<p>Recommendation for Sales Stage.</p>
</td>
</tr>
<tr>
<td>
<p><strong>Description</strong></p>
</td>
<td>
<p>Recommend probability to be 80 for Sales Stage - Proposed.</p>
</td>
</tr>
</tbody>
</table>
<ol start="5">
<li style="list-style-type: none">
<ol start="5">
<li>Select the condition component and define the rule <em>When Sales Stage equals to Propose</em>, shown as follows, in the <span class="packt_screen">Properties</span> tab:</li>
</ol>
</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="527" src="assets/68da0680-9594-41d1-a3f0-69a717ef9e0e.png" width="311"/></div>
<ol start="6">
<li style="padding-left: 60px">Click on <span class="packt_screen">Apply</span> to apply the condition</li>
<li style="padding-left: 60px">Next, we need to add a <span class="packt_screen">Recommend Action</span> to this condition</li>
<li style="padding-left: 60px">Either click on the <span class="packt_screen">Add</span> button on the toolbar or drag the <span class="packt_screen">Recommendation</span> action from the <span class="packt_screen">Components</span> tab:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img height="190" src="assets/a25ad221-371d-403f-a168-275d5a509ae4.png" width="443"/></div>
<ol start="9">
<li style="padding-left: 60px">Select the <span class="packt_screen">Recommendation</span> action and define its properties, shown as follows, and click on <span class="packt_screen">Apply</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="395" src="assets/62928df5-171f-473d-98b7-617bb52480c8.png" width="336"/></div>
<ol start="10">
<li style="padding-left: 60px">Next, we need to define the <span class="packt_screen">Action</span> (Set Field Value) that is part of <span class="packt_screen">Recommendation</span>. For this, select the <span class="packt_screen">New Action</span> section within <span class="packt_screen">Recommendation</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="168" src="assets/0e4b7945-a1ef-41e0-b8ae-ce183324a10c.png" width="207"/></div>
<ol start="11">
<li style="padding-left: 60px">We will define the action as <kbd>Set probability field value as 80</kbd>, shown as follows, and click on <span class="packt_screen">Apply</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="353" src="assets/994f6661-d828-4bf8-9dcf-1b3cd3abaf7f.png" width="209"/></div>
<p>This is how our final rule will look inside the designer canvas. Click on <span class="packt_screen">Save</span> to save the rule; it will also validate the rule for any errors. We can also click on <span class="packt_screen">Validate</span> to validate our rule at any point, while we are still defining it:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/8ca5aa22-8ccf-4571-8ad3-b6ff71ff06b6.png"/></div>
<p>On successful validation, we will get a <span class="packt_screen">Validation Successful</span> message.</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/452f30c4-7097-45c6-ad83-553f43416d34.png"/></div>
<p>In the case of any error, the Validate will show the error message, shown as follows, highlighted in red. We can check the properties tab to figure out the cause of the error. Before we can save and publish the business rule, we need to fix all the errors:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/6b796b13-9eb0-4af8-8b80-6306257a685f.png"/></div>
<p>Next, we need to click on <span class="packt_screen">Activate</span> to activate the rule.</p>
<p>To see the business rule in action, we need to open the opportunity record and set the value of sales stage to <span class="packt_screen">Propose</span>:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="373" src="assets/57b3bb4e-9617-4df8-b76b-f5c19c312fc8.png" width="285"/></div>
<p>This shows the information icon next to the <span class="packt_screen">Probability</span> field. Clicking on it opens the <span class="packt_screen">Recommendation</span> box with the recommendation title and details that we set earlier:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="155" src="assets/17c163e1-461a-48c3-b00a-d1663f44ba2c.png" width="311"/></div>
<p>We can click on the <span class="packt_screen">Dismiss</span> button to close the recommendation dialog box. Clicking on <span class="packt_screen">Apply</span> will update the probability value to <span class="packt_screen">80</span>, as we had defined it in the <span class="packt_screen">Set Field Value Action</span>, shown as follows:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="104" src="assets/b1255e60-449a-4b43-b45f-206a7dbb6138.png" width="187"/></div>
<p>So, now we have implemented our Recommendation rule. Now, let us cover other additional features of the Business Rule Designer in the next section.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Additional features of Business Rule Designer</h1>
                </header>
            
            <article>
                
<p>Apart from the provision of creating rules, there are some additional features introduced in the new Business Rule Designer, let us have a quick look at those new features.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Cut, copy, and paste the component</h1>
                </header>
            
            <article>
                
<p>The toolbar within the Business Rule Designer gives the option to cut, copy, paste, and delete the component.</p>
<p>To cut or copy the component, select the component and press the <span class="packt_screen">Cut</span> or <span class="packt_screen">Copy</span> button in the toolbar. Or, we can also use our keyboard shortcuts (<em><span class="KeyPACKT">CTRL</span></em> + <em><span class="KeyPACKT">C</span></em> or <em><span class="KeyPACKT">CTRL</span></em> + <span class="KeyPACKT"><em>X</em>)</span> to copy or cut:</p>
<div class="CDPAlignCenter CDPAlign"><img height="172" src="assets/77cdd192-3602-450a-a128-23b5df604c9a.png" width="460"/></div>
<p>Clicking on <span class="packt_screen">Paste</span> (or <em><span class="KeyPACKT">CTRL</span></em> + <em><span class="KeyPACKT">V</span></em>) shows the different area with the + symbol where the copied component can be added:</p>
<div class="CDPAlignCenter CDPAlign"><img height="245" src="assets/614e1a4e-6d4a-422a-bf4c-454070b229f5.png" width="463"/></div>
<p>Clicking on + adds the copied component to that specific location.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Deleting the component</h1>
                </header>
            
            <article>
                
<p>To delete the component, just select the component and click on the <span class="packt_screen">Delete</span> button (or press <em><span class="KeyPACKT">CTRL</span></em> + <span class="KeyPACKT"><em>X</em>)</span> on the toolbar. This will open a <span class="packt_screen">Confirm Deletion</span> dialog box.</p>
<p>Clicking on <span class="packt_screen">OK</span> on the <span class="packt_screen">Confirm Deletion</span> dialog box removes the component.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Taking a snapshot of the business rule</h1>
                </header>
            
            <article>
                
<p>Clicking on the <span class="packt_screen">Snapshot</span> button on the toolbar saves the current state of the business rule as an image file:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="68" src="assets/d96dbfcc-a09a-47ec-aabe-5f2f6af2bada.png" width="174"/></div>
<p>The file is saved with the name of the business rule with the <kbd>.png</kbd> extension.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Set zoom level and Fit to Canvas for ease of readability</h1>
                </header>
            
            <article>
                
<p>We can set the zoom level of the Business Rule Designer by clicking the <span class="packt_screen">-</span> and <span class="packt_screen">+</span> lenses. The third option is for Fit to Canvas, which makes the business rule definition auto-adjust to fit the Business Rule Designer canvas:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="59" src="assets/b4c797cc-e58a-4a92-be82-f456fdd78f0d.png" width="244"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Navigating easily using Minimap</h1>
                </header>
            
            <article>
                
<p>The Business Rule Designer canvas also has Minimap component that gives a mini view of the designed business rules:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/cfbadd2d-d688-4b3d-812a-9caa592a4555.png"/></div>
<p>It also allows to easily navigate inside the designer canvas. Using Minimap, we have easily scrolled to the bottom-right corner of our business rule definition inside the designer where we have the <span class="packt_screen">Lock</span>/<span class="packt_screen">Unlock</span> action component, shown as follows:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="291" src="assets/c9227520-3643-492c-9dce-2e4cfe891a13.png" width="636"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using Business Rule (Text View) to read through the business rule</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Business Rule (Text View)</span> component inside the designer canvas displays the text view of the rule defined.</p>
<p>For the Recommendation rule that we defined earlier:</p>
<div class="CDPAlignCenter CDPAlign"><img height="162" src="assets/6e4f4ad3-fa6f-4d21-98b2-2ee2290f8763.png" width="405"/></div>
<p>The <span class="packt_screen">Business Rule (Text View)</span> will show the following content:</p>
<div class="CDPAlignCenter CDPAlign"><img height="158" src="assets/4908e2e3-6011-4011-87be-e5f896caaea4.png" width="536"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">A few key points about business rules</h1>
                </header>
            
            <article>
                
<p>The following are important points regarding business rules that we need to consider before we decide on using them:</p>
<ul>
<li>We cannot use the business rule to hide tabs and sections of a form.</li>
<li>The <kbd>OnChange</kbd> event of the field will not be triggered if that field's value is set using a business rule.</li>
<li>There is a limitation of 10 <kbd>if...else</kbd> conditions in a business rule.</li>
<li>The business rule will not run if it references a field that is not in the form. It will not show any error message.</li>
<li>The business rule, if not defined with Scope as Entity, will run only during the load of the form and when the value of a field changes. It will not run on save of the form.</li>
<li>Business rules run in order of their activation. So, if we have multiple interrelated business rules defined for an Entity, the business rule that was activated first will run first followed by the other business rule in order of their activation.</li>
<li>If we have both JavaScript and business rules defined for a specific field, JavaScript will be executed first.</li>
<li>Business rules don't support whole number fields with the TimeZone, Duration, or Language formats.</li>
<li>Business rules are cached for Dynamics 365 for tablets app, when that app is opened. So, for any change to be reflect, the app needs to be closed and re-opened.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we covered how business rules have evolved starting from CRM 2013 to Dynamics 365. We have an entirely new designer that makes it more intuitive to write and define business rules. We also had a detailed look at the new Recommendation action that was added in Dynamics 365 along with a host of new features.</p>
<p>In the next chapter, we will look at Microsoft PowerApps and how it can be used to create custom business apps.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </body></html>