["```\nexecute \"update-upgrade\" do\n   command \"apt-get update && apt-get upgrade -y\"\n   action :run\nend\n\npackage \"apache2\" do\n   action :install\nend\n```", "```\n---\n- hosts: webservers\n vars:\n http_port: 80\n max_clients: 200\n remote_user: root\n tasks:\n - name: ensure apache is at the latest version\n yum: name=httpd state=latest\n - name: write the apache config file\n template: src=/srv/httpd.j2 dest=/etc/httpd.conf\n notify:\n - restart apache\n - name: ensure apache is running (and enable it at boot)\n service: name=httpd state=started enabled=yes\n handlers:\n - name: restart apache\n service: name=httpd state=restarted\n```", "```\n[webservers]\nhost1\nhost2\n\n[dbservers]\n192.168.0.[1:3]\n```", "```\n[dbservers]\n192.168.0.[1:3]\n\n[webservers]\nhost1 role=master\nhost2\n\n[dbservers:vars]\ntimezone=utc\n```", "```\n[dbservers]\n192.168.0.[1:3]\n\n[webservers]\nhost1\nhost2\n\n[mongoservers]\n10.0.0.1\n10.0.0.2\n\n[dataservers:child]\nmongoservers\ndbservers\n```", "```\nprovider \"google\" {\n  credentials = \"${file(\"account.json\")}\"\n  project = \"${var.project_name}\"\n  region = \"${var.default_region}\"\n}\n\nresource \"google_compute_instance\"\n\"nginx\" {\n  name = \"nginx\"\n  machine_type = \"n1-standard-1\"\n  zone = \"europe-west1-b\"\n  disk {\n   image = \"ubuntu-os-cloud/ubuntu-1704-zesty-v20170413\"\n  }\n  network_interface {\n    network = \"default\"\n    access_config {\n      nat_ip = \"${google_compute_address.nginx-ip.address}\"\n    }\n  }\n}\n\nresource \"google_compute_address\" \"nginx-ip\" {\n  name = \"nginx-ip\"\n}\n```", "```\nvariable \"project_name\" {\n  type = \"string\"\n  default = \"implementing-modern-devops\"\n}\n\nvariable \"default_region\" {\n  type = \"string\"\n  default = \"europe-west1\"\n}\n```", "```\n+ google_compute_address.nginx-ip\n address: \"<computed>\"\n name: \"nginx-ip\"\n self_link: \"<computed>\"\n\n+ google_compute_instance.nginx\n can_ip_forward: \"false\"\n disk.#: \"1\"\n disk.0.auto_delete: \"true\"\n disk.0.image: \"ubuntu-os-cloud/ubuntu-1704-zesty-v20170413\"\n machine_type: \"n1-standard-1\"\n metadata_fingerprint: \"<computed>\"\n name: \"nginx\"\n network_interface.#: \"1\"\n network_interface.0.access_config.#: \"1\"\n network_interface.0.access_config.0.assigned_nat_ip: \"<computed>\"\n network_interface.0.access_config.0.nat_ip: \"<computed>\"\n network_interface.0.address: \"<computed>\"\n network_interface.0.name: \"<computed>\"\n network_interface.0.network: \"default\"\n self_link: \"<computed>\"\n tags_fingerprint: \"<computed>\"\n zone: \"europe-west1-b\"\n\nPlan: 2 to add, 0 to change, 0 to destroy.\n```", "```\ngoogle_compute_address.nginx-ip: Creating...\n address: \"\" => \"<computed>\"\n name: \"\" => \"nginx-ip\"\n self_link: \"\" => \"<computed>\"\ngoogle_compute_address.nginx-ip: Still creating... (10s elapsed)\ngoogle_compute_address.nginx-ip: Creation complete\ngoogle_compute_instance.nginx: Creating...\n can_ip_forward: \"\" => \"false\"\n disk.#: \"\" => \"1\"\n disk.0.auto_delete: \"\" => \"true\"\n disk.0.image: \"\" => \"ubuntu-os-cloud/ubuntu-1704-zesty-v20170413\"\n machine_type: \"\" => \"n1-standard-1\"\n metadata_fingerprint: \"\" => \"<computed>\"\n name: \"\" => \"nginx\"\n network_interface.#: \"\" => \"1\"\n network_interface.0.access_config.#: \"\" => \"1\"\n network_interface.0.access_config.0.assigned_nat_ip: \"\" => \"<computed>\"\n network_interface.0.access_config.0.nat_ip: \"\" => \"35.187.81.127\"\n network_interface.0.address: \"\" => \"<computed>\"\n network_interface.0.name: \"\" => \"<computed>\"\n network_interface.0.network: \"\" => \"default\"\n self_link: \"\" => \"<computed>\"\n tags_fingerprint: \"\" => \"<computed>\"\n zone: \"\" => \"europe-west1-b\"\ngoogle_compute_instance.nginx: Still creating... (10s elapsed)\ngoogle_compute_instance.nginx: Still creating... (20s elapsed)\ngoogle_compute_instance.nginx: Creation complete\n\nApply complete! Resources: 2 added, 0 changed, 0 destroyed.\n```", "```\n[nginx-servers]\n35.187.81.127\n```", "```\nansible -i inventory all -m ping\n```", "```\n35.187.81.127 | UNREACHABLE! => {\n \"changed\": false,\n \"msg\": \"Failed to connect to the host via ssh: Permission denied (publickey).\\r\\n\",\n \"unreachable\": true\n}\n```", "```\ngcloud compute ssh nginx\n```", "```\nssh-add ~/.ssh/google_compute_engine\n```", "```\nansible -i inventory all -m ping\n```", "```\n35.187.81.127 | SUCCESS => {\n \"changed\": false,\n \"ping\": \"pong\"\n}\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - name: Update sources\n apt:\n update_cache: yes\n - name: Upgrade all packages\n apt:\n upgrade: dist\n```", "```\nansible-playbook -i inventory tasks.yml\n```", "```\n- name: Update sources\n apt:\n update_cache: yes\n```", "```\napt-cache update\n```", "```\n- name: Update sources\n command: apt-cache update\n```", "```\n[defaults]\ninventory = ./inventory\n```", "```\nansible-playbook tasks.yml\n```", "```\n[ssh_connection]\nssh_args=<your args here>\n```", "```\n---\n- hosts: all\n  user: root\n  tasks:\n  - debug:\n    msg: \"Hello {{ myName }}! I am {{ inventory_hostname }}\"\n```", "```\nansible-playbook -i inventory tasks.yml\n```", "```\nansible-playbook -i inventory tasks.yml --limit @/Users/dgonzalez/code/ansible-variables/tasks.retry\n```", "```\nansible-playbook -i inventory tasks.yml -e myName=David\n```", "```\n[nginx-servers]\n35.187.81.127 myName=DavidInventory\n```", "```\nansible-playbook -i inventory tasks.yml\n```", "```\n---\n- hosts: all\n vars:\n myName: David\n user: root\n tasks:\n - debug:\n msg: \"Hello {{ myName }}! I am {{ inventory_hostname }}\"\n```", "```\nmyName: DavidFromFile\nyourName: ReaderFromFile\n```", "```\nansible-playbook -i inventory playbook.yml -e @vars.yml\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - name: Include vars\n include_vars:\n file: vars.yml\n - debug:\n msg: \"Hello {{ myName }}! I am {{ inventory_hostname }}\"\n```", "```\nansible-playbook -i inventory tasks.yml\n```", "```\n---\n- hosts: all\n user: root\n vars_files:\n - vars.yml\n tasks:\n - debug:\n msg: \"Hello {{ myName }}! I am {{ inventory_hostname }}\"\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - name: list configuration folder\n command: ls /app/config/\n register: contents\n - set_fact:\n is_config_empty: contents.stdout == \"\"\n - name: check if folder is empty\n debug: msg=\"config folder is empty\"\n when: is_config_empty\n - name: installing configuration\n command: <your command here>\n when: is_config_empty\n```", "```\nansible all -m setup -i inventory --user=root\n```", "```\n{\n \"my_name\": \"David Gonzalez\"\n }\n```", "```\nansible all -m setup -i inventory --user=root | grep -B 3 -A 3 my_name\n```", "```\n },\n \"ansible_local\": {\n \"example\": {\n \"my_name\": \"David Gonzalez\"\n }\n },\n \"ansible_lsb\": {\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - name: Gather my_name fact.\n debug: msg=\"{{ ansible_local.example.my_name }}\"\n```", "```\n#!/bin/bash\nCPU_LOAD=`grep 'cpu ' /proc/stat | awk '{usage=($2+$4)*100/($2+$4+$5)} END {print usage \"%\"}'`\necho { \\\"cpu_load\\\": \\\"$CPU_LOAD\\\"}\n```", "```\n/etc/ansible/facts.d/cpuload.fact\n```", "```\n{ \"cpu_load\": \"0.0509883%\"}\n```", "```\n- hosts: all\n user: root\n tasks:\n - name: Get CPU load\n debug: msg=\"The CPU load for {{ ansible_hostname }} is {{ ansible_local.cpuload.cpu_load }}\"\n```", "```\nansible-playbook -i inventory tasks.yml\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - name: Update sources\n apt:\n update_cache: yes\n - name: Upgrade all packages\n apt:\n upgrade: dist\n - name: Install nginx\n apt:\n name: nginx\n state: present\n```", "```\n---\n- hosts: all\n user: root\n vars_files:\n - vars.yml\n tasks:\n - name: Update sources\n apt:\n update_cache: yes\n - name: Upgrade all packages\n apt:\n upgrade: dist\n - name: Install nginx\n apt:\n name: nginx\n state: present\n - template:\n src: nginx-servers/nginx-one.conf.j2\n dest: /etc/nginx/sites-enabled/default\n owner: root\n - service:\n name: nginx\n state: reloaded\n```", "```\nserver {\n   listen {{ server_one_port }} default_server;\n   index index.html;\n}\n```", "```\nserver_one_port: 3000\n```", "```\nansible-playbook -i inventory nginx.yml\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - command: /bin/false\n register: result\n ignore_errors: True\n\n - debug: msg=\"fail!\"\n when: result|failed\n\n - debug: msg=\"success!\"\n when: result|succeeded\n```", "```\n---\n- hosts: all\n user: root\n vars:\n names:\n - David\n - Ester\n - Elena\n tasks:\n - name: Greetings\n debug: msg=\"Greetings {{ item }}! live long and prosper.\"\n with_items: \"{{ names }}\"\n```", "```\nansible-playbook -i inventory loops.yml\n```", "```\n names:\n - David\n - Ester\n - Elena\n```", "```\nnames: ['David', 'Ester', 'Elena']\n```", "```\n---\n- hosts: all\n user: root\n vars:\n namesAge:\n - name: David\n age: 33\n - name: Ester\n age: 31\n - name: Elena\n age: 1\n tasks:\n - name: Presentations\n debug: msg=\"My name is {{ item.name }} and I am {{ item.age }} years old.\"\n with_items: \"{{ namesAge }}\"\n```", "```\n---\n- include: play-include.yml\n- hosts: all\n user: root\n tasks:\n - debug: msg=\"I am the main playbook\"\n - include: tasks-include.yml\n```", "```\n---\n- hosts: all\n user: root\n tasks:\n - debug: msg=\"I am a play include\"\n```", "```\n---\n- debug: msg=\"I am a task include\"\n- debug: msg=\"I am a task include again\"\n```", "```\nansible-playbook -i inventory tasks.yml\n```", "```\n---\n- debug: msg=\"I am a play include\"\n```", "```\n---\n- debug: msg=\"I am the main playbook\"\n```", "```\n---\n- debug: msg=\"I am a task include\"\n- debug: msg=\"I am a task include again\"\n```", "```\n---\n- hosts: all\n user: root\n roles:\n - main-tasks\n - play-include\n - tasks-include\n```", "```\nansible-playbook -i inventory tasks.yml\n```"]