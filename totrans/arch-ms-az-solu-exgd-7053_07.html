<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using Storage Solutions</h1>
                </header>
            
            <article>
                
<p><span>In the previous chapter, we covered the designing connectivity for hybrid applications objective</span><span>. We covered how to design hybrid applications. We also covered external connectivity for Azure VNets and how to design security strategies for networking solutions.</span></p>
<p class="mce-root">This chapter introduces the<span> designing data implementations objective by starting with storage solutions. This chapter covers the different storage solutions that are available in Azure, such as </span>Azure Blob Storage and Azure Files. It will also help you determine when to use one of these storage solutions. It will also cover designing for NoSQL storage and when to use the different NoSQL services inside Azure, such as Azure Table Storage and Cosmos DB. And finally, it covers searching your data with Azure Search.</p>
<p>By the end of reading this chapter, you should know when to use which storage option for your solutions.</p>
<p>The following topics will be covered:</p>
<ul>
<li>Azure Storage types and replication types</li>
<li><span>Azure Blob Storage</span></li>
<li>Azure Table Storage</li>
<li>Azure Queue Storage</li>
<li><span>Azure File Storage</span></li>
<li>Azure Disk Storage</li>
<li><span>StorSimple</span></li>
<li>Cosmos DB Storage</li>
<li>Azure Search</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>This chapter uses the following tools for the examples:</p>
<ul>
<li>Azure PowerShell: <a href="https://docs.microsoft.com/en-us/powershell/azure/install-azurerm-ps?view=azurermps-5.1.1">https://docs.microsoft.com/en-us/powershell/azure/install-azurerm-ps?view=azurermps-5.1.1</a></li>
<li>
<p style="margin: 0in;font-family: Merriweather"><span>Visual Studio 2017: </span><a href="https://www.visualstudio.com/downloads/"><span>https://www.visualstudio.com/downloads/</span></a></p>
</li>
</ul>
<p style="margin: 0in;font-family: Merriweather;font-size: 12.0pt;color: black"><span>The source code for this chapter can be downloaded</span><span> </span><span>from the following link:</span></p>
<ul>
<li><a href="https://github.com/SjoukjeZaal/AzureArchitectureBook/tree/master/Chapter%207">https://github.com/SjoukjeZaal/AzureArchitectureBook/tree/master/Chapter%207</a></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure Storage and replication types</h1>
                </header>
            
            <article>
                
<p>Every application needs some sort of storage solution. Azure offers several different types of storage, from storing files and documents to storing datasets. The first step to take is creating a storage account. When you create a storage account, you have to determine whether you want your data to be accessible locally or globally. Another thing to take into consideration is which account type to choose. </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Storage account types</h1>
                </header>
            
            <article>
                
<p>Azure Blob Storage offers three different account types which can be used for Blob, Table, File, and Queue storage. Azure offers the following storage types.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">General-purpose v1 (GPv1)</h1>
                </header>
            
            <article>
                
<p>The General-purpose Storage (V1) account is the oldest type of storage account. It offers storage for page blobs, block blobs, files, queues, and tables, but it is not the most cost-effective storage account type. It is the only storage account type that can be used for the classic deployment model. It doesn't support the latest features such as access tiers.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Blob storage</h1>
                </header>
            
            <article>
                
<p>The Blob storage account offers all the features of StorageV2 accounts except that it supports <span>only b</span>lock blobs (and append blobs). Page blobs are not supported. It offers access tiers, <span>which consists of hot, cool, and archive storage and which is covered later in this chapter.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">General-purpose v2 (GPv2)</h1>
                </header>
            
            <article>
                
<p>StorageV2 is the newest type of storage account and it combines the V1 storage with Blob storage. It offers all the latest features such as access tiers for Blob storage with a reduction in costs. Microsoft recommends using this account type over the V1 and Blob storage account type.</p>
<p><span>V1 storage accounts can be upgraded to V2.</span></p>
<div class="packt_figref packt_infobox">For more information on pricing and billing for these different account types, you can refer to the following pricing page: <a href="https://azure.microsoft.com/en-us/pricing/details/storage/">https://azure.microsoft.com/en-us/pricing/details/storage/</a>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Storage replication types</h1>
                </header>
            
            <article>
                
<p><span>Data that is stored in Azure is always replicated to ensure durability and high availability. This way, it is protected from unplanned and planned events, such as network or power outages, natural disasters, and terrorism. It also ensures that during these types of events, your storage account still meets SLA.</span></p>
<p>Data can be replicated within the <span>same data center, across zonal data centers within the same region and across different regions. These replication types are named <strong>Locally Redundant Storage</strong> (<strong>LRS</strong>), <strong>Zone Redundant Storage</strong> (<strong>ZRS</strong>), and <strong>Geo-redundant Storage</strong> (<strong>GRS</strong>), and they are covered in more detail in the upcoming sections.</span></p>
<div class="packt_infobox"><span>You choose a replication type when you create a new storage account. Storage accounts can be created inside the Azure Portal as well as from PowerShell or CLI. </span></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Locally Redundant Storage</h1>
                </header>
            
            <article>
                
<p>LRS is the cheapest option, which replicates the data three times within the same data center. When you make a write request to your storage account, it will synchronously be written during this request to all three replicas. The request is committed when the data is completely replicated. With LRS, the data will be replicated across multiple update domains and fault domains within one storage scale unit.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Zone Redundant Storage</h1>
                </header>
            
            <article>
                
<p><span>ZRS is currently in preview and only available in US East 2 and US Central. </span><span>It replicates three copies, across two or three data centers. The data is written synchronously to all three replicas in one or two regions. It also replicates the data three times inside the same data center where the data resided, just like LRS.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Geo-redundant Storage</h1>
                </header>
            
            <article>
                
<p>GRS replicates the data three times within the same region such as ZRS, as well as three copies to other regions <span>a</span><span>synchronously. </span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure Blob Storage</h1>
                </header>
            
            <article>
                
<p>Azure Blob Storage offers unstructured data storage in the cloud. It can store all kinds of data, such as documents, VHDs, images, and audio files. </p>
<p>There are two types of blobs that you can create. There are <strong>page blobs</strong>, which are used for the storage of disks. So, when you have VHD which need to be stored and attached to your VM, you will create a page blob. <span>The maximum size of a page blob is 1 TB. </span>The other one is <strong>block blobs</strong>, which are basically all the other types of data that you can store in Azure, such as files and documents. The maximum size of a block blob is 200 GB. <span>However, t</span>here is a third blob type named append blob, but this one is used internally by Azure and can't be used in order to store actual files.</p>
<p><span>There are a couple of ways that you can copy blobs to your blob storage account. You can use the Azure Portal (only one at a time) or Azure Storage Explorer, or you can copy your files programmatically using .NET, PowerShell, or CLI or by calling the REST API.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Access tiers</h1>
                </header>
            
            <article>
                
<p>Blob storage accounts use access tiers to determine how frequently the data is accessed. Based on this access tier, you will get billed. Azure offers three storage access tiers, hot, cool, and archive. </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Hot </h1>
                </header>
            
            <article>
                
<p>The Hot access tier is most suitable for storing data accessed frequently and data that is in active use. For instance, you would store images and style sheets for a website inside the Hot access tier. The storage costs for this tier are higher than compared to the other access tiers, but you pay less for accessing the files. </p>
<p>The Hot access tier is optimized for storing data that is accessed frequently. It has higher storage costs than Cool and Archive storage, but you pay less for accessing the files. This access tier is most suitable for data that is in active use.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Cool</h1>
                </header>
            
            <article>
                
<p><span>The Cool access tier is most suitable for storing data that is not accessed frequently (less then once in 30 days). Compared with the Hot access tier, the Cool tier has lower storage costs, but you pay more for accessing the files. This tier is most suitable for storing backups and older content that is not viewed often.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Archive</h1>
                </header>
            
            <article>
                
<p>The Archive storage tier is set on the blob level and not on the storage level. It has the lowest costs for storing data and the highest cost for accessing data compared with the Hot and Cool access tiers. This tier is for data that will remain in the archive for at least 180 days, and it will take a couple of hours of latency before it can be accessed. <span>This tier is most suitable for long-term backups or compliance and archive data.</span></p>
<p>A blob in the Archive tier is offline and cannot be read (except for the metadata), copied, overwritten, or modified. </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure Table Storage</h1>
                </header>
            
            <article>
                
<p>Azure Table Storage is a NoSQL data store, which can be used for a big amount of semi-structured, non-relational data. It is more cost-effective than relational databases because it stores the data on cheaper servers that provide horizontal scale and high performance. NoSQL uses schemaless design, and data is stored based on key/attribute values. You can store flexible datasets in it, and it can store any number of entities in a table, up to the maximum capacity of the storage account (which is 500 TB).</p>
<p>Azure Table Storage is most suitable for datasets that don't require complex joins, stored procedures, and foreign keys. You can access the data using the OData protocol and LINQ Queries.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Creating a storage account</h1>
                </header>
            
            <article>
                
<p>Before you can upload any data or files to Azure Storage, a storage account needs to be created. This can be done using the Azure Portal, PowerShell, CLI, or Visual Studio.</p>
<p>In this demo, we are going to create a storage account with PowerShell:</p>
<pre><strong>Login-AzureRmAccount</strong></pre>
<p>If necessary, select the right subscription:</p>
<pre><span><strong>Select-AzureRmSubscription -SubscriptionId "********-****-****-****-***********"</strong><br/></span></pre>
<p>Create a resource group:</p>
<pre><strong>New-AzureRmResourceGroup -Name PacktPubStorage -Location WestEurope</strong></pre>
<p>Create the storage account:</p>
<pre><strong>New-AzureRmStorageAccount -ResourceGroupName PacktPubStorage -AccountName packtpubstorage -Location WestEurope -SkuName "Standard_GRS"</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Uploading data to Azure Table Storage</h1>
                </header>
            
            <article>
                
<p> In this demo, we are going to use Visual Studio 2017 to upload data to a Azure Table inside the storage account, which was created in the previous step.</p>
<ol>
<li class="mce-root"><span>Click on <span class="packt_screen">File</span> | <span class="packt_screen">New</span> | <span class="packt_screen">Project</span>, and in the <span class="packt_screen">New Project</span> window, select</span><span> </span><span class="packt_screen">Windows Classic Desktop</span> | <span class="packt_screen">Console App</span><span>. Name the project and click on </span><span class="packt_screen">OK</span>:<strong><strong><br/></strong></strong></li>
</ol>
<div style="color: black;font-size: 1em" class="CDPAlignCenter CDPAlign"><img src="Images/195598ac-4a3a-4183-b8c3-bed0f2afab4f.jpg" style="width:53.50em;height:37.08em;" width="1888" height="1309"/></div>
<div style="color: black" class="mce-root CDPAlignCenter CDPAlign packt_figref">Create a new project</div>
<ol start="2">
<li>Next is to import the NuGet packages. There are two packages that need to be installed:
<ul>
<li><strong>Windows Azure Storage</strong>: This library provides access to the Azure Storage account and the data. It can be used for blobs, files, tables, and queues.</li>
<li><strong>Microsoft Windows Azure Configuration Manager</strong>: This library provides <span>a unified API to load configuration settings regardless of where the application is hosted.</span></li>
</ul>
</li>
<li>Add the following piece of XML to the <kbd>App.config</kbd>. The actual <kbd>ConnectionString</kbd> value can be obtained from the <span class="packt_screen">Access Key</span><strong> </strong>settings in the Azure Portal:</li>
</ol>
<pre style="padding-left: 60px">&lt;configuration&gt;<br/>  &lt;startup&gt;<br/>    &lt;supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5.2" /&gt;<br/>  &lt;/startup&gt;<br/>  &lt;appSettings&gt;<br/>    &lt;add key="StorageConnectionString" value="DefaultEndpointsProtocol=https;AccountName=packtpubstorage;AccountKey=account-key" /&gt;<br/>  &lt;/appSettings&gt;<br/>&lt;/configuration&gt;</pre>
<ol start="4">
<li>Add a new class to the project and name it <kbd>Contact.cs</kbd>. Replace it with the following code:</li>
</ol>
<pre style="padding-left: 60px">using Microsoft.WindowsAzure.Storage.Table;<br/><br/>namespace PacktPubUploadToTableStorage<br/>{<br/>    class Contact : TableEntity<br/>    {<br/>        public Contact(string lastName, string firstName)<br/>        {<br/>            this.PartitionKey = lastName;<br/>            this.RowKey = firstName;<br/>        }<br/><br/>        public Contact() { }<br/><br/>        public string Email { get; set; }<br/>    }<br/>}</pre>
<ol start="5">
<li>Add the following code to the <kbd>Main()</kbd> method of the <kbd>Program.cs</kbd>:<strong><br/></strong></li>
</ol>
<pre style="padding-left: 60px">using Microsoft.Azure;<br/>using Microsoft.WindowsAzure.Storage;<br/>using Microsoft.WindowsAzure.Storage.Table;<br/><br/>namespace PacktPubUploadToTableStorage<br/>{<br/>    class Program<br/>    {<br/>        static void Main(string[] args)<br/>        {<br/>            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));<br/>            // Create the table client.<br/><br/>            // Create the table client.<br/>            CloudTableClient tableClient = storageAccount.CreateCloudTableClient();<br/><br/>            // Retrieve a reference to the table.<br/>            CloudTable table = tableClient.GetTableReference("packtpubContact");<br/><br/>            // Create the table if it doesn't exist.<br/>            table.CreateIfNotExists();<br/><br/>            // Create a new contact entity.<br/>            Contact contact1 = new Contact("Zaal", "Sjoukje");<br/>            contact1.Email = "sjoukje@packtpub.com";<br/><br/>            // Create the TableOperation object that inserts the contact.<br/>            TableOperation insertOperation = TableOperation.Insert(contact1);<br/><br/>            // Execute the insert operation.<br/>            table.Execute(insertOperation);<br/>        }<br/>    }<br/>}</pre>
<ol start="6">
<li>Run the project. You can then open up the Azure Storage Explorer and navigate to the storage account and the container. You can see the data row that has been added:</li>
</ol>
<div style="color: black" class="CDPAlignCenter CDPAlign packt_figref"><img src="Images/e6a9995d-50b4-4c9e-b5d2-0ba069470926.jpg" style="width:41.33em;height:30.75em;" width="1978" height="1469"/><br/>
<br/>
Added data row</div>
<div class="packt_infobox">For more information on working with Azure Table Storage from .NET, you can refer to the following tutorial: <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-how-to-use-dotnet">https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-how-to-use-dotnet</a>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure Queue Storage</h1>
                </header>
            
            <article>
                
<div>
<p>Azure Queue Storage offers a message queue that can be used by applications. Message queues offer an asynchronous communication mechanism where a sender adds an message to the queue, which can be received by the receiver at a later time. Applications can benefit of this because they can decouple components, which can scale independently from each other.</p>
<p>You can send and receive messages from Queue Storage using the <span>Azure Storage Client Libraries and the REST API. </span></p>
<p>Azure queue storage is covered in more detail in <a href="70842148-3674-4673-8d9e-90e26ff4b45e.xhtml" target="_blank">Chapter 13</a>, <em>Implementing Messaging Solutions</em>.</p>
</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure File Storage</h1>
                </header>
            
            <article>
                
<p>With Azure File Storage, you can create file shares in the cloud. You can access your files using the Server Message Block (SMB) protocol, which is an industry standard and can be used on Linux, Windows, and macOS devices. Azure Files can also be mounted as if it is a local drive on these same devices as well, and they can be cached for fast access on Windows Server using Azure File Sync (preview).  </p>
<p>File shares can be used across multiple machines, which makes them suitable for storing files or data that are accessed from multiple machines, such as tools for development machines, or configuration files or log data. Azure File share is part of the Azure Storage Client Libraries and offers an Azure Storage REST API which can be leveraged by developers in their solutions.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure Disk Storage</h1>
                </header>
            
            <article>
                
<p>The disks that are used for virtual machines are stored in Azure Blob Storage as page blobs. Azure stores two disks for each virtual machine, the actual operating system (VHD) of the VM and a temporary disk that is used for short-term storage. This data is erased when the VM is turned of or rebooted.</p>
<p>There are two different performance tiers that Azure offers, Standard Disk Storage and Premium Disk Storage.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Standard Disk Storage</h1>
                </header>
            
            <article>
                
<p>Standard Disk Storage offers HDD drives to store the data on and is the most cost-effective storage tier from which you can choose. It can only use LRS or GRS for supporting high availability for your data and applications. </p>
<p>Standard Disk Storage offers HDDs and is more cost-effective. Standard Disk Storage can only use LRS or GRS.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Premium Disk Storage</h1>
                </header>
            
            <article>
                
<p>With Premium Disk Storage, your data is stored on SSDs. Not all Azure Virtual Machine series can use this type of storage. It can only be used with DS, DSv2, GS, LS, or FS series Azure Virtual Machines. It offers high-performance and low-latency disk support.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Unmanaged versus Managed Disks</h1>
                </header>
            
            <article>
                
<p>Managed Disks were covered in <a href="401f72d0-a2a1-4c62-880e-43739e3daa5d.xhtml" target="_blank">Chapter 1</a>, <em>Working with Azure Virtual Machines</em>, and they handle the storage account creation for you. With Unmanaged Disks, which are the traditional disks used for VMs, you needed to create a storage account manually and then select that storage account when you created the VM. With Managed Disks, this burden is handled for you by Azure. You select the disk type and the performance tier (Standard or Premium), and the managed disk is created. It also handles scaling automatically for you.</p>
<p>Managed Disks are recommended by Microsoft over Unmanaged Disks.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">StorSimple</h1>
                </header>
            
            <article>
                
<p><strong>StorSimple</strong> is an integrated storage solution that spans across on-premises environments and cloud storage. <span>It answers a lot of storage problems, such as data growth, capacity management, backup, archiving, and disaster recovery, by offering a hybrid solution, which consists of a cloud integrated storage system and Azure Cloud Storage.</span></p>
<p>With StorSimple, you can store your active data on the on-premises storage system, which offers lower latency and high throughput. Database files are a part of active data for instance. Data that is less active such as documents, SharePoint files, archive data, and VM storage are more suitable for cloud storage. Using StorSimple, you can put that data in Azure Cloud Storage.</p>
<p>StorSimple supports iSCSI and SMB to connect to your data, and compared to more affordable Cloud Storage, it eliminates redundant data and compresses it to reduce costs. You can use Azure Premium storage in conjunction with StorSimple for higher performance and reduced latency.</p>
<p>To accomplish this, StorSimple offers the following <span>storage area network (SAN) solutions, StorSimple Virtual Array and StorSimple 8000 Series.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">StorSimple Virtual Array</h1>
                </header>
            
            <article>
                
<p>The StorSimple Virtual Array runs on your existing hypervisor infrastructure on your <span>on-premises environment. It manages the storage across the on-premises environment and Azure Cloud Storage. It also provides cloud backup, fast restore, disaster recovery features, and item-level recovery. </span><span>It supports Hyper-V 2008 R2 and higher and VMWare 5.5 and higher.</span></p>
<p class="CDPAlignCenter CDPAlign CDPAlignLeft"><span>The StorSimple Virtual Array is the most cost-effective StorSimple solution because it offers a download that can be installed on a virtual machine on Hyper-V or VMWare inside your data center or office. It can then be configured as an iSCSI server (SAN) or a file server (NAS). It can be managed from the StorSimple Manager service inside the Azure Portal:</span></p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="Images/b8ac6547-66c2-499b-b504-2716e4718848.png" style="width:32.83em;height:24.33em;" width="888" height="658"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">StorSimple Virtual Array</div>
<div class="packt_figref packt_infobox">For more information about the StorSimple Virtual Array, you can refer to <a href="https://docs.microsoft.com/en-us/azure/storsimple/storsimple-ova-overview">https://docs.microsoft.com/en-us/azure/storsimple/storsimple-ova-overview</a>.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">StorSimple 8000 Series</h1>
                </header>
            
            <article>
                
<p>With the StorSimple 8000 Series, Microsoft offers a physical device that can be leased and installed inside your on-premises environment. It uses SSD drives for the most active data, HDD drives for data that is used less frequently, and it stores archival data inside Azure Cloud Storage. It also offers redundant controllers to manage the storage tiering and automatic failover.</p>
<p>The StorSimple storage array is installed inside the on-premises environment and offers iSCSI access. It can connect with other SAN storage devices inside the network (up to six network ports). It uses the Virtual Appliance Manager to replicate data to Azure Cloud Storage. The <span>Virtual Appliance Manager is installed inside an Azure VM. It can provide an iSCSI interface to virtual machines in Azure as well. The StorSimple Manager helps you manage the data from the Azure Portal. It can also manage your snapshots, which are stored on-premises. The Snapshot Manager is a <strong>Microsoft Management Console</strong> (<strong>MMC</strong>) snap-in which runs on a Windows-Server based host:</span></p>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-447 image-border" src="Images/afc63ef7-71bf-469b-abe1-036adbe88771.png" style="width:41.58em;height:25.83em;" width="1087" height="676"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span><span>StorSimple 8000 Series</span></span></div>
<p><span>The StorSimple 8000 Series offers Windows PowerShell for StorSimple and a StorSimple adapter for SharePoint.</span></p>
<div class="packt_infobox"><span>For more information about the StorSimple 8000 Series, you can refer to <a href="https://docs.microsoft.com/en-us/azure/storsimple/storsimple-overview">https://docs.microsoft.com/en-us/azure/storsimple/storsimple-overview</a>.</span></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Cosmos DB Storage</h1>
                </header>
            
            <article>
                
<p><span>Cosmos DB (former DocumentDB) storage is the premium offering for Azure Table Storage. It's a multimodel and globally distributed database service which is designed to horizontally scale and replicate your data to any number of Azure regions. By replicating and scaling the data, Cosmos DB can guarantee low latency, high availability, and high performance anywhere in the world. You can replicate or scale data easily inside the Azure Portal by selecting the available regions on the map.</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/c2b60a7e-dc00-4d04-a677-0decfd3767e1.jpg" style="width:27.75em;height:33.25em;" width="1208" height="1446"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span><span>Scaling and replicating data inside the Azure Portal</span></span></div>
<p><span>This high availability and low latency makes Cosmos DB most suitable for mobile applications, games, and applications that need to be globally distributed. The Azure Portal also uses Cosmos DB for data storage.</span></p>
<p>Cosmos DB is completely schema-less, and you can use a number of existing APIs with available SDKs to communicate with it. So, if you are using a specific API for your data and you want to move your data to Cosmos DB, all you need to do is change the connection string inside your application and the data is stored in Cosmos DB automatically. Cosmos DB supports the following APIs <span>for storing and interacting with your data:</span></p>
<ul>
<li><strong>SQL API</strong>: With the SQL API, you can use SQL queries as a <span>JSON query language </span>against the dataset inside Cosmos DB. Because Cosmos DB is schema-less, it provides autoindexing of the JSON documents. <span>Data is stored on SSD drives for low latency,</span> and it is lock-free, so you can create real-time queries for your data. Cosmos DB also supports writing stored procedures, <span>triggers, and user-defined functions (UDFs) in JavaScript and it supports ACID transactions inside a collection.</span></li>
<li><strong>MongoDB API</strong>: <span>MongoDB is an open source document database that provides high performance, high availability, and automatic scaling by default. Using it inside Cosmos DB provides automatic sharding, indexing, replication, and encryption of your data on top of this. MongoDB also provides an aggregation pipeline which can be used to filter and transform the data in multiple stages. It also supports creating a full-text index, and you can integrate it easily with Azure Search and other Azure services as well.</span></li>
<li><strong>Gremlin (Graph) API</strong>: The Gremlin API is part of the Apache TinkerPop project, which is an open source Graph computing framework. A Graph is a way of storing objects (nodes) based on relationships. Each object can have multiple relations with other objects. You can interact with the data using JavaScript. </li>
<li><strong>Table API</strong>: The Azure Table API can be used for applications that are written for using Azure Table Storage, but need the premium features, such as global distribution, automatic indexing, low latency, and high throughput.</li>
<li><strong>Cassandra API</strong>: The Cassandra API can be used for applications that are written for Apache Cassandra. Apache Cassandra is an <span>open source distributed NoSQL database </span>that offers scalability and high availability. Cosmos DB offers no operations management, SLA, and automatic indexing on top of this.  </li>
</ul>
<p>In the future, new APIs will be added to Cosmos DB as well.</p>
<div class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-448 image-border" src="Images/53f98866-e9c6-4186-be5e-3d1c42e63855.png" style="width:16.00em;height:35.50em;" width="594" height="1320"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref"><span>Multi-model APIs available for Cosmos DB</span></div>
<div class="packt_figref packt_tip">If you want to get started with developing applications using one of these multimodel APIs, you can refer to <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/">https://docs.microsoft.com/en-us/azure/cosmos-db/</a>. There are a lot of examples for multiple programming languages available there. </div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Azure Search</h1>
                </header>
            
            <article>
                
<p>Azure Search is an Azure service that provides a rich search experience over content stored in Azure SQL Database, Azure Cosmos DB, and Azure Blob Storage. For Azure Blob Storage, it supports indexing for multiple file formats, such as CSV, JSON, plain text files, RTF, EML, ZIP, XML, HTML, various Microsoft Office formats, and PDF. </p>
<p>It offers f<span>ull text search and text analysis, linguistic analysis with analyzers in 56 languages, geo-search, user experience features, such as search suggestions, paging, sorting, and hit highlighting, and monitoring and reporting features.</span></p>
<p>Azure Search uses partitions for storing search indexes and for providing I/O for read/write operations. Azure Search offers different service tiers which can be combined inside a tenant. The different tiers offer different amounts of storage capacity and scalability. For the more expensive service tiers, multiple instances of the search service can be created, which are named replicas.</p>
<p> Azure Search offers the following service tiers:</p>
<ul>
<li><strong>Free</strong>: This offers a shared service with other tenants in Azure. It offers 50 MB of storage, a maximum of 3 indexes per service up to 10,000 documents each, and it cannot scale out. </li>
<li><strong>Basic</strong>: <span>This o</span>ffers a dedicated service with 2 GB of storage and <span>a maximum of 5 indexes per service. You can scale up to 3 search units per service (1 partition and 3 replicas).</span></li>
<li><strong>Standard S1</strong>: <span>This o</span><span>ffers a dedicated service with 25 GB of storage and </span><span>a maximum of 50 indexes per service. You can scale up to 36 search units per service (12 partitions and 12 replicas).</span></li>
<li><strong>Standard S2</strong>: <span>This o</span>ffers the Standard S1 features but <span>with 100 GB of storage and </span><span>a maximum of 200 indexes per service on top of it.</span></li>
<li><strong>Standard S3</strong>: <span>This o</span><span>ffers 200 GB of storage and </span><span>all the Standard S2 features.</span></li>
<li><strong>Standard HD</strong>: This is an option that can be enabled for Standard S3 pricing tiers. On top of all the features that Standard S3 provides, you can have a maximum of 1,000 indexes per service.</li>
</ul>
<div class="packt_tip"><span>It is recommended that you always provision a f</span>ree<span> s</span><span>earch service tier per subscription, so it can be used for testing or for lightweight searches. You can then create other Search Services next to it for production workloads. <br/>
For more information about the available SKUs for Azure Search, you can refer to <a href="https://docs.microsoft.com/en-us/azure/search/search-sku-tier">https://docs.microsoft.com/en-us/azure/search/search-sku-tier</a>.</span></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we covered the<span> d</span><span>esigning data implementations objective</span>. We covered the different storage solutions that are available in Azure and when to use them. We also covered designing for NoSQL Storage and when to use the different Azure services such as Azure Table Storage and Cosmos DB. Finally, we briefly covered Azure Search.</p>
<p>The next chapter will cover scalable data implementations.<span> </span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Questions</h1>
                </header>
            
            <article>
                
<p>Answer the following questions to test your knowledge of the information in this chapter. You can find the answers in the <em>Assessments</em> section at the end of this book.</p>
<ol>
<li><span>Is Cosmos DB more suitable for gaming applications than Azure Table Storage?</span>
<ol>
<li>Yes</li>
<li>No</li>
</ol>
</li>
<li>Can you use Azure Search with Azure Data Factory to search for data?
<ol>
<li>Yes</li>
<li>No</li>
</ol>
</li>
<li>You want to create a Graph database in Cosmos DB. Is the MongoDB API the appropriate API for this to leverage in your custom applications?
<ol>
<li>Yes</li>
<li>No</li>
</ol>
</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Further reading</h1>
                </header>
            
            <article>
                
<p><span>You can check the following links for more information about the topics that are covered in this chapter:</span></p>
<ul>
<li><strong>Azure Storage Account Options</strong>: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-options">https://docs.microsoft.com/en-us/azure/storage/common/storage-account-options</a></li>
<li><strong>Azure Storage replication</strong>: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy">https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy</a></li>
<li><strong>Azure Table Storage overview</strong>: <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-overview">https://docs.microsoft.com/en-us/azure/cosmos-db/table-storage-overview</a></li>
<li><strong>Introduction to Azure Files</strong>: <a href="https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction">https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction</a></li>
<li><strong>About disks storage for Azure Windows VMs</strong>: <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds">https://docs.microsoft.com/en-us/azure/virtual-machines/windows/about-disks-and-vhds</a></li>
<li><strong>StorSimple Documentation</strong>: <a href="https://docs.microsoft.com/en-us/azure/storsimple/">https://docs.microsoft.com/en-us/azure/storsimple/</a></li>
<li><strong>Welcome to Azure Cosmos DB</strong>: <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/introduction">https://docs.microsoft.com/en-us/azure/cosmos-db/introduction</a></li>
<li><strong>Azure Search Documentation</strong>: <a href="https://docs.microsoft.com/en-us/azure/search/">https://docs.microsoft.com/en-us/azure/search/</a></li>
</ul>


            </article>

            
        </section>
    </div>



  </body></html>