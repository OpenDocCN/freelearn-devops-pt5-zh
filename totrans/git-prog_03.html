<html><head></head><body>
  <div><h1 class="chapterNumber">3</h1>
    <h1 id="_idParaDest-58" class="chapterTitle">Branching, Places, and GUIs</h1>
    <p class="normal">In this chapter, you will learn about the crucial "five places" for Git: the work area, the index, the local repository, the remote repository, and the stash. You will see how to use each of these and how they work together.</p>
    <p class="normal">Each concept will be illustrated with both code and screenshots, and most Git actions will be illustrated in the command line, Visual Studio, and a GUI (GitHub Desktop).</p>
    <p class="normal">You'll also learn about creating branches, committing code, and how to move commits from the work area to the repository, and from the repository to the remote repository.</p>
    <h1 id="_idParaDest-59" class="title">Five places</h1>
    <p class="normal">As a <a id="_idIndexMarker078"/>programmer I think of Git as divided into five places:</p>
    <ol>
      <li class="numbered">The work area </li>
      <li class="numbered">The index (staging area) </li>
      <li class="numbered">The local repository</li>
      <li class="numbered">The remote repository</li>
      <li class="numbered">The stash</li>
    </ol>
    <p class="normal">Let's begin by examining each of these in turn.</p>
    <h2 id="_idParaDest-60" class="title">The work area</h2>
    <p class="normal">The work area <a id="_idIndexMarker079"/>is where your current files are. That is, if you were to open Windows Explorer and navigate to the directory you cloned to, you would see the version of the program you were currently working on. If you were to open Visual Studio 2019, these are the files that would be in the Solution Explorer. Again, the work area is where your current files are; if you open Visual Studio on your project, the files in the work area are what you will see. As you change branches (see below) the work area is updated with the appropriate files. This can be one of the hardest concepts in Git: when you change branches you change the files that are in your work area – that is, the files for that branch are swapped into the Windows (or Mac or Linux) directory.</p>
    <div><p class="Information-Box--PACKT-"><strong class="screenText">Note</strong>: it is possible to have more than one work area using what are known as work trees. These are well beyond the scope of this book, and you can go a long while before you will need them.</p>
    </div>
    <p class="normal">In our current <a id="_idIndexMarker080"/>program the work area looks like this in Windows Explorer:</p>
    <figure class="mediaobject"><img src="img/B17441_03_01.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.1: Current work area </p>
    <p class="normal">This same directory can be seen from the command line:</p>
    <figure class="mediaobject"><img src="img/B17441_03_02.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.2: Current work area from command line</p>
    <p class="normal">In Visual Studio, the same work area looks like this:</p>
    <figure class="mediaobject"><img src="img/B17441_03_03.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.3: Current work area from Visual Studio</p>
    <p class="normal">If you look <a id="_idIndexMarker081"/>at what is in the directory, you will find the exact same files.</p>
    <h2 id="_idParaDest-61" class="title">The index/staging area</h2>
    <p class="normal">If you have files in the work area that you would like to commit, you first add them to the staging <a id="_idIndexMarker082"/>area (often called the index). From the staging area, it takes just one command (<code class="Code-In-Text--PACKT-">commit</code>) to move these files into the local repository.</p>
    <figure class="mediaobject"><img src="img/B17441_03_04.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.4: Modifying Program.cs</p>
    <p class="normal">I have added a couple of lines to all three copies we have.</p>
    <p class="normal">Let's start at the command line. I make a habit of invoking <code class="Code-In-Text--PACKT-">git status</code> before doing anything else:</p>
    <figure class="mediaobject"><img src="img/B17441_03_05.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.5: git status from the command line</p>
    <p class="normal">To add this to the index at the command line, you just use the keyword <code class="Code-In-Text--PACKT-">add</code> followed either by the <a id="_idIndexMarker083"/>name of the file or by a period (<code class="Code-In-Text--PACKT-">.</code>) indicating you want all the files moved to the staging area:</p>
    <pre class="programlisting con"><code class="hljs-con">git add  ProGitForProgrammers/ProGitForProgrammers/Program.cs
</code></pre>
    <p class="normal">Git will make no response, but the file is now in the staging area. You can see this if you get the status again:</p>
    <figure class="mediaobject"><img src="img/B17441_03_06.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.6: Modified file staged</p>
    <p class="normal">This time, it shows the modified file as ready to be committed. To commit this file all you need to do is enter <code class="Code-In-Text--PACKT-">git commit</code>. Because the file is already staged, it will be immediately committed to the local repository. If you don't add <code class="Code-In-Text--PACKT-">-m "my message"</code> the editor will be opened for you to add your message.</p>
    <h2 id="_idParaDest-62" class="title">Skipping the staging area</h2>
    <p class="normal">You can <a id="_idIndexMarker084"/>bypass the staging area and go directly to committing the file by using the <code class="Code-In-Text--PACKT-">-a</code> flag. Thus, with your file unstaged you can write:</p>
    <pre class="programlisting con"><code class="hljs-con">git commit ProGitForProgrammers/ProGitForProgrammers/Program.cs -a -m "My message"
</code></pre>
    <p class="normal">This will <a id="_idIndexMarker085"/>immediately commit <code class="Code-In-Text--PACKT-">Program.cs</code> with the indicated message. I confess this is the way I commit files 90% of the time. (You can also use <code class="Code-In-Text--PACKT-">git commit -a -m "my message"</code> to commit all the modified files in the working area.)</p>
    <h2 id="_idParaDest-63" class="title">Visual Studio</h2>
    <p class="normal">In Visual Studio <a id="_idIndexMarker086"/>the status is visible at all times, in the lower right-hand corner:</p>
    <figure class="mediaobject"><img src="img/B17441_03_07.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.7: Lower right of Visual Studio</p>
    <p class="normal">The 0 with an up arrow indicates that you have no files waiting to be pushed. The 1 next to the pencil indicates that you have one modified file. Next comes the name of your program and then finally the branch you are on.</p>
    <p class="normal">There are a number of ways to commit in Visual Studio. For example, you can commit right from the Git menu or by right-clicking on the file and selecting <strong class="screenText">Git</strong>. You will then select <strong class="screenText">Commit or Stash</strong>. An easier way, however, is to click on the pencil, which brings up the <strong class="screenText">Git Changes</strong> menu:</p>
    <figure class="mediaobject"><img src="img/B17441_03_08.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.8: Visual Studio changes window</p>
    <p class="normal">Here you can see the changed files and their paths. You can choose <strong class="screenText">Commit All </strong>or drop down that <a id="_idIndexMarker087"/>button and choose from a number of related options. Fill in the message and press <strong class="screenText">Commit All </strong>and Visual Studio immediately responds with a confirmation, reinforcement that you've committed to the <em class="italic">local</em> repository, and offers you the opportunity to upload to the remote repository (showing you that you have one outgoing file):</p>
    <figure class="mediaobject"><img src="img/B17441_03_09.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.9: Visual Studio commit and push/pull menu</p>
    <p class="normal">It can be confusing as to which way is outgoing as we tend to think of uploading rather than outgoing. Suffice to say that when Visual Studio says outgoing they mean going from the local to the remote server, and when they say incoming they mean moving from the server to the local repo.</p>
    <h2 id="_idParaDest-64" class="title">GitHub Desktop</h2>
    <p class="normal">GitHub Desktop <a id="_idIndexMarker088"/>gives you a tremendous amount of information on one screen:</p>
    <figure class="mediaobject"><img src="img/B17441_03_10.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.10: GitHub Desktop</p>
    <p class="normal">On the top row, you can see the name of the repository and the current branch. In the window on the upper left, you can see that one file changed, and which file that is. On the right, you can see the actual change. </p>
    <p class="normal">Finally, on the lower left, you can put in your message and commit your file.</p>
    <p class="normal">As soon as you commit, the page is cleared and a new button appears to allow you to push the changes to the server.</p>
    <h2 id="_idParaDest-65" class="title">Local and remote repositories</h2>
    <p class="normal">The third and fourth areas for Git are the local and remote repositories. We've covered this in the <a id="_idIndexMarker089"/>previous chapter so all I'll repeat here is that <code class="Code-In-Text--PACKT-">commit</code> puts your files into the <em class="italic">local</em> repository and <code class="Code-In-Text--PACKT-">push</code> sends your commit from your local repository to the remote one.</p>
    <p class="normal">While I believe in committing frequently, you'll want to put in a few commits before you push. This will give you the opportunity to combine similar commits as we'll see in <em class="chapterRef">Chapter 6, </em><em class="italic">Interactive Rebasing</em> on interactive rebase.</p>
    <h2 id="_idParaDest-66" class="title">The stash</h2>
    <p class="normal">The fifth and final area for Git is the stash. The stash, as it sounds, is a place to stash away files <a id="_idIndexMarker090"/>that you've modified but don't want to commit or lose when changing branches. We'll see more of this just below, when we discuss branching.</p>
    <h1 id="_idParaDest-67" class="title">Branches</h1>
    <p class="normal">Using branches is critical to working with Git, not to mention to the success of your project. The idea <a id="_idIndexMarker091"/>is this: you have a "main" branch that you'll do your <a id="_idIndexMarker092"/>releases from. Each time code is added to the main branch it is checked and reviewed so that the main branch stays as clean as possible.</p>
    <p class="normal">When you want to work on a bug or a feature, you create a new branch (often called a feature branch). This creates a copy of the code that is currently in the main branch. You can work on your feature branch without affecting the main branch at all. Once you are done, and all is working, you can then "merge" your feature branch into the main branch:</p>
    <figure class="mediaobject"><img src="img/B17441_03_11.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.11: First feature branch</p>
    <p class="normal">Notice that there is a pointer named <strong class="keyword">Head</strong>. This points to whatever is in your work area. In this case, we've branched to <strong class="keyword">Feature 1</strong> and <strong class="keyword">Head</strong> shows that the code for that feature branch is now in our work area.</p>
    <p class="normal">That is a pretty good simplification of branching but there is a good deal more to it. First, let's see how to do it. Until now, all your code has been on the Main branch – a bad practice. We should have created a feature branch before doing any coding. That said, we can do so now.</p>
    <p class="normal">From the <a id="_idIndexMarker093"/>command line, you simply check out Main (putting whatever is at the tip of Main into your work area. The tip means the most recent commit). Once <a id="_idIndexMarker094"/>you are in Main you will <code class="Code-In-Text--PACKT-">pull</code> from the remote repository to get the very latest version of Main. You are now ready to create your first branch. The sequence of commands looks like this:</p>
    <figure class="mediaobject"><img src="img/B17441_03_12.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.12: Creating branch on command line</p>
    <p class="normal">Note that creating the branch <code class="Code-In-Text--PACKT-">Calculator</code> did not check it out; you must do that as a separate step. However, if you use the <code class="Code-In-Text--PACKT-">-b</code> flag, then you can create the branch and check it out at the same time:</p>
    <pre class="programlisting con"><code class="hljs-con">git checkout -b Calculator
</code></pre>
    <p class="normal">In either case, the new branch is in the work area. But what is in that branch? Because that branch was created from main, and we've not changed anything yet, the new branch is identical to the main branch. From here they will diverge. As you add code, it will be in the new branch (<code class="Code-In-Text--PACKT-">Calculator</code>) but not in the main one.</p>
    <p class="normal">Before we look at that in depth, let's create branches for the Visual Studio user and for the GitHub Desktop user.</p>
    <p class="normal">The easiest way to do this (and the least confusing) is to open Windows Explorer and navigate to the <code class="Code-In-Text--PACKT-">VisualStudio</code> folder (in my case, <strong class="screenText">GitHub</strong> | <strong class="screenText">VisualStudio</strong> | <strong class="screenText">ProGitForProgrammers</strong> | <strong class="screenText">ProGitForProgrammers</strong>). In that folder is a <code class="Code-In-Text--PACKT-">.sln</code> file, which I will double-click on, opening Visual Studio. (This book was originally named Pro Git For Programmers and you will see that name in the code quite a bit.)</p>
    <div><p class="Information-Box--PACKT-">Don't be confused between the <code class="Code-In-Text--PACKT-">VisualStudio</code> folder (which we are using to demonstrate Git in Visual Studio) and the program itself, which we use to modify the code in all three places (<code class="Code-In-Text--PACKT-">CommandLine</code>, <code class="Code-In-Text--PACKT-">GitHubDesktop</code>, and <code class="Code-In-Text--PACKT-">VisualStudio</code>).</p>
      <p class="Information-Box--PACKT-">It might be less confusing if you think of these as three separate programmers, each one on their own computer (mimicked here by using separate directories). Each programmer has a main branch and each one is now branching off for their own work.</p>
    </div>
    <p class="normal">We want <a id="_idIndexMarker095"/>to put this on a branch as well, and to reduce confusion we'll <a id="_idIndexMarker096"/>call this branch <code class="Code-In-Text--PACKT-">Book</code>. To create the branch, click on the <strong class="screenText">Git</strong> menu and select <strong class="screenText">New Branch</strong>.<strong class="screenText"> </strong>Give the new branch the name <code class="Code-In-Text--PACKT-">Book</code>, and press <strong class="screenText">Create</strong>:</p>
    <figure class="mediaobject"><img src="img/B17441_03_13.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.13: Creating a new branch in Visual Studio</p>
    <p class="normal">When you do, a window will open on the left that lists the branches for this repository and <code class="Code-In-Text--PACKT-">Book</code> will be in bold indicating that it is the current branch:</p>
    <figure class="mediaobject"><img src="img/B17441_03_14.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.14: Branches menu in Visual Studio</p>
    <p class="normal">Two of the users have now branched off of main. Let's use GitHub Desktop to create a third branch. Open the program and click on the menu choice <strong class="screenText">Repository</strong>. On that menu click on <strong class="screenText">Show In Explorer </strong>and make sure you are in the path <code class="Code-In-Text--PACKT-">C:\GitHub\GitHubDesktop\ProGitForProgrammers</code>.</p>
    <p class="normal">It should indicate <a id="_idIndexMarker097"/>that you have one pull from the origin (the server) and have a button that says <strong class="screenText">Pull Origin</strong>. Go ahead and click that button. That brings <a id="_idIndexMarker098"/>down the latest version of <strong class="screenText">Main</strong>. You now should see that the button says <strong class="screenText">Push Origin</strong> – that's to push up to the server the two commits that are now sitting in this directory.</p>
    <p class="normal">To create your new branch, click on the <strong class="screenText">Branch</strong> menu choice and select <strong class="screenText">New Branch</strong>. It will prompt you for the name of your new branch. Enter <code class="Code-In-Text--PACKT-">Movie</code> and click <strong class="screenText">Create</strong>. The interface now asks if you want to publish your branch. Publishing in GitHub Desktop simply means uploading it for the first time. Let's hold off on that and first make some commits.</p>
    <h2 id="_idParaDest-68" class="title">Programmer 1 (CommandLine) and calculator</h2>
    <p class="normal">Open Visual <a id="_idIndexMarker099"/>Studio in the <code class="Code-In-Text--PACKT-">CommandLine </code>directory path. In the Solution Explorer, you should see <code class="Code-In-Text--PACKT-">Program.cs</code>, which has five <code class="Code-In-Text--PACKT-">WriteLine</code> statements. Add a new class named <code class="Code-In-Text--PACKT-">Calculator</code> and set it to <code class="Code-In-Text--PACKT-">public</code>:</p>
    <pre class="programlisting code"><code class="hljs-code">namespace ProGitForProgrammers
{
    public class Calculator
    {
    }
}
</code></pre>
    <p class="normal">Normally we would not create a commit after so little work, but for this book, to make simple examples, we'll be doing a great deal of committing. Return to the command line and get the status. It will tell you that you have one untracked file. Git has recognized that there is a file in the directory that it knows nothing about. Our next step is to add it to Git:</p>
    <pre class="programlisting con"><code class="hljs-con">git add .
</code></pre>
    <p class="normal">By using the dot, the <code class="Code-In-Text--PACKT-">add</code> command will add any modified or new files to the staging area. You can then commit the new file just by writing:</p>
    <pre class="programlisting con"><code class="hljs-con">git commit -m "Add calculator class"
</code></pre>
    <p class="normal">If you write <code class="Code-In-Text--PACKT-">git status</code> now, Git will tell you that you are on the branch <code class="Code-In-Text--PACKT-">Calculator</code>, that you have nothing to commit, and that your working tree is clean.</p>
    <p class="normal">We're going <a id="_idIndexMarker100"/>to talk about the <code class="Code-In-Text--PACKT-">log</code> command in detail in <em class="chapterRef">Chapter</em> <em class="chapterRef">9, </em><em class="italic">Using the Log</em>, but for now, let's just use it to see our commit and the message that went with it:</p>
    <pre class="programlisting con"><code class="hljs-con">git log ––oneline
</code></pre>
    <p class="normal">This will display all of your commits, one per line:</p>
    <pre class="programlisting con"><code class="hljs-con">˃ git log --oneline
e5c4db9 (HEAD -&gt; Calculator) Add calculator class
b00ca09 (origin/main, origin/HEAD, main, featureOne) Demonstrating the staging area
4ac9d40 Add a line to program to indicate why it was added
ef16f81 Add writeline indicating we are in command line
d418600 Add informative WriteLine
a3f085e First commit -- from command line
a5798e1 Initial commit
</code></pre>
    <p class="normal">The seven-digit hexadecimal identifier is the "short ID" and is enough to uniquely identify each commit. They are listed in newest-to-oldest order. Our most recent commit says:</p>
    <pre class="programlisting con"><code class="hljs-con">e5c4db9 (HEAD -&gt; Calculator) Add calculator class
</code></pre>
    <p class="normal">This tells you that your Head pointer is pointing to your <strong class="keyword">Calculator</strong> branch (that is, what is in your working area right now is the <strong class="keyword">Calculator</strong> branch) and it displays the message we added for that commit. Graphically, it might look like this:</p>
    <figure class="mediaobject"><img src="img/B17441_03_15.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.15: Head pointer</p>
    <p class="normal">Notice that <a id="_idIndexMarker101"/>the arrow runs from <strong class="keyword">Calculator</strong> to <strong class="keyword">Main</strong>. Each commit points to its parent.</p>
    <h3 id="_idParaDest-69" class="title">Pushing the new branch</h3>
    <p class="normal">We can push <a id="_idIndexMarker102"/>this commit up to the server, but the server doesn't know about this branch. When we enter <code class="Code-In-Text--PACKT-">git push</code>, we get back this message:</p>
    <pre class="programlisting con"><code class="hljs-con">&gt; git push
fatal: The current branch Calculator has no upstream branch.
To push the current branch and set the remote as upstream, use
    git push --set-upstream origin Calculator
</code></pre>
    <p class="normal">It is saying that it could not proceed (<code class="Code-In-Text--PACKT-">fatal</code>) because the current branch (which is <code class="Code-In-Text--PACKT-">Calculator</code>) does not correspond to a branch on the server. Wonderfully, however, it gives us the command line to use. Just copy the command and paste it at the prompt and hit <em class="italic">Enter</em>. Hey presto! You've pushed your branch up to the server:</p>
    <figure class="mediaobject"><img src="img/B17441_03_16.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.16: Pushing to the server</p>
    <p class="normal">For now, you can ignore all the other messages; what you care about is the last two lines, indicating <a id="_idIndexMarker103"/>that you now have a branch, <code class="Code-In-Text--PACKT-">Calculator</code>, on the server, and that on the server it is also called <code class="Code-In-Text--PACKT-">Calculator</code>.</p>
    <p class="normal">Note that from now on, when pushing commits on the <code class="Code-In-Text--PACKT-">Calculator</code> branch, you won't have to use that line; you'll just be able to write <code class="Code-In-Text--PACKT-">git push</code>.</p>
    <h3 id="_idParaDest-70" class="title">Examining origin</h3>
    <p class="normal">Let's go to <a id="_idIndexMarker104"/>GitHub and examine our new branch. Sign in and select the <code class="Code-In-Text--PACKT-">ProGitForProgrammers</code> repository:</p>
    <figure class="mediaobject"><img src="img/B17441_03_17.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.17: Repository on server</p>
    <p class="normal">So, where is our calculator folder? Notice the button in the upper left that says <strong class="screenText">main</strong>. Drop that down and choose <strong class="screenText">Calculator</strong> – which will display the contents of the <code class="Code-In-Text--PACKT-">Calculator</code> branch:</p>
    <figure class="mediaobject"><img src="img/B17441_03_18.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.18: Calculator branch on server</p>
    <p class="normal">You can <a id="_idIndexMarker105"/>see that the <code class="Code-In-Text--PACKT-">Calculator</code> branch <em class="italic">does</em> have the expected file.</p>
    <h3 id="_idParaDest-71" class="title">Adding commits to a branch</h3>
    <p class="normal">Let's add <a id="_idIndexMarker106"/>another commit to our branch. Return to Visual Studio and give our <code class="Code-In-Text--PACKT-">Calculator</code> class an <code class="Code-In-Text--PACKT-">add</code> method:</p>
    <pre class="programlisting code"><code class="hljs-code">        public int Add (int left, int right)
        {
            return left + right;
        }
</code></pre>
    <p class="normal">Again, just to have lots of commits, let's commit this. The easiest way is to combine the add and the commit and to add a message on a single line:</p>
    <pre class="programlisting con"><code class="hljs-con">git commit -a -m "Add the add method"
</code></pre>
    <p class="normal">To see that this was in fact committed, run the <code class="Code-In-Text--PACKT-">log</code> command again:</p>
    <figure class="mediaobject"><img src="img/B17441_03_19.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.19: Tracking HEAD</p>
    <p class="normal">If you study this for a moment, not only will you see that our commit worked (it is the first one listed) but also that we have various pointers. On the first line, we see that <code class="Code-In-Text--PACKT-">HEAD</code> is pointing to our <code class="Code-In-Text--PACKT-">Calculator</code> branch. Good enough.</p>
    <p class="normal">The second <a id="_idIndexMarker107"/>line indicates that the <code class="Code-In-Text--PACKT-">Calculator</code> branch on origin (GitHub) is pointing to the previous commit. We have one commit to push.</p>
    <p class="normal">The third line shows us that <code class="Code-In-Text--PACKT-">main</code> on origin, <code class="Code-In-Text--PACKT-">HEAD</code> on origin, the main branch, and the <code class="Code-In-Text--PACKT-">featureOne</code> branch are all pointing to the third most recent commit. All this is fine. We expect <code class="Code-In-Text--PACKT-">Calculator</code> to have diverged from main, and we can push our commit if we like, or we can wait until we have a few of them.</p>
    <h2 id="_idParaDest-72" class="title">The Book branch – Git within Visual Studio</h2>
    <p class="normal">Let's turn our attention to the Visual Studio programmer. You will remember that this takes place <a id="_idIndexMarker108"/>in the <code class="Code-In-Text--PACKT-">VisualStudio</code> folder. Let's open Visual Studio in that directory, and note that in the upper right, it says <strong class="screenText">1 outgoing </strong>– this indicates <a id="_idIndexMarker109"/>that we have a commit to push. Click on it and Visual Studio opens two more windows. </p>
    <p class="normal">One shows that <code class="Code-In-Text--PACKT-">Book</code> is the current branch (see above) and the other shows the history of your commits (not unlike <code class="Code-In-Text--PACKT-">log</code>).</p>
    <p class="normal">There is a section in the middle window that shows what was committed locally and what awaits commitment in the outgoing section. Also note that <code class="Code-In-Text--PACKT-">Book</code> and <code class="Code-In-Text--PACKT-">main</code> are indicated as outgoing:</p>
    <figure class="mediaobject"><img src="img/B17441_03_20.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.20: Commitments window Visual Studio</p>
    <p class="normal">To push these commits find the tiny up arrow in the upper-right corner (magnified here):</p>
    <figure class="mediaobject"><img src="img/B17441_03_21.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.21: Link to push files on Visual Studio</p>
    <p class="normal">Let's create a <code class="Code-In-Text--PACKT-">Book</code> class. The process is similar to the creation of the <code class="Code-In-Text--PACKT-">Calculator</code> class above. Right-click <a id="_idIndexMarker110"/>on the project and choose <strong class="screenText">Add</strong> | <strong class="screenText">Class</strong>. Name <a id="_idIndexMarker111"/>your new class "Book". Make your <code class="Code-In-Text--PACKT-">Book</code> class public and give it three properties:</p>
    <figure class="mediaobject"><img src="img/B17441_03_22.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.22: New Book class</p>
    <p class="normal">Let's commit this. To do so either click on the <strong class="screenText">Git</strong> menu choice and choose <strong class="screenText">Commit or Stash</strong>, or click on the pencil at the bottom of the screen. Either way, you will be brought to the <a id="_idIndexMarker112"/>commit screen. Notice that it says <strong class="screenText">1 outgoing</strong>. Click on <a id="_idIndexMarker113"/>the up arrow. That will push our previous commit. You will get back a message saying that you have successfully pushed <code class="Code-In-Text--PACKT-">Book</code> to origin.</p>
    <h2 id="_idParaDest-73" class="title">Committing with GitHub Desktop</h2>
    <p class="normal">Open Visual Studio in the <code class="Code-In-Text--PACKT-">GitHubDesktop</code> directory. Here we will create the <code class="Code-In-Text--PACKT-">Movie</code> class and give <a id="_idIndexMarker114"/>it two properties: <code class="Code-In-Text--PACKT-">Title</code> and a collection <a id="_idIndexMarker115"/>of people (which we will represent as strings to keep things simple):</p>
    <figure class="mediaobject"><img src="img/B17441_03_23.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.23: Movie class</p>
    <p class="normal">Now open GitHub Desktop. It recognizes and displays the changes (with deleted lines in red and new lines in green). It also offers you the opportunity to check in the new changes:</p>
    <figure class="mediaobject"><img src="img/B17441_03_24.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.24: Changes shown in GitHub Desktop</p>
    <p class="normal">You <a id="_idIndexMarker116"/>can see <a id="_idIndexMarker117"/>the changes highlighted above, in <em class="italic">Figure 3.24</em>.</p>
    <h2 id="_idParaDest-74" class="title">Status</h2>
    <p class="normal">You can <a id="_idIndexMarker118"/>see that the GUIs make the work easier, but that the command line makes the steps more explicit. Our repository looks like this (conceptually):</p>
    <figure class="mediaobject"><img src="img/B17441_03_25.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.25: Multiple branches</p>
    <h3 id="_idParaDest-75" class="title">What's on origin?</h3>
    <p class="normal">It's important to remember that this map of commits only applies to the local repository. What is <a id="_idIndexMarker119"/>on the remote repository may or may not be the same for any given branch depending on whether you've pushed all your commits. In <em class="chapterRef">Chapter 6</em>, <em class="italic">Interactive Rebasing</em>, we'll review why you might want to hold on to a number of commits before pushing them (in short, you will have the ability to combine commits to reduce the number of commits a reviewer must slog through).</p>
    <h2 id="_idParaDest-76" class="title">Adding more commits</h2>
    <p class="normal">We'd like to add a number of commits so that we can review their history and to set us up for future chapters. To do so, we'll want to work on the CommandLine project. You can, as we <a id="_idIndexMarker120"/>have done already, open Windows Explorer and navigate to the appropriate directory, and then double-click on <code class="Code-In-Text--PACKT-">ProGitForProgrammers.sln</code>. An alternative is to open Visual Studio from anywhere and then choose <strong class="screenText">File</strong> | <strong class="screenText">Recent Projects and Solutions</strong>, and click on the one you want, in this case, <code class="Code-In-Text--PACKT-">ProGitForProgrammers </code>(<code class="Code-In-Text--PACKT-">C:\GitHub\CommandLine\ProGitForProgrammers</code>).</p>
    <p class="normal">Visual Studio will open to the <code class="Code-In-Text--PACKT-">Calculator</code> folder. Just to triple-check that you are in the right place, right-click on the project and select <strong class="screenText">Open Folder In File Explorer</strong>. You should see a Windows Explorer window open in the expected folder (no matter which folder you started out in). Let's add a <code class="Code-In-Text--PACKT-">Subtract</code> method:</p>
    <pre class="programlisting code"><code class="hljs-code">        public int Add (int left, int right)
        {
            return left + right;
        }
        public int Subtract (int left, int right)
        {
            return left - right;
        }
</code></pre>
    <p class="normal">While we normally wouldn't commit for such a small change, let's go ahead now and turn to the command line. As always we start with a <code class="Code-In-Text--PACKT-">git status</code>:</p>
    <figure class="mediaobject"><img src="img/B17441_03_26.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.26: git status</p>
    <p class="normal">Let's read through this carefully. The first line after <code class="Code-In-Text--PACKT-">git status</code> confirms that you are on the <code class="Code-In-Text--PACKT-">Calculator</code> branch. Next comes a notice that you are ahead of <code class="Code-In-Text--PACKT-">origin/Calculator</code> by one commit. That means that you didn't push your last commit (and this is true).</p>
    <p class="normal">Next comes <a id="_idIndexMarker121"/>a paragraph telling you that <code class="Code-In-Text--PACKT-">Calculator.cs</code> has been modified and gives you a couple of commands you might want to use in this context. Let's use the <code class="Code-In-Text--PACKT-">add</code> command to place our modified file in the index.</p>
    <p class="normal">Rather than typing the name of the modified file, we'll use a period (<code class="Code-In-Text--PACKT-">.</code>) to indicate that we want everything changed in the working directory (in this case, just the one file):</p>
    <pre class="programlisting con"><code class="hljs-con">git add .
</code></pre>
    <p class="normal">Git makes no real acknowledgment, but if you request the status, you'll find that the modified file is now a different color (on most setups) and that the message is slightly different, as you now have that modified file in the index:</p>
    <figure class="mediaobject"><img src="img/B17441_03_27.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.27: Modified files in git status</p>
    <p class="normal">Git helpfully gives you a command to unstage your files if you choose to do so. Be careful with the <code class="Code-In-Text--PACKT-">restore</code> command, however. If you use it as shown with the <code class="Code-In-Text--PACKT-">--staged</code> flag you will <a id="_idIndexMarker122"/>unstage your file, but if you leave out the flag you will restore your file to your last commit, <strong class="keyword">losing all the work you've done in the interim</strong>.</p>
    <p class="normal">In our case, we want to commit that change, and so we will enter:</p>
    <pre class="programlisting con"><code class="hljs-con">git commit -m "Add subtract method"
</code></pre>
    <p class="normal">Notice that we don't need the <code class="Code-In-Text--PACKT-">-a</code> flag as the files we want to commit have already been added to the index.</p>
    <p class="normal">Add a <code class="Code-In-Text--PACKT-">multiply </code>method and commit it. Next, add an integer division method and commit that as well:</p>
    <pre class="programlisting code"><code class="hljs-code">public int Add(int left, int right)
 {
     return left + right;
 }
 public int Subtract(int left, int right)
 {
     return left - right;
 }
 public int Multiply(int left, int right)
 {
     return left * right;
 }
 public int Divide(int left, int right)
 {
     return left / right;
 }
</code></pre>
    <h2 id="_idParaDest-77" class="title">Examining your commits</h2>
    <p class="normal">Enter <a id="_idIndexMarker123"/>the <code class="Code-In-Text--PACKT-">log</code> command:</p>
    <pre class="programlisting con"><code class="hljs-con">git log –oneline
</code></pre>
    <figure class="mediaobject"><img src="img/B17441_03_28.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.28: log command</p>
    <p class="normal">Again, examine the output carefully. The first line tells you that <code class="Code-In-Text--PACKT-">HEAD</code> is pointing to the <code class="Code-In-Text--PACKT-">Calculator</code> branch, as we would expect. Below that are a couple of commits and then you see a line that indicates that <code class="Code-In-Text--PACKT-">Calculator</code> on origin is only up to commit <code class="Code-In-Text--PACKT-">e5c4db9</code> (the one where the message is <code class="Code-In-Text--PACKT-">Add calculator class</code>).</p>
    <p class="normal">Is that right? There are a couple of ways to tell. The easiest is to go to GitHub and see if the <code class="Code-In-Text--PACKT-">Calculator</code> class has what this indicates:</p>
    <figure class="mediaobject"><img src="img/B17441_03_29.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.29: Branch on server</p>
    <p class="normal">Notice in the <a id="_idIndexMarker124"/>upper left that we are on the <code class="Code-In-Text--PACKT-">Calculator</code> branch. Now drill down to the code. What you see is only the class in its initial state. This is consistent with what the log showed.</p>
    <p class="normal">There is one more way to tell. Return to Visual Studio and click on the <strong class="screenText">3</strong> next to the up arrow on the right side of the very bottom of the application:</p>
    <figure class="mediaobject"><img src="img/B17441_03_30.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.30: Accessing history on Visual Studio</p>
    <p class="normal">When you do, a window will open that shows your local history and the "outgoing" files – that is, the ones you've not yet pushed:</p>
    <figure class="mediaobject"><img src="img/B17441_03_31.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.31: History in Visual Studio</p>
    <p class="normal">Again, this is <a id="_idIndexMarker125"/>consistent with what <code class="Code-In-Text--PACKT-">log</code> has shown.</p>
    <h1 id="_idParaDest-78" class="title">Summary</h1>
    <p class="normal">In this chapter, you have learned about the crucial "five places" for Git: the work area, the index, the local repository, the remote repository, and the stash. You have seen how to use each of these and how they work together.</p>
    <p class="normal">Each concept was illustrated with both code and screenshots, and every Git action was illustrated in the command line, Visual Studio, and GitHub Desktop.</p>
    <p class="normal">Finally, you have learned about creating branches, committing code, and how to move commits from the work area to the repository and from the repository to the remote repository.</p>
    <h1 id="_idParaDest-79" class="title">Challenge</h1>
    <p class="normal">Create a private repository on GitHub named <code class="Code-In-Text--PACKT-">Contacts</code>, and then clone that repository down to a folder on your disk. Using the command line, create a feature branch named <code class="Code-In-Text--PACKT-">Person</code> and in that feature branch, create a person object with their name, age, and social security number. Create commits as you add each attribute. Review the log to see what you've created and then add these commits to the remote repository.</p>
    <h1 id="_idParaDest-80" class="title">Answer</h1>
    <p class="normal">There is no one right way to do this, but we'll walk through a likely answer. </p>
    <p class="normal">Task #1 – create a private repository on GitHub named <code class="Code-In-Text--PACKT-">Contacts</code>. To do this, open a browser to <a href="http://Github.com">Github.com</a> and navigate to your repository page. Click on <strong class="screenText">New</strong> and fill in the fields as shown here:</p>
    <figure class="mediaobject"><img src="img/B17441_03_32.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.32: New repo on server</p>
    <p class="normal">Notice that I've marked the repository as private. Click the <strong class="screenText">Create Repository</strong> button.</p>
    <p class="normal">Task #2 – clone that repository down to a folder on your disk.</p>
    <p class="normal">On the same GitHub page, click on <strong class="screenText">Code</strong> and click on the clipboard to copy the HTTPS or SSH path (if you have SSH you'll know it, otherwise choose HTTPS):</p>
    <figure class="mediaobject"><img src="img/B17441_03_33.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.33: Copy address from server</p>
    <p class="normal">Open the command line where you want your cloned repo and type:</p>
    <pre class="programlisting con"><code class="hljs-con">git clone
</code></pre>
    <p class="normal">and paste in the link you just copied:</p>
    <pre class="programlisting con"><code class="hljs-con">git clone git@github.com:JesseLiberty/Contacts.git
</code></pre>
    <p class="normal">You should see something like this:</p>
    <figure class="mediaobject"><img src="img/B17441_03_34.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.34: Cloning from server to local repo</p>
    <p class="normal">This indicates that you have cloned <code class="Code-In-Text--PACKT-">Contacts</code> from GitHub into a directory named <code class="Code-In-Text--PACKT-">Contacts</code> and then you have changed to that directory.</p>
    <p class="normal">Task #3 – using the command line, create a feature branch named <code class="Code-In-Text--PACKT-">Person</code>.</p>
    <p class="normal">To create a feature branch, we'll use the <code class="Code-In-Text--PACKT-">branch</code> command and the <code class="Code-In-Text--PACKT-">checkout</code> command (or the <code class="Code-In-Text--PACKT-">cb</code> alias):</p>
    <figure class="mediaobject"><img src="img/B17441_03_35.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.35: Creating a branch</p>
    <p class="normal">Task #4 – in that feature branch, create a <code class="Code-In-Text--PACKT-">person</code> object with their name, age, and social security number. Create commits as you add each attribute.</p>
    <p class="normal">For this I created my project (<code class="Code-In-Text--PACKT-">Contacts</code>) and then within a folder, I added the <code class="Code-In-Text--PACKT-">Person </code>class:</p>
    <figure class="mediaobject"><img src="img/B17441_03_36.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.36: Adding the Person class</p>
    <p class="normal">Creating the class was intentionally trivial:</p>
    <figure class="mediaobject"><img src="img/B17441_03_37.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.37: Person properties</p>
    <p class="normal">I then returned to the command line to check in these changes.</p>
    <p class="normal">Remember to save your file before each commit or the command line will tell you that there is nothing to commit.</p>
    <p class="normal">Task #5 – review the log to see what you've created:</p>
    <figure class="mediaobject"><img src="img/B17441_03_38.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.38: Examining the log</p>
    <p class="normal">Task #6 – add these commits to the remote repository.</p>
    <p class="normal">We'll try to push, but the remote repository won't have heard of our branch. Fortunately, Git tells us what to do:</p>
    <figure class="mediaobject"><img src="img/B17441_03_39.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.39: Pushing to server</p>
    <p class="normal">At this point, you have a local and remote repository named <code class="Code-In-Text--PACKT-">Contacts</code> and a branch named <code class="Code-In-Text--PACKT-">Person</code>. On the branch named <code class="Code-In-Text--PACKT-">Person</code> you have code for a skeleton class named <code class="Code-In-Text--PACKT-">Person</code>. A quick review of GitHub shows that main does not have a <code class="Code-In-Text--PACKT-">Person</code> object (or class, or folder):</p>
    <figure class="mediaobject"><img src="img/B17441_03_40.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.40: Branches on origin</p>
    <p class="normal">But the <code class="Code-In-Text--PACKT-">Person</code> branch does:</p>
    <figure class="mediaobject"><img src="img/B17441_03_41.png" alt=""/></figure>
    <p class="packt_figref">Figure 3.41: Person branch on origin</p>
    <p class="normal">As you can see, the <code class="Code-In-Text--PACKT-">Person</code> branch does have the expected code.</p>
  </div>
</body></html>